
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js --verbose

[2026-01-28 14:19:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:28] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:31] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:31] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:31] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:31] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:31] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:31] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:31] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:31] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:31] info: [Sentry] Sentry error handler not attached (DSN not configured).
(node:66140) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL __tests__/integration/security/owasp-comprehensive.test.mjs
  üîí OWASP Top 10 - Comprehensive Security Tests
    üõ°Ô∏è A06:2021 - Security Misconfiguration
      Default Credentials Prevention
        √ó should reject common default passwords (1 ms)
        √ó should enforce minimum password complexity
      HTTP Security Headers
        √ó should include security headers in responses
        √ó should not expose server version information
      Error Message Handling
        √ó should not leak sensitive information in error messages (1 ms)
        √ó should not expose stack traces in production-like errors (1 ms)
      CORS Configuration
        √ó should enforce CORS policies (1 ms)
      Rate Limiting Configuration
        √ó should have rate limiting enabled
    üîê A08:2021 - Software and Data Integrity Failures
      Dependency Integrity
        √ó should have package-lock.json for dependency pinning
        √ó should validate critical dependencies are up-to-date
      Data Integrity Checks
        √ó should validate data integrity for critical operations (1 ms)
        √ó should prevent stat manipulation through tampering
      Unsigned or Tampered JWT Prevention
        √ó should reject unsigned JWT tokens
        √ó should reject JWT tokens with tampered payload
      Insecure Deserialization Prevention
        √ó should reject malformed JSON payloads
    üìä A09:2021 - Security Logging and Monitoring Failures
      Authentication Event Logging
        √ó should log successful authentication attempts
        √ó should log failed authentication attempts
      Sensitive Operation Logging
        √ó should log ownership violations (1 ms)
        √ó should log rate limit violations
      Audit Log Completeness
        √ó should include required audit fields
      Sentry Integration
        √ó should have Sentry configured for error tracking (1 ms)
    üåê A10:2021 - Server-Side Request Forgery (SSRF)
      URL Validation
        √ó should reject internal IP addresses in URLs
        √ó should reject file:// protocol URLs
      External Request Validation
        √ó should sanitize redirect URLs
        √ó should validate webhook URLs
      DNS Rebinding Prevention
        √ó should prevent DNS rebinding attacks
    üîÑ Cross-Category Security Validation
      Defense in Depth
        √ó should enforce multiple security layers
      Security Configuration Consistency
        √ó should have consistent security settings across all endpoints

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should reject common default passwords

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should enforce minimum password complexity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should include security headers in responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should not expose server version information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not leak sensitive information in error messages

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not expose stack traces in production-like errors

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ CORS Configuration ‚Ä∫ should enforce CORS policies

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Rate Limiting Configuration ‚Ä∫ should have rate limiting enabled

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should have package-lock.json for dependency pinning

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should validate critical dependencies are up-to-date

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should validate data integrity for critical operations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should prevent stat manipulation through tampering

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject unsigned JWT tokens

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject JWT tokens with tampered payload

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Insecure Deserialization Prevention ‚Ä∫ should reject malformed JSON payloads

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log successful authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log failed authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log ownership violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log rate limit violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Audit Log Completeness ‚Ä∫ should include required audit fields

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sentry Integration ‚Ä∫ should have Sentry configured for error tracking

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject internal IP addresses in URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject file:// protocol URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should sanitize redirect URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should validate webhook URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ DNS Rebinding Prevention ‚Ä∫ should prevent DNS rebinding attacks

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîÑ Cross-Category Security Validation ‚Ä∫ Defense in Depth ‚Ä∫ should enforce multiple security layers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîÑ Cross-Category Security Validation ‚Ä∫ Security Configuration Consistency ‚Ä∫ should have consistent security settings across all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

[2026-01-28 14:19:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:32] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:32] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:32] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:33] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:33] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:33] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:33] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:33] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:33] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:33] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:33] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:33] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:34] info: [GET] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:g335l] Starting auth for GET /users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:g335l] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:g335l] Token from header: true
[2026-01-28 14:19:34] info: [auth:g335l] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:0a1um] Starting auth for GET /ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:0a1um] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:0a1um] Token from header: true
[2026-01-28 14:19:34] info: [auth:0a1um] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [userRoutes] Self-access validated: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f accessing own data
[2026-01-28 14:19:34] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [GET] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress - 200
[2026-01-28 14:19:34] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 14:19:34] info: [auth:bgdakhk] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 14:19:34] info: [auth:bgdakhk] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:bgdakhk] Token from header: true
[2026-01-28 14:19:34] info: [auth:bgdakhk] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:zlnnwf] Starting auth for GET /550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 14:19:34] info: [auth:zlnnwf] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:zlnnwf] Token from header: true
[2026-01-28 14:19:34] info: [auth:zlnnwf] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Self-access violation: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f attempted to access user 550e8400-e29b-41d4-a716-446655440999
[2026-01-28 14:19:34] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - 403
[2026-01-28 14:19:34] info: [GET] /api/users//progress
[2026-01-28 14:19:34] info: [auth:fgq6x9] Starting auth for GET /users//progress
[2026-01-28 14:19:34] info: [auth:fgq6x9] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:fgq6x9] Token from header: true
[2026-01-28 14:19:34] info: [auth:fgq6x9] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:ohjvus] Starting auth for GET /progress
[2026-01-28 14:19:34] info: [auth:ohjvus] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:ohjvus] Token from header: true
[2026-01-28 14:19:34] info: [auth:ohjvus] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"progress","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:19:34] info: [GET] /api/users//progress - 400
[2026-01-28 14:19:34] info: [GET] /api/users/a/progress
[2026-01-28 14:19:34] info: [auth:8a0v8n] Starting auth for GET /users/a/progress
[2026-01-28 14:19:34] info: [auth:8a0v8n] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:8a0v8n] Token from header: true
[2026-01-28 14:19:34] info: [auth:8a0v8n] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:p69077] Starting auth for GET /a/progress
[2026-01-28 14:19:34] info: [auth:p69077] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:p69077] Token from header: true
[2026-01-28 14:19:34] info: [auth:p69077] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"a","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:19:34] info: [GET] /api/users/a/progress - 400
[2026-01-28 14:19:34] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 14:19:34] info: [auth:dkxrvj] Starting auth for GET /users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 14:19:34] info: [auth:dkxrvj] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:dkxrvj] Token from header: true
[2026-01-28 14:19:34] info: [auth:dkxrvj] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:55jsy] Starting auth for GET /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 14:19:34] info: [auth:55jsy] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:55jsy] Token from header: true
[2026-01-28 14:19:34] info: [auth:55jsy] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:19:34] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress - 400
[2026-01-28 14:19:34] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 14:19:34] info: [auth:yvyzgw] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 14:19:34] info: [auth:yvyzgw] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:yvyzgw] Token from header: true
[2026-01-28 14:19:34] info: [auth:yvyzgw] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:6jtax] Starting auth for GET /550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 14:19:34] info: [auth:6jtax] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:6jtax] Token from header: true
[2026-01-28 14:19:34] info: [auth:6jtax] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Self-access violation: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f attempted to access user 550e8400-e29b-41d4-a716-446655440998
[2026-01-28 14:19:34] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - 403
[2026-01-28 14:19:34] info: [GET] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:o2oj5a] Starting auth for GET /users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:o2oj5a] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:o2oj5a] Token from header: true
[2026-01-28 14:19:34] info: [auth:o2oj5a] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:yv40uv] Starting auth for GET /ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:yv40uv] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:yv40uv] Token from header: true
[2026-01-28 14:19:34] info: [auth:yv40uv] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [userRoutes] Self-access validated: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f accessing own data
[2026-01-28 14:19:34] info: [GET] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress - 200
[2026-01-28 14:19:34] info: [GET] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:xr1sen] Starting auth for GET /users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:xr1sen] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:xr1sen] Token from header: true
[2026-01-28 14:19:34] info: [auth:xr1sen] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:b9tn24] Starting auth for GET /ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress
[2026-01-28 14:19:34] info: [auth:b9tn24] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:b9tn24] Token from header: true
[2026-01-28 14:19:34] info: [auth:b9tn24] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [userRoutes] Self-access validated: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f accessing own data
[2026-01-28 14:19:34] info: [GET] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/progress - 200
[2026-01-28 14:19:34] info: [GET] /api/users/user-123_test/progress
[2026-01-28 14:19:34] info: [auth:tzfs5e] Starting auth for GET /users/user-123_test/progress
[2026-01-28 14:19:34] info: [auth:tzfs5e] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:tzfs5e] Token from header: true
[2026-01-28 14:19:34] info: [auth:tzfs5e] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:gz5slq] Starting auth for GET /user-123_test/progress
[2026-01-28 14:19:34] info: [auth:gz5slq] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:gz5slq] Token from header: true
[2026-01-28 14:19:34] info: [auth:gz5slq] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"user-123_test","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:19:34] info: [GET] /api/users/user-123_test/progress - 400
[2026-01-28 14:19:34] info: [GET] /api/users/cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:r00fjd] Starting auth for GET /users/cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:r00fjd] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:r00fjd] Token from header: true
[2026-01-28 14:19:34] info: [auth:r00fjd] Authenticated user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:kg2ro] Starting auth for GET /cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:kg2ro] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:kg2ro] Token from header: true
[2026-01-28 14:19:34] info: [auth:kg2ro] Authenticated user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [userRoutes] Self-access validated: user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2 accessing own data
[2026-01-28 14:19:34] info: [userController.getUser] Getting user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [GET] /api/users/cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2 - 200
[2026-01-28 14:19:34] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:3vtfzj] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:3vtfzj] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:3vtfzj] Token from header: true
[2026-01-28 14:19:34] info: [auth:3vtfzj] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:hz3u8] Starting auth for GET /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:hz3u8] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:hz3u8] Token from header: true
[2026-01-28 14:19:34] info: [auth:hz3u8] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Self-access violation: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 14:19:34] info: [POST] /api/users
[2026-01-28 14:19:34] info: [auth:a6bp2] Starting auth for POST /users
[2026-01-28 14:19:34] info: [auth:a6bp2] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:a6bp2] Token from header: true
[2026-01-28 14:19:34] info: [auth:a6bp2] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [userController.createUser] Creating user NewUser_1769627974481
[2026-01-28 14:19:34] info: [createUser] User created: NewUser_1769627974481
[2026-01-28 14:19:34] info: [POST] /api/users - 201
[2026-01-28 14:19:34] info: [POST] /api/users
[2026-01-28 14:19:34] info: [auth:y615r] Starting auth for POST /users
[2026-01-28 14:19:34] info: [auth:y615r] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:y615r] Token from header: true
[2026-01-28 14:19:34] info: [auth:y615r] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [POST] /api/users - 400
[2026-01-28 14:19:34] info: [PUT] /api/users/cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:64mqdg] Starting auth for PUT /users/cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:64mqdg] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:64mqdg] Token from header: true
[2026-01-28 14:19:34] info: [auth:64mqdg] Authenticated user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:mje1mg] Starting auth for PUT /cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [auth:mje1mg] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:mje1mg] Token from header: true
[2026-01-28 14:19:34] info: [auth:mje1mg] Authenticated user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [userRoutes] Self-access validated: user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2 accessing own data
[2026-01-28 14:19:34] info: [userController.updateUser] Updating user cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2
[2026-01-28 14:19:34] info: [PUT] /api/users/cbf7a992-f1a3-4a3b-a258-f1259f6b4ab2 - 200
[2026-01-28 14:19:34] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:iuyv0j] Starting auth for PUT /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:iuyv0j] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:iuyv0j] Token from header: true
[2026-01-28 14:19:34] info: [auth:iuyv0j] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:5phayp] Starting auth for PUT /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:5phayp] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:5phayp] Token from header: true
[2026-01-28 14:19:34] info: [auth:5phayp] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Self-access violation: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 14:19:34] info: [DELETE] /api/users/24fd001b-777e-4ae8-85bb-e0434ad571b4
[2026-01-28 14:19:34] info: [auth:7aa0nw] Starting auth for DELETE /users/24fd001b-777e-4ae8-85bb-e0434ad571b4
[2026-01-28 14:19:34] info: [auth:7aa0nw] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:7aa0nw] Token from header: true
[2026-01-28 14:19:34] info: [auth:7aa0nw] Authenticated user 24fd001b-777e-4ae8-85bb-e0434ad571b4
[2026-01-28 14:19:34] info: [auth:wrhqxk] Starting auth for DELETE /24fd001b-777e-4ae8-85bb-e0434ad571b4
[2026-01-28 14:19:34] info: [auth:wrhqxk] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:wrhqxk] Token from header: true
[2026-01-28 14:19:34] info: [auth:wrhqxk] Authenticated user 24fd001b-777e-4ae8-85bb-e0434ad571b4
[2026-01-28 14:19:34] info: [userRoutes] Self-access validated: user 24fd001b-777e-4ae8-85bb-e0434ad571b4 accessing own data
[2026-01-28 14:19:34] info: [userController.deleteUser] Deleting user 24fd001b-777e-4ae8-85bb-e0434ad571b4
[2026-01-28 14:19:34] info: [DELETE] /api/users/24fd001b-777e-4ae8-85bb-e0434ad571b4 - 200
[2026-01-28 14:19:34] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:8ot9l] Starting auth for DELETE /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:8ot9l] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:8ot9l] Token from header: true
[2026-01-28 14:19:34] info: [auth:8ot9l] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:cabnc8n] Starting auth for DELETE /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [auth:cabnc8n] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:cabnc8n] Token from header: true
[2026-01-28 14:19:34] info: [auth:cabnc8n] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Self-access violation: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 14:19:34] info: [POST] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/add-xp
[2026-01-28 14:19:34] info: [auth:g62psg] Starting auth for POST /users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/add-xp
[2026-01-28 14:19:34] info: [auth:g62psg] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:g62psg] Token from header: true
[2026-01-28 14:19:34] info: [auth:g62psg] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:loek3] Starting auth for POST /ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/add-xp
[2026-01-28 14:19:34] info: [auth:loek3] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:loek3] Token from header: true
[2026-01-28 14:19:34] info: [auth:loek3] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [userRoutes] Self-access validated: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f accessing own data
[2026-01-28 14:19:34] info: [userController.addXp] Adding 50 XP to user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [POST] /api/users/ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f/add-xp - 200
[2026-01-28 14:19:34] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 14:19:34] info: [auth:h0ax6] Starting auth for POST /users/550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 14:19:34] info: [auth:h0ax6] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:h0ax6] Token from header: true
[2026-01-28 14:19:34] info: [auth:h0ax6] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] info: [auth:87cfb] Starting auth for POST /550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 14:19:34] info: [auth:87cfb] Token from cookie: false
[2026-01-28 14:19:34] info: [auth:87cfb] Token from header: true
[2026-01-28 14:19:34] info: [auth:87cfb] Authenticated user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f
[2026-01-28 14:19:34] warn: [userRoutes] Self-access violation: user ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:19:34] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp - 403
FAIL tests/integration/userRoutes.test.mjs
  üåê INTEGRATION: User Routes - HTTP API Endpoints
    GET /api/users/:id/progress
      √ó should return user progress successfully (104 ms)
      ‚àö should return 403 for non-existent user (unauthorized access) (33 ms)
      ‚àö should return validation error for empty user ID (31 ms)
      ‚àö should return validation error for invalid user ID format (24 ms)
      ‚àö should return validation error for extremely long user ID (26 ms)
      ‚àö should return 403 when attempting to access a different user (database error path blocked) (24 ms)
      ‚àö should calculate xpToNextLevel correctly for edge cases (25 ms)
      ‚àö should only return required fields in response (24 ms)
      ‚àö should handle invalid special characters in user ID (27 ms)
    GET /api/users/:id
      ‚àö should return a user by ID (34 ms)
      ‚àö should return 403 if user not authorized (matches different user) (24 ms)
    POST /api/users
      ‚àö should create a new user (44 ms)
      ‚àö should return 400 for invalid user data (21 ms)
    PUT /api/users/:id
      ‚àö should update an existing user (31 ms)
      ‚àö should return 403 if user to update is not authorized (24 ms)
    DELETE /api/users/:id
      ‚àö should delete a user (311 ms)
      ‚àö should return 403 if user to delete is not authorized (23 ms)
    POST /api/users/:id/add-xp
      ‚àö should add XP to a user and potentially level them up (33 ms)
      ‚àö should return 404 if user not found for XP addition (matches authorized user check) (25 ms)

  ‚óè üåê INTEGRATION: User Routes - HTTP API Endpoints ‚Ä∫ GET /api/users/:id/progress ‚Ä∫ should return user progress successfully

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 0

    @@ -1,14 +1,9 @@
      Object {
        "level": Any<Number>,
        "progressPercentage": Any<Number>,
        "totalEarnings": Any<Number>,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f",
    -     },
    -   },
        "username": "userroutes_1769627973472",
        "xp": Any<Number>,
        "xpForCurrentLevel": Any<Number>,
        "xpForNextLevel": Any<Number>,
        "xpToNextLevel": Any<Number>,

    [0m [90m 91 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 92 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User progress retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 94 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 95 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 96 |[39m         level[33m:[39m expect[33m.[39many([33mNumber[39m)[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userRoutes.test.mjs:93:34)

[2026-01-28 14:19:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:35] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:35] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:36] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:36] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:36] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:36] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:36] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:36] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:36] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:36] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:36] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:36] info: [POST] /api/auth/register
[2026-01-28 14:19:36] info: [TokenRotation] Created new token pair
[2026-01-28 14:19:36] info: [EmailVerification] Created verification token
[2026-01-28 14:19:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:19:36] info: [authController.register] Verification email sent
[2026-01-28 14:19:36] info: [POST] /api/auth/register - 201
[2026-01-28 14:19:36] info: [POST] /api/auth/login
[2026-01-28 14:19:36] info: [TokenRotation] Created new token pair
[2026-01-28 14:19:36] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:19:36] info: [POST] /api/auth/login - 200
[2026-01-28 14:19:36] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:36] info: [auth:2yv9a] Starting auth for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:36] info: [auth:2yv9a] Token from cookie: false
[2026-01-28 14:19:36] info: [auth:2yv9a] Token from header: true
[2026-01-28 14:19:36] info: [auth:2yv9a] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [auth:6sgzg] Starting auth for GET /688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:36] info: [auth:6sgzg] Token from cookie: false
[2026-01-28 14:19:36] info: [auth:6sgzg] Token from header: true
[2026-01-28 14:19:36] info: [auth:6sgzg] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [userRoutes] Self-access validated: user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 accessing own data
[2026-01-28 14:19:36] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress - 200
[2026-01-28 14:19:36] info: [POST] /api/training/train
[2026-01-28 14:19:36] info: [auth:u7iiv] Starting auth for POST /training/train
[2026-01-28 14:19:36] info: [auth:u7iiv] Token from cookie: false
[2026-01-28 14:19:36] info: [auth:u7iiv] Token from header: true
[2026-01-28 14:19:36] info: [auth:u7iiv] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Racing
[2026-01-28 14:19:36] info: [trainingController.trainHorse] Attempting to train horse 147134 in Racing
[2026-01-28 14:19:36] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Racing
[2026-01-28 14:19:36] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:36] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:36] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147134
[2026-01-28 14:19:36] info: [trainingController.canTrain] Horse 147134 is eligible to train in Racing
[2026-01-28 14:19:36] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:36] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:36] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Racing
[2026-01-28 14:19:36] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 8999
[2026-01-28 14:19:36] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147134 by +5
[2026-01-28 14:19:36] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147134 by +5
[2026-01-28 14:19:36] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147134: 0 -> 5
[2026-01-28 14:19:36] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147134
[2026-01-28 14:19:36] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Racing
[2026-01-28 14:19:36] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4438, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:36] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:36] info: [trainingController.trainHorse] Successfully trained horse 147134 in Racing (Log ID: 8999, Score +5)
[2026-01-28 14:19:36] info: [POST] /api/training/train - 200
[2026-01-28 14:19:36] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:36] info: [auth:qkyi9] Starting auth for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:36] info: [auth:qkyi9] Token from cookie: false
[2026-01-28 14:19:36] info: [auth:qkyi9] Token from header: true
[2026-01-28 14:19:36] info: [auth:qkyi9] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [auth:vcwgln] Starting auth for GET /688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:36] info: [auth:vcwgln] Token from cookie: false
[2026-01-28 14:19:36] info: [auth:vcwgln] Token from header: true
[2026-01-28 14:19:36] info: [auth:vcwgln] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [userRoutes] Self-access validated: user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 accessing own data
[2026-01-28 14:19:36] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:36] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:sd7ywg] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:sd7ywg] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:sd7ywg] Token from header: true
[2026-01-28 14:19:37] info: [auth:sd7ywg] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Dressage
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9000
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updating focus by 3 for horse 147134
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updated focus for horse 147134: 0 -> 3 (+3)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Stat gain: focus +3
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147134: 0 -> 5
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4439, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Dressage (Log ID: 9000, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:mx0yw] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:mx0yw] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:mx0yw] Token from header: true
[2026-01-28 14:19:37] info: [auth:mx0yw] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Show Jumping
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9001
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147134: 0 -> 5
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4440, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Show Jumping (Log ID: 9001, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:gzyb2d] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:gzyb2d] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:gzyb2d] Token from header: true
[2026-01-28 14:19:37] info: [auth:gzyb2d] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Dressage
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9002
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147134: 5 -> 10
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4441, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Dressage (Log ID: 9002, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:9atuso] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:9atuso] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:9atuso] Token from header: true
[2026-01-28 14:19:37] info: [auth:9atuso] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Show Jumping
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9003
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147134: 5 -> 10
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4442, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Show Jumping (Log ID: 9003, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:81ajc] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:81ajc] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:81ajc] Token from header: true
[2026-01-28 14:19:37] info: [auth:81ajc] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Dressage
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9004
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updating focus by 2 for horse 147134
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updated focus for horse 147134: 3 -> 5 (+2)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Stat gain: focus +2
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147134: 10 -> 15
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4443, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Dressage (Log ID: 9004, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:k5tje9] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:k5tje9] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:k5tje9] Token from header: true
[2026-01-28 14:19:37] info: [auth:k5tje9] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Show Jumping
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9005
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147134: 10 -> 15
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4444, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Show Jumping (Log ID: 9005, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:6exbsq] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:6exbsq] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:6exbsq] Token from header: true
[2026-01-28 14:19:37] info: [auth:6exbsq] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Dressage
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9006
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147134: 15 -> 20
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4445, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Dressage (Log ID: 9006, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:23abe] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:23abe] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:23abe] Token from header: true
[2026-01-28 14:19:37] info: [auth:23abe] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Show Jumping
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9007
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updating precision by 1 for horse 147134
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updated precision for horse 147134: 0 -> 1 (+1)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Stat gain: precision +1
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147134: 15 -> 20
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4446, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Show Jumping (Log ID: 9007, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:qq5mr] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:qq5mr] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:qq5mr] Token from header: true
[2026-01-28 14:19:37] info: [auth:qq5mr] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Dressage
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Dressage
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9008
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147134: 20 -> 25
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4447, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Dressage (Log ID: 9008, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:5rkwzl] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:5rkwzl] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:5rkwzl] Token from header: true
[2026-01-28 14:19:37] info: [auth:5rkwzl] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Show Jumping
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Show Jumping
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9009
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147134: 20 -> 25
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4448, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Show Jumping (Log ID: 9009, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:n5gjp7] Starting auth for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:n5gjp7] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:n5gjp7] Token from header: true
[2026-01-28 14:19:37] info: [auth:n5gjp7] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:ld3du7] Starting auth for GET /688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:ld3du7] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:ld3du7] Token from header: true
[2026-01-28 14:19:37] info: [auth:ld3du7] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [userRoutes] Self-access validated: user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 accessing own data
[2026-01-28 14:19:37] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress - 200
[2026-01-28 14:19:37] info: [POST] /api/training/train
[2026-01-28 14:19:37] info: [auth:94apr] Starting auth for POST /training/train
[2026-01-28 14:19:37] info: [auth:94apr] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:94apr] Token from header: true
[2026-01-28 14:19:37] info: [auth:94apr] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [ownership] Found owned horse 147134 for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.trainRouteHandler] Training request for horse 147134 in Cross Country
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Attempting to train horse 147134 in Cross Country
[2026-01-28 14:19:37] info: [trainingController.canTrain] Checking training eligibility for horse 147134 in Cross Country
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Getting age for horse 147134
[2026-01-28 14:19:37] info: [trainingModel.getHorseAge] Horse 147134 is 6 years old
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147134 across all disciplines
[2026-01-28 14:19:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147134: Tue Jan 20 2026 14:19:37 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:19:37] info: [trainingController.canTrain] Horse 147134 is eligible to train in Cross Country
[2026-01-28 14:19:37] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147134)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Horse 147134 has traits: 
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Logging training session for horse 147134 in Cross Country
[2026-01-28 14:19:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9010
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updating endurance by 2 for horse 147134
[2026-01-28 14:19:37] info: [horseModel.updateHorseStat] Updated endurance for horse 147134: 0 -> 2 (+2)
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Stat gain: endurance +2
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 147134 by +5
[2026-01-28 14:19:37] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 147134: 0 -> 5
[2026-01-28 14:19:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 147134
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Logging XP event: User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5, Reason: Trained horse Progress Test Horse in Cross Country
[2026-01-28 14:19:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4449, User 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8, Amount: 5
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Awarded 5 XP to user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 for training - LEVEL UP to undefined!
[2026-01-28 14:19:37] info: [trainingController.trainHorse] Successfully trained horse 147134 in Cross Country (Log ID: 9010, Score +5)
[2026-01-28 14:19:37] info: [POST] /api/training/train - 200
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:eoh3qn] Starting auth for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:eoh3qn] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:eoh3qn] Token from header: true
[2026-01-28 14:19:37] info: [auth:eoh3qn] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:d8tac9] Starting auth for GET /688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:d8tac9] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:d8tac9] Token from header: true
[2026-01-28 14:19:37] info: [auth:d8tac9] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [userRoutes] Self-access validated: user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 accessing own data
[2026-01-28 14:19:37] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress - 200
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:1kiebl] Starting auth for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:1kiebl] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:1kiebl] Token from header: true
[2026-01-28 14:19:37] info: [auth:1kiebl] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:vjq2y] Starting auth for GET /688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:vjq2y] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:vjq2y] Token from header: true
[2026-01-28 14:19:37] info: [auth:vjq2y] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [userRoutes] Self-access validated: user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 accessing own data
[2026-01-28 14:19:37] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress - 200
[2026-01-28 14:19:37] info: [GET] /api/users/dashboard/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:dx98cdk] Starting auth for GET /users/dashboard/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:dx98cdk] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:dx98cdk] Token from header: true
[2026-01-28 14:19:37] info: [auth:dx98cdk] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:39veui] Starting auth for GET /dashboard/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:39veui] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:39veui] Token from header: true
[2026-01-28 14:19:37] info: [auth:39veui] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [userRoutes] Self-access validated: user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 accessing own data
[2026-01-28 14:19:37] info: [userController.getDashboardData] Cache MISS - Getting dashboard for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingController.getTrainableHorses] Getting trainable horses for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 14:19:37] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [GET] /api/users/dashboard/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 - 200
[2026-01-28 14:19:37] info: [GET] /api/users/999999/progress
[2026-01-28 14:19:37] info: [auth:y4mqoe] Starting auth for GET /users/999999/progress
[2026-01-28 14:19:37] info: [auth:y4mqoe] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:y4mqoe] Token from header: true
[2026-01-28 14:19:37] info: [auth:y4mqoe] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:wazb5b] Starting auth for GET /999999/progress
[2026-01-28 14:19:37] info: [auth:wazb5b] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:wazb5b] Token from header: true
[2026-01-28 14:19:37] info: [auth:wazb5b] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"999999","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:19:37] info: [GET] /api/users/999999/progress - 400
[2026-01-28 14:19:37] info: [GET] /api/users/invalid/progress
[2026-01-28 14:19:37] info: [auth:1r5yb] Starting auth for GET /users/invalid/progress
[2026-01-28 14:19:37] info: [auth:1r5yb] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:1r5yb] Token from header: true
[2026-01-28 14:19:37] info: [auth:1r5yb] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:zz9xlr] Starting auth for GET /invalid/progress
[2026-01-28 14:19:37] info: [auth:zz9xlr] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:zz9xlr] Token from header: true
[2026-01-28 14:19:37] info: [auth:zz9xlr] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"invalid","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:19:37] info: [GET] /api/users/invalid/progress - 400
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:n45bo] Starting auth for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:n45bo] Token from cookie: false
[2026-01-28 14:19:37] warn: [auth:n45bo] Access token is required for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress from ::ffff:127.0.0.1
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress - 401
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:whz4e] Starting auth for GET /users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:whz4e] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:whz4e] Token from header: true
[2026-01-28 14:19:37] info: [auth:whz4e] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [auth:xrdc2] Starting auth for GET /688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress
[2026-01-28 14:19:37] info: [auth:xrdc2] Token from cookie: false
[2026-01-28 14:19:37] info: [auth:xrdc2] Token from header: true
[2026-01-28 14:19:37] info: [auth:xrdc2] Authenticated user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8
[2026-01-28 14:19:37] info: [userRoutes] Self-access validated: user 688d8d14-289f-42bd-9f8c-7cc7d2f09ab8 accessing own data
[2026-01-28 14:19:37] info: [GET] /api/users/688d8d14-289f-42bd-9f8c-7cc7d2f09ab8/progress - 200
FAIL tests/integration/userProgressAPI.integration.test.mjs
  üéØ INTEGRATION: User Progress API - Complete Progress Tracking
    üîê STEP 1: User Setup & Initial Progress State
      ‚àö should create user and establish initial progress state (660 ms)
      √ó should return correct initial progress data via API (37 ms)
    üêé STEP 2: Horse Creation for Training Integration
      ‚àö should create training-eligible horse (12 ms)
    üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates
      √ó should gain XP from training and update progress correctly (94 ms)
      ‚àö should handle multiple training sessions and XP accumulation (609 ms)
    üéØ STEP 4: Level-Up Detection & Multi-Level Progression
      √ó should level up when reaching XP threshold (94 ms)
      √ó should handle multiple level gains in single XP award (32 ms)
    üìä STEP 5: Dashboard Data Integration
      ‚àö should return comprehensive dashboard data with progress integration (47 ms)
    üîç STEP 6: API Consistency & Edge Cases
      ‚àö should handle invalid user ID gracefully (24 ms)
      ‚àö should validate user ID format (25 ms)
      ‚àö should require authentication for progress endpoints (19 ms)
    üéä STEP 7: End-to-End Progress Validation
      ‚àö should validate complete progress tracking integrity (26 ms)
      ‚àö should validate all business rules were enforced throughout progression (4 ms)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîê STEP 1: User Setup & Initial Progress State ‚Ä∫ should return correct initial progress data via API

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 0,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 200,

    [0m [90m 156 |[39m
     [90m 157 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 159 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 160 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 161 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:158:34)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should gain XP from training and update progress correctly

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 3,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 5,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 195,

    [0m [90m 231 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 234 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 235 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 236 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:233:42)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should level up when reaching XP threshold

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 2,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 200,
        "xpForCurrentLevel": 200,
        "xpForNextLevel": 300,
        "xpToNextLevel": 100,

    [0m [90m 326 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 327 |[39m
    [31m[1m>[22m[39m[90m 328 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 329 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 330 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 331 |[39m         level[33m:[39m [35m2[39m[33m,[39m [90m// Leveled up![39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:328:42)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should handle multiple level gains in single XP award

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 3,
        "progressPercentage": 50,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 350,
        "xpForCurrentLevel": 300,
        "xpForNextLevel": 400,
        "xpToNextLevel": 50,

    [0m [90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 363 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 364 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 365 |[39m         level[33m:[39m [35m3[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:362:42)

[2026-01-28 14:19:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:38] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:38] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:38] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:38] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:38] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:38] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:38] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:38] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:38] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:38] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:38] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:38] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:6s15o] Starting auth for POST /groom-assignments
[2026-01-28 14:19:39] info: [auth:6s15o] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:6s15o] Token from header: true
[2026-01-28 14:19:39] info: [auth:6s15o] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:0zrnad] Starting auth for POST /
[2026-01-28 14:19:39] info: [auth:0zrnad] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:0zrnad] Token from header: true
[2026-01-28 14:19:39] info: [auth:0zrnad] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Creating assignment: groom 73577 -> horse 147135
[2026-01-28 14:19:39] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:njw5ke] Starting auth for POST /groom-assignments
[2026-01-28 14:19:39] info: [auth:njw5ke] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:njw5ke] Token from header: true
[2026-01-28 14:19:39] info: [auth:njw5ke] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:lny3y6] Starting auth for POST /
[2026-01-28 14:19:39] info: [auth:lny3y6] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:lny3y6] Token from header: true
[2026-01-28 14:19:39] info: [auth:lny3y6] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Creating assignment: groom 73577 -> horse 147136
[2026-01-28 14:19:39] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:adpmw] Starting auth for POST /groom-assignments
[2026-01-28 14:19:39] info: [auth:adpmw] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:adpmw] Token from header: true
[2026-01-28 14:19:39] info: [auth:adpmw] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:mo1oq] Starting auth for POST /
[2026-01-28 14:19:39] info: [auth:mo1oq] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:mo1oq] Token from header: true
[2026-01-28 14:19:39] info: [auth:mo1oq] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Creating assignment: groom 73577 -> horse 147135
[2026-01-28 14:19:39] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:7da74] Starting auth for POST /groom-assignments
[2026-01-28 14:19:39] info: [auth:7da74] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:7da74] Token from header: true
[2026-01-28 14:19:39] info: [auth:7da74] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:rp8xpl] Starting auth for POST /
[2026-01-28 14:19:39] info: [auth:rp8xpl] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:rp8xpl] Token from header: true
[2026-01-28 14:19:39] info: [auth:rp8xpl] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] warn: [groomAssignmentRoutes] Validation errors: [{"type":"field","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:ah5pd] Starting auth for POST /groom-assignments
[2026-01-28 14:19:39] info: [auth:ah5pd] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:ah5pd] Token from header: true
[2026-01-28 14:19:39] info: [auth:ah5pd] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:tbo1rhc] Starting auth for POST /
[2026-01-28 14:19:39] info: [auth:tbo1rhc] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:tbo1rhc] Token from header: true
[2026-01-28 14:19:39] info: [auth:tbo1rhc] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Creating assignment: groom 73577 -> horse 147137
[2026-01-28 14:19:39] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:w94h0b] Starting auth for GET /groom-assignments
[2026-01-28 14:19:39] info: [auth:w94h0b] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:w94h0b] Token from header: true
[2026-01-28 14:19:39] info: [auth:w94h0b] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:frpmxm] Starting auth for GET /
[2026-01-28 14:19:39] info: [auth:frpmxm] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:frpmxm] Token from header: true
[2026-01-28 14:19:39] info: [auth:frpmxm] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Getting assignments for user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments - 200
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments?groomId=73577
[2026-01-28 14:19:39] info: [auth:zg0soe] Starting auth for GET /groom-assignments
[2026-01-28 14:19:39] info: [auth:zg0soe] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:zg0soe] Token from header: true
[2026-01-28 14:19:39] info: [auth:zg0soe] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:icf1c5] Starting auth for GET /
[2026-01-28 14:19:39] info: [auth:icf1c5] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:icf1c5] Token from header: true
[2026-01-28 14:19:39] info: [auth:icf1c5] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Getting assignments for user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments?groomId=73577 - 200
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/dashboard
[2026-01-28 14:19:39] info: [auth:kwbqga] Starting auth for GET /groom-assignments/dashboard
[2026-01-28 14:19:39] info: [auth:kwbqga] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:kwbqga] Token from header: true
[2026-01-28 14:19:39] info: [auth:kwbqga] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:bs4m2j] Starting auth for GET /dashboard
[2026-01-28 14:19:39] info: [auth:bs4m2j] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:bs4m2j] Token from header: true
[2026-01-28 14:19:39] info: [auth:bs4m2j] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Getting assignment dashboard for user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/dashboard - 200
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/groom/73577/limits
[2026-01-28 14:19:39] info: [auth:gnzwye] Starting auth for GET /groom-assignments/groom/73577/limits
[2026-01-28 14:19:39] info: [auth:gnzwye] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:gnzwye] Token from header: true
[2026-01-28 14:19:39] info: [auth:gnzwye] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:rmrd12] Starting auth for GET /groom/73577/limits
[2026-01-28 14:19:39] info: [auth:rmrd12] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:rmrd12] Token from header: true
[2026-01-28 14:19:39] info: [auth:rmrd12] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [ownership] Validated ownership: user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935 owns groom 73577
[2026-01-28 14:19:39] info: [groomAssignmentController] Getting limits for groom 73577
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/groom/73577/limits - 200
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:m58kyq] Starting auth for POST /groom-assignments
[2026-01-28 14:19:39] info: [auth:m58kyq] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:m58kyq] Token from header: true
[2026-01-28 14:19:39] info: [auth:m58kyq] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:edpb1l] Starting auth for POST /
[2026-01-28 14:19:39] info: [auth:edpb1l] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:edpb1l] Token from header: true
[2026-01-28 14:19:39] info: [auth:edpb1l] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Creating assignment: groom 73577 -> horse 147138
[2026-01-28 14:19:39] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/salary-costs
[2026-01-28 14:19:39] info: [auth:br9o] Starting auth for GET /groom-assignments/salary-costs
[2026-01-28 14:19:39] info: [auth:br9o] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:br9o] Token from header: true
[2026-01-28 14:19:39] info: [auth:br9o] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:17trkq] Starting auth for GET /salary-costs
[2026-01-28 14:19:39] info: [auth:17trkq] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:17trkq] Token from header: true
[2026-01-28 14:19:39] info: [auth:17trkq] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Calculating salary costs for user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/salary-costs - 200
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments/validate
[2026-01-28 14:19:39] info: [auth:hbrsx] Starting auth for POST /groom-assignments/validate
[2026-01-28 14:19:39] info: [auth:hbrsx] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:hbrsx] Token from header: true
[2026-01-28 14:19:39] info: [auth:hbrsx] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:zdvby6] Starting auth for POST /validate
[2026-01-28 14:19:39] info: [auth:zdvby6] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:zdvby6] Token from header: true
[2026-01-28 14:19:39] info: [auth:zdvby6] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Validating assignment: groom 73578 -> horse 147135
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments/validate - 200
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:ey8bqv] Starting auth for GET /groom-assignments
[2026-01-28 14:19:39] info: [auth:ey8bqv] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:ey8bqv] Token from header: true
[2026-01-28 14:19:39] info: [auth:ey8bqv] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:d1agdc] Starting auth for GET /
[2026-01-28 14:19:39] info: [auth:d1agdc] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:d1agdc] Token from header: true
[2026-01-28 14:19:39] info: [auth:d1agdc] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentController] Getting assignments for user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments - 200
[2026-01-28 14:19:39] info: [DELETE] /api/groom-assignments/99999
[2026-01-28 14:19:39] info: [auth:f3wc4] Starting auth for DELETE /groom-assignments/99999
[2026-01-28 14:19:39] info: [auth:f3wc4] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:f3wc4] Token from header: true
[2026-01-28 14:19:39] info: [auth:f3wc4] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:9uwfxb] Starting auth for DELETE /99999
[2026-01-28 14:19:39] info: [auth:9uwfxb] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:9uwfxb] Token from header: true
[2026-01-28 14:19:39] info: [auth:9uwfxb] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] warn: [ownership] groom-assignment 99999 not found or not owned by user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [DELETE] /api/groom-assignments/99999 - 404
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/config
[2026-01-28 14:19:39] info: [auth:8cxmnk] Starting auth for GET /groom-assignments/config
[2026-01-28 14:19:39] info: [auth:8cxmnk] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:8cxmnk] Token from header: true
[2026-01-28 14:19:39] info: [auth:8cxmnk] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:o5cpd] Starting auth for GET /config
[2026-01-28 14:19:39] info: [auth:o5cpd] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:o5cpd] Token from header: true
[2026-01-28 14:19:39] info: [auth:o5cpd] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/config - 200
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/statistics
[2026-01-28 14:19:39] info: [auth:r8qtsr] Starting auth for GET /groom-assignments/statistics
[2026-01-28 14:19:39] info: [auth:r8qtsr] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:r8qtsr] Token from header: true
[2026-01-28 14:19:39] info: [auth:r8qtsr] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [auth:94pv1s] Starting auth for GET /statistics
[2026-01-28 14:19:39] info: [auth:94pv1s] Token from cookie: false
[2026-01-28 14:19:39] info: [auth:94pv1s] Token from header: true
[2026-01-28 14:19:39] info: [auth:94pv1s] Authenticated user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [groomAssignmentRoutes] Getting assignment statistics for user f1c2dc34-7d6a-4406-9d77-2e0a2e71e935
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/statistics - 200
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:hsadxr] Starting auth for GET /groom-assignments
[2026-01-28 14:19:39] info: [auth:hsadxr] Token from cookie: false
[2026-01-28 14:19:39] warn: [auth:hsadxr] Access token is required for GET /groom-assignments from ::ffff:127.0.0.1
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments - 401
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments
[2026-01-28 14:19:39] info: [auth:fjjqr] Starting auth for POST /groom-assignments
[2026-01-28 14:19:39] info: [auth:fjjqr] Token from cookie: false
[2026-01-28 14:19:39] warn: [auth:fjjqr] Access token is required for POST /groom-assignments from ::ffff:127.0.0.1
[2026-01-28 14:19:39] info: [POST] /api/groom-assignments - 401
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/dashboard
[2026-01-28 14:19:39] info: [auth:63ogm] Starting auth for GET /groom-assignments/dashboard
[2026-01-28 14:19:39] info: [auth:63ogm] Token from cookie: false
[2026-01-28 14:19:39] warn: [auth:63ogm] Access token is required for GET /groom-assignments/dashboard from ::ffff:127.0.0.1
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/dashboard - 401
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/salary-costs
[2026-01-28 14:19:39] info: [auth:dwlt67] Starting auth for GET /groom-assignments/salary-costs
[2026-01-28 14:19:39] info: [auth:dwlt67] Token from cookie: false
[2026-01-28 14:19:39] warn: [auth:dwlt67] Access token is required for GET /groom-assignments/salary-costs from ::ffff:127.0.0.1
[2026-01-28 14:19:39] info: [GET] /api/groom-assignments/salary-costs - 401
FAIL tests/integration/groomAssignmentSystem.test.mjs
  Enhanced Groom Assignment System Integration Tests
    1. Assignment Creation
      √ó should create a new groom assignment (104 ms)
      √ó should create multiple assignments for different horses (41 ms)
      √ó should prevent duplicate assignments (35 ms)
      ‚àö should validate required fields (31 ms)
      ‚àö should prevent assignment to non-owned horses (57 ms)
    2. Assignment Retrieval
      √ó should get all assignments for user (36 ms)
      ‚àö should filter assignments by groom (33 ms)
      √ó should get assignment dashboard (35 ms)
    3. Assignment Limits
      ‚àö should get groom assignment limits (40 ms)
      √ó should enforce assignment limits (67 ms)
    4. Salary Calculations
      √ó should calculate weekly salary costs (32 ms)
    5. Assignment Validation
      ‚àö should validate assignment eligibility (35 ms)
    6. Assignment Removal
      √ó should remove an assignment (31 ms)
      ‚àö should validate assignment ownership for removal (31 ms)
    7. Configuration and Statistics
      ‚àö should get assignment configuration (31 ms)
      ‚àö should get assignment statistics (80 ms)
    8. Authentication and Authorization
      ‚àö should require authentication for all endpoints (78 ms)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create a new groom assignment

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 116 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 119 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'assignment'[39m)[33m;[39m
     [90m 121 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:118:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create multiple assignments for different horses

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 142 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 145 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 146 |[39m     })[33m;[39m
     [90m 147 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:144:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should prevent duplicate assignments

    expect(received).toContain(expected) // indexOf

    Expected substring: "already assigned"
    Received string:    "You do not own this horse"

    [0m [90m 161 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 162 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already assigned'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     it([32m'should validate required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:163:37)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get all assignments for user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 240 |[39m       [36mconst[39m { assignments[33m,[39m statistics } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 241 |[39m       expect([33mArray[39m[33m.[39misArray(assignments))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 242 |[39m       expect(assignments[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 243 |[39m       expect(statistics[33m.[39mactiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 244 |[39m     })[33m;[39m
     [90m 245 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:242:34)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get assignment dashboard

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 273 |[39m
     [90m 274 |[39m       [36mconst[39m { summary[33m,[39m salaryCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(summary[33m.[39mtotalActiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 276 |[39m       expect(salaryCosts[33m.[39mtotalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:275:46)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 3. Assignment Limits ‚Ä∫ should enforce assignment limits

    expect(received).toContain(expected) // indexOf

    Expected substring: "maximum assignments"
    Received string:    "You do not own this horse"

    [0m [90m 332 |[39m           } [36melse[39m {
     [90m 333 |[39m             failedAssignments[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 334 |[39m             expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'maximum assignments'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 335 |[39m           }
     [90m 336 |[39m         }
     [90m 337 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:334:43)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 4. Salary Calculations ‚Ä∫ should calculate weekly salary costs

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 362 |[39m
     [90m 363 |[39m       [36mconst[39m { totalWeeklyCost[33m,[39m groomCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(totalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 365 |[39m       expect([33mArray[39m[33m.[39misArray(groomCosts))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 366 |[39m       expect(groomCosts[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 367 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:364:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 6. Assignment Removal ‚Ä∫ should remove an assignment

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 411 |[39m
     [90m 412 |[39m       [36mconst[39m assignment [33m=[39m assignmentsResponse[33m.[39mbody[33m.[39mdata[33m.[39massignments[33m.[39mfind(a [33m=>[39m a[33m.[39misActive)[33m;[39m
    [31m[1m>[22m[39m[90m 413 |[39m       expect(assignment)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       [90m// Remove the assignment[39m
     [90m 416 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:413:26)

[2026-01-28 14:19:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:40] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:40] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:40] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:40] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:40] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:40] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:41] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:41] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:41] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:41] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:41] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:41] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:41] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:41] info: [GET] /api/horses/147145/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:rcceoc] Starting auth for GET /horses/147145/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:rcceoc] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:rcceoc] Token from header: true
[2026-01-28 14:19:41] info: [auth:rcceoc] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:9ufzo] Starting auth for GET /horses/147145/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:9ufzo] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:9ufzo] Token from header: true
[2026-01-28 14:19:41] info: [auth:9ufzo] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [ownership] Validated ownership: user bce35b5a-45fb-4037-bddd-feecf5baca36 owns horse 147145
[2026-01-28 14:19:41] info: Enhanced trait history generated for horse 147145 by user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/147145/enhanced-trait-history - 200
[2026-01-28 14:19:41] info: [GET] /api/horses/147144/epigenetic-insights
[2026-01-28 14:19:41] info: [auth:h8rvd] Starting auth for GET /horses/147144/epigenetic-insights
[2026-01-28 14:19:41] info: [auth:h8rvd] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:h8rvd] Token from header: true
[2026-01-28 14:19:41] info: [auth:h8rvd] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:ton2pk] Starting auth for GET /horses/147144/epigenetic-insights
[2026-01-28 14:19:41] info: [auth:ton2pk] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:ton2pk] Token from header: true
[2026-01-28 14:19:41] info: [auth:ton2pk] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [ownership] Validated ownership: user bce35b5a-45fb-4037-bddd-feecf5baca36 owns horse 147144
[2026-01-28 14:19:41] info: Epigenetic insights generated for horse 147144 by user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/147144/epigenetic-insights - 200
[2026-01-28 14:19:41] info: [GET] /api/horses/147145/trait-timeline
[2026-01-28 14:19:41] info: [auth:u0rilr] Starting auth for GET /horses/147145/trait-timeline
[2026-01-28 14:19:41] info: [auth:u0rilr] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:u0rilr] Token from header: true
[2026-01-28 14:19:41] info: [auth:u0rilr] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:inpvjv] Starting auth for GET /horses/147145/trait-timeline
[2026-01-28 14:19:41] info: [auth:inpvjv] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:inpvjv] Token from header: true
[2026-01-28 14:19:41] info: [auth:inpvjv] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [ownership] Validated ownership: user bce35b5a-45fb-4037-bddd-feecf5baca36 owns horse 147145
[2026-01-28 14:19:41] info: Trait timeline generated for horse 147145 by user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/147145/trait-timeline - 200
[2026-01-28 14:19:41] info: [GET] /api/users/bce35b5a-45fb-4037-bddd-feecf5baca36/stable-epigenetic-report
[2026-01-28 14:19:41] info: [auth:a7z6hm] Starting auth for GET /users/bce35b5a-45fb-4037-bddd-feecf5baca36/stable-epigenetic-report
[2026-01-28 14:19:41] info: [auth:a7z6hm] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:a7z6hm] Token from header: true
[2026-01-28 14:19:41] info: [auth:a7z6hm] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:9n3l5m] Starting auth for GET /users/bce35b5a-45fb-4037-bddd-feecf5baca36/stable-epigenetic-report
[2026-01-28 14:19:41] info: [auth:9n3l5m] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:9n3l5m] Token from header: true
[2026-01-28 14:19:41] info: [auth:9n3l5m] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/users/bce35b5a-45fb-4037-bddd-feecf5baca36/stable-epigenetic-report - 200
[2026-01-28 14:19:41] info: [POST] /api/horses/compare-epigenetics
[2026-01-28 14:19:41] info: [auth:2tr2vo] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:19:41] info: [auth:2tr2vo] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:2tr2vo] Token from header: true
[2026-01-28 14:19:41] info: [auth:2tr2vo] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:w7aesg] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:19:41] info: [auth:w7aesg] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:w7aesg] Token from header: true
[2026-01-28 14:19:41] info: [auth:w7aesg] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [POST] /api/horses/compare-epigenetics - 403
[2026-01-28 14:19:41] info: [GET] /api/horses/trait-trends?user%5Bconnect%5D%5Bid%5D=bce35b5a-45fb-4037-bddd-feecf5baca36&timeframe=30
[2026-01-28 14:19:41] info: [auth:soyba] Starting auth for GET /horses/trait-trends
[2026-01-28 14:19:41] info: [auth:soyba] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:soyba] Token from header: true
[2026-01-28 14:19:41] info: [auth:soyba] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:pm1xgj] Starting auth for GET /trait-trends
[2026-01-28 14:19:41] info: [auth:pm1xgj] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:pm1xgj] Token from header: true
[2026-01-28 14:19:41] info: [auth:pm1xgj] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/trait-trends?user%5Bconnect%5D%5Bid%5D=bce35b5a-45fb-4037-bddd-feecf5baca36&timeframe=30 - 400
[2026-01-28 14:19:41] info: [GET] /api/horses/147145/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2026-01-18T19%3A19%3A41.536Z&dateTo=2026-01-28T19%3A19%3A41.536Z
[2026-01-28 14:19:41] info: [auth:x1wz2] Starting auth for GET /horses/147145/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:x1wz2] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:x1wz2] Token from header: true
[2026-01-28 14:19:41] info: [auth:x1wz2] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:rpfxr] Starting auth for GET /horses/147145/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:rpfxr] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:rpfxr] Token from header: true
[2026-01-28 14:19:41] info: [auth:rpfxr] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [ownership] Validated ownership: user bce35b5a-45fb-4037-bddd-feecf5baca36 owns horse 147145
[2026-01-28 14:19:41] info: Enhanced trait history generated for horse 147145 by user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/147145/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2026-01-18T19%3A19%3A41.536Z&dateTo=2026-01-28T19%3A19%3A41.536Z - 200
[2026-01-28 14:19:41] info: [GET] /api/horses/147144/epigenetic-report-export?format=detailed
[2026-01-28 14:19:41] info: [auth:0w8u7i] Starting auth for GET /horses/147144/epigenetic-report-export
[2026-01-28 14:19:41] info: [auth:0w8u7i] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:0w8u7i] Token from header: true
[2026-01-28 14:19:41] info: [auth:0w8u7i] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:lo4f99f] Starting auth for GET /horses/147144/epigenetic-report-export
[2026-01-28 14:19:41] info: [auth:lo4f99f] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:lo4f99f] Token from header: true
[2026-01-28 14:19:41] info: [auth:lo4f99f] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [ownership] Validated ownership: user bce35b5a-45fb-4037-bddd-feecf5baca36 owns horse 147144
[2026-01-28 14:19:41] info: Epigenetic report export generated for horse 147144 (detailed) by user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/147144/epigenetic-report-export?format=detailed - 200
[2026-01-28 14:19:41] info: [GET] /api/horses/147143/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:givke] Starting auth for GET /horses/147143/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:givke] Token from cookie: false
[2026-01-28 14:19:41] warn: [auth:givke] Access token is required for GET /horses/147143/enhanced-trait-history from ::ffff:127.0.0.1
[2026-01-28 14:19:41] info: [GET] /api/horses/147143/enhanced-trait-history - 401
[2026-01-28 14:19:41] info: [GET] /api/horses/147146/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:n2us8hsa] Starting auth for GET /horses/147146/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:n2us8hsa] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:n2us8hsa] Token from header: true
[2026-01-28 14:19:41] info: [auth:n2us8hsa] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:kr0y8i] Starting auth for GET /horses/147146/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:kr0y8i] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:kr0y8i] Token from header: true
[2026-01-28 14:19:41] info: [auth:kr0y8i] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] warn: [ownership] horse 147146 not found or not owned by user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/147146/enhanced-trait-history - 404
[2026-01-28 14:19:41] info: [POST] /api/horses/compare-epigenetics
[2026-01-28 14:19:41] info: [auth:h1seqi] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:19:41] info: [auth:h1seqi] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:h1seqi] Token from header: true
[2026-01-28 14:19:41] info: [auth:h1seqi] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:ccvtay] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:19:41] info: [auth:ccvtay] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:ccvtay] Token from header: true
[2026-01-28 14:19:41] info: [auth:ccvtay] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [POST] /api/horses/compare-epigenetics - 400
[2026-01-28 14:19:41] info: [GET] /api/horses/99999/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:wd6qhl] Starting auth for GET /horses/99999/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:wd6qhl] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:wd6qhl] Token from header: true
[2026-01-28 14:19:41] info: [auth:wd6qhl] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [auth:98p1c] Starting auth for GET /horses/99999/enhanced-trait-history
[2026-01-28 14:19:41] info: [auth:98p1c] Token from cookie: false
[2026-01-28 14:19:41] info: [auth:98p1c] Token from header: true
[2026-01-28 14:19:41] info: [auth:98p1c] Authenticated user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] warn: [ownership] horse 99999 not found or not owned by user bce35b5a-45fb-4037-bddd-feecf5baca36
[2026-01-28 14:19:41] info: [GET] /api/horses/99999/enhanced-trait-history - 404
FAIL tests/routes/enhancedReportingRoutes.test.mjs
  Enhanced Reporting API Routes
    Enhanced Trait History Endpoints
      ‚àö GET /api/horses/:id/enhanced-trait-history should return comprehensive trait history (92 ms)
      ‚àö GET /api/horses/:id/epigenetic-insights should return advanced epigenetic analysis (64 ms)
      ‚àö GET /api/horses/:id/trait-timeline should return detailed trait development timeline (41 ms)
    Multi-Horse Analysis Endpoints
      ‚àö GET /api/users/:id/stable-epigenetic-report should return stable-wide epigenetic analysis (33 ms)
      √ó POST /api/horses/compare-epigenetics should compare multiple horses (42 ms)
      √ó GET /api/horses/trait-trends should return trait development trends (27 ms)
    Advanced Filtering and Export
      ‚àö GET /api/horses/:id/enhanced-trait-history with filters should return filtered results (67 ms)
      ‚àö GET /api/horses/:id/epigenetic-report-export should return exportable report data (40 ms)
    Authentication and Validation
      ‚àö should require authentication for enhanced reporting endpoints (21 ms)
      ‚àö should validate horse ownership for reporting endpoints (54 ms)
      ‚àö should validate input parameters for comparison endpoint (28 ms)
      ‚àö should handle non-existent horse IDs in reporting (30 ms)

  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ POST /api/horses/compare-epigenetics should compare multiple horses

    expected 200 "OK", got 403 "Forbidden"

    [0m [90m 257 |[39m           horseIds[33m:[39m [testHorses[[35m0[39m][33m.[39mid[33m,[39m testHorses[[35m1[39m][33m.[39mid[33m,[39m testHorses[[35m2[39m][33m.[39mid][33m,[39m
     [90m 258 |[39m         })
    [31m[1m>[22m[39m[90m 259 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 260 |[39m
     [90m 261 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 262 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:259:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ GET /api/horses/trait-trends should return trait development trends

    expected 200 "OK", got 400 "Bad Request"

    [0m [90m 274 |[39m         [33m.[39mquery({ user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m timeframe[33m:[39m [35m30[39m })
     [90m 275 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 276 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 277 |[39m
     [90m 278 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:276:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

[2026-01-28 14:19:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:41] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:41] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:41] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:42] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:42] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:42] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:42] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:42] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:42] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:42] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:42] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:42] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/players/level?limit=10&offset=0
[2026-01-28 14:19:43] info: [auth:ie2kr5] Starting auth for GET /leaderboards/players/level
[2026-01-28 14:19:43] info: [auth:ie2kr5] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:ie2kr5] Token from header: true
[2026-01-28 14:19:43] info: [auth:ie2kr5] Authenticated user 138a8738-81bd-4b43-87be-57060b9ddb86
[2026-01-28 14:19:43] info: [auth:1uo5fr] Starting auth for GET /players/level
[2026-01-28 14:19:43] info: [auth:1uo5fr] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:1uo5fr] Token from header: true
[2026-01-28 14:19:43] info: [auth:1uo5fr] Authenticated user 138a8738-81bd-4b43-87be-57060b9ddb86
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/players/level?limit=10&offset=0 - 200
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/players/level
[2026-01-28 14:19:43] info: [auth:pbp6] Starting auth for GET /leaderboards/players/level
[2026-01-28 14:19:43] info: [auth:pbp6] Token from cookie: false
[2026-01-28 14:19:43] warn: [auth:pbp6] Access token is required for GET /leaderboards/players/level from ::ffff:127.0.0.1
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/players/level - 401
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/horses/earnings
[2026-01-28 14:19:43] info: [auth:34au9h] Starting auth for GET /leaderboards/horses/earnings
[2026-01-28 14:19:43] info: [auth:34au9h] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:34au9h] Token from header: true
[2026-01-28 14:19:43] info: [auth:34au9h] Authenticated user b00534e6-34aa-4a66-847b-c173724f3c3d
[2026-01-28 14:19:43] info: [auth:tf2p82] Starting auth for GET /horses/earnings
[2026-01-28 14:19:43] info: [auth:tf2p82] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:tf2p82] Token from header: true
[2026-01-28 14:19:43] info: [auth:tf2p82] Authenticated user b00534e6-34aa-4a66-847b-c173724f3c3d
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/horses/earnings - 200
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/recent-winners
[2026-01-28 14:19:43] info: [auth:gc8cd] Starting auth for GET /leaderboards/recent-winners
[2026-01-28 14:19:43] info: [auth:gc8cd] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:gc8cd] Token from header: true
[2026-01-28 14:19:43] info: [auth:gc8cd] Authenticated user d064d68f-3434-4c65-ba74-a8a077782fb4
[2026-01-28 14:19:43] info: [auth:8utnh] Starting auth for GET /recent-winners
[2026-01-28 14:19:43] info: [auth:8utnh] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:8utnh] Token from header: true
[2026-01-28 14:19:43] info: [auth:8utnh] Authenticated user d064d68f-3434-4c65-ba74-a8a077782fb4
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/recent-winners - 200
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage
[2026-01-28 14:19:43] info: [auth:8ujeql] Starting auth for GET /leaderboards/recent-winners
[2026-01-28 14:19:43] info: [auth:8ujeql] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:8ujeql] Token from header: true
[2026-01-28 14:19:43] info: [auth:8ujeql] Authenticated user ce146c39-bc02-4b3e-b163-481394344f45
[2026-01-28 14:19:43] info: [auth:cnsre9] Starting auth for GET /recent-winners
[2026-01-28 14:19:43] info: [auth:cnsre9] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:cnsre9] Token from header: true
[2026-01-28 14:19:43] info: [auth:cnsre9] Authenticated user ce146c39-bc02-4b3e-b163-481394344f45
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage - 200
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/stats
[2026-01-28 14:19:43] info: [auth:cmwr7m] Starting auth for GET /leaderboards/stats
[2026-01-28 14:19:43] info: [auth:cmwr7m] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:cmwr7m] Token from header: true
[2026-01-28 14:19:43] info: [auth:cmwr7m] Authenticated user 22acb34c-e502-4bfe-93f9-12a6124cd0c3
[2026-01-28 14:19:43] info: [auth:91zdka] Starting auth for GET /stats
[2026-01-28 14:19:43] info: [auth:91zdka] Token from cookie: false
[2026-01-28 14:19:43] info: [auth:91zdka] Token from header: true
[2026-01-28 14:19:43] info: [auth:91zdka] Authenticated user 22acb34c-e502-4bfe-93f9-12a6124cd0c3
[2026-01-28 14:19:43] info: [GET] /api/leaderboards/stats - 200
PASS tests/integration/leaderboardRoutes.test.mjs
  üèÜ INTEGRATION: Leaderboard API - Real Database Integration
    GET /api/leaderboards/players/level
      ‚àö should return top players by level (223 ms)
      ‚àö should handle unauthorized access (51 ms)
    GET /api/leaderboards/horses/earnings
      ‚àö should return top horses by earnings (78 ms)
    GET /api/leaderboards/recent-winners
      ‚àö should return recent competition winners (66 ms)
      ‚àö should filter by discipline (75 ms)
    GET /api/leaderboards/stats
      ‚àö should return comprehensive leaderboard statistics (70 ms)

[2026-01-28 14:19:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:44] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:44] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:44] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:44] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:44] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:44] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:44] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:44] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:44] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:44] info: [POST] /api/auth/register
[2026-01-28 14:19:45] info: [TokenRotation] Created new token pair
[2026-01-28 14:19:45] info: [EmailVerification] Created verification token
[2026-01-28 14:19:45] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:19:45] info: [authController.register] Verification email sent
[2026-01-28 14:19:45] info: [POST] /api/auth/register - 201
[2026-01-28 14:19:45] info: [GET] /api/competition/eligibility/147165/Racing
[2026-01-28 14:19:45] info: [auth:qg4n4o] Starting auth for GET /competition/eligibility/147165/Racing
[2026-01-28 14:19:45] info: [auth:qg4n4o] Token from cookie: false
[2026-01-28 14:19:45] info: [auth:qg4n4o] Token from header: true
[2026-01-28 14:19:45] info: [auth:qg4n4o] Authenticated user d2ce4981-55b0-4c26-b8f8-52adb6fa8043
[2026-01-28 14:19:45] info: [auth:78tnua] Starting auth for GET /eligibility/147165/Racing
[2026-01-28 14:19:45] info: [auth:78tnua] Token from cookie: false
[2026-01-28 14:19:45] info: [auth:78tnua] Token from header: true
[2026-01-28 14:19:45] info: [auth:78tnua] Authenticated user d2ce4981-55b0-4c26-b8f8-52adb6fa8043
[2026-01-28 14:19:45] info: [ownership] Validated ownership: user d2ce4981-55b0-4c26-b8f8-52adb6fa8043 owns horse 147165
[2026-01-28 14:19:45] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147165 in Racing
[2026-01-28 14:19:45] info: [competitionRoutes.GET /eligibility] Horse 147165 eligibility checked for Racing
[2026-01-28 14:19:45] info: [GET] /api/competition/eligibility/147165/Racing - 200
[2026-01-28 14:19:45] info: [POST] /api/competition/enter
[2026-01-28 14:19:45] info: [auth:sls4en] Starting auth for POST /competition/enter
[2026-01-28 14:19:45] info: [auth:sls4en] Token from cookie: false
[2026-01-28 14:19:45] info: [auth:sls4en] Token from header: true
[2026-01-28 14:19:45] info: [auth:sls4en] Authenticated user d2ce4981-55b0-4c26-b8f8-52adb6fa8043
[2026-01-28 14:19:45] info: [auth:11lg8n] Starting auth for POST /enter
[2026-01-28 14:19:45] info: [auth:11lg8n] Token from cookie: false
[2026-01-28 14:19:45] info: [auth:11lg8n] Token from header: true
[2026-01-28 14:19:45] info: [auth:11lg8n] Authenticated user d2ce4981-55b0-4c26-b8f8-52adb6fa8043
[2026-01-28 14:19:45] info: [competitionRoutes.POST /enter] User d2ce4981-55b0-4c26-b8f8-52adb6fa8043 entering horse 147165 in show 8287
[2026-01-28 14:19:45] info: [ownership] Found owned horse 147165 for user d2ce4981-55b0-4c26-b8f8-52adb6fa8043
[2026-01-28 14:19:45] info: [competitionRoutes.POST /enter] Successfully entered horse 147165 in show 8287
[2026-01-28 14:19:45] info: [POST] /api/competition/enter - 201
[2026-01-28 14:19:45] info: [GET] /api/leaderboards/competition?metric=wins&limit=10
[2026-01-28 14:19:45] info: [auth:l93jgi] Starting auth for GET /leaderboards/competition
[2026-01-28 14:19:45] info: [auth:l93jgi] Token from cookie: false
[2026-01-28 14:19:45] info: [auth:l93jgi] Token from header: true
[2026-01-28 14:19:45] info: [auth:l93jgi] Authenticated user d2ce4981-55b0-4c26-b8f8-52adb6fa8043
[2026-01-28 14:19:45] info: [auth:ibjahs] Starting auth for GET /competition
[2026-01-28 14:19:45] info: [auth:ibjahs] Token from cookie: false
[2026-01-28 14:19:45] info: [auth:ibjahs] Token from header: true
[2026-01-28 14:19:45] info: [auth:ibjahs] Authenticated user d2ce4981-55b0-4c26-b8f8-52adb6fa8043
[2026-01-28 14:19:45] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins
[2026-01-28 14:19:45] info: [leaderboardRoutes.GET /competition] Retrieved 1 leaderboard entries
[2026-01-28 14:19:45] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200
FAIL tests/integration/competitionWorkflow.integration.test.mjs
  üèÜ INTEGRATION: Complete Competition Workflow
    üîê STEP 1: User & Horse Setup
      ‚àö should create user and prepare competition-ready horse (361 ms)
    üèüÔ∏è STEP 2: Competition Setup & Show Creation
      ‚àö should create competition show with proper configuration (3 ms)
    üìù STEP 3: Competition Entry & Validation
      ‚àö should validate horse meets competition requirements using API (36 ms)
      ‚àö should successfully enter horse in competition using API endpoint (41 ms)
    üèÅ STEP 4: Competition Execution & Scoring
      ‚àö should execute competition and calculate results (4 ms)
    üí∞ STEP 5: Prize Distribution & XP Awards
      √ó should award prize money and XP for competition performance (11 ms)
    üìä STEP 6: Leaderboard & Rankings
      ‚àö should update leaderboards with competition results using API (39 ms)
      ‚àö should track historical performance (4 ms)
    üéØ STEP 7: Performance Impact on Horse Value
      ‚àö should increase horse value based on competition success (5 ms)
    üèÜ STEP 8: Multi-Discipline Competition Readiness
      ‚àö should validate horse can compete in multiple disciplines (3 ms)
    üéä STEP 9: End-to-End Competition Workflow Validation
      ‚àö should validate complete competition workflow integrity (5 ms)
      ‚àö should validate all business rules enforced throughout competition (2 ms)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üí∞ STEP 5: Prize Distribution & XP Awards ‚Ä∫ should award prize money and XP for competition performance

    PrismaClientValidationError: 
    Invalid `prisma.xpEvent.findFirst()` invocation:

    {
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "d2ce4981-55b0-4c26-b8f8-52adb6fa8043"
          },
    ?     is?: UserWhereInput,
    ?     isNot?: UserWhereInput
        },
        reason: {
          contains: "Competition"
        }
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 332 |[39m
     [90m 333 |[39m       [90m// VERIFY: XP event logged[39m
    [31m[1m>[22m[39m[90m 334 |[39m       [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mfindFirst({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 335 |[39m         where[33m:[39m {
     [90m 336 |[39m           user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 337 |[39m           reason[33m:[39m { contains[33m:[39m [32m'Competition'[39m }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:334:23)

[2026-01-28 14:19:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:45] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:45] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:45] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:46] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:46] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:46] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:46] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:46] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:46] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:46] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:46] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:46] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate
[2026-01-28 14:19:46] info: [auth:onrjoe] Starting auth for POST /compatibility/calculate
[2026-01-28 14:19:46] info: [auth:onrjoe] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:onrjoe] Token from header: true
[2026-01-28 14:19:46] info: [auth:onrjoe] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:h0fy29] Starting auth for POST /calculate
[2026-01-28 14:19:46] info: [auth:h0fy29] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:h0fy29] Token from header: true
[2026-01-28 14:19:46] info: [auth:h0fy29] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 73580 and horse 147166
[2026-01-28 14:19:46] info: [ownership] Found owned groom 73580 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [ownership] Found owned horse 147166 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 1.381 (highly_recommended)
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate - 200
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate
[2026-01-28 14:19:46] info: [auth:y7lzo] Starting auth for POST /compatibility/calculate
[2026-01-28 14:19:46] info: [auth:y7lzo] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:y7lzo] Token from header: true
[2026-01-28 14:19:46] info: [auth:y7lzo] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:cqbvxv] Starting auth for POST /calculate
[2026-01-28 14:19:46] info: [auth:cqbvxv] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:cqbvxv] Token from header: true
[2026-01-28 14:19:46] info: [auth:cqbvxv] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 73581 and horse 147166
[2026-01-28 14:19:46] info: [ownership] Found owned groom 73581 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [ownership] Found owned horse 147166 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 0.340 (not_recommended)
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate - 200
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate
[2026-01-28 14:19:46] info: [auth:i4mbo4] Starting auth for POST /compatibility/calculate
[2026-01-28 14:19:46] info: [auth:i4mbo4] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:i4mbo4] Token from header: true
[2026-01-28 14:19:46] info: [auth:i4mbo4] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:1yar3s] Starting auth for POST /calculate
[2026-01-28 14:19:46] info: [auth:1yar3s] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:1yar3s] Token from header: true
[2026-01-28 14:19:46] info: [auth:1yar3s] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] warn: [Validation] Input validation failed
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate - 400
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate
[2026-01-28 14:19:46] info: [auth:0urol] Starting auth for POST /compatibility/calculate
[2026-01-28 14:19:46] info: [auth:0urol] Token from cookie: false
[2026-01-28 14:19:46] warn: [auth:0urol] Access token is required for POST /compatibility/calculate from ::ffff:127.0.0.1
[2026-01-28 14:19:46] info: [POST] /api/compatibility/calculate - 401
[2026-01-28 14:19:46] info: [GET] /api/compatibility/factors/73580/147166
[2026-01-28 14:19:46] info: [auth:ag2y08] Starting auth for GET /compatibility/factors/73580/147166
[2026-01-28 14:19:46] info: [auth:ag2y08] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:ag2y08] Token from header: true
[2026-01-28 14:19:46] info: [auth:ag2y08] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:h3696g] Starting auth for GET /factors/73580/147166
[2026-01-28 14:19:46] info: [auth:h3696g] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:h3696g] Token from header: true
[2026-01-28 14:19:46] info: [auth:h3696g] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [ownership] Validated ownership: user bc0aca72-d653-42d7-9a9b-a285d1150f34 owns groom 73580
[2026-01-28 14:19:46] info: [ownership] Validated ownership: user bc0aca72-d653-42d7-9a9b-a285d1150f34 owns horse 147166
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.getCompatibilityFactors] Analyzing factors for groom 73580 and horse 147166
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.getCompatibilityFactors] Factors analyzed: excellent compatibility
[2026-01-28 14:19:46] info: [GET] /api/compatibility/factors/73580/147166 - 200
[2026-01-28 14:19:46] info: [GET] /api/compatibility/factors/invalid/147166
[2026-01-28 14:19:46] info: [auth:446ppp] Starting auth for GET /compatibility/factors/invalid/147166
[2026-01-28 14:19:46] info: [auth:446ppp] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:446ppp] Token from header: true
[2026-01-28 14:19:46] info: [auth:446ppp] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:0q1kw] Starting auth for GET /factors/invalid/147166
[2026-01-28 14:19:46] info: [auth:0q1kw] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:0q1kw] Token from header: true
[2026-01-28 14:19:46] info: [auth:0q1kw] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] warn: [Validation] Input validation failed
[2026-01-28 14:19:46] info: [GET] /api/compatibility/factors/invalid/147166 - 400
[2026-01-28 14:19:46] info: [POST] /api/compatibility/predict
[2026-01-28 14:19:46] info: [auth:yfjwk] Starting auth for POST /compatibility/predict
[2026-01-28 14:19:46] info: [auth:yfjwk] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:yfjwk] Token from header: true
[2026-01-28 14:19:46] info: [auth:yfjwk] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:u04qte] Starting auth for POST /predict
[2026-01-28 14:19:46] info: [auth:u04qte] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:u04qte] Token from header: true
[2026-01-28 14:19:46] info: [auth:u04qte] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 73580 and horse 147166
[2026-01-28 14:19:46] info: [ownership] Found owned groom 73580 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [ownership] Found owned horse 147166 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: excellent quality, 0.95 success probability
[2026-01-28 14:19:46] info: [POST] /api/compatibility/predict - 200
[2026-01-28 14:19:46] info: [POST] /api/compatibility/predict
[2026-01-28 14:19:46] info: [auth:4zt0r8] Starting auth for POST /compatibility/predict
[2026-01-28 14:19:46] info: [auth:4zt0r8] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:4zt0r8] Token from header: true
[2026-01-28 14:19:46] info: [auth:4zt0r8] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:gfmvc] Starting auth for POST /predict
[2026-01-28 14:19:46] info: [auth:gfmvc] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:gfmvc] Token from header: true
[2026-01-28 14:19:46] info: [auth:gfmvc] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 73581 and horse 147166
[2026-01-28 14:19:46] info: [ownership] Found owned groom 73581 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [ownership] Found owned horse 147166 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: fair quality, 0.52 success probability
[2026-01-28 14:19:46] info: [POST] /api/compatibility/predict - 200
[2026-01-28 14:19:46] info: [POST] /api/compatibility/recommendations
[2026-01-28 14:19:46] info: [auth:s16if25] Starting auth for POST /compatibility/recommendations
[2026-01-28 14:19:46] info: [auth:s16if25] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:s16if25] Token from header: true
[2026-01-28 14:19:46] info: [auth:s16if25] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:dgtvbi] Starting auth for POST /recommendations
[2026-01-28 14:19:46] info: [auth:dgtvbi] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:dgtvbi] Token from header: true
[2026-01-28 14:19:46] info: [auth:dgtvbi] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.getRecommendations] Getting recommendations for horse 147166
[2026-01-28 14:19:46] info: [ownership] Found owned horse 147166 for user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.getRecommendations] Found 0 groom recommendations
[2026-01-28 14:19:46] info: [POST] /api/compatibility/recommendations - 200
[2026-01-28 14:19:46] info: [GET] /api/compatibility/trends/73580/147166
[2026-01-28 14:19:46] info: [auth:pgrhwh] Starting auth for GET /compatibility/trends/73580/147166
[2026-01-28 14:19:46] info: [auth:pgrhwh] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:pgrhwh] Token from header: true
[2026-01-28 14:19:46] info: [auth:pgrhwh] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:97kibw] Starting auth for GET /trends/73580/147166
[2026-01-28 14:19:46] info: [auth:97kibw] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:97kibw] Token from header: true
[2026-01-28 14:19:46] info: [auth:97kibw] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [ownership] Validated ownership: user bc0aca72-d653-42d7-9a9b-a285d1150f34 owns groom 73580
[2026-01-28 14:19:46] info: [ownership] Validated ownership: user bc0aca72-d653-42d7-9a9b-a285d1150f34 owns horse 147166
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.getCompatibilityTrends] Analyzing trends for groom 73580 and horse 147166
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.getCompatibilityTrends] Trends analyzed: insufficient_data trend with 0 data points
[2026-01-28 14:19:46] info: [GET] /api/compatibility/trends/73580/147166 - 200
[2026-01-28 14:19:46] info: [GET] /api/compatibility/config
[2026-01-28 14:19:46] info: [auth:gfommi] Starting auth for GET /compatibility/config
[2026-01-28 14:19:46] info: [auth:gfommi] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:gfommi] Token from header: true
[2026-01-28 14:19:46] info: [auth:gfommi] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [auth:qoklm] Starting auth for GET /config
[2026-01-28 14:19:46] info: [auth:qoklm] Token from cookie: false
[2026-01-28 14:19:46] info: [auth:qoklm] Token from header: true
[2026-01-28 14:19:46] info: [auth:qoklm] Authenticated user bc0aca72-d653-42d7-9a9b-a285d1150f34
[2026-01-28 14:19:46] info: [dynamicCompatibilityController.getCompatibilityConfig] Getting compatibility system configuration
[2026-01-28 14:19:46] info: [GET] /api/compatibility/config - 200
FAIL tests/controllers/dynamicCompatibilityController.test.mjs
  Dynamic Compatibility Controller API
    POST /api/compatibility/calculate
      ‚àö should calculate high compatibility for calm groom with fearful horse (75 ms)
      ‚àö should calculate low compatibility for energetic groom with fearful horse (44 ms)
      ‚àö should return 400 for missing required fields (29 ms)
      ‚àö should return 401 for missing authentication (19 ms)
    GET /api/compatibility/factors/:groomId/:horseId
      ‚àö should analyze compatibility factors comprehensively (42 ms)
      ‚àö should return 400 for invalid groom ID (26 ms)
    POST /api/compatibility/predict
      ‚àö should predict positive outcome for good compatibility (47 ms)
      ‚àö should predict negative outcome for poor compatibility (42 ms)
    POST /api/compatibility/recommendations
      √ó should recommend optimal grooms for specific horse and context (37 ms)
    GET /api/compatibility/trends/:groomId/:horseId
      ‚àö should analyze compatibility trends with insufficient data (34 ms)
    GET /api/compatibility/config
      ‚àö should return compatibility system configuration (32 ms)

  ‚óè Dynamic Compatibility Controller API ‚Ä∫ POST /api/compatibility/recommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 331 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 332 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 333 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                      [31m[1m^[22m[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 335 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 336 |[39m[0m

      at Object.<anonymous> (tests/controllers/dynamicCompatibilityController.test.mjs:333:54)

[2026-01-28 14:19:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:47] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:47] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:47] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:47] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:47] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:48] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:48] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:48] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:48] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:48] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:48] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:48] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:48] info: [Sentry] Sentry error handler not attached (DSN not configured).
  console.error
    [ERROR] Failed in beforeAll setup: PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:
    
    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }
    
    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.
        at kn (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:29:1363)
        at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7102)
        at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
        at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
        at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
        at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\traitRoutes.test.mjs:52:19) {
      clientVersion: '6.8.2'
    }

    [0m [90m 69 |[39m       console[33m.[39mlog([32m'[DEBUG] Created test horse:'[39m[33m,[39m testHorse[33m.[39mid[33m,[39m [32m'owned by user:'[39m[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m 70 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 71 |[39m       console[33m.[39merror([32m'[ERROR] Failed in beforeAll setup:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 72 |[39m       [36mthrow[39m error[33m;[39m
     [90m 73 |[39m     }
     [90m 74 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:71:15)

FAIL tests/integration/traitRoutes.test.mjs
  Trait Routes Integration Tests
    POST /api/traits/discover/:horseId
      √ó should trigger trait discovery successfully
      √ó should return validation error for invalid horse ID
      √ó should return 404 for non-existent horse
      √ó should handle optional parameters correctly
    GET /api/traits/horse/:horseId
      √ó should get horse traits successfully
      √ó should return validation error for invalid horse ID
      √ó should return 404 for non-existent horse
    GET /api/traits/definitions
      √ó should get all trait definitions
      √ó should filter traits by type
      √ó should return validation error for invalid type
    GET /api/traits/discovery-status/:horseId
      √ó should get discovery status successfully
      √ó should return validation error for invalid horse ID
      √ó should return 404 for non-existent horse (1 ms)
    POST /api/traits/batch-discover
      √ó should process batch discovery successfully
      √ó should return validation error for empty horse IDs array
      √ó should return validation error for too many horse IDs
      √ó should return validation error for invalid horse IDs
      √ó should handle mix of valid and invalid horse IDs

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should trigger trait discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should handle optional parameters correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should get horse traits successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should get all trait definitions

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should filter traits by type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should return validation error for invalid type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should get discovery status successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should process batch discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for empty horse IDs array

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for too many horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should handle mix of valid and invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

[2026-01-28 14:19:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:49] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:49] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:49] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:49] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:49] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:49] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:49] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:49] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:49] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:49] info: [POST] /api/auth/register
[2026-01-28 14:19:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:19:50] info: [EmailVerification] Created verification token
[2026-01-28 14:19:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:19:50] info: [authController.register] Verification email sent
[2026-01-28 14:19:50] info: [POST] /api/auth/register - 201
[2026-01-28 14:19:50] info: [POST] /api/training/train
[2026-01-28 14:19:50] info: [auth:e9dn1c] Starting auth for POST /training/train
[2026-01-28 14:19:50] info: [auth:e9dn1c] Token from cookie: false
[2026-01-28 14:19:50] info: [auth:e9dn1c] Token from header: true
[2026-01-28 14:19:50] info: [auth:e9dn1c] Authenticated user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [ownership] Found owned horse 147169 for user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [trainingController.trainRouteHandler] Training request for horse 147169 in Racing
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Attempting to train horse 147169 in Racing
[2026-01-28 14:19:50] info: [trainingController.canTrain] Checking training eligibility for horse 147169 in Racing
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Getting age for horse 147169
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Horse 147169 is 2 years old
[2026-01-28 14:19:50] info: [trainingController.canTrain] Horse 147169 is too young (2 years old)
[2026-01-28 14:19:50] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:19:50] info: [POST] /api/training/train - 400
[2026-01-28 14:19:50] info: [POST] /api/training/train
[2026-01-28 14:19:50] info: [auth:gv88xb] Starting auth for POST /training/train
[2026-01-28 14:19:50] info: [auth:gv88xb] Token from cookie: false
[2026-01-28 14:19:50] info: [auth:gv88xb] Token from header: true
[2026-01-28 14:19:50] info: [auth:gv88xb] Authenticated user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [ownership] Found owned horse 147170 for user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [trainingController.trainRouteHandler] Training request for horse 147170 in Racing
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Attempting to train horse 147170 in Racing
[2026-01-28 14:19:50] info: [trainingController.canTrain] Checking training eligibility for horse 147170 in Racing
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Getting age for horse 147170
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Horse 147170 is 4 years old
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147170 across all disciplines
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147170
[2026-01-28 14:19:50] info: [trainingController.canTrain] Horse 147170 is eligible to train in Racing
[2026-01-28 14:19:50] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 147170)
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Horse 147170 has traits: 
[2026-01-28 14:19:50] info: [trainingModel.logTrainingSession] Logging training session for horse 147170 in Racing
[2026-01-28 14:19:50] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9011
[2026-01-28 14:19:50] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147170 by +5
[2026-01-28 14:19:50] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147170 by +5
[2026-01-28 14:19:50] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147170: 0 -> 5
[2026-01-28 14:19:50] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147170
[2026-01-28 14:19:50] info: [xpLogModel.logXpEvent] Logging XP event: User 4ecb50dc-1c69-4c15-954c-08a3af525516, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Racing
[2026-01-28 14:19:50] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4451, User 4ecb50dc-1c69-4c15-954c-08a3af525516, Amount: 5
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Awarded 5 XP to user 4ecb50dc-1c69-4c15-954c-08a3af525516 for training
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Successfully trained horse 147170 in Racing (Log ID: 9011, Score +5)
[2026-01-28 14:19:50] info: [POST] /api/training/train - 200
[2026-01-28 14:19:50] info: [POST] /api/training/train
[2026-01-28 14:19:50] info: [auth:10dmxr] Starting auth for POST /training/train
[2026-01-28 14:19:50] info: [auth:10dmxr] Token from cookie: false
[2026-01-28 14:19:50] info: [auth:10dmxr] Token from header: true
[2026-01-28 14:19:50] info: [auth:10dmxr] Authenticated user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [ownership] Found owned horse 147170 for user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [trainingController.trainRouteHandler] Training request for horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Attempting to train horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingController.canTrain] Checking training eligibility for horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Getting age for horse 147170
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Horse 147170 is 4 years old
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147170 across all disciplines
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147170: Wed Jan 28 2026 14:19:50 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:19:50] info: [trainingController.canTrain] Horse 147170 still in cooldown for any training (7 days remaining)
[2026-01-28 14:19:50] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:19:50] info: [POST] /api/training/train - 400
[2026-01-28 14:19:50] info: [POST] /api/training/train
[2026-01-28 14:19:50] info: [auth:sah4ho] Starting auth for POST /training/train
[2026-01-28 14:19:50] info: [auth:sah4ho] Token from cookie: false
[2026-01-28 14:19:50] info: [auth:sah4ho] Token from header: true
[2026-01-28 14:19:50] info: [auth:sah4ho] Authenticated user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [ownership] Found owned horse 147170 for user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [trainingController.trainRouteHandler] Training request for horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Attempting to train horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingController.canTrain] Checking training eligibility for horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Getting age for horse 147170
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Horse 147170 is 4 years old
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147170 across all disciplines
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147170: Wed Jan 28 2026 14:19:50 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:19:50] info: [trainingController.canTrain] Horse 147170 still in cooldown for any training (7 days remaining)
[2026-01-28 14:19:50] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:19:50] info: [POST] /api/training/train - 400
[2026-01-28 14:19:50] info: [POST] /api/training/train
[2026-01-28 14:19:50] info: [auth:lgfhy9] Starting auth for POST /training/train
[2026-01-28 14:19:50] info: [auth:lgfhy9] Token from cookie: false
[2026-01-28 14:19:50] info: [auth:lgfhy9] Token from header: true
[2026-01-28 14:19:50] info: [auth:lgfhy9] Authenticated user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [ownership] Found owned horse 147170 for user 4ecb50dc-1c69-4c15-954c-08a3af525516
[2026-01-28 14:19:50] info: [trainingController.trainRouteHandler] Training request for horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Attempting to train horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingController.canTrain] Checking training eligibility for horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Getting age for horse 147170
[2026-01-28 14:19:50] info: [trainingModel.getHorseAge] Horse 147170 is 4 years old
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147170 across all disciplines
[2026-01-28 14:19:50] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147170: Tue Jan 20 2026 14:19:50 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:19:50] info: [trainingController.canTrain] Horse 147170 is eligible to train in Dressage
[2026-01-28 14:19:50] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 147170)
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Horse 147170 has traits: 
[2026-01-28 14:19:50] info: [trainingModel.logTrainingSession] Logging training session for horse 147170 in Dressage
[2026-01-28 14:19:50] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9012
[2026-01-28 14:19:50] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147170 by +5
[2026-01-28 14:19:50] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147170 by +5
[2026-01-28 14:19:50] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147170: 0 -> 5
[2026-01-28 14:19:50] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147170
[2026-01-28 14:19:50] info: [xpLogModel.logXpEvent] Logging XP event: User 4ecb50dc-1c69-4c15-954c-08a3af525516, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Dressage
[2026-01-28 14:19:50] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4452, User 4ecb50dc-1c69-4c15-954c-08a3af525516, Amount: 5
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Awarded 5 XP to user 4ecb50dc-1c69-4c15-954c-08a3af525516 for training
[2026-01-28 14:19:50] info: [trainingController.trainHorse] Successfully trained horse 147170 in Dressage (Log ID: 9012, Score +5)
[2026-01-28 14:19:50] info: [POST] /api/training/train - 200
PASS tests/integration/trainingProgression.integration.test.mjs
  üèãÔ∏è INTEGRATION: Complete Training Progression Workflow
    üîê STEP 1: User Setup & Authentication
      ‚àö should create user for training progression testing (360 ms)
    üê¥ STEP 2: Horse Creation & Age Validation
      ‚àö should create young horse (under training age) (10 ms)
      ‚àö should create mature horse (training eligible) (6 ms)
    üö´ STEP 3: Age Restriction Enforcement
      ‚àö should block training for young horse (under 3 years) (40 ms)
    üèãÔ∏è STEP 4: First Training Session
      ‚àö should successfully train mature horse for first time (69 ms)
    ‚è∞ STEP 5: Training Cooldown Management
      ‚àö should enforce 7-day cooldown period (36 ms)
      ‚àö should allow training after cooldown expires (using test data manipulation) (93 ms)
    üéØ STEP 6: User Progression Tracking
      ‚àö should track user XP and level progression from training (3 ms)
    üèÜ STEP 7: Competition Readiness Validation
      ‚àö should validate horse is ready for competition (4 ms)
    üéä STEP 8: End-to-End Workflow Validation
      ‚àö should validate complete training progression integrity (7 ms)
      ‚àö should validate all business rules were enforced throughout progression (4 ms)

[2026-01-28 14:19:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:51] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:51] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:51] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:51] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:51] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:51] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:51] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:51] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:51] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/groomSalarySystem.test.mjs
  Groom Salary System
    Salary Calculation
      √ó should calculate correct weekly salary for expert groom with specialty (91 ms)
      √ó should calculate correct salary for novice groom (19 ms)
      √ó should calculate user total salary cost (18 ms)
    API Endpoints
      √ó should get user salary cost (21 ms)
      √ó should get salary summary (16 ms)
      √ó should get groom salary (15 ms)
      √ó should get salary payment history (14 ms)
      √ó should get cron job status (13 ms)
      √ó should validate groom ownership (14 ms)
    Salary Processing
      √ó should process weekly salaries successfully (14 ms)
      √ó should handle insufficient funds (15 ms)
      √ó should trigger salary processing via API (14 ms)
    Authentication
      √ó should require authentication for GET /api/groom-salaries/cost (13 ms)
      √ó should require authentication for GET /api/groom-salaries/summary (13 ms)
      √ó should require authentication for GET /api/groom-salaries/history (14 ms)
      √ó should require authentication for GET /api/groom-salaries/groom/:groomId/salary (13 ms)
      √ó should require authentication for GET /api/groom-salaries/status (13 ms)
      √ó should require authentication for POST /api/groom-salaries/process (13 ms)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct weekly salary for expert groom with specialty

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73583,
        foalId: 147171,
        user: {
        ~~~~
          connect: {
            id: "509bbd72-0ec4-48d8-9763-fca5d7ff15cb"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct salary for novice groom

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73584,
        foalId: 147172,
        user: {
        ~~~~
          connect: {
            id: "b70238a0-889a-47b3-bd1d-55f91e711ed9"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate user total salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73585,
        foalId: 147173,
        user: {
        ~~~~
          connect: {
            id: "6fff3fe9-4bb8-4581-9108-a926df6c52eb"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get user salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73586,
        foalId: 147174,
        user: {
        ~~~~
          connect: {
            id: "0a7ac0f1-f982-45e2-8365-5c4bb062ac94"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73587,
        foalId: 147175,
        user: {
        ~~~~
          connect: {
            id: "98271dfe-4a21-4903-bb5f-007d4dd0d246"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get groom salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73588,
        foalId: 147176,
        user: {
        ~~~~
          connect: {
            id: "05ac7fc9-ef95-4260-ac7e-0353a40a11f9"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary payment history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73589,
        foalId: 147177,
        user: {
        ~~~~
          connect: {
            id: "e86439f4-c5a9-4287-bf4a-f2f6e0920d02"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get cron job status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73590,
        foalId: 147178,
        user: {
        ~~~~
          connect: {
            id: "02648dc3-f7ce-4cc8-8045-1c0ff4261d5e"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should validate groom ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73591,
        foalId: 147179,
        user: {
        ~~~~
          connect: {
            id: "b7c48a2a-42ab-47f9-ac62-17a2ae9788cd"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should process weekly salaries successfully

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73592,
        foalId: 147180,
        user: {
        ~~~~
          connect: {
            id: "e6455e2a-5710-42d7-8b01-6bca88437b16"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should handle insufficient funds

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73593,
        foalId: 147181,
        user: {
        ~~~~
          connect: {
            id: "5f032741-98ab-4b37-8e03-a6e523fa9f1d"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should trigger salary processing via API

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73594,
        foalId: 147182,
        user: {
        ~~~~
          connect: {
            id: "bf652a74-c7c9-4a93-a3fa-c2c86f43ece6"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73595,
        foalId: 147183,
        user: {
        ~~~~
          connect: {
            id: "aea0698e-ba14-4ff0-8ed7-835e2e8ac483"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73596,
        foalId: 147184,
        user: {
        ~~~~
          connect: {
            id: "d1010f4d-0976-4a7f-8b35-712a18e1a228"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73597,
        foalId: 147185,
        user: {
        ~~~~
          connect: {
            id: "f11b828e-87e4-4a07-8d4a-81b86a815b45"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/groom/:groomId/salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73598,
        foalId: 147186,
        user: {
        ~~~~
          connect: {
            id: "59db625c-3edf-4cb7-aebe-2f34232e9e06"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73599,
        foalId: 147187,
        user: {
        ~~~~
          connect: {
            id: "8ff8cfcc-af4c-49da-b7cf-4f8a5cc0f286"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for POST /api/groom-salaries/process

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73600,
        foalId: 147188,
        user: {
        ~~~~
          connect: {
            id: "1cf942b0-1df3-4e35-8eaf-338dcc69f891"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

[2026-01-28 14:19:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:52] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:52] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:52] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:52] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:52] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:52] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:52] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:52] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:52] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/traitTimeline.test.mjs
  Trait Timeline System
    Trait Timeline Data Aggregation
      √ó should aggregate trait timeline with milestone and groom data (81 ms)
      √ó should include detailed trait context and groom involvement (15 ms)
      √ó should filter traits by age cutoff (before age 4) (14 ms)
      √ó should categorize traits by type and rarity (16 ms)
      √ó should handle horses with no trait history (14 ms)
    Timeline Formatting and Organization
      √ó should organize events by age ranges (14 ms)
      √ó should include bond and stress trend analysis (12 ms)
    API Endpoints
      √ó should get trait timeline card via API (12 ms)
      √ó should require authentication for trait card endpoint (12 ms)
      √ó should return 404 for non-existent horse (14 ms)
      √ó should handle horses with empty trait timeline (11 ms)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should aggregate trait timeline with milestone and groom data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993006",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.006Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "151e433b-9f26-4048-8af0-9c4c6e9ff447"
          }
        },
        breedId: 31564,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should include detailed trait context and groom involvement

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993038",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.038Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "113a75ac-1bbe-476e-8b83-829b025dd407"
          }
        },
        breedId: 31565,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should filter traits by age cutoff (before age 4)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993053",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.053Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "308666c6-fecd-4339-95eb-524b4f75a8dd"
          }
        },
        breedId: 31566,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should categorize traits by type and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993068",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.068Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "784333b6-4f25-4af7-8651-58cce486d2be"
          }
        },
        breedId: 31567,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993084",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.084Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "750472f6-0ea3-4342-9b00-ddd0998f246b"
          }
        },
        breedId: 31568,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should organize events by age ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993098",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.098Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ee201bfc-da0b-45ab-b46e-314b15a266ac"
          }
        },
        breedId: 31569,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should include bond and stress trend analysis

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993113",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.113Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "eb228c80-9c11-496e-afd0-37961ee41c9b"
          }
        },
        breedId: 31570,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should get trait timeline card via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993125",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.125Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "38a93a37-3d90-404f-a66b-8336016377f9"
          }
        },
        breedId: 31571,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for trait card endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993136",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.136Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2abc70f9-80be-40ef-b708-433e1e20ab54"
          }
        },
        breedId: 31572,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993151",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.151Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1c626c3d-1a08-4421-998b-0d41e278878f"
          }
        },
        breedId: 31573,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should handle horses with empty trait timeline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993163",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.163Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "6fa975ba-5034-4b33-97d5-c13bdaa4758a"
          }
        },
        breedId: 31574,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

[2026-01-28 14:19:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:54] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:54] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:54] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:54] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:54] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:54] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:54] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:54] info: [POST] /api/auth/register
[2026-01-28 14:19:54] warn: [MemoryMonitoring] Memory threshold exceeded: 570MB
[2026-01-28 14:19:54] info: [TokenRotation] Created new token pair
[2026-01-28 14:19:54] info: [EmailVerification] Created verification token
[2026-01-28 14:19:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:19:54] info: [authController.register] Verification email sent
[2026-01-28 14:19:54] info: [POST] /api/auth/register - 201
FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  üêé INTEGRATION: Complete Horse Breeding Workflow
    üîê STEP 1: User Registration & Authentication
      ‚àö should register user and obtain authentication token (362 ms)
    üê¥ STEP 2: Horse Creation (Breeding Stock)
      ‚àö should create mare with quality traits (9 ms)
      ‚àö should create stallion with complementary traits (6 ms)
    ü§± STEP 3: Breeding Process & Foal Birth
      √ó should create foal with inherited and epigenetic traits (8 ms)
    üë• STEP 4: Groom Assignment & Care
      √ó should assign specialized foal care groom to newborn (1 ms)
      √ó should record groom interaction with foal (1 ms)
    üìà STEP 5: Foal Development Tracking
      √ó should track foal development progress (1 ms)
    üéØ STEP 6: End-to-End Workflow Validation
      √ó should validate complete breeding workflow integrity (1 ms)
      √ó should validate business rules are enforced throughout workflow (1 ms)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ü§± STEP 3: Breeding Process & Foal Birth ‚Ä∫ should create foal with inherited and epigenetic traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Foal",
        age: 0,
        breed: {
          connect: {
            id: 26468
          }
        },
        sex: "Colt",
        sireId: 147190,
        ~~~~~~
        damId: 147189,
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "2620745d-8e9d-42f6-974f-219493448233"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:54.732Z"),
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `sireId`. Did you mean `sire`? Available options are marked with ?.

    [0m [90m 225 |[39m
     [90m 226 |[39m       [90m// Create foal (simulating breeding result) with proper schema fields[39m
    [31m[1m>[22m[39m[90m 227 |[39m       foal [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m              [31m[1m^[22m[39m
     [90m 228 |[39m         data[33m:[39m {
     [90m 229 |[39m           name[33m:[39m [32m'Integration Test Foal'[39m[33m,[39m
     [90m 230 |[39m           age[33m:[39m [35m0[39m[33m,[39m [90m// Newborn[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:227:14)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should assign specialized foal care groom to newborn

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 282 |[39m
     [90m 283 |[39m       [90m// Ensure foal has a groom assignment[39m
    [31m[1m>[22m[39m[90m 284 |[39m       [36mconst[39m assignmentResult [33m=[39m [36mawait[39m ensureDefaultGroomAssignment(foal[33m.[39mid[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m     |[39m                                                                        [31m[1m^[22m[39m
     [90m 285 |[39m
     [90m 286 |[39m       expect(assignmentResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 287 |[39m       expect(assignmentResult[33m.[39massignment [33m||[39m assignmentResult[33m.[39mnewAssignment)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:284:72)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 304 |[39m
     [90m 305 |[39m       [36mconst[39m interactionData [33m=[39m {
    [31m[1m>[22m[39m[90m 306 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m 308 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 309 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:306:22)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üìà STEP 5: Foal Development Tracking ‚Ä∫ should track foal development progress

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 341 |[39m       [36mconst[39m { getFoalDevelopment } [33m=[39m [36mawait[39m [36mimport[39m([32m'../../models/foalModel.js'[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m developmentData [33m=[39m [36mawait[39m getFoalDevelopment(foal[33m.[39mid)[33m;[39m
     [90m     |[39m                                                             [31m[1m^[22m[39m
     [90m 344 |[39m
     [90m 345 |[39m       expect(developmentData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(developmentData[33m.[39mfoal[33m.[39mid)[33m.[39mtoBe(foal[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:343:61)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate complete breeding workflow integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 361 |[39m       [90m// VERIFY: Complete family tree exists[39m
     [90m 362 |[39m       [36mconst[39m foalWithFamily [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 363 |[39m         where[33m:[39m { id[33m:[39m foal[33m.[39mid }[33m,[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 364 |[39m         include[33m:[39m {
     [90m 365 |[39m           sire[33m:[39m [36mtrue[39m[33m,[39m
     [90m 366 |[39m           dam[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:363:27)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 395 |[39m     it([32m'should validate business rules are enforced throughout workflow'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 396 |[39m       [90m// Age validation[39m
    [31m[1m>[22m[39m[90m 397 |[39m       expect(foal[33m.[39mage)[33m.[39mtoBe([35m0[39m)[33m;[39m [90m// Newborn[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 398 |[39m       expect(mare[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 399 |[39m       expect(stallion[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 400 |[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:397:19)

[2026-01-28 14:19:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:55] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:55] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:55] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:55] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:55] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:55] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:55] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:19:55] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:19:55] warn: [MemoryMonitoring] Memory threshold exceeded: 630MB
[2026-01-28 14:19:55] info: [auth:29fb5l] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:19:55] info: [auth:29fb5l] Token from cookie: false
[2026-01-28 14:19:55] info: [auth:29fb5l] Token from header: true
[2026-01-28 14:19:55] info: [auth:29fb5l] Authenticated user undefined
[2026-01-28 14:19:55] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:55] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:19:55] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:19:55] warn: [MemoryMonitoring] Memory threshold exceeded: 634MB
[2026-01-28 14:19:55] info: [auth:dnjqr] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:19:55] info: [auth:dnjqr] Token from cookie: false
[2026-01-28 14:19:55] info: [auth:dnjqr] Token from header: true
[2026-01-28 14:19:55] info: [auth:dnjqr] Authenticated user undefined
[2026-01-28 14:19:55] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:55] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:19:55] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:19:55] warn: [MemoryMonitoring] Memory threshold exceeded: 635MB
[2026-01-28 14:19:55] info: [auth:4gp6n8] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:19:55] info: [auth:4gp6n8] Token from cookie: false
[2026-01-28 14:19:55] info: [auth:4gp6n8] Token from header: true
[2026-01-28 14:19:55] info: [auth:4gp6n8] Authenticated user undefined
[2026-01-28 14:19:55] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:55] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:19:56] info: [POST] /api/foals/99999/enrichment
[2026-01-28 14:19:56] warn: [MemoryMonitoring] Memory threshold exceeded: 636MB
[2026-01-28 14:19:56] info: [auth:s1fdri] Starting auth for POST /foals/99999/enrichment
[2026-01-28 14:19:56] info: [auth:s1fdri] Token from cookie: false
[2026-01-28 14:19:56] info: [auth:s1fdri] Token from header: true
[2026-01-28 14:19:56] info: [auth:s1fdri] Authenticated user undefined
[2026-01-28 14:19:56] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:56] info: [POST] /api/foals/99999/enrichment - 401
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:19:56] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB
[2026-01-28 14:19:56] info: [auth:cz7g1d] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:19:56] info: [auth:cz7g1d] Token from cookie: false
[2026-01-28 14:19:56] info: [auth:cz7g1d] Token from header: true
[2026-01-28 14:19:56] info: [auth:cz7g1d] Authenticated user undefined
[2026-01-28 14:19:56] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:19:56] warn: [MemoryMonitoring] Memory threshold exceeded: 638MB
[2026-01-28 14:19:56] info: [auth:q3yi3i] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:19:56] info: [auth:q3yi3i] Token from cookie: false
[2026-01-28 14:19:56] info: [auth:q3yi3i] Token from header: true
[2026-01-28 14:19:56] info: [auth:q3yi3i] Authenticated user undefined
[2026-01-28 14:19:56] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:19:56] warn: [MemoryMonitoring] Memory threshold exceeded: 639MB
[2026-01-28 14:19:56] info: [auth:wvx1f9] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:19:56] info: [auth:wvx1f9] Token from cookie: false
[2026-01-28 14:19:56] info: [auth:wvx1f9] Token from header: true
[2026-01-28 14:19:56] info: [auth:wvx1f9] Authenticated user undefined
[2026-01-28 14:19:56] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:19:56] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB
[2026-01-28 14:19:56] info: [auth:r0l73] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:19:56] info: [auth:r0l73] Token from cookie: false
[2026-01-28 14:19:56] info: [auth:r0l73] Token from header: true
[2026-01-28 14:19:56] info: [auth:r0l73] Authenticated user undefined
[2026-01-28 14:19:56] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:56] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:19:56] info: [POST] /api/foals/999/enrichment
[2026-01-28 14:19:56] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB
[2026-01-28 14:19:56] info: [auth:9k0tmj] Starting auth for POST /foals/999/enrichment
[2026-01-28 14:19:56] info: [auth:9k0tmj] Token from cookie: false
[2026-01-28 14:19:56] info: [auth:9k0tmj] Token from header: true
[2026-01-28 14:19:56] info: [auth:9k0tmj] Authenticated user undefined
[2026-01-28 14:19:56] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:19:56] info: [POST] /api/foals/999/enrichment - 401
FAIL tests/foalEnrichmentIntegration.test.mjs
  üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation
    POST /api/foals/:foalId/enrichment
      √ó should complete enrichment activity successfully (55 ms)
      √ó should update horse bond_score and stress_level in database (27 ms)
      √ó should validate request parameters (26 ms)
      √ó should return 404 for non-existent foal (26 ms)
      √ó should return 400 for inappropriate activity for day (27 ms)
      √ó should accept different activity name formats (28 ms)
      √ó should handle all day 3 activities (26 ms)
      √ó should create training history records for each activity (29 ms)
      √ó should handle edge cases with bond and stress levels (28 ms)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should complete enrichment activity successfully

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 172 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 173 |[39m         })
    [31m[1m>[22m[39m[90m 174 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 175 |[39m
     [90m 176 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 177 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Trailer Exposure'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:174:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should update horse bond_score and stress_level in database

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 234 |[39m           activity[33m:[39m [32m'Halter Introduction'[39m[33m,[39m
     [90m 235 |[39m         })
    [31m[1m>[22m[39m[90m 236 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 237 |[39m
     [90m 238 |[39m       [90m// Verify horse was updated in database[39m
     [90m 239 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:236:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should validate request parameters

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 259 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 260 |[39m         })
    [31m[1m>[22m[39m[90m 261 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 262 |[39m
     [90m 263 |[39m       [90m// Missing activity[39m
     [90m 264 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:261:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 404 for non-existent foal

    expected 404 "Not Found", got 401 "Unauthorized"

    [0m [90m 314 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 315 |[39m         })
    [31m[1m>[22m[39m[90m 316 |[39m         [33m.[39mexpect([35m404[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 317 |[39m
     [90m 318 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 319 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:316:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 400 for inappropriate activity for day

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 329 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m [90m// This is a day 3 activity[39m
     [90m 330 |[39m         })
    [31m[1m>[22m[39m[90m 331 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 332 |[39m
     [90m 333 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not appropriate for day 0'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:331:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should accept different activity name formats

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 345 |[39m           activity[33m:[39m [32m'leading_practice'[39m[33m,[39m
     [90m 346 |[39m         })
    [31m[1m>[22m[39m[90m 347 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Test exact name[39m
     [90m 350 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:347:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle all day 3 activities

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 382 |[39m             activity[33m,[39m
     [90m 383 |[39m           })
    [31m[1m>[22m[39m[90m 384 |[39m           [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m            [31m[1m^[22m[39m
     [90m 385 |[39m
     [90m 386 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39mactivity[33m.[39mname)[33m.[39mtoBe(activity)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:384:12)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should create training history records for each activity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 414 |[39m           activity[33m:[39m [32m'Feeding Assistance'[39m[33m,[39m
     [90m 415 |[39m         })
    [31m[1m>[22m[39m[90m 416 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 417 |[39m
     [90m 418 |[39m       [90m// Verify training record was created[39m
     [90m 419 |[39m       expect(mockPrisma[33m.[39mfoalTrainingHistory[33m.[39mcreate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:416:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle edge cases with bond and stress levels

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 461 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 462 |[39m         })
    [31m[1m>[22m[39m[90m 463 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 464 |[39m
     [90m 465 |[39m       [90m// Values should be capped at bounds[39m
     [90m 466 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mupdatedLevels[33m.[39mbondScore)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:463:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

[2026-01-28 14:19:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:57] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:57] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:57] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:57] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:57] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:57] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:57] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:57] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:57] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomBondingIntegration.test.mjs
  Groom Bonding System Integration
    New Grooming Tasks for Horses 3+ Years Old
      √ó should successfully process brushing interaction (91 ms)
      √ó should successfully process hand-walking interaction (23 ms)
      √ó should successfully process stall_care interaction (17 ms)
    Age Restrictions
      √ó should reject new grooming tasks for horses under 3 years old (16 ms)
    Bond Score Updates
      √ó should update horse bond score after grooming (16 ms)
      √ó should grant burnout immunity after 7 consecutive days (16 ms)
    Daily Interaction Limits
      √ó should enforce one grooming session per horse per day (14 ms)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process brushing interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147191,
        groomId: 73612,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997289_wxa7x"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process hand-walking interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147192,
        groomId: 73613,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997381_dkuwl"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process stall_care interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147193,
        groomId: 73614,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997403_9hfif"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Age Restrictions ‚Ä∫ should reject new grooming tasks for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147194,
        groomId: 73615,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997421_iq126"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should update horse bond score after grooming

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147195,
        groomId: 73616,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997437_lby8e"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should grant burnout immunity after 7 consecutive days

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147196,
        groomId: 73617,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997453_xdv17"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Daily Interaction Limits ‚Ä∫ should enforce one grooming session per horse per day

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147197,
        groomId: 73618,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997469_sh659"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

[2026-01-28 14:19:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:19:58] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:19:58] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:19:58] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:19:58] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:19:58] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:19:58] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:19:58] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:19:58] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:19:58] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomPersonalityTraitBonus.test.mjs
  Groom Personality Trait Bonus System - REAL SYSTEM TESTS
    Personality Compatibility Matrix
      √ó should correctly identify compatible personality-temperament pairs (78 ms)
      √ó should correctly identify incompatible personality-temperament pairs (12 ms)
      √ó should handle regular matches without high bond (10 ms)
    Personality Modifier Engine
      √ó should apply personality effects to milestone evaluation (10 ms)
      √ó should handle missing personality or temperament gracefully (9 ms)
    Enhanced Milestone Evaluation Integration
      √ó should integrate personality effects into milestone evaluation (9 ms)
      √ó should handle milestone evaluation without groom assignment (12 ms)
    Compatible Grooms Utility
      √ó should return all compatible grooms for a temperament (8 ms)
      √ó should return empty array for unknown temperament (8 ms)
    API Endpoints - REAL HTTP TESTS
      GET /api/grooms/:id/profile
        √ó should return groom profile with personality information (8 ms)
        √ó should return 404 for non-existent groom (7 ms)
        √ó should return 400 for invalid groom ID (8 ms)
      GET /api/horses/:id/personality-impact
        √ó should return personality compatibility for horse (10 ms)
        √ó should return 404 for non-existent horse (7 ms)
        √ó should return 400 for horse without temperament (7 ms)
      POST /api/milestones/evaluate-milestone (with personality impact)
        √ó should evaluate milestone with personality effects (7 ms)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify compatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998907",
        user: {
          connect: {
            id: "16a0d49a-cbb8-4277-98e6-086178e02ebe"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.907Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31575,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify incompatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998934",
        user: {
          connect: {
            id: "d2bbe706-7cf4-4916-9af5-d58885c3c830"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.934Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31576,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should handle regular matches without high bond

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998945",
        user: {
          connect: {
            id: "dbca9aec-cc3b-4d17-8a3b-b68a7566ac2b"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.945Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31577,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should apply personality effects to milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998955",
        user: {
          connect: {
            id: "1d7395c2-2ca4-4192-8a3f-38e591fe2d82"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.955Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31578,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should handle missing personality or temperament gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998965",
        user: {
          connect: {
            id: "b271a03e-dd19-4f93-8490-a17a9ea12f45"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.965Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31579,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should integrate personality effects into milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998975",
        user: {
          connect: {
            id: "3e926057-f2c1-42f6-98df-8cd9d99d9de2"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.975Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31580,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should handle milestone evaluation without groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998988",
        user: {
          connect: {
            id: "3feb970a-7e8d-4a67-94db-9e68e3c93e84"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.988Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31581,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return all compatible grooms for a temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998996",
        user: {
          connect: {
            id: "73a62f2e-b99f-4729-b3e2-b0ec7fe9e626"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.996Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31582,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return empty array for unknown temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999004",
        user: {
          connect: {
            id: "4fa5489c-c958-40e1-8f9b-6c9973d4457f"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.004Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31583,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return groom profile with personality information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999012",
        user: {
          connect: {
            id: "153bc381-6856-496b-b0a3-916b74739e15"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.012Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31584,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 404 for non-existent groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999020",
        user: {
          connect: {
            id: "b063e04f-9905-4830-a478-2fc482bca6b7"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.020Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31585,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 400 for invalid groom ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999027",
        user: {
          connect: {
            id: "53256909-27f0-4823-bedc-324c0940a73e"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.027Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31586,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return personality compatibility for horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999035",
        user: {
          connect: {
            id: "a16c17b8-ddf3-4eb9-8bc3-5cd71f354666"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.035Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31587,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999046",
        user: {
          connect: {
            id: "d7791db7-c1d7-4151-a245-ce682ff28bb9"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.046Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31588,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 400 for horse without temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999053",
        user: {
          connect: {
            id: "230753a6-f6f3-4bd7-8c6f-a62adc3ec6cb"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.053Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31589,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ POST /api/milestones/evaluate-milestone (with personality impact) ‚Ä∫ should evaluate milestone with personality effects

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999061",
        user: {
          connect: {
            id: "8f13c216-fa1c-4b23-a756-4151af582a2f"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.061Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31590,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

[2026-01-28 14:19:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:19:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:19:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:19:59] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:00] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:00] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:00] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:00] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:00] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:00] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:00] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:00] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:00] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomBonusTraits.test.mjs
  Groom Bonus Traits System
    Groom Bonus Trait Management
      √ó should assign bonus traits to a groom (94 ms)
      √ó should validate bonus trait constraints (17 ms)
      √ó should get groom bonus traits (15 ms)
    Trait Assignment Logic Integration
      √ó should apply bonus probability when conditions are met (17 ms)
      √ó should not apply bonus when bond is too low (14 ms)
      √ó should not apply bonus when coverage is insufficient (15 ms)
    API Endpoints
      √ó should get groom bonus traits via API (14 ms)
      √ó should update groom bonus traits via API (12 ms)
      √ó should reject invalid bonus trait updates (12 ms)
      √ó should require authentication for bonus trait endpoints (13 ms)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should assign bonus traits to a groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000346",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.346Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c0df7fb8-c9ba-458c-a3d0-57afdb3a6217"
          }
        },
        breedId: 31591,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should validate bonus trait constraints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000381",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.381Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "fd0b83f9-fa18-46ab-b920-c8d82c6d5603"
          }
        },
        breedId: 31592,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should get groom bonus traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000397",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.397Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9b0c600e-2bac-48f5-87bc-fc779e5b662f"
          }
        },
        breedId: 31593,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should apply bonus probability when conditions are met

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000413",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.413Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0ffb5fe3-66e6-45ab-89ac-5540058452f7"
          }
        },
        breedId: 31594,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when bond is too low

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000430",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.430Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "10c03afb-4d1d-412f-b431-c5dad78750af"
          }
        },
        breedId: 31595,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when coverage is insufficient

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000444",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.444Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d7a53383-37e0-471f-94b3-9875ec2e4334"
          }
        },
        breedId: 31596,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should get groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000461",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.461Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "37c732f7-2efb-4a84-8f6c-ca787fd7e813"
          }
        },
        breedId: 31597,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should update groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000474",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.474Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "796eb687-cd73-4a1b-9842-651cf1048572"
          }
        },
        breedId: 31598,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should reject invalid bonus trait updates

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000486",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.486Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1a79fd98-f331-4d99-90e2-0817c0871801"
          }
        },
        breedId: 31599,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for bonus trait endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000500",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.500Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4cebf93f-198f-4683-9b65-616a69e04fcd"
          }
        },
        breedId: 31600,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

[2026-01-28 14:20:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:01] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:01] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:01] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:01] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:01] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:01] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:01] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/horseOverview.test.mjs
  üèá INTEGRATION: Horse Overview API - Real Database Integration
    GET /api/horses/:id/overview
      √ó should return complete horse overview data successfully (82 ms)
      √ó should return 404 for non-existent horse (15 ms)
      √ó should return validation error for invalid horse ID (15 ms)
      √ó should handle horse with no training history gracefully (16 ms)
      √ó should calculate next training date correctly when horse has recent training (13 ms)
      √ó should handle missing optional fields gracefully (13 ms)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return complete horse overview data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "1ff6503f-7409-4bc2-8691-7b3f0f7c5e78"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "2f403d6d-59f0-42a6-8ca6-2a104132daf4"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "91325cbb-2da4-4df9-9331-ad63540b6ded"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle horse with no training history gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "951c7a63-3427-4c58-9c4c-2540d7f885e5"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should calculate next training date correctly when horse has recent training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f7f00849-f629-4977-8655-e2722b07be0b"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle missing optional fields gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "dcf93642-3bd4-4f39-812d-75098b08aa6d"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

[2026-01-28 14:20:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:02] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:02] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:02] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:02] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:02] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:02] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:02] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/epigeneticTraitSystem.test.mjs
  Epigenetic Trait System Integration Tests
    API Endpoints
      √ó GET /api/epigenetic-traits/definitions should return flag and personality definitions (1 ms)
      √ó POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone
      √ó POST /api/epigenetic-traits/log-trait should log trait assignment
      √ó GET /api/epigenetic-traits/history/:horseId should return trait history
      √ó GET /api/epigenetic-traits/summary/:horseId should return development summary (1 ms)
      √ó GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights
      √ó Should handle authentication errors properly
      √ó Should handle horse ownership validation
      √ó Should validate input parameters properly
    Epigenetic Flag System
      √ó Should apply epigenetic flags based on care patterns
    Enhanced Milestone Evaluation
      √ó Should factor in groom personality bonuses
  Trait History Service
    ‚àö Should log and retrieve trait assignments correctly (58 ms)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/definitions should return flag and personality definitions

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/log-trait should log trait assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/history/:horseId should return trait history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/summary/:horseId should return development summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle authentication errors properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle horse ownership validation

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should validate input parameters properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Epigenetic Flag System ‚Ä∫ Should apply epigenetic flags based on care patterns

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Enhanced Milestone Evaluation ‚Ä∫ Should factor in groom personality bonuses

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

[2026-01-28 14:20:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:04] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:04] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:04] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:04] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:04] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:04] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:04] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/breedingPrediction.test.mjs
  Breeding Prediction System
    Inheritance Probability Logic
      √ó should calculate trait inheritance probabilities from parent history (82 ms)
      √ó should calculate flag inheritance scores (16 ms)
      √ó should handle horses with no trait history (13 ms)
      √ó should calculate temperament influence modifiers (14 ms)
    Child Prediction Algorithms
      √ó should predict trait categories with probability ranges (14 ms)
      √ó should handle epigenetic flag inheritance with stacking limits (13 ms)
    API Extension
      √ó should extend breeding-data endpoint with prediction data (11 ms)
      √ó should require authentication for breeding-data endpoint (10 ms)
      √ó should handle horses with minimal breeding data (12 ms)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate trait inheritance probabilities from parent history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004438",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.438Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2e45d44b-136c-4810-b2d2-be59653d714b"
          }
        },
        breedId: 31601,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate flag inheritance scores

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004471",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.471Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "244551a8-fad7-4124-9859-03e819f79d94"
          }
        },
        breedId: 31602,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004486",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.486Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "3babdaa0-16e4-4869-afc0-cc86fd5225cf"
          }
        },
        breedId: 31603,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate temperament influence modifiers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004500",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.500Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "64dd429e-2bd6-4371-84e0-42f35c2a8e82"
          }
        },
        breedId: 31604,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should predict trait categories with probability ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004514",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.514Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d31b2094-e44c-451a-8bd8-b3b54b5ab5d7"
          }
        },
        breedId: 31605,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should handle epigenetic flag inheritance with stacking limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004528",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.528Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9a40671e-8664-46e9-b37d-4743e5f9ea65"
          }
        },
        breedId: 31606,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should extend breeding-data endpoint with prediction data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004542",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.542Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "853d4f23-af95-4ec6-a1e0-7f10a1cb911f"
          }
        },
        breedId: 31607,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should require authentication for breeding-data endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004553",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.553Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0a1bd156-ea07-4c6d-a469-9d6358e9ae29"
          }
        },
        breedId: 31608,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should handle horses with minimal breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004563",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.563Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "03de72b8-a5c8-4ca2-9242-2265f2d4a0aa"
          }
        },
        breedId: 31609,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

[2026-01-28 14:20:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:05] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:05] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:05] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:05] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:05] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:05] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:05] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:05] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:05] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/groomHandlerSystem.test.mjs
  Groom Handler System Integration Tests
    1. Handler Assignment
      √ó should get the assigned handler for a horse (1 ms)
      √ó should return no handler for a horse without assignment (1 ms)
      √ó should validate horse ownership
    2. Handler Eligibility
      √ó should check handler eligibility for a conformation class
      √ó should validate conformation class
    3. Handler Configuration
      √ó should get handler configuration
    4. Handler Recommendations
      √ó should get handler recommendations for a horse
    5. Authentication and Authorization
      √ó should require authentication for all endpoints

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should get the assigned handler for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should return no handler for a horse without assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should validate horse ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should check handler eligibility for a conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should validate conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 3. Handler Configuration ‚Ä∫ should get handler configuration

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 4. Handler Recommendations ‚Ä∫ should get handler recommendations for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 5. Authentication and Authorization ‚Ä∫ should require authentication for all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

[2026-01-28 14:20:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:06] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:06] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:06] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:06] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:06] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:06] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:06] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:06] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:06] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/foalTaskLoggingIntegration.test.mjs
  Foal Task Logging Integration
    Task Log JSON Updates
      √ó should initialize task log with first enrichment task (94 ms)
      √ó should increment existing task count in task log (21 ms)
      √ó should add new task to existing task log (20 ms)
      √ó should handle multiple task types across different foals (22 ms)
    Streak Tracking Integration
      √ó should update lastGroomed timestamp on each interaction (20 ms)
      √ó should enforce daily interaction limits correctly (20 ms)
    Age-Based Task Eligibility Enforcement
      √ó should reject enrichment tasks for horses too old (16 ms)
      √ó should reject grooming tasks for horses too young (20 ms)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should initialize task log with first enrichment task

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147201,
        groomId: 73641,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-1"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should increment existing task count in task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147202,
        groomId: 73642,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-2"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should add new task to existing task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147203,
        groomId: 73643,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-3"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should handle multiple task types across different foals

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147204,
        groomId: 73644,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-4"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should update lastGroomed timestamp on each interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147205,
        groomId: 73645,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-5"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should enforce daily interaction limits correctly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147206,
        groomId: 73646,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-6"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject enrichment tasks for horses too old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147207,
        groomId: 73647,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-7"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject grooming tasks for horses too young

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147208,
        groomId: 73648,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-8"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

[2026-01-28 14:20:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:08] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:08] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:08] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:08] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:08] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:08] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:08] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/dashboardRoutes.test.mjs
  üè† INTEGRATION: Dashboard API - Real Database Integration
    GET /api/user/dashboard/:userId
      √ó should return complete dashboard data successfully (93 ms)
      √ó should return 400 for invalid user ID format (30 ms)
      √ó should return 401 for missing authentication (43 ms)
      √ó should return validation error for invalid user ID format (31 ms)
      √ó should handle user with no horses gracefully (30 ms)
      √ó should handle user with horses but no activity gracefully (20 ms)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return complete dashboard data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31610,
        ~~~~~~~
        user: {
          connect: {
            id: "ce7b8f84-0f64-4b4b-947a-9618d04d6f1a"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 400 for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31611,
        ~~~~~~~
        user: {
          connect: {
            id: "9f796b57-c662-44a9-ae79-f5c4ba71d220"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 401 for missing authentication

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 2",
        age: 4,
        sex: "Stallion",
        breedId: 31612,
        ~~~~~~~
        user: {
          connect: {
            id: "afb69229-bf21-4b49-aaac-e6dcdda7b4ca"
          }
        },
        dateOfBirth: new Date("2021-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        totalEarnings: 2200,
        disciplineScores: {
          Show Jumping: 18
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 1)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return validation error for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 2",
        age: 4,
        sex: "Stallion",
        breedId: 31613,
        ~~~~~~~
        user: {
          connect: {
            id: "0a02eed7-8a7e-4b40-bb98-a1eadedd4210"
          }
        },
        dateOfBirth: new Date("2021-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        totalEarnings: 2200,
        disciplineScores: {
          Show Jumping: 18
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 1)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with no horses gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 2",
        age: 4,
        sex: "Stallion",
        breedId: 31614,
        ~~~~~~~
        user: {
          connect: {
            id: "b00f18ed-8a21-472a-abc1-2f3d232f0101"
          }
        },
        dateOfBirth: new Date("2021-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        totalEarnings: 2200,
        disciplineScores: {
          Show Jumping: 18
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 1)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with horses but no activity gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31615,
        ~~~~~~~
        user: {
          connect: {
            id: "84e8fd1e-c288-4164-a2b5-5fbaff11706c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

[2026-01-28 14:20:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:09] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:09] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:09] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:09] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:09] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:09] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:09] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/legacyScoreTraitIntegration.test.mjs
  Legacy Score Trait Integration System
    Trait Score Calculation
      √ó should calculate trait score based on count, diversity, and rarity (81 ms)
      √ó should apply negative trait penalties (15 ms)
      √ó should only count traits gained before age 4 (14 ms)
      √ó should calculate groom care consistency from milestone logs (15 ms)
    Legacy Score Integration
      √ó should integrate trait score into overall legacy score (14 ms)
      √ó should calculate legacy score without traits (14 ms)
    API Endpoints
      √ó should get horse legacy score via API (13 ms)
      √ó should require authentication for legacy score endpoint (11 ms)
      √ó should return 404 for non-existent horse (11 ms)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate trait score based on count, diversity, and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628009957",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:09.957Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "29ab1c78-1f8f-4b43-831d-b40141736eb5"
          }
        },
        breedId: 31616,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should apply negative trait penalties

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628009989",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:09.989Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2570922f-244b-4085-ae22-599804eb8732"
          }
        },
        breedId: 31617,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should only count traits gained before age 4

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010004",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.004Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "e30c1a25-ee28-47c9-aaf3-9c2b0dd0bf56"
          }
        },
        breedId: 31618,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate groom care consistency from milestone logs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010018",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.018Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "93a30221-586a-4d9f-af25-14dc11ef06d9"
          }
        },
        breedId: 31619,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should integrate trait score into overall legacy score

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010033",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.033Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "a32a0ab6-cf9a-4532-8db7-21e396fe18d1"
          }
        },
        breedId: 31620,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should calculate legacy score without traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010047",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.047Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d570f9c0-9eae-4dab-98b1-a9f47ab5ca82"
          }
        },
        breedId: 31621,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should get horse legacy score via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010062",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.062Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "28a58bbb-aeac-4fc2-8d16-3d9135289f39"
          }
        },
        breedId: 31622,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for legacy score endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010074",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.074Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "092a4cd0-91af-4c47-b2fd-514d61568e82"
          }
        },
        breedId: 31623,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010086",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.086Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cfe25db3-48d5-4bdd-b345-409ef5dc6f41"
          }
        },
        breedId: 31624,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

[2026-01-28 14:20:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:10] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:11] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:11] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:11] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:11] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:11] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:11] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:11] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:11] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:11] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/test-user-uuid-123
[2026-01-28 14:20:11] warn: [MemoryMonitoring] Memory threshold exceeded: 919MB
[2026-01-28 14:20:11] info: [auth:79hw8c] Starting auth for GET /horses/trainable/test-user-uuid-123
[2026-01-28 14:20:11] info: [auth:79hw8c] Token from cookie: false
[2026-01-28 14:20:11] info: [auth:79hw8c] Token from header: true
[2026-01-28 14:20:11] info: [auth:79hw8c] Authenticated user test-user-uuid-123
[2026-01-28 14:20:11] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-user-uuid-123
[2026-01-28 14:20:11] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 2 horses
[2026-01-28 14:20:11] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user test-user-uuid-123
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456
[2026-01-28 14:20:11] warn: [MemoryMonitoring] Memory threshold exceeded: 923MB
[2026-01-28 14:20:11] info: [auth:pestz] Starting auth for GET /horses/trainable/nonexistent-user-uuid-456
[2026-01-28 14:20:11] info: [auth:pestz] Token from cookie: false
[2026-01-28 14:20:11] info: [auth:pestz] Token from header: true
[2026-01-28 14:20:11] info: [auth:pestz] Authenticated user test-user-uuid-123
[2026-01-28 14:20:11] warn: [horseRoutes] User test-user-uuid-123 attempted to access trainable horses for user nonexistent-user-uuid-456
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456 - 403
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/
[2026-01-28 14:20:11] warn: [MemoryMonitoring] Memory threshold exceeded: 924MB
[2026-01-28 14:20:11] info: [auth:jefo55] Starting auth for GET /horses/trainable/
[2026-01-28 14:20:11] info: [auth:jefo55] Token from cookie: false
[2026-01-28 14:20:11] info: [auth:jefo55] Token from header: true
[2026-01-28 14:20:11] info: [auth:jefo55] Authenticated user test-user-uuid-123
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/ - 400
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:20:11] warn: [MemoryMonitoring] Memory threshold exceeded: 923MB
[2026-01-28 14:20:11] info: [auth:wntme] Starting auth for GET /horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:20:11] info: [auth:wntme] Token from cookie: false
[2026-01-28 14:20:11] info: [auth:wntme] Token from header: true
[2026-01-28 14:20:11] info: [auth:wntme] Authenticated user test-user-uuid-123
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/test-user-uuid-123
[2026-01-28 14:20:11] warn: [MemoryMonitoring] Memory threshold exceeded: 924MB
[2026-01-28 14:20:11] info: [auth:insj0e] Starting auth for GET /horses/trainable/test-user-uuid-123
[2026-01-28 14:20:11] info: [auth:insj0e] Token from cookie: false
[2026-01-28 14:20:11] info: [auth:insj0e] Token from header: true
[2026-01-28 14:20:11] info: [auth:insj0e] Authenticated user test-user-uuid-123
[2026-01-28 14:20:11] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200
FAIL tests/integration/horseRoutes.test.mjs
  Horse Routes Integration Tests
    GET /api/horses/trainable/:userId
      √ó should return trainable horses for valid user ID (53 ms)
      ‚àö should return 403 when accessing another user's trainable horses (27 ms)
      ‚àö should return validation error for invalid user ID (25 ms)
      ‚àö should return validation error for user ID that is too long (24 ms)
      ‚àö should handle server errors gracefully (24 ms)

  ‚óè Horse Routes Integration Tests ‚Ä∫ GET /api/horses/trainable/:userId ‚Ä∫ should return trainable horses for valid user ID

    expect(received).toBeGreaterThanOrEqual(expected)

    Matcher error: received value must be a number or bigint

    Received has value: null

    [0m [90m 122 |[39m         expect(horse)[33m.[39mtoHaveProperty([32m'trainableDisciplines'[39m)[33m;[39m
     [90m 123 |[39m         expect([33mArray[39m[33m.[39misArray(horse[33m.[39mtrainableDisciplines))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 124 |[39m         expect(horse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Only horses 3+ should be returned[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 125 |[39m       })[33m;[39m
     [90m 126 |[39m     })[33m;[39m
     [90m 127 |[39m[0m

      at tests/integration/horseRoutes.test.mjs:124:27
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/horseRoutes.test.mjs:118:26)

[2026-01-28 14:20:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:12] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:12] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:12] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:12] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:12] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:12] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:12] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:12] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:12] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:20:12] info: [POST] /api/training/train
[2026-01-28 14:20:12] warn: [MemoryMonitoring] Memory threshold exceeded: 981MB
[2026-01-28 14:20:12] info: [auth:ud6d8k] Starting auth for POST /training/train
[2026-01-28 14:20:12] info: [auth:ud6d8k] Token from cookie: false
[2026-01-28 14:20:12] info: [auth:ud6d8k] Token from header: true
[2026-01-28 14:20:12] info: [auth:ud6d8k] Authenticated user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] warn: [ownership] horse 147210 not found or not owned by user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] info: [POST] /api/training/train - 404
[2026-01-28 14:20:12] info: [POST] /api/training/train
[2026-01-28 14:20:12] warn: [MemoryMonitoring] Memory threshold exceeded: 985MB
[2026-01-28 14:20:12] info: [auth:8c3i8f] Starting auth for POST /training/train
[2026-01-28 14:20:12] info: [auth:8c3i8f] Token from cookie: false
[2026-01-28 14:20:12] info: [auth:8c3i8f] Token from header: true
[2026-01-28 14:20:12] info: [auth:8c3i8f] Authenticated user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] warn: [ownership] horse 147209 not found or not owned by user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] info: [POST] /api/training/train - 404
[2026-01-28 14:20:12] info: [POST] /api/training/train
[2026-01-28 14:20:12] warn: [MemoryMonitoring] Memory threshold exceeded: 989MB
[2026-01-28 14:20:12] info: [auth:fltlpf] Starting auth for POST /training/train
[2026-01-28 14:20:12] info: [auth:fltlpf] Token from cookie: false
[2026-01-28 14:20:12] info: [auth:fltlpf] Token from header: true
[2026-01-28 14:20:12] info: [auth:fltlpf] Authenticated user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] warn: [ownership] horse 147211 not found or not owned by user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] info: [POST] /api/training/train - 404
[2026-01-28 14:20:12] info: [POST] /api/training/train
[2026-01-28 14:20:12] warn: [MemoryMonitoring] Memory threshold exceeded: 981MB
[2026-01-28 14:20:12] info: [auth:tfb3] Starting auth for POST /training/train
[2026-01-28 14:20:12] info: [auth:tfb3] Token from cookie: false
[2026-01-28 14:20:12] info: [auth:tfb3] Token from header: true
[2026-01-28 14:20:12] info: [auth:tfb3] Authenticated user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] warn: [ownership] horse 99999 not found or not owned by user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] info: [POST] /api/training/train - 404
[2026-01-28 14:20:12] info: [POST] /api/training/train
[2026-01-28 14:20:12] warn: [MemoryMonitoring] Memory threshold exceeded: 984MB
[2026-01-28 14:20:12] info: [auth:e0retu] Starting auth for POST /training/train
[2026-01-28 14:20:12] info: [auth:e0retu] Token from cookie: false
[2026-01-28 14:20:12] info: [auth:e0retu] Token from header: true
[2026-01-28 14:20:12] info: [auth:e0retu] Authenticated user ab062e66-3ad1-44f7-9307-2db92a93ad45
[2026-01-28 14:20:12] warn: [trainingRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"},{"type":"field","value":"","msg":"Discipline is required","path":"discipline","location":"body"},{"type":"field","value":"","msg":"Discipline must be between 1 and 50 characters","path":"discipline","location":"body"}]
[2026-01-28 14:20:12] info: [POST] /api/training/train - 400
FAIL tests/training.test.mjs
  üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation
    BUSINESS RULE: Age Requirements (3+ years old)
      √ó BLOCKS training for horses under 3 years old (57 ms)
      √ó ALLOWS training for horses 3+ years old (29 ms)
    BUSINESS RULE: Discipline Score Progression (+5 base)
      √ó INCREASES discipline scores by +5 for first-time training (8 ms)
      √ó ACCUMULATES discipline scores across multiple training sessions (different horses) (4 ms)
    BUSINESS RULE: Global Cooldown (One Discipline Per Week)
      √ó BLOCKS training when horse has trained ANY discipline within 7 days (35 ms)
      √ó ALLOWS training after 7-day cooldown expires (5 ms)
    BUSINESS RULE: XP Award for Training
      √ó AWARDS XP to horse owner (Player) when training succeeds (7 ms)
    BUSINESS RULE: Training Log Creation
      √ó CREATES training log entry for successful training (6 ms)
    BUSINESS RULE: Error Handling and Data Integrity
      ‚àö MAINTAINS database integrity when training non-existent horse (30 ms)
      ‚àö VALIDATES input parameters and rejects invalid requests (25 ms)
    BUSINESS RULE: Next Training Date Calculation
      √ó PROVIDES accurate next training date (7 days from training) (4 ms)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ BLOCKS training for horses under 3 years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 253 |[39m       })[33m;[39m
     [90m 254 |[39m
    [31m[1m>[22m[39m[90m 255 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 256 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 257 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'age'[39m)[33m;[39m
     [90m 258 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:255:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ ALLOWS training for horses 3+ years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 276 |[39m       })[33m;[39m
     [90m 277 |[39m
    [31m[1m>[22m[39m[90m 278 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 280 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'trained in Dressage'[39m)[33m;[39m
     [90m 281 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:278:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ INCREASES discipline scores by +5 for first-time training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Score Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:20:12.674Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 303 |[39m       fourYearsAgoForScore[33m.[39msetFullYear(fourYearsAgoForScore[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 304 |[39m
    [31m[1m>[22m[39m[90m 305 |[39m       [36mconst[39m scoreTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 306 |[39m         data[33m:[39m {
     [90m 307 |[39m           name[33m:[39m [32m'Score Test Horse'[39m[33m,[39m
     [90m 308 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:305:30)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ ACCUMULATES discipline scores across multiple training sessions (different horses)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Accumulation Test Horse 1",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:20:12.682Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 364 |[39m       fiveYearsAgoForAccumulation[33m.[39msetFullYear(fiveYearsAgoForAccumulation[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 365 |[39m
    [31m[1m>[22m[39m[90m 366 |[39m       [36mconst[39m horse1 [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 367 |[39m         data[33m:[39m {
     [90m 368 |[39m           name[33m:[39m [32m'Accumulation Test Horse 1'[39m[33m,[39m
     [90m 369 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:366:22)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ BLOCKS training when horse has trained ANY discipline within 7 days

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 442 |[39m       })[33m;[39m
     [90m 443 |[39m
    [31m[1m>[22m[39m[90m 444 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 445 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 446 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Training cooldown active'[39m)[33m;[39m
     [90m 447 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:444:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ ALLOWS training after 7-day cooldown expires

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Old Trained Horse",
        age: 6,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2020-01-28T19:20:12.722Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Racing: 15
        },
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 467 |[39m       sixYearsAgoForOldTrained[33m.[39msetFullYear(sixYearsAgoForOldTrained[33m.[39mgetFullYear() [33m-[39m [35m6[39m)[33m;[39m
     [90m 468 |[39m
    [31m[1m>[22m[39m[90m 469 |[39m       [36mconst[39m oldTrainedHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 470 |[39m         data[33m:[39m {
     [90m 471 |[39m           name[33m:[39m [32m'Old Trained Horse'[39m[33m,[39m
     [90m 472 |[39m           age[33m:[39m [35m6[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:469:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: XP Award for Training ‚Ä∫ AWARDS XP to horse owner (Player) when training succeeds

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "XP Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:20:12.730Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 535 |[39m       fourYearsAgoForXp[33m.[39msetFullYear(fourYearsAgoForXp[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 536 |[39m
    [31m[1m>[22m[39m[90m 537 |[39m       [36mconst[39m xpTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 538 |[39m         data[33m:[39m {
     [90m 539 |[39m           name[33m:[39m [32m'XP Test Horse'[39m[33m,[39m
     [90m 540 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:537:27)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Training Log Creation ‚Ä∫ CREATES training log entry for successful training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Log Test Horse",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:20:12.734Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 597 |[39m       fiveYearsAgoForLog[33m.[39msetFullYear(fiveYearsAgoForLog[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 598 |[39m
    [31m[1m>[22m[39m[90m 599 |[39m       [36mconst[39m logTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 600 |[39m         data[33m:[39m {
     [90m 601 |[39m           name[33m:[39m [32m'Log Test Horse'[39m[33m,[39m
     [90m 602 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:599:28)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Next Training Date Calculation ‚Ä∫ PROVIDES accurate next training date (7 days from training)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Date Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:20:12.798Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 689 |[39m       fourYearsAgoForDate[33m.[39msetFullYear(fourYearsAgoForDate[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 690 |[39m
    [31m[1m>[22m[39m[90m 691 |[39m       [36mconst[39m dateTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 692 |[39m         data[33m:[39m {
     [90m 693 |[39m           name[33m:[39m [32m'Date Test Horse'[39m[33m,[39m
     [90m 694 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:691:29)

[2026-01-28 14:20:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73658 to 1
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73659 to 1
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73659 to 2
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73659 to 3
[2026-01-28 14:20:13] error: Error incrementing career weeks for groom 99999: 
Invalid `prisma.groom.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 14:20:13] info: Processed retirement for groom 73667 with reason: mandatory_career_limit
[2026-01-28 14:20:13] info: Processed retirement for groom 73668 with reason: voluntary
[2026-01-28 14:20:13] error: Error processing retirement for groom 73670: Groom 73670 is not eligible for retirement
[2026-01-28 14:20:13] info: Starting weekly career progression processing
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73671 to 1
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73672 to 11
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73673 to 104
[2026-01-28 14:20:13] info: Processed retirement for groom 73673 with reason: mandatory_career_limit
[2026-01-28 14:20:13] info: Groom Test Groom Near Retirement 1769628013469 (ID: 73673) retired: mandatory_career_limit
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73674 to 51
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73675 to 81
[2026-01-28 14:20:13] info: Processed retirement for groom 73675 with reason: early_level_cap
[2026-01-28 14:20:13] info: Groom Test Groom Level 10 1769628013469 (ID: 73675) retired: early_level_cap
[2026-01-28 14:20:13] info: Weekly career progression completed: 5 processed, 2 retired, 0 errors
[2026-01-28 14:20:13] info: Starting weekly career progression processing
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73676 to 1
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73677 to 11
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73678 to 51
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73679 to 81
[2026-01-28 14:20:13] info: Processed retirement for groom 73679 with reason: early_level_cap
[2026-01-28 14:20:13] info: Groom Test Groom Level 10 1769628013554 (ID: 73679) retired: early_level_cap
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73680 to 104
[2026-01-28 14:20:13] info: Processed retirement for groom 73680 with reason: mandatory_career_limit
[2026-01-28 14:20:13] info: Groom Test Groom Near Retirement 1769628013554 (ID: 73680) retired: mandatory_career_limit
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73681 to 1
[2026-01-28 14:20:13] info: Weekly career progression completed: 6 processed, 2 retired, 0 errors
[2026-01-28 14:20:13] info: Starting weekly career progression processing
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73682 to 1
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73683 to 51
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73685 to 104
[2026-01-28 14:20:13] info: Processed retirement for groom 73685 with reason: mandatory_career_limit
[2026-01-28 14:20:13] info: Groom Test Groom Near Retirement 1769628013646 (ID: 73685) retired: mandatory_career_limit
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73686 to 81
[2026-01-28 14:20:13] info: Processed retirement for groom 73686 with reason: early_level_cap
[2026-01-28 14:20:13] info: Groom Test Groom Level 10 1769628013646 (ID: 73686) retired: early_level_cap
[2026-01-28 14:20:13] info: Weekly career progression completed: 4 processed, 2 retired, 0 errors
[2026-01-28 14:20:13] info: Starting weekly career progression processing
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73687 to 1
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73688 to 104
[2026-01-28 14:20:13] info: Processed retirement for groom 73688 with reason: mandatory_career_limit
[2026-01-28 14:20:13] info: Groom Test Groom Near Retirement 1769628013712 (ID: 73688) retired: mandatory_career_limit
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73689 to 51
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73690 to 81
[2026-01-28 14:20:13] info: Processed retirement for groom 73690 with reason: early_level_cap
[2026-01-28 14:20:13] info: Groom Test Groom Level 10 1769628013712 (ID: 73690) retired: early_level_cap
[2026-01-28 14:20:13] info: Incremented career weeks for groom 73691 to 11
[2026-01-28 14:20:13] info: Weekly career progression completed: 5 processed, 2 retired, 0 errors
FAIL tests/services/groomRetirementService.test.mjs
  Groom Retirement Service
    Career Week Tracking
      ‚àö should increment career weeks correctly (29 ms)
      ‚àö should handle multiple career week increments (22 ms)
      ‚àö should throw error for non-existent groom (17 ms)
    Retirement Eligibility
      ‚àö should identify groom not eligible for retirement (12 ms)
      ‚àö should identify mandatory retirement at 104 weeks (12 ms)
      ‚àö should identify early retirement at level 10 (11 ms)
      ‚àö should identify early retirement with 12+ assignments (135 ms)
      ‚àö should identify retirement notice period (13 ms)
      ‚àö should handle already retired groom (11 ms)
    Retirement Processing
      ‚àö should process mandatory retirement correctly (19 ms)
      ‚àö should process voluntary retirement (16 ms)
      √ó should remove active assignments on retirement (12 ms)
      ‚àö should reject retirement for ineligible groom (10 ms)
    Weekly Career Progression
      ‚àö should process weekly career progression for all active grooms (86 ms)
      ‚àö should handle errors gracefully during weekly progression (91 ms)
      ‚àö should skip already retired grooms (67 ms)
      ‚àö should provide detailed statistics (76 ms)

  ‚óè Groom Retirement Service ‚Ä∫ Retirement Processing ‚Ä∫ should remove active assignments on retirement

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73669,
        foalId: 147212,
        user: {
        ~~~~
          connect: {
            id: "5272f219-a348-4092-8989-0274876ad5a9"
          }
        },
        priority: 1,
        notes: "Test assignment",
        isActive: true,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 257 |[39m     test([32m'should remove active assignments on retirement'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 258 |[39m       [90m// Create an active assignment[39m
    [31m[1m>[22m[39m[90m 259 |[39m       [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 260 |[39m         data[33m:[39m {
     [90m 261 |[39m           groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 262 |[39m           foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/groomRetirementService.test.mjs:259:7)

[2026-01-28 14:20:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:14] info: [groomController.hireGroom] Hiring new groom Sarah Johnson for user user-groom-int-1769628014042_rfmsb
[2026-01-28 14:20:14] info: [groomController.hireGroom] Successfully hired groom Sarah Johnson (ID: 73692) for 750 coins
[2026-01-28 14:20:14] info: [groomController.hireGroom] Hiring new groom Invalid Groom for user user-groom-int-1769628014161_ocog4
[2026-01-28 14:20:14] info: [groomController.hireGroom] Hiring new groom Expert Groom for user user-groom-int-1769628014187_xyvuu
[2026-01-28 14:20:14] info: [groomController.hireGroom] Successfully hired groom Expert Groom (ID: 73693) for 750 coins
[2026-01-28 14:20:14] info: [groomController.hireGroom] Hiring new groom Novice Groom for user user-groom-int-1769628014187_xyvuu
[2026-01-28 14:20:14] info: [groomController.hireGroom] Successfully hired groom Novice Groom (ID: 73694) for 350 coins
[2026-01-28 14:20:14] info: [groomController.assignGroom] Assigning groom 73695 to foal 147222
[2026-01-28 14:20:14] info: [groomSystem.assignGroomToFoal] Assigning groom 73695 to foal 147222
[2026-01-28 14:20:14] info: [groomSystem.assignGroomToFoal] Successfully assigned Test Assignment Groom to foal Test Foal 1769628014231_kruj4
[2026-01-28 14:20:14] info: [groomController.assignGroom] Assigning groom 73697 to foal 147225
[2026-01-28 14:20:14] info: [groomSystem.assignGroomToFoal] Assigning groom 73697 to foal 147225
[2026-01-28 14:20:14] info: [groomSystem.assignGroomToFoal] Successfully assigned Second Test Groom to foal Test Foal 1769628014275_x4zc4
[2026-01-28 14:20:14] info: [groomController.assignGroom] Assigning groom 73698 to foal 147228
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Recording trust_building interaction for foal 147231
[2026-01-28 14:20:14] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task trust_building
[2026-01-28 14:20:14] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:20:14] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -3 stress
[2026-01-28 14:20:14] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73699 for interaction_completed
[2026-01-28 14:20:14] info: [groomProgressionService.awardGroomXP] Groom 73699 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Awarded 2 XP to groom 73699 for interaction
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 147235
[2026-01-28 14:20:14] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hoof_handling
[2026-01-28 14:20:14] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:20:14] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Interaction recorded: 8 bonding, -3 stress
[2026-01-28 14:20:14] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73700 for interaction_completed
[2026-01-28 14:20:14] info: [groomProgressionService.awardGroomXP] Groom 73700 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Awarded 2 XP to groom 73700 for interaction
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Recording brushing interaction for foal 147239
[2026-01-28 14:20:14] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:20:14] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty
[2026-01-28 14:20:14] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -10 stress
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses
[2026-01-28 14:20:14] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73701 for interaction_completed
[2026-01-28 14:20:14] info: [groomProgressionService.awardGroomXP] Groom 73701 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:20:14] info: [groomController.recordInteraction] Awarded 2 XP to groom 73701 for interaction
FAIL tests/integration/groomWorkflowIntegration.test.mjs
  Groom Workflow Integration Tests
    1. Complete Groom Hiring Workflow
      √ó should hire groom with proper skill calculations and validation (119 ms)
      ‚àö should validate required fields and reject invalid groom data (26 ms)
      ‚àö should calculate proper session rates based on skill level (44 ms)
    2. Groom Assignment Management
      ‚àö should assign groom to foal with proper validation (43 ms)
      ‚àö should handle assignment conflicts and priority management (44 ms)
      ‚àö should validate ownership and authorization (31 ms)
    3. Age-Based Task Validation
      ‚àö should allow enrichment tasks for foals (0-2 years) (169 ms)
      ‚àö should allow grooming tasks for horses 1-3 years old (52 ms)
      ‚àö should allow grooming tasks for horses over 3 years old (55 ms)

  ‚óè Groom Workflow Integration Tests ‚Ä∫ 1. Complete Groom Hiring Workflow ‚Ä∫ should hire groom with proper skill calculations and validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"experience": 8, "name": "Sarah Johnson", "personality": "gentle", "sessionRate": Any<Object>, "skillLevel": "expert", "speciality": "foal_care", "user": {"connect": {"id": "user-groom-int-1769628014042_rfmsb"}}}, "message": "Successfully hired Sarah Johnson", "success": true}
    Received: {"data": {"availability": {}, "bio": "Experienced foal care specialist", "bonusTraitMap": {}, "careerWeeks": 0, "createdAt": 2026-01-28T19:20:14.121Z, "experience": 8, "groomPersonality": "balanced", "hiredDate": 2026-01-28T19:20:14.121Z, "hiringCost": 750, "id": 73692, "imageUrl": null, "isActive": true, "level": 1, "name": "Sarah Johnson", "personality": "gentle", "rareTraitPerks": {}, "remainingFunds": 4250, "retired": false, "retirementReason": null, "retirementTimestamp": null, "sessionRate": "25", "skillLevel": "expert", "speciality": "foal_care", "updatedAt": 2026-01-28T19:20:14.121Z, "userId": "user-groom-int-1769628014042_rfmsb"}, "message": "Successfully hired Sarah Johnson", "success": true}

    Number of calls: 1

    [0m [90m 242 |[39m
     [90m 243 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 245 |[39m         expect[33m.[39mobjectContaining({
     [90m 246 |[39m           success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 247 |[39m           message[33m:[39m [32m'Successfully hired Sarah Johnson'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/groomWorkflowIntegration.test.mjs:244:24)

[2026-01-28 14:20:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:14] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/groomProgression.test.mjs
  Groom Progression System
    XP and Leveling System
      √ó Should award XP for milestone completion (84 ms)
      √ó Should award XP for trait shaping (24 ms)
      √ó Should award XP for show wins (21 ms)
      √ó Should level up when reaching XP threshold (21 ms)
      √ó Should calculate correct level from experience (18 ms)
      √ó Should cap level at 10 (19 ms)
    Groom-Horse Synergy System
      √ó Should create synergy record for new groom-horse pair (20 ms)
      √ó Should award correct synergy for different actions (18 ms)
      √ó Should penalize synergy for reassignment (18 ms)
      √ó Should track sessions together (21 ms)
    Assignment History Logging
      √ó Should log assignment start (17 ms)
      √ó Should log assignment completion with performance data (19 ms)
    Enhanced Groom Profile API
      √ó Should return comprehensive groom profile (17 ms)
      √ó Should include synergy effects in profile (18 ms)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for milestone completion

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.917Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31634,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for trait shaping

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.950Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31635,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for show wins

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.972Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31636,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should level up when reaching XP threshold

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.992Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31637,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should calculate correct level from experience

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.013Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31638,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should cap level at 10

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.032Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31639,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should create synergy record for new groom-horse pair

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.053Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31640,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should award correct synergy for different actions

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.071Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31641,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should penalize synergy for reassignment

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.088Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31642,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should track sessions together

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.110Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31643,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment start

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.128Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31644,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment completion with performance data

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.146Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31645,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should return comprehensive groom profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.165Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31646,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should include synergy effects in profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.183Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31647,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

[2026-01-28 14:20:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:15] info: [envValidator] Test environment validation complete. Success: true
FAIL __tests__/performance/apiResponseOptimization.test.mjs
  API Response Optimization System
    Pagination Service
      √ó creates offset-based pagination correctly
      √ó creates cursor-based pagination correctly
      √ó generates optimized Prisma query for cursor pagination
    Serialization Service
      √ó optimizes response data correctly
      √ó selects specific fields correctly
      √ó excludes specific fields correctly
      √ó handles nested field selection
    Response Cache Service
      √ó generates consistent ETags for same data
      √ó generates different ETags for different data
      √ó determines cacheable requests correctly (1 ms)
    Lazy Loading Service
      √ó creates lazy loading configuration
      √ó loads related data on demand
    Middleware Integration
      √ó handles pagination middleware correctly
      √ó handles field selection via query parameters
      √ó adds performance headers to responses
      √ó handles large response optimization (1 ms)
      √ó supports debug mode with optimization info
    Performance Metrics
      √ó tracks performance metrics correctly
    ETag and Caching
      √ó generates and validates ETags correctly
    Response Size Monitoring
      √ó monitors and warns about large responses
      √ó handles response size limits

  ‚óè API Response Optimization System ‚Ä∫ Pagination Service ‚Ä∫ creates offset-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Pagination Service ‚Ä∫ creates cursor-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Pagination Service ‚Ä∫ generates optimized Prisma query for cursor pagination

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ optimizes response data correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ selects specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ excludes specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ handles nested field selection

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Cache Service ‚Ä∫ generates consistent ETags for same data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Cache Service ‚Ä∫ generates different ETags for different data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Cache Service ‚Ä∫ determines cacheable requests correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Lazy Loading Service ‚Ä∫ creates lazy loading configuration

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Lazy Loading Service ‚Ä∫ loads related data on demand

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ handles pagination middleware correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ handles field selection via query parameters

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ adds performance headers to responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ handles large response optimization

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ supports debug mode with optimization info

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Performance Metrics ‚Ä∫ tracks performance metrics correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ ETag and Caching ‚Ä∫ generates and validates ETags correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Size Monitoring ‚Ä∫ monitors and warns about large responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Size Monitoring ‚Ä∫ handles response size limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

[2026-01-28 14:20:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:15] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/unit/breedingAnalyticsService.test.mjs
  Breeding Analytics Service
    Lineage Tracking
      √ó should track breeding pair lineage (65 ms)
      √ó should identify parent-offspring relationships (6 ms)
    Trait Inheritance Analysis
      √ó should analyze trait inheritance patterns (9 ms)
      √ó should calculate trait inheritance rates (5 ms)
    Breeding Success Metrics
      √ó should calculate breeding success rates (5 ms)
      √ó should track foal development outcomes (4 ms)
    Statistical Analysis
      √ó should calculate average offspring stats (5 ms)
      √ó should compare offspring to parent averages (5 ms)
    Error Handling
      √ó should handle user with no breeding data (5 ms)
      √ó should handle non-existent user gracefully (6 ms)

  ‚óè Breeding Analytics Service ‚Ä∫ Lineage Tracking ‚Ä∫ should track breeding pair lineage

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Lineage Tracking ‚Ä∫ should identify parent-offspring relationships

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Trait Inheritance Analysis ‚Ä∫ should analyze trait inheritance patterns

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Trait Inheritance Analysis ‚Ä∫ should calculate trait inheritance rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Breeding Success Metrics ‚Ä∫ should calculate breeding success rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Breeding Success Metrics ‚Ä∫ should track foal development outcomes

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Statistical Analysis ‚Ä∫ should calculate average offspring stats

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Statistical Analysis ‚Ä∫ should compare offspring to parent averages

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Error Handling ‚Ä∫ should handle user with no breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Error Handling ‚Ä∫ should handle non-existent user gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

[2026-01-28 14:20:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:16] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/services/dynamicCompatibilityScoring.test.mjs
  Dynamic Compatibility Scoring
    calculateDynamicCompatibility
      ‚àö should calculate high compatibility for calm groom with fearful horse (13 ms)
      ‚àö should calculate low compatibility for energetic groom with fearful horse (10 ms)
      ‚àö should calculate moderate compatibility with contextual improvements (8 ms)
      ‚àö should apply experience bonuses correctly (14 ms)
    analyzeCompatibilityFactors
      ‚àö should analyze all compatibility factors comprehensively (8 ms)
      ‚àö should identify risk factors for poor matches (8 ms)
    predictInteractionOutcome
      ‚àö should predict positive outcome for good compatibility (10 ms)
      ‚àö should predict negative outcome for poor compatibility (10 ms)
    updateCompatibilityHistory
      ‚àö should update compatibility history with interaction results (6 ms)
    getOptimalGroomRecommendations
      √ó should recommend optimal grooms for specific horse and context (4 ms)
      √ó should provide alternative recommendations (4 ms)
    analyzeCompatibilityTrends
      ‚àö should analyze compatibility trends over time (7 ms)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 380 |[39m       expect(recommendations)[33m.[39mtoBeDefined()[33m;[39m
     [90m 381 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 382 |[39m       expect(recommendations[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 383 |[39m       expect(recommendations[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 384 |[39m       expect(recommendations[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 385 |[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:382:51)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should provide alternative recommendations

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 405 |[39m       [36mconst[39m recommendations [33m=[39m [36mawait[39m getOptimalGroomRecommendations(horse[33m.[39mid[33m,[39m context)[33m;[39m
     [90m 406 |[39m
    [31m[1m>[22m[39m[90m 407 |[39m       expect(recommendations[33m.[39malternativeOptions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                         [31m[1m^[22m[39m
     [90m 408 |[39m       expect(recommendations[33m.[39mcontextualNotes)[33m.[39mtoBeDefined()[33m;[39m
     [90m 409 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mcontextualNotes))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 410 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:407:57)

[2026-01-28 14:20:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147250
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147250 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147250 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147250
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147250 is eligible to train in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147251 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147251
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147251 is 2 years old
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147251 is too young (2 years old)
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147252 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147252
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147252 is 5 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147252 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147252: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147252 still in cooldown for any training (7 days remaining)
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:20:17] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:20:17] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer
[2026-01-28 14:20:17] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:20:17] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required
[2026-01-28 14:20:17] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147255
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147255 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147255 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147255
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147255 is eligible to train in Racing
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147255
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147255 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] No training records found for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147255 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147255
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147255
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147255 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147255 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147255
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147255 is eligible to train in Racing
[2026-01-28 14:20:17] info: [horseModel.getHorseById] Successfully found horse: Workflow Test Horse (ID: 147255)
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Horse 147255 has traits: 
[2026-01-28 14:20:17] info: [trainingModel.logTrainingSession] Logging training session for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9015
[2026-01-28 14:20:17] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147255 by +5
[2026-01-28 14:20:17] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147255 by +5
[2026-01-28 14:20:17] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147255: 0 -> 5
[2026-01-28 14:20:17] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147255
[2026-01-28 14:20:17] info: [xpLogModel.logXpEvent] Logging XP event: User 9e7f6a47-a646-4c48-a39f-1e43d4f41b16, Amount: 5, Reason: Trained horse Workflow Test Horse in Racing
[2026-01-28 14:20:17] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4453, User 9e7f6a47-a646-4c48-a39f-1e43d4f41b16, Amount: 5
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Awarded 5 XP to user 9e7f6a47-a646-4c48-a39f-1e43d4f41b16 for training
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Successfully trained horse 147255 in Racing (Log ID: 9015, Score +5)
[2026-01-28 14:20:17] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147255
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147255 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147255 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147255: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147255 still in cooldown for any training (7 days remaining)
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147255
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147255 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147255 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] Last training date for horse 147255 in Racing: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147255 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147255: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147251 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147251 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147251
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147251 is 2 years old
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147251 is too young (2 years old)
[2026-01-28 14:20:17] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147252 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147252 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147252
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147252 is 5 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147252 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147252: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147252 still in cooldown for any training (7 days remaining)
[2026-01-28 14:20:17] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:20:17] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:20:17] warn: [trainingController.trainHorse] Training rejected: Horse not found
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147250 in 
[2026-01-28 14:20:17] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:20:17] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required
[2026-01-28 14:20:17] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147250
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147250 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147250 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147250
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147250 is eligible to train in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147250
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147250 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] No training records found for horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147250 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147250
[2026-01-28 14:20:17] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147252 in Racing
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147252 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147252
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147252 is 5 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147252 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147252: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147252 still in cooldown for any training (7 days remaining)
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147252
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147252 is 5 years old
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147252 in Racing
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] Last training date for horse 147252 in Racing: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147252 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147252: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:20:17] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:20:17] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getLastTrainingDate] No training records found for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 99999 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 99999
[2026-01-28 14:20:17] info: [trainingController.getTrainableHorses] Getting trainable horses for user 9e7f6a47-a646-4c48-a39f-1e43d4f41b161
[2026-01-28 14:20:17] warn: [trainingController.getTrainableHorses] User 9e7f6a47-a646-4c48-a39f-1e43d4f41b161 not found
[2026-01-28 14:20:17] info: [trainingController.getTrainableHorses] Getting trainable horses for user 9e7f6a47-a646-4c48-a39f-1e43d4f41b16
[2026-01-28 14:20:17] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 3 horses
[2026-01-28 14:20:17] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 9e7f6a47-a646-4c48-a39f-1e43d4f41b16
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147250
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147250 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147250 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147250
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147250 is eligible to train in Dressage
[2026-01-28 14:20:17] info: [horseModel.getHorseById] Successfully found horse: Controller Adult Horse (ID: 147250)
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Horse 147250 has traits: 
[2026-01-28 14:20:17] info: [trainingModel.logTrainingSession] Logging training session for horse 147250 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9016
[2026-01-28 14:20:17] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147250 by +5
[2026-01-28 14:20:17] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147250 by +5
[2026-01-28 14:20:17] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147250: 0 -> 5
[2026-01-28 14:20:17] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147250
[2026-01-28 14:20:17] info: [xpLogModel.logXpEvent] Logging XP event: User 0720d614-e469-426c-97ec-0c7952e892fc, Amount: 5, Reason: Trained horse Controller Adult Horse in Dressage
[2026-01-28 14:20:17] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4454, User 0720d614-e469-426c-97ec-0c7952e892fc, Amount: 5
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Awarded 5 XP to user 0720d614-e469-426c-97ec-0c7952e892fc for training
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Successfully trained horse 147250 in Dressage (Log ID: 9016, Score +5)
[2026-01-28 14:20:17] info: [trainingController.getTrainableHorses] Getting trainable horses for user 0720d614-e469-426c-97ec-0c7952e892fc
[2026-01-28 14:20:17] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 3 horses
[2026-01-28 14:20:17] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 0720d614-e469-426c-97ec-0c7952e892fc
[2026-01-28 14:20:17] info: [trainingController.trainRouteHandler] Training request for horse 147256 in Show Jumping
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147256 in Show Jumping
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147256 in Show Jumping
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147256
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147256 is 4 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147256 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147256
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147256 is eligible to train in Show Jumping
[2026-01-28 14:20:17] info: [horseModel.getHorseById] Successfully found horse: Fresh Route Test Horse (ID: 147256)
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Horse 147256 has traits: 
[2026-01-28 14:20:17] info: [trainingModel.logTrainingSession] Logging training session for horse 147256 in Show Jumping
[2026-01-28 14:20:17] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9017
[2026-01-28 14:20:17] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147256 by +5
[2026-01-28 14:20:17] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147256 by +5
[2026-01-28 14:20:17] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147256: 0 -> 5
[2026-01-28 14:20:17] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147256
[2026-01-28 14:20:17] info: [xpLogModel.logXpEvent] Logging XP event: User 0720d614-e469-426c-97ec-0c7952e892fc, Amount: 5, Reason: Trained horse Fresh Route Test Horse in Show Jumping
[2026-01-28 14:20:17] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4455, User 0720d614-e469-426c-97ec-0c7952e892fc, Amount: 5
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Awarded 5 XP to user 0720d614-e469-426c-97ec-0c7952e892fc for training
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Successfully trained horse 147256 in Show Jumping (Log ID: 9017, Score +5)
[2026-01-28 14:20:17] info: [trainingController.trainRouteHandler] Training request for horse 147251 in Dressage
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147251 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147251 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147251
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147251 is 2 years old
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147251 is too young (2 years old)
[2026-01-28 14:20:17] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:20:17] info: [trainingController.trainRouteHandler] Training request for horse 147252 in Dressage
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147252 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 147252 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 147252
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 147252 is 5 years old
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147252 across all disciplines
[2026-01-28 14:20:17] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147252: Wed Jan 28 2026 14:20:17 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:20:17] info: [trainingController.canTrain] Horse 147252 still in cooldown for any training (7 days remaining)
[2026-01-28 14:20:17] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:20:17] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:20:17] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:20:17] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:20:17] warn: [trainingController.trainHorse] Training rejected: Horse not found
[2026-01-28 14:20:17] info: [trainingController.trainRouteHandler] Training request for horse 147250 in 
[2026-01-28 14:20:17] info: [trainingController.trainHorse] Attempting to train horse 147250 in 
[2026-01-28 14:20:17] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:20:17] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required
[2026-01-28 14:20:17] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Discipline is required
PASS tests/trainingController-business-logic.test.mjs
  üèãÔ∏è INTEGRATION: Training Controller Business Logic - Complete Training Workflow
    BUSINESS RULE: canTrain() Function Validation
      ‚àö RETURNS eligible true for horse that meets all requirements (12 ms)
      ‚àö RETURNS eligible false for horse under 3 years old (5 ms)
      ‚àö RETURNS eligible false for horse with recent training (global cooldown) (10 ms)
      ‚àö RETURNS eligible false for non-existent horse (6 ms)
      ‚àö THROWS error for invalid input parameters (6 ms)
    BUSINESS RULE: trainHorse() Function Complete Workflow
      ‚àö EXECUTES successful training workflow for eligible horse (76 ms)
      ‚àö RETURNS error for ineligible horse (age restriction) (8 ms)
      ‚àö RETURNS error for horse in cooldown (9 ms)
      ‚àö RETURNS error for non-existent horse (6 ms)
      ‚àö THROWS error for invalid discipline (2 ms)
    BUSINESS RULE: getTrainingStatus() Function Validation
      ‚àö RETURNS accurate status for horse with no training history (18 ms)
      ‚àö RETURNS accurate status for horse with training history (16 ms)
      ‚àö RETURNS error status for non-existent horse (14 ms)
    BUSINESS RULE: getTrainableHorses() Function Validation
      ‚àö RETURNS empty array for user with no horses (4 ms)
      ‚àö RETURNS array of trainable horses for user (9 ms)
      ‚àö RETURNS empty array after training (horse in cooldown) (38 ms)
    API INTEGRATION: trainRouteHandler() Function Validation
      ‚àö PROCESSES valid training request and RETURNS success response (36 ms)
      ‚àö RETURNS error response for ineligible horse (7 ms)
      ‚àö RETURNS error response for horse in cooldown (11 ms)
      ‚àö RETURNS error response for non-existent horse (9 ms)
      ‚àö RETURNS error response for invalid discipline (4 ms)

[2026-01-28 14:20:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:17] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:17] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:17] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/schema-validation.test.mjs
  Schema Validation
    ‚àö should create horse with basic required fields (30 ms)
    ‚àö should create horse with groom-related fields (15 ms)
    ‚àö should create groom with all required fields (13 ms)
    √ó should create groom assignment (20 ms)
    ‚àö should create groom interaction (17 ms)

  ‚óè Schema Validation ‚Ä∫ should create groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147259,
        groomId: 73720,
        user: {
        ~~~~
          connect: {
            id: "schema-test-user-1769628017706-djhbqt784"
          }
        },
        priority: 1,
        notes: "Test assignment",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isActive?: Boolean,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 180 |[39m     })[33m;[39m
     [90m 181 |[39m
    [31m[1m>[22m[39m[90m 182 |[39m     [36mconst[39m assignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 183 |[39m       data[33m:[39m {
     [90m 184 |[39m         foalId[33m:[39m horse[33m.[39mid[33m,[39m
     [90m 185 |[39m         groomId[33m:[39m groom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/schema-validation.test.mjs:182:24)

[2026-01-28 14:20:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:17] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:17] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:17] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:19] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:19] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:19] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:19] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:19] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:19] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:19] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:19] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:19] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1142MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1142MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1142MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:19] info: [POST] /api/auth/login
[2026-01-28 14:20:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1146MB
[2026-01-28 14:20:19] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:19] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:19] error: Error Invalid credentials
[2026-01-28 14:20:19] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1143MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 14:20:20] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1144MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 14:20:20] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 200
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 14:20:20] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:20] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:20] error: Error Invalid credentials
[2026-01-28 14:20:20] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:20] info: [POST] /api/auth/login
[2026-01-28 14:20:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 14:20:21] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:21] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:21] error: Error Invalid credentials
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:21] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB
[2026-01-28 14:20:21] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 14:20:21] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 14:20:21] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:20:21] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 14:20:21] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 14:20:21] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:21] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:21] error: Error Invalid credentials
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 14:20:21] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:21] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:21] error: Error Invalid credentials
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 14:20:21] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:21] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:21] error: Error Invalid credentials
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 14:20:21] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:21] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:21] error: Error Invalid credentials
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 14:20:21] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:21] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:21] error: Error Invalid credentials
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 14:20:21] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:21] info: [POST] /api/auth/login
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB
[2026-01-28 14:20:21] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:21] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:21] error: Error Invalid credentials
[2026-01-28 14:20:21] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:21] info: [POST] /api/auth/register
[2026-01-28 14:20:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:22] info: [EmailVerification] Created verification token
[2026-01-28 14:20:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:22] info: [authController.register] Verification email sent
[2026-01-28 14:20:22] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:22] info: [POST] /api/auth/register
[2026-01-28 14:20:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:22] info: [EmailVerification] Created verification token
[2026-01-28 14:20:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:22] info: [authController.register] Verification email sent
[2026-01-28 14:20:22] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:22] info: [POST] /api/auth/register
[2026-01-28 14:20:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 14:20:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:22] info: [EmailVerification] Created verification token
[2026-01-28 14:20:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:22] info: [authController.register] Verification email sent
[2026-01-28 14:20:22] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:22] info: [POST] /api/auth/register
[2026-01-28 14:20:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 14:20:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:22] info: [EmailVerification] Created verification token
[2026-01-28 14:20:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:22] info: [authController.register] Verification email sent
[2026-01-28 14:20:22] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:22] info: [POST] /api/auth/register
[2026-01-28 14:20:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 14:20:23] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:23] info: [EmailVerification] Created verification token
[2026-01-28 14:20:23] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:23] info: [authController.register] Verification email sent
[2026-01-28 14:20:23] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:23] info: [POST] /api/auth/register
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:23] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:23] info: [POST] /api/auth/register - 429
[2026-01-28 14:20:23] info: [POST] /api/auth/register
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:23] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:23] info: [EmailVerification] Created verification token
[2026-01-28 14:20:23] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:23] info: [authController.register] Verification email sent
[2026-01-28 14:20:23] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:23] info: [POST] /api/auth/login
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 14:20:23] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:23] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:23] info: [POST] /api/auth/login - 200
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 14:20:23] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:23] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 14:20:23] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:23] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 14:20:23] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:23] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 14:20:23] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:23] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1149MB
[2026-01-28 14:20:23] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:23] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token
[2026-01-28 14:20:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:23] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:23] info: [POST] /api/auth/refresh-token - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 14:20:24] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:24] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:24] error: Error Invalid credentials
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1155MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:24] info: [POST] /api/auth/login
[2026-01-28 14:20:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 14:20:24] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:24] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1155MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1155MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
[2026-01-28 14:20:26] info: [POST] /api/auth/login
[2026-01-28 14:20:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:20:26] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:20:26] info: [POST] /api/auth/login - 429
PASS __tests__/integration/rate-limiting.test.mjs (8.736 s)
  Rate Limiting System
    Login Rate Limiting (Brute Force Protection)
      ‚àö should_allow_up_to_5_failed_login_attempts (483 ms)
      ‚àö should_block_6th_failed_login_attempt_with_429 (466 ms)
      ‚àö should_reset_rate_limit_after_successful_authentication (813 ms)
      ‚àö should_include_retry_after_in_rate_limit_response (88 ms)
      ‚àö should_track_rate_limits_per_ip_address (541 ms)
    Registration Rate Limiting
      ‚àö should_rate_limit_registration_attempts (1560 ms)
      ‚àö should_include_rate_limit_headers_on_registration (306 ms)
    Token Refresh Rate Limiting
      ‚àö should_rate_limit_token_refresh_attempts (148 ms)
    Rate Limit Headers
      ‚àö should_include_standard_rate_limit_headers (89 ms)
      ‚àö should_update_ratelimit_remaining_with_each_request (48 ms)
      ‚àö should_provide_accurate_reset_timestamp (17 ms)
    Rate Limit Reset Mechanism
      ‚àö should_reset_rate_limit_after_time_window (2120 ms)
    Concurrent Request Handling
      ‚àö should_handle_concurrent_requests_correctly (145 ms)
    Edge Cases
      ‚àö should_handle_missing_ip_address_gracefully (20 ms)
      ‚àö should_handle_malformed_requests_with_rate_limiting (93 ms)
      ‚àö should_not_leak_user_existence_through_rate_limiting (93 ms)
    Test Environment Configuration
      ‚àö should_respect_test_environment_rate_limit_config (1 ms)

[2026-01-28 14:20:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:27] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:27] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:27] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:27] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:27] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:27] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:27] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:27] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:27] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:20:28] info: [POST] /auth/register
[2026-01-28 14:20:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:20:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:28] info: [EmailVerification] Created verification token
[2026-01-28 14:20:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:28] info: [authController.register] Verification email sent
[2026-01-28 14:20:28] info: [POST] /auth/register - 201
[2026-01-28 14:20:28] info: [GET] /auth/csrf-token
[2026-01-28 14:20:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:20:28] info: [CSRF] Token generated
[2026-01-28 14:20:28] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:28] info: [POST] /auth/register
[2026-01-28 14:20:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:20:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:28] info: [EmailVerification] Created verification token
[2026-01-28 14:20:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:28] info: [authController.register] Verification email sent
[2026-01-28 14:20:28] info: [POST] /auth/register - 201
[2026-01-28 14:20:28] info: [GET] /auth/csrf-token
[2026-01-28 14:20:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:20:28] info: [CSRF] Token generated
[2026-01-28 14:20:28] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:28] info: [POST] /auth/register
[2026-01-28 14:20:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:20:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:29] info: [EmailVerification] Created verification token
[2026-01-28 14:20:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:29] info: [authController.register] Verification email sent
[2026-01-28 14:20:29] info: [POST] /auth/register - 201
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:20:29] info: [CSRF] Token generated
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:20:29] info: [CSRF] Token generated
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:29] info: [POST] /auth/register
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:20:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:29] info: [EmailVerification] Created verification token
[2026-01-28 14:20:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:29] info: [authController.register] Verification email sent
[2026-01-28 14:20:29] info: [POST] /auth/register - 201
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:20:29] info: [CSRF] Token generated
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:29] info: [PUT] /api/users/bce4fe6d-aaa8-4a5b-b3b5-f2bf46eedb3f
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB
[2026-01-28 14:20:29] info: [auth:ekus2] Starting auth for PUT /users/bce4fe6d-aaa8-4a5b-b3b5-f2bf46eedb3f
[2026-01-28 14:20:29] info: [auth:ekus2] Token from cookie: true
[2026-01-28 14:20:29] info: [auth:ekus2] Authenticated user bce4fe6d-aaa8-4a5b-b3b5-f2bf46eedb3f
[2026-01-28 14:20:29] info: [PUT] /api/users/bce4fe6d-aaa8-4a5b-b3b5-f2bf46eedb3f - 403
[2026-01-28 14:20:29] info: [POST] /auth/register
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:20:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:29] info: [EmailVerification] Created verification token
[2026-01-28 14:20:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:29] info: [authController.register] Verification email sent
[2026-01-28 14:20:29] info: [POST] /auth/register - 201
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:20:29] info: [CSRF] Token generated
[2026-01-28 14:20:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:29] info: [PUT] /api/users/e39d0e16-1942-4324-82f8-ae43d695d6ad
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:20:29] info: [auth:axv64ya] Starting auth for PUT /users/e39d0e16-1942-4324-82f8-ae43d695d6ad
[2026-01-28 14:20:29] info: [auth:axv64ya] Token from cookie: true
[2026-01-28 14:20:29] info: [auth:axv64ya] Authenticated user e39d0e16-1942-4324-82f8-ae43d695d6ad
[2026-01-28 14:20:29] info: [PUT] /api/users/e39d0e16-1942-4324-82f8-ae43d695d6ad - 403
[2026-01-28 14:20:29] info: [POST] /auth/register
[2026-01-28 14:20:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:20:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:30] info: [EmailVerification] Created verification token
[2026-01-28 14:20:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:30] info: [authController.register] Verification email sent
[2026-01-28 14:20:30] info: [POST] /auth/register - 201
[2026-01-28 14:20:30] info: [GET] /auth/csrf-token
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:20:30] info: [CSRF] Token generated
[2026-01-28 14:20:30] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:30] info: [DELETE] /api/users/85a6c4fd-9fc1-4268-9a85-9288eb92ad77
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:20:30] info: [auth:expp5] Starting auth for DELETE /users/85a6c4fd-9fc1-4268-9a85-9288eb92ad77
[2026-01-28 14:20:30] info: [auth:expp5] Token from cookie: true
[2026-01-28 14:20:30] info: [auth:expp5] Authenticated user 85a6c4fd-9fc1-4268-9a85-9288eb92ad77
[2026-01-28 14:20:30] info: [DELETE] /api/users/85a6c4fd-9fc1-4268-9a85-9288eb92ad77 - 403
[2026-01-28 14:20:30] info: [POST] /auth/register
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:20:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:30] info: [EmailVerification] Created verification token
[2026-01-28 14:20:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:30] info: [authController.register] Verification email sent
[2026-01-28 14:20:30] info: [POST] /auth/register - 201
[2026-01-28 14:20:30] info: [GET] /auth/csrf-token
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:20:30] info: [CSRF] Token generated
[2026-01-28 14:20:30] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:30] info: [PATCH] /api/users/dd4a5d68-be15-4065-817b-dea2fbc03391
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:20:30] info: [auth:n1wtoq] Starting auth for PATCH /users/dd4a5d68-be15-4065-817b-dea2fbc03391
[2026-01-28 14:20:30] info: [auth:n1wtoq] Token from cookie: true
[2026-01-28 14:20:30] info: [auth:n1wtoq] Authenticated user dd4a5d68-be15-4065-817b-dea2fbc03391
[2026-01-28 14:20:30] info: [PATCH] /api/users/dd4a5d68-be15-4065-817b-dea2fbc03391 - 403
[2026-01-28 14:20:30] info: [POST] /auth/register
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:20:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:30] info: [EmailVerification] Created verification token
[2026-01-28 14:20:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:30] info: [authController.register] Verification email sent
[2026-01-28 14:20:30] info: [POST] /auth/register - 201
[2026-01-28 14:20:30] info: [GET] /api/users/3f70b445-508c-42ff-b447-96948d87529b
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:20:30] info: [auth:e39qo9] Starting auth for GET /users/3f70b445-508c-42ff-b447-96948d87529b
[2026-01-28 14:20:30] info: [auth:e39qo9] Token from cookie: true
[2026-01-28 14:20:30] info: [auth:e39qo9] Authenticated user 3f70b445-508c-42ff-b447-96948d87529b
[2026-01-28 14:20:30] info: [auth:j2ruq] Starting auth for GET /3f70b445-508c-42ff-b447-96948d87529b
[2026-01-28 14:20:30] info: [auth:j2ruq] Token from cookie: true
[2026-01-28 14:20:30] info: [auth:j2ruq] Authenticated user 3f70b445-508c-42ff-b447-96948d87529b
[2026-01-28 14:20:30] info: [userRoutes] Self-access validated: user 3f70b445-508c-42ff-b447-96948d87529b accessing own data
[2026-01-28 14:20:30] info: [userController.getUser] Getting user 3f70b445-508c-42ff-b447-96948d87529b
[2026-01-28 14:20:30] info: [GET] /api/users/3f70b445-508c-42ff-b447-96948d87529b - 200
[2026-01-28 14:20:30] info: [POST] /auth/register
[2026-01-28 14:20:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:20:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:31] info: [EmailVerification] Created verification token
[2026-01-28 14:20:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:31] info: [authController.register] Verification email sent
[2026-01-28 14:20:31] info: [POST] /auth/register - 201
[2026-01-28 14:20:31] info: [HEAD] /health
[2026-01-28 14:20:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB
[2026-01-28 14:20:31] info: [HEAD] /health - 200
[2026-01-28 14:20:31] info: [POST] /auth/register
[2026-01-28 14:20:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:20:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:31] info: [EmailVerification] Created verification token
[2026-01-28 14:20:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:31] info: [authController.register] Verification email sent
[2026-01-28 14:20:31] info: [POST] /auth/register - 201
[2026-01-28 14:20:31] info: [POST] /auth/register
[2026-01-28 14:20:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:20:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:31] info: [EmailVerification] Created verification token
[2026-01-28 14:20:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:31] info: [authController.register] Verification email sent
[2026-01-28 14:20:31] info: [POST] /auth/register - 201
[2026-01-28 14:20:31] info: [POST] /api/users/me
[2026-01-28 14:20:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:20:31] info: [auth:kljkxs] Starting auth for POST /users/me
[2026-01-28 14:20:31] info: [auth:kljkxs] Token from cookie: true
[2026-01-28 14:20:31] info: [auth:kljkxs] Authenticated user 882cf1fc-aebd-4302-9167-4bf4363312d6
[2026-01-28 14:20:31] info: [POST] /api/users/me - 403
[2026-01-28 14:20:31] info: [POST] /auth/register
[2026-01-28 14:20:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:20:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:32] info: [EmailVerification] Created verification token
[2026-01-28 14:20:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:32] info: [authController.register] Verification email sent
[2026-01-28 14:20:32] info: [POST] /auth/register - 201
[2026-01-28 14:20:32] info: [PUT] /api/users/9cd3d617-19f4-4c35-87a4-d7a4004bb560
[2026-01-28 14:20:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:20:32] info: [auth:zlsyg5] Starting auth for PUT /users/9cd3d617-19f4-4c35-87a4-d7a4004bb560
[2026-01-28 14:20:32] info: [auth:zlsyg5] Token from cookie: true
[2026-01-28 14:20:32] info: [auth:zlsyg5] Authenticated user 9cd3d617-19f4-4c35-87a4-d7a4004bb560
[2026-01-28 14:20:32] info: [PUT] /api/users/9cd3d617-19f4-4c35-87a4-d7a4004bb560 - 403
[2026-01-28 14:20:32] info: [POST] /auth/register
[2026-01-28 14:20:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:20:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:32] info: [EmailVerification] Created verification token
[2026-01-28 14:20:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:32] info: [authController.register] Verification email sent
[2026-01-28 14:20:32] info: [POST] /auth/register - 201
[2026-01-28 14:20:32] info: [DELETE] /api/users/e78de067-01c0-4109-8d7a-c992e9ea0087
[2026-01-28 14:20:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:20:32] info: [auth:p21448] Starting auth for DELETE /users/e78de067-01c0-4109-8d7a-c992e9ea0087
[2026-01-28 14:20:32] info: [auth:p21448] Token from cookie: true
[2026-01-28 14:20:32] info: [auth:p21448] Authenticated user e78de067-01c0-4109-8d7a-c992e9ea0087
[2026-01-28 14:20:32] info: [DELETE] /api/users/e78de067-01c0-4109-8d7a-c992e9ea0087 - 403
[2026-01-28 14:20:32] info: [POST] /auth/register
[2026-01-28 14:20:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB
[2026-01-28 14:20:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:32] info: [EmailVerification] Created verification token
[2026-01-28 14:20:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:32] info: [authController.register] Verification email sent
[2026-01-28 14:20:32] info: [POST] /auth/register - 201
[2026-01-28 14:20:32] info: [GET] /auth/csrf-token
[2026-01-28 14:20:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB
[2026-01-28 14:20:32] info: [CSRF] Token generated
[2026-01-28 14:20:32] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:32] info: [PUT] /api/users/c74f95e4-de3b-4218-830b-22d11add4a07
[2026-01-28 14:20:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:20:32] info: [auth:u3xmkg] Starting auth for PUT /users/c74f95e4-de3b-4218-830b-22d11add4a07
[2026-01-28 14:20:32] info: [auth:u3xmkg] Token from cookie: true
[2026-01-28 14:20:32] info: [auth:u3xmkg] Authenticated user c74f95e4-de3b-4218-830b-22d11add4a07
[2026-01-28 14:20:32] info: [auth:etpiky] Starting auth for PUT /c74f95e4-de3b-4218-830b-22d11add4a07
[2026-01-28 14:20:32] info: [auth:etpiky] Token from cookie: true
[2026-01-28 14:20:32] info: [auth:etpiky] Authenticated user c74f95e4-de3b-4218-830b-22d11add4a07
[2026-01-28 14:20:32] info: [userRoutes] Self-access validated: user c74f95e4-de3b-4218-830b-22d11add4a07 accessing own data
[2026-01-28 14:20:32] info: [userController.updateUser] Updating user c74f95e4-de3b-4218-830b-22d11add4a07
[2026-01-28 14:20:32] info: [PUT] /api/users/c74f95e4-de3b-4218-830b-22d11add4a07 - 200
[2026-01-28 14:20:32] info: [POST] /auth/register
[2026-01-28 14:20:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1042MB
[2026-01-28 14:20:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:33] info: [EmailVerification] Created verification token
[2026-01-28 14:20:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:33] info: [authController.register] Verification email sent
[2026-01-28 14:20:33] info: [POST] /auth/register - 201
[2026-01-28 14:20:33] info: [GET] /auth/csrf-token
[2026-01-28 14:20:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB
[2026-01-28 14:20:33] info: [CSRF] Token generated
[2026-01-28 14:20:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:33] info: [GET] /auth/csrf-token
[2026-01-28 14:20:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB
[2026-01-28 14:20:33] info: [CSRF] Token generated
[2026-01-28 14:20:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:33] info: [GET] /auth/csrf-token
[2026-01-28 14:20:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:20:33] info: [CSRF] Token generated
[2026-01-28 14:20:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:20:33] info: [POST] /auth/register
[2026-01-28 14:20:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:20:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:33] info: [EmailVerification] Created verification token
[2026-01-28 14:20:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:33] info: [authController.register] Verification email sent
[2026-01-28 14:20:33] info: [POST] /auth/register - 201
[2026-01-28 14:20:33] info: [POST] /api/users/me
[2026-01-28 14:20:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:20:33] info: [auth:njfb6] Starting auth for POST /users/me
[2026-01-28 14:20:33] info: [auth:njfb6] Token from cookie: true
[2026-01-28 14:20:33] info: [auth:njfb6] Authenticated user 45291aee-684b-4e8a-aa67-15660a8d0e8b
[2026-01-28 14:20:33] info: [POST] /api/users/me - 403
[2026-01-28 14:20:33] info: [POST] /auth/register
[2026-01-28 14:20:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:20:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:33] info: [EmailVerification] Created verification token
[2026-01-28 14:20:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:33] info: [authController.register] Verification email sent
[2026-01-28 14:20:33] info: [POST] /auth/register - 201
[2026-01-28 14:20:33] info: [POST] /auth/register
[2026-01-28 14:20:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB
[2026-01-28 14:20:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:34] info: [EmailVerification] Created verification token
[2026-01-28 14:20:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:34] info: [authController.register] Verification email sent
[2026-01-28 14:20:34] info: [POST] /auth/register - 201
[2026-01-28 14:20:34] info: [POST] /auth/login
[2026-01-28 14:20:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB
[2026-01-28 14:20:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:34] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:34] info: [POST] /auth/login - 200
[2026-01-28 14:20:34] info: [POST] /auth/register
[2026-01-28 14:20:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1042MB
[2026-01-28 14:20:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:34] info: [EmailVerification] Created verification token
[2026-01-28 14:20:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:34] info: [authController.register] Verification email sent
[2026-01-28 14:20:34] info: [POST] /auth/register - 201
[2026-01-28 14:20:34] info: [POST] /auth/register
[2026-01-28 14:20:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB
[2026-01-28 14:20:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:35] info: [EmailVerification] Created verification token
[2026-01-28 14:20:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:35] info: [authController.register] Verification email sent
[2026-01-28 14:20:35] info: [POST] /auth/register - 201
[2026-01-28 14:20:35] info: [POST] /auth/register
[2026-01-28 14:20:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB
[2026-01-28 14:20:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:35] info: [EmailVerification] Created verification token
[2026-01-28 14:20:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:35] info: [authController.register] Verification email sent
[2026-01-28 14:20:35] info: [POST] /auth/register - 201
[2026-01-28 14:20:35] info: [POST] /auth/forgot-password
[2026-01-28 14:20:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB
[2026-01-28 14:20:35] warn: 404 - Route not found: POST /auth/forgot-password from ::ffff:127.0.0.1
[2026-01-28 14:20:35] info: [POST] /auth/forgot-password - 404
PASS __tests__/integration/csrf-integration.test.mjs (8.802 s)
  CSRF Protection Integration Tests
    CSRF Token Acquisition
      ‚àö should get CSRF token from /auth/csrf-token endpoint (391 ms)
      ‚àö should set CSRF token in cookie (332 ms)
      ‚àö should generate unique tokens for different requests (371 ms)
    CSRF Protection for State-Changing Operations
      ‚àö should reject POST request without CSRF token (364 ms)
      ‚àö should reject PUT request without CSRF token (363 ms)
      ‚àö should reject DELETE request without CSRF token (351 ms)
      ‚àö should reject PATCH request without CSRF token (355 ms)
    Safe HTTP Methods (No CSRF Required)
      ‚àö should allow GET requests without CSRF token (352 ms)
      ‚àö should allow HEAD requests without CSRF token (337 ms)
      ‚àö should allow OPTIONS requests without CSRF token (318 ms)
    CSRF Error Messages
      ‚àö should provide clear error message for missing token (337 ms)
      ‚àö should include error code in response (336 ms)
      ‚àö should return 403 status for CSRF failures (333 ms)
    CSRF Token Lifecycle
      ‚àö should accept newly generated token (358 ms)
      ‚àö should generate new token on each request to /auth/csrf-token (367 ms)
    CORS and CSRF Integration
      ‚àö should require X-CSRF-Token header for cross-origin requests (330 ms)
      ‚àö should allow CORS preflight without CSRF token (324 ms)
    Public Endpoints (No CSRF)
      ‚àö should not require CSRF token for login (604 ms)
      ‚àö should not require CSRF token for registration (619 ms)
      ‚àö should not require CSRF token for password reset request (326 ms)

[2026-01-28 14:20:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:35] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:35] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:36] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:36] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:36] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:36] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:36] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:36] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:36] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:36] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:36] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:20:36] info: [POST] /auth/register
[2026-01-28 14:20:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB
[2026-01-28 14:20:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:37] info: [EmailVerification] Created verification token
[2026-01-28 14:20:37] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:37] info: [authController.register] Verification email sent
[2026-01-28 14:20:37] info: [POST] /auth/register - 201
[2026-01-28 14:20:37] info: [POST] /auth/register
[2026-01-28 14:20:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1093MB
[2026-01-28 14:20:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:37] info: [EmailVerification] Created verification token
[2026-01-28 14:20:37] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:37] info: [authController.register] Verification email sent
[2026-01-28 14:20:37] info: [POST] /auth/register - 201
[2026-01-28 14:20:37] info: [POST] /auth/register
[2026-01-28 14:20:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB
[2026-01-28 14:20:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:37] info: [EmailVerification] Created verification token
[2026-01-28 14:20:37] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:37] info: [authController.register] Verification email sent
[2026-01-28 14:20:37] info: [POST] /auth/register - 201
[2026-01-28 14:20:37] info: [POST] /auth/register
[2026-01-28 14:20:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:20:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:38] info: [EmailVerification] Created verification token
[2026-01-28 14:20:38] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:38] info: [authController.register] Verification email sent
[2026-01-28 14:20:38] info: [POST] /auth/register - 201
[2026-01-28 14:20:38] info: [POST] /auth/login
[2026-01-28 14:20:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:20:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:38] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:38] info: [POST] /auth/login - 200
[2026-01-28 14:20:38] info: [POST] /auth/register
[2026-01-28 14:20:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1101MB
[2026-01-28 14:20:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:38] info: [EmailVerification] Created verification token
[2026-01-28 14:20:38] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:38] info: [authController.register] Verification email sent
[2026-01-28 14:20:38] info: [POST] /auth/register - 201
[2026-01-28 14:20:38] info: [POST] /auth/login
[2026-01-28 14:20:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:20:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:38] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:38] info: [POST] /auth/login - 200
[2026-01-28 14:20:38] info: [POST] /auth/register
[2026-01-28 14:20:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:20:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:39] info: [EmailVerification] Created verification token
[2026-01-28 14:20:39] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:39] info: [authController.register] Verification email sent
[2026-01-28 14:20:39] info: [POST] /auth/register - 201
[2026-01-28 14:20:39] info: [POST] /auth/login
[2026-01-28 14:20:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:20:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:39] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:39] info: [POST] /auth/login - 200
[2026-01-28 14:20:39] info: [POST] /auth/register
[2026-01-28 14:20:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:20:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:39] info: [EmailVerification] Created verification token
[2026-01-28 14:20:39] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:39] info: [authController.register] Verification email sent
[2026-01-28 14:20:39] info: [POST] /auth/register - 201
[2026-01-28 14:20:39] info: [POST] /auth/login
[2026-01-28 14:20:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB
[2026-01-28 14:20:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:40] info: [POST] /auth/login - 200
[2026-01-28 14:20:40] info: [POST] /auth/refresh-token
[2026-01-28 14:20:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:20:40] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:40] info: [POST] /auth/refresh-token - 200
[2026-01-28 14:20:40] info: [POST] /auth/register
[2026-01-28 14:20:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:20:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:40] info: [EmailVerification] Created verification token
[2026-01-28 14:20:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:40] info: [authController.register] Verification email sent
[2026-01-28 14:20:40] info: [POST] /auth/register - 201
[2026-01-28 14:20:40] info: [POST] /auth/login
[2026-01-28 14:20:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:20:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:40] info: [POST] /auth/login - 200
[2026-01-28 14:20:40] info: [POST] /auth/refresh-token
[2026-01-28 14:20:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:20:40] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:40] info: [POST] /auth/refresh-token - 200
[2026-01-28 14:20:40] info: [POST] /auth/register
[2026-01-28 14:20:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:20:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:41] info: [EmailVerification] Created verification token
[2026-01-28 14:20:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:41] info: [authController.register] Verification email sent
[2026-01-28 14:20:41] info: [POST] /auth/register - 201
[2026-01-28 14:20:41] info: [POST] /auth/login
[2026-01-28 14:20:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB
[2026-01-28 14:20:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:41] info: [POST] /auth/login - 200
[2026-01-28 14:20:41] info: [POST] /auth/refresh-token
[2026-01-28 14:20:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:20:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:41] info: [POST] /auth/refresh-token - 200
[2026-01-28 14:20:41] info: [POST] /auth/register
[2026-01-28 14:20:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:20:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:41] info: [EmailVerification] Created verification token
[2026-01-28 14:20:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:41] info: [authController.register] Verification email sent
[2026-01-28 14:20:41] info: [POST] /auth/register - 201
[2026-01-28 14:20:41] info: [POST] /auth/login
[2026-01-28 14:20:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB
[2026-01-28 14:20:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:42] info: [POST] /auth/login - 200
[2026-01-28 14:20:42] info: [POST] /auth/logout
[2026-01-28 14:20:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:20:42] info: [auth:56y4lb] Starting auth for POST /logout
[2026-01-28 14:20:42] info: [auth:56y4lb] Token from cookie: true
[2026-01-28 14:20:42] info: [auth:56y4lb] Authenticated user bc59cf02-4724-4ec5-a44a-8ba5fff56c3c
[2026-01-28 14:20:42] info: [POST] /auth/logout - 200
[2026-01-28 14:20:42] info: [POST] /auth/register
[2026-01-28 14:20:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:20:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:42] info: [EmailVerification] Created verification token
[2026-01-28 14:20:42] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:42] info: [authController.register] Verification email sent
[2026-01-28 14:20:42] info: [POST] /auth/register - 201
[2026-01-28 14:20:42] info: [POST] /auth/login
[2026-01-28 14:20:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1106MB
[2026-01-28 14:20:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:42] info: [POST] /auth/login - 200
[2026-01-28 14:20:42] info: [POST] /auth/logout
[2026-01-28 14:20:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:20:42] info: [auth:5m4nnw] Starting auth for POST /logout
[2026-01-28 14:20:42] info: [auth:5m4nnw] Token from cookie: true
[2026-01-28 14:20:42] info: [auth:5m4nnw] Authenticated user 5dac9d0a-b3e5-4b40-80c5-22bb5f27695b
[2026-01-28 14:20:42] info: [POST] /auth/logout - 200
[2026-01-28 14:20:42] info: [POST] /auth/register
[2026-01-28 14:20:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:20:43] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:43] info: [EmailVerification] Created verification token
[2026-01-28 14:20:43] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:43] info: [authController.register] Verification email sent
[2026-01-28 14:20:43] info: [POST] /auth/register - 201
[2026-01-28 14:20:43] info: [POST] /auth/login
[2026-01-28 14:20:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB
[2026-01-28 14:20:43] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:43] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:43] info: [POST] /auth/login - 200
[2026-01-28 14:20:43] info: [POST] /auth/logout
[2026-01-28 14:20:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:20:43] info: [auth:tfdofc] Starting auth for POST /logout
[2026-01-28 14:20:43] info: [auth:tfdofc] Token from cookie: true
[2026-01-28 14:20:43] info: [auth:tfdofc] Authenticated user ed7fabf6-53c0-4826-9bf5-fa32d3d983da
[2026-01-28 14:20:43] info: [POST] /auth/logout - 200
[2026-01-28 14:20:43] info: [POST] /auth/register
[2026-01-28 14:20:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB
[2026-01-28 14:20:43] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:43] info: [EmailVerification] Created verification token
[2026-01-28 14:20:43] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:43] info: [authController.register] Verification email sent
[2026-01-28 14:20:43] info: [POST] /auth/register - 201
[2026-01-28 14:20:43] info: [POST] /auth/login
[2026-01-28 14:20:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB
[2026-01-28 14:20:44] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:44] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:44] info: [POST] /auth/login - 200
[2026-01-28 14:20:44] info: [POST] /auth/refresh-token
[2026-01-28 14:20:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB
[2026-01-28 14:20:44] info: [TokenRotation] Token rotation successful
[2026-01-28 14:20:44] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:20:44] info: [POST] /auth/refresh-token - 200
PASS __tests__/integration/cookieIntegration.test.mjs (8.539 s)
  Cookie Integration Tests
    Registration Endpoint Cookies
      ‚àö should set accessToken cookie with correct attributes (367 ms)
      ‚àö should set refreshToken cookie with correct attributes (317 ms)
      ‚àö should set both cookies in a single response (311 ms)
    Login Endpoint Cookies
      ‚àö should set cookies on successful login (614 ms)
      ‚àö should set accessToken cookie with correct attributes on login (609 ms)
      ‚àö should set refreshToken cookie with correct attributes on login (608 ms)
    Token Refresh Endpoint Cookies
      ‚àö should set new cookies on token refresh (655 ms)
      ‚àö should set new accessToken cookie with correct attributes (659 ms)
      ‚àö should set new refreshToken cookie with correct attributes (641 ms)
    Logout Endpoint Cookie Clearing
      ‚àö should clear accessToken cookie on logout (637 ms)
      ‚àö should clear refreshToken cookie on logout (627 ms)
      ‚àö should maintain same path when clearing cookies (643 ms)
    Cookie Security Attributes
      ‚àö should use consistent security attributes across all endpoints (636 ms)

[2026-01-28 14:20:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:45] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:45] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:45] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:45] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:45] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:45] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:45] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:45] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:45] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:20:45] info: [GET] /api/user/victim-uuid-001
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB
[2026-01-28 14:20:45] info: [auth:hwxj5g] Starting auth for GET /user/victim-uuid-001
[2026-01-28 14:20:45] info: [auth:hwxj5g] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:hwxj5g] Token from header: true
[2026-01-28 14:20:45] info: [auth:hwxj5g] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: 404 - Route not found: GET /api/user/victim-uuid-001 from ::ffff:127.0.0.1
[2026-01-28 14:20:45] info: [GET] /api/user/victim-uuid-001 - 404
[2026-01-28 14:20:45] info: [GET] /api/user/victim-uuid-001/progress
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 14:20:45] info: [auth:a8ypjq] Starting auth for GET /user/victim-uuid-001/progress
[2026-01-28 14:20:45] info: [auth:a8ypjq] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:a8ypjq] Token from header: true
[2026-01-28 14:20:45] info: [auth:a8ypjq] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: 404 - Route not found: GET /api/user/victim-uuid-001/progress from ::ffff:127.0.0.1
[2026-01-28 14:20:45] info: [GET] /api/user/victim-uuid-001/progress - 404
[2026-01-28 14:20:45] info: [GET] /api/user/victim-uuid-001/activity
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:45] info: [auth:lejjge] Starting auth for GET /user/victim-uuid-001/activity
[2026-01-28 14:20:45] info: [auth:lejjge] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:lejjge] Token from header: true
[2026-01-28 14:20:45] info: [auth:lejjge] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: 404 - Route not found: GET /api/user/victim-uuid-001/activity from ::ffff:127.0.0.1
[2026-01-28 14:20:45] info: [GET] /api/user/victim-uuid-001/activity - 404
[2026-01-28 14:20:45] info: [PUT] /api/user/victim-uuid-001
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:20:45] info: [auth:h9tp62] Starting auth for PUT /user/victim-uuid-001
[2026-01-28 14:20:45] info: [auth:h9tp62] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:h9tp62] Token from header: true
[2026-01-28 14:20:45] info: [auth:h9tp62] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [PUT] /api/user/victim-uuid-001 - 403
[2026-01-28 14:20:45] info: [DELETE] /api/user/victim-uuid-001
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:20:45] info: [auth:e650ebm] Starting auth for DELETE /user/victim-uuid-001
[2026-01-28 14:20:45] info: [auth:e650ebm] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:e650ebm] Token from header: true
[2026-01-28 14:20:45] info: [auth:e650ebm] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [DELETE] /api/user/victim-uuid-001 - 403
[2026-01-28 14:20:45] info: [GET] /api/horses/1
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:45] info: [auth:q8nzc] Starting auth for GET /horses/1
[2026-01-28 14:20:45] info: [auth:q8nzc] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:q8nzc] Token from header: true
[2026-01-28 14:20:45] info: [auth:q8nzc] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: [ownership] horse 1 not found or not owned by user attacker-uuid-999
[2026-01-28 14:20:45] info: [GET] /api/horses/1 - 404
[2026-01-28 14:20:45] info: [PUT] /api/horses/1
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1166MB
[2026-01-28 14:20:45] info: [auth:gk2n8o] Starting auth for PUT /horses/1
[2026-01-28 14:20:45] info: [auth:gk2n8o] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:gk2n8o] Token from header: true
[2026-01-28 14:20:45] info: [auth:gk2n8o] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [PUT] /api/horses/1 - 403
[2026-01-28 14:20:45] info: [POST] /api/training/train
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1167MB
[2026-01-28 14:20:45] info: [auth:daxrcr] Starting auth for POST /training/train
[2026-01-28 14:20:45] info: [auth:daxrcr] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:daxrcr] Token from header: true
[2026-01-28 14:20:45] info: [auth:daxrcr] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [POST] /api/training/train - 403
[2026-01-28 14:20:45] info: [POST] /api/competition/enter
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:20:45] info: [auth:e9hfc] Starting auth for POST /competition/enter
[2026-01-28 14:20:45] info: [auth:e9hfc] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:e9hfc] Token from header: true
[2026-01-28 14:20:45] info: [auth:e9hfc] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [POST] /api/competition/enter - 403
[2026-01-28 14:20:45] info: [GET] /api/competition/horse/1/results
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:20:45] info: [auth:nebdwa] Starting auth for GET /competition/horse/1/results
[2026-01-28 14:20:45] info: [auth:nebdwa] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:nebdwa] Token from header: true
[2026-01-28 14:20:45] info: [auth:nebdwa] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [auth:ikid01] Starting auth for GET /horse/1/results
[2026-01-28 14:20:45] info: [auth:ikid01] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:ikid01] Token from header: true
[2026-01-28 14:20:45] info: [auth:ikid01] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: [ownership] horse 1 not found or not owned by user attacker-uuid-999
[2026-01-28 14:20:45] info: [GET] /api/competition/horse/1/results - 404
[2026-01-28 14:20:45] info: [GET] /api/grooms/user/victim-uuid-001
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 14:20:45] info: [auth:jw8u6] Starting auth for GET /grooms/user/victim-uuid-001
[2026-01-28 14:20:45] info: [auth:jw8u6] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:jw8u6] Token from header: true
[2026-01-28 14:20:45] info: [auth:jw8u6] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [auth:1q5qaf] Starting auth for GET /user/victim-uuid-001
[2026-01-28 14:20:45] info: [auth:1q5qaf] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:1q5qaf] Token from header: true
[2026-01-28 14:20:45] info: [auth:1q5qaf] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: [groomRoutes] Self-access violation: user attacker-uuid-999 attempted to access grooms for user victim-uuid-001
[2026-01-28 14:20:45] info: [GET] /api/grooms/user/victim-uuid-001 - 404
[2026-01-28 14:20:45] info: [POST] /api/grooms/assign
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 14:20:45] info: [auth:atzlfc] Starting auth for POST /grooms/assign
[2026-01-28 14:20:45] info: [auth:atzlfc] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:atzlfc] Token from header: true
[2026-01-28 14:20:45] info: [auth:atzlfc] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [POST] /api/grooms/assign - 403
[2026-01-28 14:20:45] info: [POST] /api/breeding/breed
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 14:20:45] info: [auth:kw5g6b] Starting auth for POST /breeding/breed
[2026-01-28 14:20:45] info: [auth:kw5g6b] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:kw5g6b] Token from header: true
[2026-01-28 14:20:45] info: [auth:kw5g6b] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] info: [POST] /api/breeding/breed - 403
[2026-01-28 14:20:45] info: [GET] /api/admin/users
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 14:20:45] info: [auth:gsq5w] Starting auth for GET /users
[2026-01-28 14:20:45] info: [auth:gsq5w] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:gsq5w] Token from header: true
[2026-01-28 14:20:45] info: [auth:gsq5w] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: [auth] User attacker-uuid-999 with role 'user' attempted to access GET /users (requires: admin)
[2026-01-28 14:20:45] info: [GET] /api/admin/users - 403
[2026-01-28 14:20:45] info: [POST] /api/admin/users/ban
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:20:45] info: [auth:mhz4hd] Starting auth for POST /users/ban
[2026-01-28 14:20:45] info: [auth:mhz4hd] Token from cookie: false
[2026-01-28 14:20:45] info: [auth:mhz4hd] Token from header: true
[2026-01-28 14:20:45] info: [auth:mhz4hd] Authenticated user attacker-uuid-999
[2026-01-28 14:20:45] warn: [auth] User attacker-uuid-999 with role 'user' attempted to access POST /users/ban (requires: admin)
[2026-01-28 14:20:45] info: [POST] /api/admin/users/ban - 403
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1170MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1169MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1158MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 14:20:45] info: [POST] /api/auth/register
[2026-01-28 14:20:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2870ms
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2840ms
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2860ms
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2823ms
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2833ms
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2845ms
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2828ms
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2847ms
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2933ms
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [EmailVerification] Created verification token
[2026-01-28 14:20:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:48] info: [authController.register] Verification email sent
[2026-01-28 14:20:48] warn: [Performance] Slow request detected: POST /register took 2963ms
[2026-01-28 14:20:48] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1170MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1169MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1172MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1166MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1171MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1170MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1175MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1169MB
[2026-01-28 14:20:48] info: [POST] /api/auth/login
[2026-01-28 14:20:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:48] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:48] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:48] error: Error Invalid credentials
[2026-01-28 14:20:48] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:49] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:49] error: Error Invalid credentials
[2026-01-28 14:20:49] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1178MB
[2026-01-28 14:20:49] info: [auth:oj6u6g] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:oj6u6g] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:oj6u6g] Token from header: true
[2026-01-28 14:20:49] info: [auth:oj6u6g] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1176MB
[2026-01-28 14:20:49] info: [auth:gyq83] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:gyq83] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:gyq83] Token from header: true
[2026-01-28 14:20:49] info: [auth:gyq83] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1175MB
[2026-01-28 14:20:49] info: [auth:2ewq1e] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:2ewq1e] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:2ewq1e] Token from header: true
[2026-01-28 14:20:49] info: [auth:2ewq1e] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:49] info: [auth:f0cyik] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:f0cyik] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:f0cyik] Token from header: true
[2026-01-28 14:20:49] info: [auth:f0cyik] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1171MB
[2026-01-28 14:20:49] info: [auth:ek1dmf] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:ek1dmf] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:ek1dmf] Token from header: true
[2026-01-28 14:20:49] info: [auth:ek1dmf] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1169MB
[2026-01-28 14:20:49] info: [auth:h0rbxf] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:h0rbxf] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:h0rbxf] Token from header: true
[2026-01-28 14:20:49] info: [auth:h0rbxf] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 14:20:49] info: [auth:y7mi0h] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:y7mi0h] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:y7mi0h] Token from header: true
[2026-01-28 14:20:49] info: [auth:y7mi0h] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1166MB
[2026-01-28 14:20:49] info: [auth:b2hvva] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:b2hvva] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:b2hvva] Token from header: true
[2026-01-28 14:20:49] info: [auth:b2hvva] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:20:49] info: [auth:rek8js] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:rek8js] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:rek8js] Token from header: true
[2026-01-28 14:20:49] info: [auth:rek8js] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1178MB
[2026-01-28 14:20:49] info: [auth:kayep] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:kayep] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:kayep] Token from header: true
[2026-01-28 14:20:49] info: [auth:kayep] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1176MB
[2026-01-28 14:20:49] info: [auth:6gvbk] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:6gvbk] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:6gvbk] Token from header: true
[2026-01-28 14:20:49] info: [auth:6gvbk] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:49] info: [auth:4gtuo] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:4gtuo] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:4gtuo] Token from header: true
[2026-01-28 14:20:49] info: [auth:4gtuo] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:49] info: [auth:p4ig5j] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:p4ig5j] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:p4ig5j] Token from header: true
[2026-01-28 14:20:49] info: [auth:p4ig5j] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1171MB
[2026-01-28 14:20:49] info: [auth:6r9q20h] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:6r9q20h] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:6r9q20h] Token from header: true
[2026-01-28 14:20:49] info: [auth:6r9q20h] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1169MB
[2026-01-28 14:20:49] info: [auth:8l2fh] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:8l2fh] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:8l2fh] Token from header: true
[2026-01-28 14:20:49] info: [auth:8l2fh] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1167MB
[2026-01-28 14:20:49] info: [auth:d7i2qo] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:d7i2qo] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:d7i2qo] Token from header: true
[2026-01-28 14:20:49] info: [auth:d7i2qo] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:20:49] info: [auth:7tvetr] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:7tvetr] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:7tvetr] Token from header: true
[2026-01-28 14:20:49] info: [auth:7tvetr] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1179MB
[2026-01-28 14:20:49] info: [auth:22khn5] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:22khn5] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:22khn5] Token from header: true
[2026-01-28 14:20:49] info: [auth:22khn5] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1177MB
[2026-01-28 14:20:49] info: [auth:n3x077] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:n3x077] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:n3x077] Token from header: true
[2026-01-28 14:20:49] info: [auth:n3x077] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1176MB
[2026-01-28 14:20:49] info: [auth:m6mvy6] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:m6mvy6] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:m6mvy6] Token from header: true
[2026-01-28 14:20:49] info: [auth:m6mvy6] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:49] info: [auth:akhih9] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:akhih9] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:akhih9] Token from header: true
[2026-01-28 14:20:49] info: [auth:akhih9] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1172MB
[2026-01-28 14:20:49] info: [auth:jmphkg] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:jmphkg] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:jmphkg] Token from header: true
[2026-01-28 14:20:49] info: [auth:jmphkg] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1170MB
[2026-01-28 14:20:49] info: [auth:og7zh] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:og7zh] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:og7zh] Token from header: true
[2026-01-28 14:20:49] info: [auth:og7zh] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 14:20:49] info: [auth:ajpejv] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:ajpejv] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:ajpejv] Token from header: true
[2026-01-28 14:20:49] info: [auth:ajpejv] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1167MB
[2026-01-28 14:20:49] info: [auth:i3wx7] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:i3wx7] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:i3wx7] Token from header: true
[2026-01-28 14:20:49] info: [auth:i3wx7] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB
[2026-01-28 14:20:49] info: [auth:4rbxej] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:4rbxej] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:4rbxej] Token from header: true
[2026-01-28 14:20:49] info: [auth:4rbxej] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1179MB
[2026-01-28 14:20:49] info: [auth:rpcpvf] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:rpcpvf] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:rpcpvf] Token from header: true
[2026-01-28 14:20:49] info: [auth:rpcpvf] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1177MB
[2026-01-28 14:20:49] info: [auth:991hur] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:991hur] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:991hur] Token from header: true
[2026-01-28 14:20:49] info: [auth:991hur] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1175MB
[2026-01-28 14:20:49] info: [auth:zudh8a] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:zudh8a] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:zudh8a] Token from header: true
[2026-01-28 14:20:49] info: [auth:zudh8a] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:49] info: [auth:4iv1zc] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:4iv1zc] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:4iv1zc] Token from header: true
[2026-01-28 14:20:49] info: [auth:4iv1zc] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1171MB
[2026-01-28 14:20:49] info: [auth:0txwuq] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:0txwuq] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:0txwuq] Token from header: true
[2026-01-28 14:20:49] info: [auth:0txwuq] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1170MB
[2026-01-28 14:20:49] info: [auth:i28mpa] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:i28mpa] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:i28mpa] Token from header: true
[2026-01-28 14:20:49] info: [auth:i28mpa] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1168MB
[2026-01-28 14:20:49] info: [auth:kj77df] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:kj77df] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:kj77df] Token from header: true
[2026-01-28 14:20:49] info: [auth:kj77df] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB
[2026-01-28 14:20:49] info: [auth:puw4ai] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:puw4ai] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:puw4ai] Token from header: true
[2026-01-28 14:20:49] info: [auth:puw4ai] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB
[2026-01-28 14:20:49] info: [auth:4tic7h] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:4tic7h] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:4tic7h] Token from header: true
[2026-01-28 14:20:49] info: [auth:4tic7h] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1178MB
[2026-01-28 14:20:49] info: [auth:o2er7k] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:o2er7k] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:o2er7k] Token from header: true
[2026-01-28 14:20:49] info: [auth:o2er7k] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1176MB
[2026-01-28 14:20:49] info: [auth:z29nu] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:z29nu] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:z29nu] Token from header: true
[2026-01-28 14:20:49] info: [auth:z29nu] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:49] info: [auth:sonz3e] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:sonz3e] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:sonz3e] Token from header: true
[2026-01-28 14:20:49] info: [auth:sonz3e] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:49] info: [auth:8opgio] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:8opgio] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:8opgio] Token from header: true
[2026-01-28 14:20:49] info: [auth:8opgio] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:20:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1171MB
[2026-01-28 14:20:49] info: [auth:p19fge] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:20:49] info: [auth:p19fge] Token from cookie: false
[2026-01-28 14:20:49] info: [auth:p19fge] Token from header: true
[2026-01-28 14:20:49] info: [auth:p19fge] Authenticated user attacker-uuid-999
[2026-01-28 14:20:49] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999/progress
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1181MB
[2026-01-28 14:20:50] info: [auth:rcy8ts] Starting auth for GET /user/attacker-uuid-999/progress
[2026-01-28 14:20:50] info: [auth:rcy8ts] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:rcy8ts] Token from header: true
[2026-01-28 14:20:50] info: [auth:rcy8ts] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] warn: 404 - Route not found: GET /api/user/attacker-uuid-999/progress from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999/progress - 404
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1183MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1176MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1171MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1183MB
[2026-01-28 14:20:50] info: [auth:p9jro9] Starting auth for PUT /profile
[2026-01-28 14:20:50] info: [auth:p9jro9] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:p9jro9] Token from header: true
[2026-01-28 14:20:50] info: [auth:p9jro9] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:20:50] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:20:50] error: Error At least one field is required
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB
[2026-01-28 14:20:50] info: [auth:vkf4v] Starting auth for PUT /profile
[2026-01-28 14:20:50] info: [auth:vkf4v] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:vkf4v] Token from header: true
[2026-01-28 14:20:50] info: [auth:vkf4v] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:20:50] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:20:50] error: Error At least one field is required
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB
[2026-01-28 14:20:50] info: [auth:5t7fk9] Starting auth for PUT /profile
[2026-01-28 14:20:50] info: [auth:5t7fk9] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:5t7fk9] Token from header: true
[2026-01-28 14:20:50] info: [auth:5t7fk9] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:20:50] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:20:50] error: Error At least one field is required
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1179MB
[2026-01-28 14:20:50] info: [auth:ne9orh] Starting auth for PUT /profile
[2026-01-28 14:20:50] info: [auth:ne9orh] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:ne9orh] Token from header: true
[2026-01-28 14:20:50] info: [auth:ne9orh] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:20:50] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:20:50] error: Error At least one field is required
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1177MB
[2026-01-28 14:20:50] info: [auth:yyf4gs] Starting auth for PUT /profile
[2026-01-28 14:20:50] info: [auth:yyf4gs] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:yyf4gs] Token from header: true
[2026-01-28 14:20:50] info: [auth:yyf4gs] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:20:50] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:20:50] error: Error At least one field is required
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1176MB
[2026-01-28 14:20:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:50] info: [EmailVerification] Created verification token
[2026-01-28 14:20:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:50] info: [authController.register] Verification email sent
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1178MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1175MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB
[2026-01-28 14:20:50] info: [auth:hyp1s] Starting auth for PUT /profile
[2026-01-28 14:20:50] info: [auth:hyp1s] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:hyp1s] Token from header: true
[2026-01-28 14:20:50] info: [auth:hyp1s] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:20:50] info: [POST] /api/auth/register
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB
[2026-01-28 14:20:50] warn: [Validation] Input validation failed
[2026-01-28 14:20:50] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:50] info: [auth:7cdqp] Starting auth for PUT /profile
[2026-01-28 14:20:50] info: [auth:7cdqp] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:7cdqp] Token from header: true
[2026-01-28 14:20:50] info: [auth:7cdqp] Authenticated user attacker-uuid-999
[2026-01-28 14:20:50] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:20:50] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:20:50] error: Error At least one field is required
[2026-01-28 14:20:50] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:50] info: [auth:7ikrrl] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:7ikrrl] Token from cookie: false
[2026-01-28 14:20:50] warn: [auth:7ikrrl] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/horses/1
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:50] info: [auth:hkjoh] Starting auth for GET /horses/1
[2026-01-28 14:20:50] info: [auth:hkjoh] Token from cookie: false
[2026-01-28 14:20:50] warn: [auth:hkjoh] Access token is required for GET /horses/1 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/horses/1 - 401
[2026-01-28 14:20:50] info: [POST] /api/competition/enter
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:50] info: [auth:zj2j6] Starting auth for POST /competition/enter
[2026-01-28 14:20:50] info: [auth:zj2j6] Token from cookie: false
[2026-01-28 14:20:50] warn: [auth:zj2j6] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [POST] /api/competition/enter - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1173MB
[2026-01-28 14:20:50] info: [auth:ds18tk] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:ds18tk] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:ds18tk] Token from header: true
[2026-01-28 14:20:50] warn: [auth:ds18tk] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:50] info: [auth:yd27zq] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:yd27zq] Token from cookie: false
[2026-01-28 14:20:50] warn: [auth:yd27zq] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:50] info: [auth:f2v2t] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:f2v2t] Token from cookie: false
[2026-01-28 14:20:50] warn: [auth:f2v2t] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1174MB
[2026-01-28 14:20:50] info: [auth:ppz6n] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:ppz6n] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:ppz6n] Token from header: true
[2026-01-28 14:20:50] warn: [auth:ppz6n] Verify failed: invalid signature
[2026-01-28 14:20:50] warn: [auth:ppz6n] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1177MB
[2026-01-28 14:20:50] info: [auth:d8git6] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:d8git6] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:d8git6] Token from header: true
[2026-01-28 14:20:50] warn: [auth:d8git6] Verify failed: invalid signature
[2026-01-28 14:20:50] warn: [auth:d8git6] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1179MB
[2026-01-28 14:20:50] info: [auth:e4y8pd] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:e4y8pd] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:e4y8pd] Token from header: true
[2026-01-28 14:20:50] warn: [auth:e4y8pd] Verify failed: invalid signature
[2026-01-28 14:20:50] warn: [auth:e4y8pd] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1181MB
[2026-01-28 14:20:50] info: [auth:ahg689] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:ahg689] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:ahg689] Token from header: true
[2026-01-28 14:20:50] warn: [auth:ahg689] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:50] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB
[2026-01-28 14:20:50] info: [auth:of8e] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:50] info: [auth:of8e] Token from cookie: false
[2026-01-28 14:20:50] info: [auth:of8e] Token from header: true
[2026-01-28 14:20:50] warn: [auth:of8e] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:51] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:51] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:20:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1182MB
[2026-01-28 14:20:51] info: [auth:qjij1] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:20:51] info: [auth:qjij1] Token from cookie: false
[2026-01-28 14:20:51] info: [auth:qjij1] Token from header: true
[2026-01-28 14:20:51] warn: [auth:qjij1] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:20:51] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:20:51] info: [GET] /api/user/invalid-uuid-format
[2026-01-28 14:20:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1184MB
[2026-01-28 14:20:51] info: [auth:i6449v] Starting auth for GET /user/invalid-uuid-format
[2026-01-28 14:20:51] info: [auth:i6449v] Token from cookie: false
[2026-01-28 14:20:51] info: [auth:i6449v] Token from header: true
[2026-01-28 14:20:51] info: [auth:i6449v] Authenticated user attacker-uuid-999
[2026-01-28 14:20:51] warn: 404 - Route not found: GET /api/user/invalid-uuid-format from ::ffff:127.0.0.1
[2026-01-28 14:20:51] info: [GET] /api/user/invalid-uuid-format - 404
[2026-01-28 14:20:51] info: [POST] /api/auth/register
[2026-01-28 14:20:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1186MB
[2026-01-28 14:20:51] warn: [Validation] Input validation failed
[2026-01-28 14:20:51] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:51] info: [POST] /api/auth/login
[2026-01-28 14:20:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1180MB
[2026-01-28 14:20:51] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:51] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:51] error: Error Invalid credentials
[2026-01-28 14:20:51] info: [POST] /api/auth/login - 401
[2026-01-28 14:20:51] info: [POST] /api/auth/login
[2026-01-28 14:20:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1176MB
[2026-01-28 14:20:51] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:20:51] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:20:51] error: Error Invalid credentials
[2026-01-28 14:20:51] info: [POST] /api/auth/login - 401
PASS __tests__/integration/security-attack-simulation.test.mjs (7.041 s)
  Security Attack Simulation Tests
    IDOR (Insecure Direct Object Reference) Attack Simulation
      User Resource IDOR Attacks
        ‚àö should block access to another user's profile (45 ms)
        ‚àö should block access to another user's progress data (26 ms)
        ‚àö should block access to another user's activity feed (26 ms)
        ‚àö should block modification of another user's profile (32 ms)
        ‚àö should block deletion of another user's account (25 ms)
      Horse Resource IDOR Attacks
        ‚àö should block access to another user's horse details (76 ms)
        ‚àö should block modification of another user's horse (25 ms)
        ‚àö should block training another user's horse (24 ms)
      Competition Resource IDOR Attacks
        ‚àö should block entering another user's horse in competition (27 ms)
        ‚àö should block accessing another user's competition results (29 ms)
      Groom Resource IDOR Attacks
        ‚àö should block accessing another user's groom list (32 ms)
        ‚àö should block assigning another user's groom (26 ms)
      Breeding Resource IDOR Attacks
        ‚àö should block breeding with another user's horse without permission (24 ms)
      Privilege Escalation Attempts
        ‚àö should block accessing admin endpoints with user token (28 ms)
        ‚àö should block admin operations with user token (27 ms)
    Rate Limiting Bypass Attempt Simulation
      Rapid-Fire Attack Simulation
        ‚àö should have rate limiting configured on registration endpoint (3021 ms)
        ‚àö should have rate limiting configured on login endpoint (brute force protection) (389 ms)
        ‚àö should have rate limiting configured on profile update endpoint (943 ms)
      Rate Limit Header Validation
        ‚àö should include proper rate limit headers in all responses (45 ms)
    Input Validation Fuzzing Simulation
      SQL Injection Attempts
        ‚àö should block SQL injection in email field (70 ms)
        ‚àö should block SQL injection in username field (16 ms)
      XSS (Cross-Site Scripting) Attempts
        ‚àö should sanitize XSS payloads in bio field (120 ms)
        ‚àö should sanitize XSS payloads in name fields (311 ms)
      Buffer Overflow Attempts
        ‚àö should reject extremely long email addresses (22 ms)
        ‚àö should reject extremely long usernames (18 ms)
        ‚àö should reject extremely long passwords (18 ms)
        ‚àö should reject extremely long bio text (24 ms)
      Special Character Injection
        ‚àö should handle null bytes in input (16 ms)
        ‚àö should handle Unicode control characters (25 ms)
    Authentication Bypass Attempt Simulation
      Missing Authentication Token
        ‚àö should block access to protected user endpoints without token (23 ms)
        ‚àö should block access to protected horse endpoints without token (22 ms)
        ‚àö should block access to protected competition endpoints without token (21 ms)
      Invalid Authentication Token
        ‚àö should reject malformed JWT tokens (25 ms)
        ‚àö should reject empty Bearer token (22 ms)
        ‚àö should reject token without Bearer prefix (22 ms)
      Token Manipulation Attempts
        ‚àö should reject token with modified payload (28 ms)
        ‚àö should reject token with modified signature (26 ms)
      Session Fixation Attempts
        ‚àö should not accept hardcoded or predictable tokens (98 ms)
    Information Disclosure Prevention
      ‚àö should not leak database errors in responses (25 ms)
      ‚àö should not leak stack traces in production (17 ms)
      ‚àö should not reveal whether username exists during login (41 ms)

[2026-01-28 14:20:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:51] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:51] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:52] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:52] info: [EmailVerification] Created verification token
[2026-01-28 14:20:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:52] info: [authController.register] Verification email sent
[2026-01-28 14:20:52] info: [auth:pjaoii] Starting auth for GET /api/test/success
[2026-01-28 14:20:52] info: [auth:pjaoii] Token from cookie: false
[2026-01-28 14:20:52] info: [auth:pjaoii] Token from header: true
[2026-01-28 14:20:52] info: [auth:pjaoii] Authenticated user d4cc8427-eff6-4e93-a236-aabe3aed35df
[2026-01-28 14:20:52] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:52] info: [EmailVerification] Created verification token
[2026-01-28 14:20:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:52] info: [authController.register] Verification email sent
[2026-01-28 14:20:52] info: [auth:erxvgu] Starting auth for GET /api/test/error
[2026-01-28 14:20:52] info: [auth:erxvgu] Token from cookie: false
[2026-01-28 14:20:52] info: [auth:erxvgu] Token from header: true
[2026-01-28 14:20:52] info: [auth:erxvgu] Authenticated user a9028cc8-7931-489c-89cf-cee4d62773d7
[2026-01-28 14:20:52] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:52] info: [EmailVerification] Created verification token
[2026-01-28 14:20:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:52] info: [authController.register] Verification email sent
[2026-01-28 14:20:52] info: [auth:0mlgdt] Starting auth for GET /api/test/not-found
[2026-01-28 14:20:52] info: [auth:0mlgdt] Token from cookie: false
[2026-01-28 14:20:52] info: [auth:0mlgdt] Token from header: true
[2026-01-28 14:20:52] info: [auth:0mlgdt] Authenticated user c1709319-089c-4509-9c1a-8801de0a4c7f
[2026-01-28 14:20:53] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:53] info: [EmailVerification] Created verification token
[2026-01-28 14:20:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:53] info: [authController.register] Verification email sent
[2026-01-28 14:20:53] info: [auth:x5f68i] Starting auth for GET /api/test/validation-error
[2026-01-28 14:20:53] info: [auth:x5f68i] Token from cookie: false
[2026-01-28 14:20:53] info: [auth:x5f68i] Token from header: true
[2026-01-28 14:20:53] info: [auth:x5f68i] Authenticated user b5fbd439-8bf9-4661-873a-5f64509b89a3
[2026-01-28 14:20:53] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:53] info: [EmailVerification] Created verification token
[2026-01-28 14:20:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:53] info: [authController.register] Verification email sent
[2026-01-28 14:20:53] info: [auth:sqcn8] Starting auth for GET /api/test/paginated
[2026-01-28 14:20:53] info: [auth:sqcn8] Token from cookie: false
[2026-01-28 14:20:53] info: [auth:sqcn8] Token from header: true
[2026-01-28 14:20:53] info: [auth:sqcn8] Authenticated user c4b10c11-ab24-4007-a02f-c5dd21b4039f
[2026-01-28 14:20:53] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:53] info: [EmailVerification] Created verification token
[2026-01-28 14:20:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:53] info: [authController.register] Verification email sent
[2026-01-28 14:20:53] info: [auth:tsjrqf] Starting auth for GET /api/test/paginated
[2026-01-28 14:20:53] info: [auth:tsjrqf] Token from cookie: false
[2026-01-28 14:20:53] info: [auth:tsjrqf] Token from header: true
[2026-01-28 14:20:53] info: [auth:tsjrqf] Authenticated user 0c1c8d71-61ad-4cb5-8f14-98e55386f23d
[2026-01-28 14:20:54] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:54] info: [EmailVerification] Created verification token
[2026-01-28 14:20:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:54] info: [authController.register] Verification email sent
[2026-01-28 14:20:54] info: [auth:cq0go] Starting auth for GET /api/test/success
[2026-01-28 14:20:54] info: [auth:cq0go] Token from cookie: false
[2026-01-28 14:20:54] info: [auth:cq0go] Token from header: true
[2026-01-28 14:20:54] info: [auth:cq0go] Authenticated user 997e0638-45f2-4c68-a9d1-728f07b13c87
[2026-01-28 14:20:54] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:54] info: [EmailVerification] Created verification token
[2026-01-28 14:20:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:54] info: [authController.register] Verification email sent
[2026-01-28 14:20:54] info: [auth:q9e97x] Starting auth for GET /api/test/large-data
[2026-01-28 14:20:54] info: [auth:q9e97x] Token from cookie: false
[2026-01-28 14:20:54] info: [auth:q9e97x] Token from header: true
[2026-01-28 14:20:54] info: [auth:q9e97x] Authenticated user 7d6bea4c-7c98-47d1-85e2-5b82df4d4fc8
[2026-01-28 14:20:54] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:54] info: [EmailVerification] Created verification token
[2026-01-28 14:20:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:54] info: [authController.register] Verification email sent
[2026-01-28 14:20:54] info: [auth:jipp5f] Starting auth for GET /api/test/field-selection
[2026-01-28 14:20:54] info: [auth:jipp5f] Token from cookie: false
[2026-01-28 14:20:54] info: [auth:jipp5f] Token from header: true
[2026-01-28 14:20:54] info: [auth:jipp5f] Authenticated user 23a68535-d1e4-48a6-929b-7fbe5b59b8c7
[2026-01-28 14:20:55] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:55] info: [EmailVerification] Created verification token
[2026-01-28 14:20:55] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:55] info: [authController.register] Verification email sent
[2026-01-28 14:20:55] info: [auth:hq8kj6] Starting auth for GET /api/test/field-selection
[2026-01-28 14:20:55] info: [auth:hq8kj6] Token from cookie: false
[2026-01-28 14:20:55] info: [auth:hq8kj6] Token from header: true
[2026-01-28 14:20:55] info: [auth:hq8kj6] Authenticated user 4bb49a98-470d-45f1-ba57-96a0998db066
[2026-01-28 14:20:55] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:55] info: [EmailVerification] Created verification token
[2026-01-28 14:20:55] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:55] info: [authController.register] Verification email sent
[2026-01-28 14:20:55] info: [auth:zxchtj] Starting auth for GET /api/test/etag
[2026-01-28 14:20:55] info: [auth:zxchtj] Token from cookie: false
[2026-01-28 14:20:55] info: [auth:zxchtj] Token from header: true
[2026-01-28 14:20:55] info: [auth:zxchtj] Authenticated user 6d3d0a32-a587-413f-a202-7f4cdbf6df3d
[2026-01-28 14:20:55] info: [auth:gqad1] Starting auth for GET /api/test/etag
[2026-01-28 14:20:55] info: [auth:gqad1] Token from cookie: false
[2026-01-28 14:20:55] info: [auth:gqad1] Token from header: true
[2026-01-28 14:20:55] info: [auth:gqad1] Authenticated user 6d3d0a32-a587-413f-a202-7f4cdbf6df3d
[2026-01-28 14:20:55] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:55] info: [EmailVerification] Created verification token
[2026-01-28 14:20:55] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:55] info: [authController.register] Verification email sent
[2026-01-28 14:20:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:56] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:20:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:56] info: [EmailVerification] Created verification token
[2026-01-28 14:20:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:56] info: [authController.register] Verification email sent
[2026-01-28 14:20:56] info: [health] Health check passed
[2026-01-28 14:20:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:56] info: [EmailVerification] Created verification token
[2026-01-28 14:20:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:56] info: [authController.register] Verification email sent
[2026-01-28 14:20:56] info: [auth:ew1em] Starting auth for GET /api/test/success
[2026-01-28 14:20:56] info: [auth:ew1em] Token from cookie: false
[2026-01-28 14:20:56] warn: [auth:ew1em] Access token is required for GET /api/test/success from ::ffff:127.0.0.1
[2026-01-28 14:20:56] info: [auth:kdf43e] Starting auth for GET /api/test/error
[2026-01-28 14:20:56] info: [auth:kdf43e] Token from cookie: false
[2026-01-28 14:20:56] warn: [auth:kdf43e] Access token is required for GET /api/test/error from ::ffff:127.0.0.1
[2026-01-28 14:20:56] info: [auth:01hcok] Starting auth for GET /api/test/large-data
[2026-01-28 14:20:56] info: [auth:01hcok] Token from cookie: false
[2026-01-28 14:20:56] warn: [auth:01hcok] Access token is required for GET /api/test/large-data from ::ffff:127.0.0.1
[2026-01-28 14:20:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:56] info: [EmailVerification] Created verification token
[2026-01-28 14:20:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:56] info: [authController.register] Verification email sent
[2026-01-28 14:20:57] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:57] info: [EmailVerification] Created verification token
[2026-01-28 14:20:57] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:57] info: [authController.register] Verification email sent
[2026-01-28 14:20:57] warn: [Validation] Input validation failed
[2026-01-28 14:20:57] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:57] info: [EmailVerification] Created verification token
[2026-01-28 14:20:57] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:57] info: [authController.register] Verification email sent
[2026-01-28 14:20:57] info: [auth:1159c9] Starting auth for GET /api/test/success
[2026-01-28 14:20:57] info: [auth:1159c9] Token from cookie: false
[2026-01-28 14:20:57] info: [auth:1159c9] Token from header: true
[2026-01-28 14:20:57] info: [auth:1159c9] Authenticated user 1999f44b-3118-4aa3-9159-874e31331f80
[2026-01-28 14:20:57] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:57] info: [EmailVerification] Created verification token
[2026-01-28 14:20:57] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:57] info: [authController.register] Verification email sent
[2026-01-28 14:20:57] info: [auth:5oybz] Starting auth for GET /api/test/large-data
[2026-01-28 14:20:57] info: [auth:5oybz] Token from cookie: false
[2026-01-28 14:20:57] info: [auth:5oybz] Token from header: true
[2026-01-28 14:20:57] info: [auth:5oybz] Authenticated user 99da03dd-f214-4508-b045-34175b6682fd
PASS tests/integration/api-response-integration.test.mjs (6.851 s)
  üîÑ API Response Integration Tests
    üìã Response Format Standardization
      ‚àö should provide consistent success response format (410 ms)
      ‚àö should provide consistent error response format (322 ms)
      ‚àö should provide consistent not found response format (323 ms)
      ‚àö should provide consistent validation error response format (323 ms)
    üìä Pagination Response Validation
      ‚àö should provide consistent paginated response format (320 ms)
      ‚àö should handle pagination edge cases correctly (317 ms)
    ‚ö° Performance Monitoring Integration
      ‚àö should include performance headers in responses (315 ms)
      ‚àö should monitor large response performance (331 ms)
    üîß Response Optimization Features
      ‚àö should support field selection optimization (316 ms)
      ‚àö should support field exclusion optimization (317 ms)
      ‚àö should generate and validate ETags correctly (331 ms)
    üîó Cross-System Response Consistency
      ‚àö should maintain consistent response format across auth endpoints (593 ms)
      ‚àö should maintain consistent response format across health endpoints (324 ms)
      ‚àö should handle authentication errors consistently (340 ms)
    üõ°Ô∏è Error Handling Consistency
      ‚àö should handle invalid JSON gracefully (314 ms)
      ‚àö should handle validation errors consistently (309 ms)
    üìà Response Performance Benchmarking
      ‚àö should meet performance benchmarks for simple responses (313 ms)
      ‚àö should meet performance benchmarks for large responses (330 ms)

[2026-01-28 14:20:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:20:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:20:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:20:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:20:59] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:20:59] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:20:59] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:20:59] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:20:59] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:20:59] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:20:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:20:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:20:59] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:20:59] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:20:59] info: [POST] /api/auth/register
[2026-01-28 14:20:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1269MB
[2026-01-28 14:20:59] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:59] info: [EmailVerification] Created verification token
[2026-01-28 14:20:59] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:59] info: [authController.register] Verification email sent
[2026-01-28 14:20:59] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:59] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:20:59] info: [POST] /api/auth/register
[2026-01-28 14:20:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1274MB
[2026-01-28 14:20:59] warn: [Validation] Input validation failed
[2026-01-28 14:20:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:59] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:20:59] info: [POST] /api/auth/register
[2026-01-28 14:20:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1270MB
[2026-01-28 14:20:59] warn: [Validation] Input validation failed
[2026-01-28 14:20:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:59] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:20:59] info: [POST] /api/auth/register
[2026-01-28 14:20:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1281MB
[2026-01-28 14:20:59] info: [TokenRotation] Created new token pair
[2026-01-28 14:20:59] info: [EmailVerification] Created verification token
[2026-01-28 14:20:59] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:20:59] info: [authController.register] Verification email sent
[2026-01-28 14:20:59] info: [POST] /api/auth/register - 201
[2026-01-28 14:20:59] info: [POST] /api/auth/register
[2026-01-28 14:20:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1280MB
[2026-01-28 14:20:59] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 14:20:59] error: [POST] /api/auth/register - ERROR
[2026-01-28 14:20:59] error: Error User with this email or username already exists
[2026-01-28 14:20:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:20:59] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:20:59] info: [POST] /api/auth/register
[2026-01-28 14:20:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1279MB
[2026-01-28 14:21:00] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:00] info: [EmailVerification] Created verification token
[2026-01-28 14:21:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:00] info: [authController.register] Verification email sent
[2026-01-28 14:21:00] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:00] info: [POST] /api/auth/login
[2026-01-28 14:21:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1281MB
[2026-01-28 14:21:00] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:00] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:00] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:00] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:00] info: [POST] /api/auth/register
[2026-01-28 14:21:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1279MB
[2026-01-28 14:21:00] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:00] info: [EmailVerification] Created verification token
[2026-01-28 14:21:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:00] info: [authController.register] Verification email sent
[2026-01-28 14:21:00] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:00] info: [POST] /api/auth/login
[2026-01-28 14:21:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1281MB
[2026-01-28 14:21:00] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:21:00] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:21:00] error: Error Invalid credentials
[2026-01-28 14:21:00] info: [POST] /api/auth/login - 401
[2026-01-28 14:21:00] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:00] info: [POST] /api/auth/register
[2026-01-28 14:21:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1280MB
[2026-01-28 14:21:01] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:01] info: [EmailVerification] Created verification token
[2026-01-28 14:21:01] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:01] info: [authController.register] Verification email sent
[2026-01-28 14:21:01] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:01] info: [POST] /api/auth/login
[2026-01-28 14:21:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1282MB
[2026-01-28 14:21:01] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:21:01] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:21:01] error: Error Invalid credentials
[2026-01-28 14:21:01] info: [POST] /api/auth/login - 401
[2026-01-28 14:21:01] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:01] info: [POST] /api/auth/register
[2026-01-28 14:21:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1282MB
[2026-01-28 14:21:01] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:01] info: [EmailVerification] Created verification token
[2026-01-28 14:21:01] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:01] info: [authController.register] Verification email sent
[2026-01-28 14:21:01] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:01] info: [POST] /api/auth/login
[2026-01-28 14:21:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1282MB
[2026-01-28 14:21:01] warn: [Validation] Input validation failed
[2026-01-28 14:21:01] info: [POST] /api/auth/login - 400
[2026-01-28 14:21:01] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:01] info: [POST] /api/auth/register
[2026-01-28 14:21:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1277MB
[2026-01-28 14:21:02] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:02] info: [EmailVerification] Created verification token
[2026-01-28 14:21:02] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:02] info: [authController.register] Verification email sent
[2026-01-28 14:21:02] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:02] info: [POST] /api/auth/refresh
[2026-01-28 14:21:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1278MB
[2026-01-28 14:21:02] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:02] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:02] info: [POST] /api/auth/refresh - 200
[2026-01-28 14:21:02] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:02] info: [POST] /api/auth/register
[2026-01-28 14:21:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1275MB
[2026-01-28 14:21:02] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:02] info: [EmailVerification] Created verification token
[2026-01-28 14:21:02] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:02] info: [authController.register] Verification email sent
[2026-01-28 14:21:02] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:02] info: [POST] /api/auth/refresh
[2026-01-28 14:21:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1276MB
[2026-01-28 14:21:02] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:02] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:02] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:02] error: [POST] /api/auth/refresh - ERROR
[2026-01-28 14:21:02] error: Error Token reuse detected - please login again
[2026-01-28 14:21:02] info: [POST] /api/auth/refresh - 401
[2026-01-28 14:21:02] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:02] info: [POST] /api/auth/register
[2026-01-28 14:21:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1274MB
[2026-01-28 14:21:02] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:02] info: [EmailVerification] Created verification token
[2026-01-28 14:21:02] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:02] info: [authController.register] Verification email sent
[2026-01-28 14:21:02] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:02] info: [POST] /api/auth/refresh
[2026-01-28 14:21:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1276MB
[2026-01-28 14:21:02] warn: [Validation] Input validation failed
[2026-01-28 14:21:02] info: [POST] /api/auth/refresh - 400
[2026-01-28 14:21:02] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:02] info: [POST] /api/auth/register
[2026-01-28 14:21:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1286MB
[2026-01-28 14:21:03] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:03] info: [EmailVerification] Created verification token
[2026-01-28 14:21:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:03] info: [authController.register] Verification email sent
[2026-01-28 14:21:03] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:03] info: [GET] /api/auth/me
[2026-01-28 14:21:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1285MB
[2026-01-28 14:21:03] info: [auth:me07l] Starting auth for GET /me
[2026-01-28 14:21:03] info: [auth:me07l] Token from cookie: false
[2026-01-28 14:21:03] info: [auth:me07l] Token from header: true
[2026-01-28 14:21:03] info: [auth:me07l] Authenticated user dffd5c80-455f-451b-99f2-c42f5d554b95
[2026-01-28 14:21:03] info: [GET] /api/auth/me - 200
[2026-01-28 14:21:03] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:03] info: [POST] /api/auth/register
[2026-01-28 14:21:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1282MB
[2026-01-28 14:21:03] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:03] info: [EmailVerification] Created verification token
[2026-01-28 14:21:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:03] info: [authController.register] Verification email sent
[2026-01-28 14:21:03] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:03] info: [GET] /api/auth/me
[2026-01-28 14:21:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1284MB
[2026-01-28 14:21:03] info: [auth:3km51k] Starting auth for GET /me
[2026-01-28 14:21:03] info: [auth:3km51k] Token from cookie: false
[2026-01-28 14:21:03] warn: [auth:3km51k] Access token is required for GET /me from ::ffff:127.0.0.1
[2026-01-28 14:21:03] info: [GET] /api/auth/me - 401
[2026-01-28 14:21:03] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:03] info: [POST] /api/auth/register
[2026-01-28 14:21:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1280MB
[2026-01-28 14:21:03] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:03] info: [EmailVerification] Created verification token
[2026-01-28 14:21:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:03] info: [authController.register] Verification email sent
[2026-01-28 14:21:03] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:03] info: [GET] /api/auth/me
[2026-01-28 14:21:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1280MB
[2026-01-28 14:21:03] info: [auth:hlrfz] Starting auth for GET /me
[2026-01-28 14:21:03] info: [auth:hlrfz] Token from cookie: false
[2026-01-28 14:21:03] info: [auth:hlrfz] Token from header: true
[2026-01-28 14:21:03] warn: [auth:hlrfz] Invalid or expired token for GET /me from ::ffff:127.0.0.1
[2026-01-28 14:21:03] info: [GET] /api/auth/me - 401
[2026-01-28 14:21:03] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:03] info: [POST] /api/auth/register
[2026-01-28 14:21:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1276MB
[2026-01-28 14:21:04] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:04] info: [EmailVerification] Created verification token
[2026-01-28 14:21:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:04] info: [authController.register] Verification email sent
[2026-01-28 14:21:04] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:04] info: [POST] /api/auth/logout
[2026-01-28 14:21:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1277MB
[2026-01-28 14:21:04] info: [auth:lukc1r] Starting auth for POST /logout
[2026-01-28 14:21:04] info: [auth:lukc1r] Token from cookie: false
[2026-01-28 14:21:04] info: [auth:lukc1r] Token from header: true
[2026-01-28 14:21:04] info: [auth:lukc1r] Authenticated user ee8360a2-7072-45d4-a9e4-f22074a21ea6
[2026-01-28 14:21:04] info: [POST] /api/auth/logout - 200
[2026-01-28 14:21:04] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:21:04] info: [POST] /api/auth/register
[2026-01-28 14:21:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1280MB
[2026-01-28 14:21:04] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:04] info: [EmailVerification] Created verification token
[2026-01-28 14:21:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:04] info: [authController.register] Verification email sent
[2026-01-28 14:21:04] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:04] info: [POST] /api/auth/logout
[2026-01-28 14:21:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1281MB
[2026-01-28 14:21:04] info: [auth:y5v1ia] Starting auth for POST /logout
[2026-01-28 14:21:04] info: [auth:y5v1ia] Token from cookie: false
[2026-01-28 14:21:04] warn: [auth:y5v1ia] Access token is required for POST /logout from ::ffff:127.0.0.1
[2026-01-28 14:21:04] info: [POST] /api/auth/logout - 401
PASS tests/auth.test.mjs (6.477 s)
  üîê INTEGRATION: Authentication System - User Registration & Session Management
    POST /api/auth/register
      ‚àö should register a new user and player successfully (409 ms)
      ‚àö should reject registration with invalid email (19 ms)
      ‚àö should reject registration with weak password (21 ms)
      ‚àö should reject duplicate email registration (335 ms)
    POST /api/auth/login
      ‚àö should login successfully with valid credentials (615 ms)
      ‚àö should reject login with invalid email (334 ms)
      ‚àö should reject login with invalid password (601 ms)
      ‚àö should reject login with malformed email (332 ms)
    POST /api/auth/refresh
      ‚àö should refresh token successfully with valid refresh token (345 ms)
      ‚àö should reject refresh with invalid token (328 ms)
      ‚àö should reject refresh without token (322 ms)
    GET /api/auth/me
      ‚àö should get user profile successfully with valid token (331 ms)
      ‚àö should reject profile request without token (321 ms)
      ‚àö should reject profile request with invalid token (330 ms)
    POST /api/auth/logout
      ‚àö should logout successfully with valid token (340 ms)
      ‚àö should reject logout without token (327 ms)

[2026-01-28 14:21:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:05] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:05] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:05] info: [EmailVerification] Created verification token
[2026-01-28 14:21:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:05] info: [authController.register] Verification email sent
[2026-01-28 14:21:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:05] info: [EmailVerification] Created verification token
[2026-01-28 14:21:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:05] info: [authController.register] Verification email sent
[2026-01-28 14:21:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:06] info: [EmailVerification] Created verification token
[2026-01-28 14:21:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:06] info: [authController.register] Verification email sent
[2026-01-28 14:21:06] info: [health] Health check passed
[2026-01-28 14:21:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:06] info: [EmailVerification] Created verification token
[2026-01-28 14:21:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:06] info: [authController.register] Verification email sent
[2026-01-28 14:21:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:06] info: [EmailVerification] Created verification token
[2026-01-28 14:21:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:06] info: [authController.register] Verification email sent
[2026-01-28 14:21:06] info: [auth:7lh5j] Starting auth for GET /health
[2026-01-28 14:21:06] info: [auth:7lh5j] Token from cookie: false
[2026-01-28 14:21:06] info: [auth:7lh5j] Token from header: true
[2026-01-28 14:21:06] info: [auth:7lh5j] Authenticated user cf88b06a-724f-48c0-89a0-e774b7ce22b7
[2026-01-28 14:21:06] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:21:07] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:07] info: [EmailVerification] Created verification token
[2026-01-28 14:21:07] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:07] info: [authController.register] Verification email sent
[2026-01-28 14:21:07] info: [auth:guae8q] Starting auth for GET /health
[2026-01-28 14:21:07] info: [auth:guae8q] Token from cookie: false
[2026-01-28 14:21:07] info: [auth:guae8q] Token from header: true
[2026-01-28 14:21:07] info: [auth:guae8q] Authenticated user 736330a8-0be4-4b16-a69e-08d05cf41ce0
[2026-01-28 14:21:07] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:21:07] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:07] info: [EmailVerification] Created verification token
[2026-01-28 14:21:07] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:07] info: [authController.register] Verification email sent
[2026-01-28 14:21:07] info: [auth:45v3vp] Starting auth for GET /health
[2026-01-28 14:21:07] info: [auth:45v3vp] Token from cookie: false
[2026-01-28 14:21:07] info: [auth:45v3vp] Token from header: true
[2026-01-28 14:21:07] info: [auth:45v3vp] Authenticated user 92c5383c-20fe-4156-9b7e-4fa4e9bec5e9
[2026-01-28 14:21:07] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:21:07] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:21:07] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:07] info: [EmailVerification] Created verification token
[2026-01-28 14:21:07] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:07] info: [authController.register] Verification email sent
[2026-01-28 14:21:07] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:21:07] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:21:07] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:21:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:08] info: [EmailVerification] Created verification token
[2026-01-28 14:21:08] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:08] info: [authController.register] Verification email sent
[2026-01-28 14:21:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:08] info: [EmailVerification] Created verification token
[2026-01-28 14:21:08] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:08] info: [authController.register] Verification email sent
[2026-01-28 14:21:08] info: [health] Health check passed
[2026-01-28 14:21:08] info: [auth:4w4i1q] Starting auth for GET /health
[2026-01-28 14:21:08] info: [auth:4w4i1q] Token from cookie: false
[2026-01-28 14:21:08] info: [auth:4w4i1q] Token from header: true
[2026-01-28 14:21:08] info: [auth:4w4i1q] Authenticated user d4d9de5e-0bf5-415a-a6b1-720ffbacad38
[2026-01-28 14:21:08] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:21:08] info: [auth:4vb4o] Starting auth for GET /health
[2026-01-28 14:21:08] info: [auth:4vb4o] Token from cookie: false
[2026-01-28 14:21:08] info: [auth:4vb4o] Token from header: true
[2026-01-28 14:21:08] info: [auth:4vb4o] Authenticated user d4d9de5e-0bf5-415a-a6b1-720ffbacad38
[2026-01-28 14:21:08] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:21:08] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:21:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:08] info: [EmailVerification] Created verification token
[2026-01-28 14:21:08] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:08] info: [authController.register] Verification email sent
[2026-01-28 14:21:08] info: [auth:iflvf] Starting auth for GET /health
[2026-01-28 14:21:08] info: [auth:iflvf] Token from cookie: false
[2026-01-28 14:21:08] info: [auth:iflvf] Token from header: true
[2026-01-28 14:21:08] info: [auth:iflvf] Authenticated user 29ba02a0-c6e3-474d-97cb-7287be32eca4
[2026-01-28 14:21:08] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:21:08] info: [health] Health check passed
[2026-01-28 14:21:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:09] info: [EmailVerification] Created verification token
[2026-01-28 14:21:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:09] info: [authController.register] Verification email sent
[2026-01-28 14:21:09] info: [health] Health check passed
[2026-01-28 14:21:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:09] info: [EmailVerification] Created verification token
[2026-01-28 14:21:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:09] info: [authController.register] Verification email sent
[2026-01-28 14:21:09] info: [health] Health check passed
[2026-01-28 14:21:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:09] info: [EmailVerification] Created verification token
[2026-01-28 14:21:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:09] info: [authController.register] Verification email sent
[2026-01-28 14:21:09] info: [auth:gwxpjk] Starting auth for GET /health
[2026-01-28 14:21:09] info: [auth:gwxpjk] Token from cookie: false
[2026-01-28 14:21:09] warn: [auth:gwxpjk] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:21:09] info: [auth:u1aphf] Starting auth for GET /health
[2026-01-28 14:21:09] info: [auth:u1aphf] Token from cookie: false
[2026-01-28 14:21:09] warn: [auth:u1aphf] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:21:09] info: [auth:7njlb6] Starting auth for GET /api/test/health-status
[2026-01-28 14:21:09] info: [auth:7njlb6] Token from cookie: false
[2026-01-28 14:21:09] warn: [auth:7njlb6] Access token is required for GET /api/test/health-status from ::ffff:127.0.0.1
[2026-01-28 14:21:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:10] info: [EmailVerification] Created verification token
[2026-01-28 14:21:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:10] info: [authController.register] Verification email sent
[2026-01-28 14:21:10] info: [health] Health check passed
[2026-01-28 14:21:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:10] info: [EmailVerification] Created verification token
[2026-01-28 14:21:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:10] info: [authController.register] Verification email sent
[2026-01-28 14:21:10] info: [auth:49lqji] Starting auth for GET /api/test/health-status
[2026-01-28 14:21:10] info: [auth:49lqji] Token from cookie: false
[2026-01-28 14:21:10] info: [auth:49lqji] Token from header: true
[2026-01-28 14:21:10] info: [auth:49lqji] Authenticated user b57f2262-a750-441a-9247-961a22fd0e3f
[2026-01-28 14:21:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:10] info: [EmailVerification] Created verification token
[2026-01-28 14:21:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:10] info: [authController.register] Verification email sent
[2026-01-28 14:21:10] info: [auth:5l9giu] Starting auth for GET /health
[2026-01-28 14:21:10] info: [auth:5l9giu] Token from cookie: false
[2026-01-28 14:21:10] info: [auth:5l9giu] Token from header: true
[2026-01-28 14:21:10] warn: [auth:5l9giu] Invalid or expired token for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:21:10] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:10] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS tests/integration/health-monitoring-integration.test.mjs (6.34 s)
  üè• Health Monitoring Integration Tests
    üîç Main Health Endpoints
      ‚àö should provide basic ping health check (416 ms)
      ‚àö should provide ping with custom name (325 ms)
      ‚àö should provide comprehensive health check (316 ms)
      ‚àö should provide readiness check (325 ms)
    üß† Memory Management Health
      ‚àö should provide memory system health assessment (325 ms)
      ‚àö should validate memory health score ranges (319 ms)
    üìö Documentation System Health
      ‚àö should provide API documentation health status (326 ms)
      ‚àö should provide user documentation health status (317 ms)
    üß¨ Epigenetic Flag System Health
      ‚àö should provide flag system operational status (310 ms)
    üîó Cross-System Health Integration
      ‚àö should validate health across all systems (385 ms)
      ‚àö should provide consistent health response formats (339 ms)
    ‚ö° Performance Health Monitoring
      ‚àö should monitor health endpoint response times (310 ms)
      ‚àö should validate database performance in health checks (313 ms)
    üõ°Ô∏è Health Monitoring Security
      ‚àö should require authentication for protected health endpoints (338 ms)
      ‚àö should allow public access to basic health endpoints (345 ms)
    üö® Error Handling and Reporting
      ‚àö should handle health check errors gracefully (316 ms)
      ‚àö should provide meaningful error messages for health failures (315 ms)

[2026-01-28 14:21:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:11] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:11] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:11] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:21:11] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:12] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:21:12] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:21:12] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:21:12] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:21:12] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:21:12] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:21:12] info: [POST] /auth/register
[2026-01-28 14:21:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1376MB
[2026-01-28 14:21:12] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:12] info: [EmailVerification] Created verification token
[2026-01-28 14:21:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:12] info: [authController.register] Verification email sent
[2026-01-28 14:21:12] info: [POST] /auth/register - 201
[2026-01-28 14:21:12] info: [POST] /auth/register
[2026-01-28 14:21:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1383MB
[2026-01-28 14:21:12] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:12] info: [EmailVerification] Created verification token
[2026-01-28 14:21:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:12] info: [authController.register] Verification email sent
[2026-01-28 14:21:12] info: [POST] /auth/register - 201
[2026-01-28 14:21:12] info: [POST] /auth/register
[2026-01-28 14:21:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1372MB
[2026-01-28 14:21:13] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:13] info: [EmailVerification] Created verification token
[2026-01-28 14:21:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:13] info: [authController.register] Verification email sent
[2026-01-28 14:21:13] info: [POST] /auth/register - 201
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=b56d1f823572b3326dd262d85bd30247e7968c0f399c2f918500e50437e274de
[2026-01-28 14:21:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1375MB
[2026-01-28 14:21:13] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:13] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=b56d1f823572b3326dd262d85bd30247e7968c0f399c2f918500e50437e274de - 200
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=d6b47f1fbed74b211ba64ee89505e560ae2e5d37e89a403ee83a191cb1b7b4ed
[2026-01-28 14:21:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1374MB
[2026-01-28 14:21:13] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:13] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=d6b47f1fbed74b211ba64ee89505e560ae2e5d37e89a403ee83a191cb1b7b4ed - 200
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=2ac6f9a9dfb2373a818f9b325cf66539b69318fc79ee51bb32624363a0b1adf1
[2026-01-28 14:21:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1375MB
[2026-01-28 14:21:13] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:13] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=2ac6f9a9dfb2373a818f9b325cf66539b69318fc79ee51bb32624363a0b1adf1 - 200
[2026-01-28 14:21:13] info: [GET] /auth/verify-email
[2026-01-28 14:21:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1375MB
[2026-01-28 14:21:13] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:21:13] error: [GET] /auth/verify-email - ERROR
[2026-01-28 14:21:13] error: Error Verification token is required
[2026-01-28 14:21:13] info: [GET] /auth/verify-email - 400
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=invalid_token_here
[2026-01-28 14:21:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1379MB
[2026-01-28 14:21:13] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:21:13] error: [GET] /auth/verify-email?token=invalid_token_here - ERROR
[2026-01-28 14:21:13] error: Error Invalid or expired verification token
[2026-01-28 14:21:13] info: [GET] /auth/verify-email?token=invalid_token_here - 400
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=0d661a3d8a1bfba5ec6088dd1ba80af91adea6a2127cbbbd6a01bd42e85fe0c8
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1382MB
[2026-01-28 14:21:14] error: [authController.verifyEmail] Error verifying email: Verification token has expired
[2026-01-28 14:21:14] error: [GET] /auth/verify-email?token=0d661a3d8a1bfba5ec6088dd1ba80af91adea6a2127cbbbd6a01bd42e85fe0c8 - ERROR
[2026-01-28 14:21:14] error: Error Verification token has expired
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=0d661a3d8a1bfba5ec6088dd1ba80af91adea6a2127cbbbd6a01bd42e85fe0c8 - 400
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=7f7a5ce6b061c4aa01f74538fd5bed92003135ffdac2b2180ca503d432733664
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1383MB
[2026-01-28 14:21:14] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:14] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=7f7a5ce6b061c4aa01f74538fd5bed92003135ffdac2b2180ca503d432733664 - 200
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=7f7a5ce6b061c4aa01f74538fd5bed92003135ffdac2b2180ca503d432733664
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1379MB
[2026-01-28 14:21:14] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:21:14] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:21:14] error: [GET] /auth/verify-email?token=7f7a5ce6b061c4aa01f74538fd5bed92003135ffdac2b2180ca503d432733664 - ERROR
[2026-01-28 14:21:14] error: Error Verification token has already been used
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=7f7a5ce6b061c4aa01f74538fd5bed92003135ffdac2b2180ca503d432733664 - 400
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=f43db43bad8a1043daee5fa694b2aca3a6141118b31a99c4eb95b2c60a45afcb
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1379MB
[2026-01-28 14:21:14] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:14] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:14] info: [GET] /auth/verify-email?token=f43db43bad8a1043daee5fa694b2aca3a6141118b31a99c4eb95b2c60a45afcb - 200
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1378MB
[2026-01-28 14:21:14] info: [auth:u4fwx] Starting auth for POST /resend-verification
[2026-01-28 14:21:14] info: [auth:u4fwx] Token from cookie: false
[2026-01-28 14:21:14] info: [auth:u4fwx] Token from header: true
[2026-01-28 14:21:14] info: [auth:u4fwx] Authenticated user 73d6931a-4e73-4762-aed9-fee014917097
[2026-01-28 14:21:14] info: [EmailVerification] Created verification token
[2026-01-28 14:21:14] info: [EmailVerification] Resent verification email
[2026-01-28 14:21:14] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1385MB
[2026-01-28 14:21:14] info: [auth:eft96] Starting auth for POST /resend-verification
[2026-01-28 14:21:14] info: [auth:eft96] Token from cookie: false
[2026-01-28 14:21:14] warn: [auth:eft96] Access token is required for POST /resend-verification from ::ffff:127.0.0.1
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification - 401
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1374MB
[2026-01-28 14:21:14] info: [auth:25iljb] Starting auth for POST /resend-verification
[2026-01-28 14:21:14] info: [auth:25iljb] Token from cookie: false
[2026-01-28 14:21:14] info: [auth:25iljb] Token from header: true
[2026-01-28 14:21:14] info: [auth:25iljb] Authenticated user 846b8292-c845-479b-a70d-deb3a7990412
[2026-01-28 14:21:14] error: [EmailVerification] Error resending verification email: Email is already verified
[2026-01-28 14:21:14] error: [authController.resendVerification] Error resending verification: Email is already verified
[2026-01-28 14:21:14] error: [POST] /auth/resend-verification - ERROR
[2026-01-28 14:21:14] error: Error Email is already verified
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification - 500
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1381MB
[2026-01-28 14:21:14] info: [auth:0nc98d] Starting auth for POST /resend-verification
[2026-01-28 14:21:14] info: [auth:0nc98d] Token from cookie: false
[2026-01-28 14:21:14] info: [auth:0nc98d] Token from header: true
[2026-01-28 14:21:14] info: [auth:0nc98d] Authenticated user 4ad758c0-ee56-4c90-b0f8-374d7318fcad
[2026-01-28 14:21:14] info: [EmailVerification] Created verification token
[2026-01-28 14:21:14] info: [EmailVerification] Resent verification email
[2026-01-28 14:21:14] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1384MB
[2026-01-28 14:21:14] info: [auth:9gzcui] Starting auth for POST /resend-verification
[2026-01-28 14:21:14] info: [auth:9gzcui] Token from cookie: false
[2026-01-28 14:21:14] info: [auth:9gzcui] Token from header: true
[2026-01-28 14:21:14] info: [auth:9gzcui] Authenticated user 4ad758c0-ee56-4c90-b0f8-374d7318fcad
[2026-01-28 14:21:14] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:21:14] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:21:14] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:21:14] error: [POST] /auth/resend-verification - ERROR
[2026-01-28 14:21:14] error: Error Please wait 300 seconds before requesting another verification email
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification - 429
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1377MB
[2026-01-28 14:21:14] info: [auth:9zop1n] Starting auth for POST /resend-verification
[2026-01-28 14:21:14] info: [auth:9zop1n] Token from cookie: false
[2026-01-28 14:21:14] info: [auth:9zop1n] Token from header: true
[2026-01-28 14:21:14] info: [auth:9zop1n] Authenticated user c3e1ca9d-692d-45a4-a555-b454df63311c
[2026-01-28 14:21:14] info: [EmailVerification] Created verification token
[2026-01-28 14:21:14] info: [EmailVerification] Resent verification email
[2026-01-28 14:21:14] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:14] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:21:14] info: [GET] /auth/verification-status
[2026-01-28 14:21:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1384MB
[2026-01-28 14:21:14] info: [auth:4fccjd] Starting auth for GET /verification-status
[2026-01-28 14:21:14] info: [auth:4fccjd] Token from cookie: false
[2026-01-28 14:21:14] info: [auth:4fccjd] Token from header: true
[2026-01-28 14:21:14] info: [auth:4fccjd] Authenticated user 5a785208-38be-41ae-bf37-2b27fd7bdfe5
[2026-01-28 14:21:14] info: [EmailVerification] Verification status check
[2026-01-28 14:21:14] info: [GET] /auth/verification-status - 200
[2026-01-28 14:21:15] info: [GET] /auth/verification-status
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1388MB
[2026-01-28 14:21:15] info: [auth:kbwm] Starting auth for GET /verification-status
[2026-01-28 14:21:15] info: [auth:kbwm] Token from cookie: false
[2026-01-28 14:21:15] info: [auth:kbwm] Token from header: true
[2026-01-28 14:21:15] info: [auth:kbwm] Authenticated user 2fc05263-df0a-40f0-8a64-a4d1b66fdb76
[2026-01-28 14:21:15] info: [EmailVerification] Verification status check
[2026-01-28 14:21:15] info: [GET] /auth/verification-status - 200
[2026-01-28 14:21:15] info: [GET] /auth/verification-status
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1378MB
[2026-01-28 14:21:15] info: [auth:5wnrz] Starting auth for GET /verification-status
[2026-01-28 14:21:15] info: [auth:5wnrz] Token from cookie: false
[2026-01-28 14:21:15] warn: [auth:5wnrz] Access token is required for GET /verification-status from ::ffff:127.0.0.1
[2026-01-28 14:21:15] info: [GET] /auth/verification-status - 401
[2026-01-28 14:21:15] info: [GET] /auth/verification-status
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1381MB
[2026-01-28 14:21:15] info: [auth:ywqdi] Starting auth for GET /verification-status
[2026-01-28 14:21:15] info: [auth:ywqdi] Token from cookie: false
[2026-01-28 14:21:15] info: [auth:ywqdi] Token from header: true
[2026-01-28 14:21:15] info: [auth:ywqdi] Authenticated user e278e34f-4060-4054-a85d-64ccb14ac876
[2026-01-28 14:21:15] info: [EmailVerification] Verification status check
[2026-01-28 14:21:15] info: [GET] /auth/verification-status - 200
[2026-01-28 14:21:15] info: [POST] /auth/register
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1384MB
[2026-01-28 14:21:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:15] info: [EmailVerification] Created verification token
[2026-01-28 14:21:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:15] info: [authController.register] Verification email sent
[2026-01-28 14:21:15] info: [POST] /auth/register - 201
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=48c036ac4f734e14fb501a48d4aa713b6d86c991102cfd52e9747e96695196a3
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1386MB
[2026-01-28 14:21:15] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:15] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=48c036ac4f734e14fb501a48d4aa713b6d86c991102cfd52e9747e96695196a3 - 200
[2026-01-28 14:21:15] info: [GET] /auth/verification-status
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1385MB
[2026-01-28 14:21:15] info: [auth:3qxyt] Starting auth for GET /verification-status
[2026-01-28 14:21:15] info: [auth:3qxyt] Token from cookie: false
[2026-01-28 14:21:15] info: [auth:3qxyt] Token from header: true
[2026-01-28 14:21:15] info: [auth:3qxyt] Authenticated user 35b1e697-b3e0-443e-bbd0-21842b19e03b
[2026-01-28 14:21:15] info: [EmailVerification] Verification status check
[2026-01-28 14:21:15] info: [GET] /auth/verification-status - 200
[2026-01-28 14:21:15] info: [POST] /auth/resend-verification
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1386MB
[2026-01-28 14:21:15] info: [auth:xu0tjn] Starting auth for POST /resend-verification
[2026-01-28 14:21:15] info: [auth:xu0tjn] Token from cookie: false
[2026-01-28 14:21:15] info: [auth:xu0tjn] Token from header: true
[2026-01-28 14:21:15] info: [auth:xu0tjn] Authenticated user 35b1e697-b3e0-443e-bbd0-21842b19e03b
[2026-01-28 14:21:15] info: [EmailVerification] Created verification token
[2026-01-28 14:21:15] info: [EmailVerification] Resent verification email
[2026-01-28 14:21:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:15] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=81287c3263dc1ab1aca985191c4cd3c5afca93a61b37714e79c83aae8a2f3505
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1377MB
[2026-01-28 14:21:15] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:15] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=81287c3263dc1ab1aca985191c4cd3c5afca93a61b37714e79c83aae8a2f3505 - 200
[2026-01-28 14:21:15] info: [GET] /auth/verification-status
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1388MB
[2026-01-28 14:21:15] info: [auth:pp5bb] Starting auth for GET /verification-status
[2026-01-28 14:21:15] info: [auth:pp5bb] Token from cookie: false
[2026-01-28 14:21:15] info: [auth:pp5bb] Token from header: true
[2026-01-28 14:21:15] info: [auth:pp5bb] Authenticated user 35b1e697-b3e0-443e-bbd0-21842b19e03b
[2026-01-28 14:21:15] info: [EmailVerification] Verification status check
[2026-01-28 14:21:15] info: [GET] /auth/verification-status - 200
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1379MB
[2026-01-28 14:21:15] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:15] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5 - 200
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1390MB
[2026-01-28 14:21:15] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:21:15] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:21:15] error: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5 - ERROR
[2026-01-28 14:21:15] error: Error Verification token has already been used
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5 - 400
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5
[2026-01-28 14:21:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1388MB
[2026-01-28 14:21:15] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:21:15] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:21:15] error: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5 - ERROR
[2026-01-28 14:21:15] error: Error Verification token has already been used
[2026-01-28 14:21:15] info: [GET] /auth/verify-email?token=8a46ef7d2d2927021177ebb86665450cad681e209f5968eef4f1a45d07ada6a5 - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=a33d7016c7cb9e0b1c3f17b8e03996f3646535f4015d9b32608de308430ee864
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1389MB
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=a33d7016c7cb9e0b1c3f17b8e03996f3646535f4015d9b32608de308430ee864
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1379MB
[2026-01-28 14:21:16] info: [EmailVerification] Email verified successfully
[2026-01-28 14:21:16] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=a33d7016c7cb9e0b1c3f17b8e03996f3646535f4015d9b32608de308430ee864 - 200
[2026-01-28 14:21:16] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token=a33d7016c7cb9e0b1c3f17b8e03996f3646535f4015d9b32608de308430ee864 - ERROR
[2026-01-28 14:21:16] error: Error Verification token has already been used
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=a33d7016c7cb9e0b1c3f17b8e03996f3646535f4015d9b32608de308430ee864 - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=definitely_invalid_token_123
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1384MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token=definitely_invalid_token_123 - ERROR
[2026-01-28 14:21:16] error: Error Invalid or expired verification token
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=definitely_invalid_token_123 - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1383MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:21:16] error: Error Verification token is required
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1385MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:21:16] error: Error Verification token is required
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1387MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR
[2026-01-28 14:21:16] error: Error Invalid or expired verification token
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1386MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR
[2026-01-28 14:21:16] error: Error Invalid or expired verification token
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1383MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR
[2026-01-28 14:21:16] error: Error Invalid or expired verification token
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1380MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:21:16] error: Error Verification token is required
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token=
[2026-01-28 14:21:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1383MB
[2026-01-28 14:21:16] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:21:16] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:21:16] error: Error Verification token is required
[2026-01-28 14:21:16] info: [GET] /auth/verify-email?token= - 400
PASS __tests__/integration/email-verification.test.mjs (6.12 s)
  Email Verification System - Integration Tests
    POST /auth/register - Email Verification Integration
      ‚àö should_create_verification_token_on_registration (494 ms)
      ‚àö should_include_email_verified_status_in_response (391 ms)
      ‚àö should_log_verification_email_in_development_mode (391 ms)
    GET /auth/verify-email
      ‚àö should_verify_email_with_valid_token (106 ms)
      ‚àö should_update_user_email_verified_status (106 ms)
      ‚àö should_mark_token_as_used (106 ms)
      ‚àö should_reject_missing_token (104 ms)
      ‚àö should_reject_invalid_token (212 ms)
      ‚àö should_reject_expired_token (99 ms)
      ‚àö should_reject_already_used_token (129 ms)
      ‚àö should_be_publicly_accessible_without_authentication (101 ms)
    POST /auth/resend-verification
      ‚àö should_create_new_verification_token (115 ms)
      ‚àö should_require_authentication (100 ms)
      ‚àö should_reject_if_email_already_verified (110 ms)
      ‚àö should_enforce_rate_limiting (144 ms)
      ‚àö should_cleanup_expired_tokens (111 ms)
    GET /auth/verification-status
      ‚àö should_return_unverified_status_for_new_user (106 ms)
      ‚àö should_return_verified_status_after_verification (101 ms)
      ‚àö should_require_authentication (99 ms)
      ‚àö should_return_user_email_address (102 ms)
    Complete Email Verification Workflow
      ‚àö should_complete_full_registration_to_verification_flow (404 ms)
      ‚àö should_handle_resend_and_verify_workflow (185 ms)
      ‚àö should_prevent_multiple_verification_attempts (147 ms)
    Security and Edge Cases
      ‚àö should_handle_concurrent_verification_requests (155 ms)
      ‚àö should_sanitize_error_messages_to_prevent_enumeration (214 ms)
      ‚àö should_handle_malformed_token_input (548 ms)

[2026-01-28 14:21:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:17] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:17] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:17] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:17] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:17] info: [EmailVerification] Created verification token
[2026-01-28 14:21:17] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:17] info: [authController.register] Verification email sent
[2026-01-28 14:21:18] info: [auth:rku9yi] Starting auth for GET /status
[2026-01-28 14:21:18] info: [auth:rku9yi] Token from cookie: false
[2026-01-28 14:21:18] info: [auth:rku9yi] Token from header: true
[2026-01-28 14:21:18] info: [auth:rku9yi] Authenticated user 1dbbecd6-e476-4d14-a879-5f4eb20a521c
[2026-01-28 14:21:18] info: [MemoryManagement] Getting memory status
[2026-01-28 14:21:18] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:18] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:18] info: [EmailVerification] Created verification token
[2026-01-28 14:21:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:18] info: [authController.register] Verification email sent
[2026-01-28 14:21:18] info: [auth:uo9419] Starting auth for GET /metrics
[2026-01-28 14:21:18] info: [auth:uo9419] Token from cookie: false
[2026-01-28 14:21:18] info: [auth:uo9419] Token from header: true
[2026-01-28 14:21:18] info: [auth:uo9419] Authenticated user bc91004d-b99a-4397-b64f-c99fe1012a7e
[2026-01-28 14:21:18] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:21:18] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:18] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:18] info: [EmailVerification] Created verification token
[2026-01-28 14:21:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:18] info: [authController.register] Verification email sent
[2026-01-28 14:21:18] info: [auth:9bullr] Starting auth for GET /status
[2026-01-28 14:21:18] info: [auth:9bullr] Token from cookie: false
[2026-01-28 14:21:18] info: [auth:9bullr] Token from header: true
[2026-01-28 14:21:18] info: [auth:9bullr] Authenticated user e66c0fa9-d7d2-4ca3-aabd-71e692cc2c54
[2026-01-28 14:21:18] info: [MemoryManagement] Getting memory status
[2026-01-28 14:21:18] info: [auth:sdym6f] Starting auth for POST /api/test/memory-load
[2026-01-28 14:21:18] info: [auth:sdym6f] Token from cookie: false
[2026-01-28 14:21:18] info: [auth:sdym6f] Token from header: true
[2026-01-28 14:21:18] info: [auth:sdym6f] Authenticated user e66c0fa9-d7d2-4ca3-aabd-71e692cc2c54
[2026-01-28 14:21:19] info: [auth:d5bh] Starting auth for GET /status
[2026-01-28 14:21:19] info: [auth:d5bh] Token from cookie: false
[2026-01-28 14:21:19] info: [auth:d5bh] Token from header: true
[2026-01-28 14:21:19] info: [auth:d5bh] Authenticated user e66c0fa9-d7d2-4ca3-aabd-71e692cc2c54
[2026-01-28 14:21:19] info: [MemoryManagement] Getting memory status
[2026-01-28 14:21:19] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:20] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:20] info: [EmailVerification] Created verification token
[2026-01-28 14:21:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:20] info: [authController.register] Verification email sent
[2026-01-28 14:21:20] info: [auth:fruo4] Starting auth for GET /resources
[2026-01-28 14:21:20] info: [auth:fruo4] Token from cookie: false
[2026-01-28 14:21:20] info: [auth:fruo4] Token from header: true
[2026-01-28 14:21:20] info: [auth:fruo4] Authenticated user cc391447-2d41-4652-9c71-736bee475af6
[2026-01-28 14:21:20] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:21:20] info: [auth:sqn32] Starting auth for POST /cleanup
[2026-01-28 14:21:20] info: [auth:sqn32] Token from cookie: false
[2026-01-28 14:21:20] info: [auth:sqn32] Token from header: true
[2026-01-28 14:21:20] info: [auth:sqn32] Authenticated user cc391447-2d41-4652-9c71-736bee475af6
[2026-01-28 14:21:20] info: [MemoryManagement] Resource cleanup requested for: all
[2026-01-28 14:21:20] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:20] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:20] info: [auth:4reb4j] Starting auth for GET /resources
[2026-01-28 14:21:20] info: [auth:4reb4j] Token from cookie: false
[2026-01-28 14:21:20] info: [auth:4reb4j] Token from header: true
[2026-01-28 14:21:20] info: [auth:4reb4j] Authenticated user cc391447-2d41-4652-9c71-736bee475af6
[2026-01-28 14:21:20] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:21:20] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:20] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:20] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:20] info: [EmailVerification] Created verification token
[2026-01-28 14:21:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:20] info: [authController.register] Verification email sent
[2026-01-28 14:21:20] info: [auth:lrtbn] Starting auth for GET /resources
[2026-01-28 14:21:20] info: [auth:lrtbn] Token from cookie: false
[2026-01-28 14:21:20] info: [auth:lrtbn] Token from header: true
[2026-01-28 14:21:20] info: [auth:lrtbn] Authenticated user bf07568e-a032-461f-8203-e79b5f71a783
[2026-01-28 14:21:20] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:21:20] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:20] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:20] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:20] info: [EmailVerification] Created verification token
[2026-01-28 14:21:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:20] info: [authController.register] Verification email sent
[2026-01-28 14:21:20] info: [auth:fgv57e] Starting auth for POST /gc
[2026-01-28 14:21:20] info: [auth:fgv57e] Token from cookie: false
[2026-01-28 14:21:20] info: [auth:fgv57e] Token from header: true
[2026-01-28 14:21:20] info: [auth:fgv57e] Authenticated user 08ec84a0-bb1d-4cf3-98fa-2cc8b6b04981
[2026-01-28 14:21:20] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 14:21:20] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:20] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:21] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:21] info: [EmailVerification] Created verification token
[2026-01-28 14:21:21] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:21] info: [authController.register] Verification email sent
[2026-01-28 14:21:21] info: [auth:6akycf] Starting auth for POST /gc
[2026-01-28 14:21:21] info: [auth:6akycf] Token from cookie: false
[2026-01-28 14:21:21] info: [auth:6akycf] Token from header: true
[2026-01-28 14:21:21] info: [auth:6akycf] Authenticated user b46842cf-7d97-4629-a883-3ca194a7bc4b
[2026-01-28 14:21:21] info: [MemoryManagement] Manual GC trigger requested (force: true)
[2026-01-28 14:21:21] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:21] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:21] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:21] info: [EmailVerification] Created verification token
[2026-01-28 14:21:21] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:21] info: [authController.register] Verification email sent
[2026-01-28 14:21:21] info: [auth:l2ixzb] Starting auth for GET /alerts
[2026-01-28 14:21:21] info: [auth:l2ixzb] Token from cookie: false
[2026-01-28 14:21:21] info: [auth:l2ixzb] Token from header: true
[2026-01-28 14:21:21] info: [auth:l2ixzb] Authenticated user 609524be-c1de-4e7b-b619-5c8cf5c08e65
[2026-01-28 14:21:21] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:21:21] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:21] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:21] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:21] info: [EmailVerification] Created verification token
[2026-01-28 14:21:21] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:21] info: [authController.register] Verification email sent
[2026-01-28 14:21:21] info: [auth:80l02] Starting auth for GET /alerts
[2026-01-28 14:21:21] info: [auth:80l02] Token from cookie: false
[2026-01-28 14:21:21] info: [auth:80l02] Token from header: true
[2026-01-28 14:21:21] info: [auth:80l02] Authenticated user 30445304-b02b-4f34-b2dc-5a843126391f
[2026-01-28 14:21:21] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:21:21] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:21] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:21] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:21] info: [EmailVerification] Created verification token
[2026-01-28 14:21:21] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:21] info: [authController.register] Verification email sent
[2026-01-28 14:21:21] info: [auth:harjvb] Starting auth for GET /status
[2026-01-28 14:21:21] info: [auth:harjvb] Token from cookie: false
[2026-01-28 14:21:21] warn: [auth:harjvb] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:21:22] info: [auth:qve77] Starting auth for GET /metrics
[2026-01-28 14:21:22] info: [auth:qve77] Token from cookie: false
[2026-01-28 14:21:22] warn: [auth:qve77] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:21:22] info: [auth:3p28fd] Starting auth for GET /resources
[2026-01-28 14:21:22] info: [auth:3p28fd] Token from cookie: false
[2026-01-28 14:21:22] warn: [auth:3p28fd] Access token is required for GET /resources from ::ffff:127.0.0.1
[2026-01-28 14:21:22] info: [auth:15a1u] Starting auth for GET /alerts
[2026-01-28 14:21:22] info: [auth:15a1u] Token from cookie: false
[2026-01-28 14:21:22] warn: [auth:15a1u] Access token is required for GET /alerts from ::ffff:127.0.0.1
[2026-01-28 14:21:22] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:22] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:22] info: [EmailVerification] Created verification token
[2026-01-28 14:21:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:22] info: [authController.register] Verification email sent
[2026-01-28 14:21:22] info: [auth:2bczlv] Starting auth for POST /gc
[2026-01-28 14:21:22] info: [auth:2bczlv] Token from cookie: false
[2026-01-28 14:21:22] info: [auth:2bczlv] Token from header: true
[2026-01-28 14:21:22] info: [auth:2bczlv] Authenticated user 4a04befd-1873-404a-bfd7-5be6e75a75a5
[2026-01-28 14:21:22] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:22] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:22] info: [EmailVerification] Created verification token
[2026-01-28 14:21:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:22] info: [authController.register] Verification email sent
[2026-01-28 14:21:22] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:22] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:22] info: [EmailVerification] Created verification token
[2026-01-28 14:21:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:22] info: [authController.register] Verification email sent
[2026-01-28 14:21:22] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:22] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:21:22] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:21:22] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS tests/integration/memory-management-integration.test.mjs (6.061 s)
  üß† Memory Management Integration Tests
    üîç Memory Monitoring Integration
      ‚àö should monitor memory usage and provide reports (408 ms)
      ‚àö should provide detailed memory metrics (325 ms)
      ‚àö should track memory usage during load operations (1365 ms)
    üîß Resource Management Integration
      ‚àö should track and cleanup resources correctly (363 ms)
      ‚àö should provide resource analytics and counts (324 ms)
    üóëÔ∏è Garbage Collection Integration
      ‚àö should trigger garbage collection when available (321 ms)
      ‚àö should handle GC unavailability gracefully (318 ms)
    üö® Memory Alert System Integration
      ‚àö should provide memory alerts and warnings (315 ms)
      ‚àö should filter alerts by severity (316 ms)
    üîí Memory Management Security
      ‚àö should require authentication for memory operations (369 ms)
      ‚àö should validate input for memory operations (323 ms)
    üìä Memory Service Integration
      ‚àö should integrate with memory service functions (312 ms)
      ‚àö should track and untrack resources through service (306 ms)

[2026-01-28 14:21:23] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:23] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:23] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:23] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:24] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:24] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:21:24] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:24] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:21:24] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:21:24] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:21:24] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:21:24] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:21:24] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 14:21:24] warn: [Validation] Input validation failed
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 14:21:24] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:24] info: [EmailVerification] Created verification token
[2026-01-28 14:21:24] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:24] info: [authController.register] Verification email sent
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 14:21:24] warn: [Validation] Input validation failed
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 14:21:24] warn: [Validation] Input validation failed
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1242MB
[2026-01-28 14:21:24] warn: [Validation] Input validation failed
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 14:21:24] warn: [Validation] Input validation failed
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1246MB
[2026-01-28 14:21:24] warn: [Validation] Input validation failed
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 14:21:24] warn: [Validation] Input validation failed
[2026-01-28 14:21:24] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:24] info: [POST] /api/auth/register
[2026-01-28 14:21:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 14:21:25] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:25] info: [EmailVerification] Created verification token
[2026-01-28 14:21:25] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:25] info: [authController.register] Verification email sent
[2026-01-28 14:21:25] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:25] info: [POST] /api/auth/register
[2026-01-28 14:21:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 14:21:25] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:25] info: [EmailVerification] Created verification token
[2026-01-28 14:21:25] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:25] info: [authController.register] Verification email sent
[2026-01-28 14:21:25] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:25] info: [POST] /api/auth/register
[2026-01-28 14:21:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 14:21:25] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:25] info: [EmailVerification] Created verification token
[2026-01-28 14:21:25] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:25] info: [authController.register] Verification email sent
[2026-01-28 14:21:25] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:25] info: [POST] /api/auth/register
[2026-01-28 14:21:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 14:21:26] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:26] info: [EmailVerification] Created verification token
[2026-01-28 14:21:26] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:26] info: [authController.register] Verification email sent
[2026-01-28 14:21:26] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:26] info: [POST] /api/auth/register
[2026-01-28 14:21:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 14:21:26] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:26] info: [EmailVerification] Created verification token
[2026-01-28 14:21:26] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:26] info: [authController.register] Verification email sent
[2026-01-28 14:21:26] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:26] info: [POST] /api/auth/register
[2026-01-28 14:21:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:21:26] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:26] info: [EmailVerification] Created verification token
[2026-01-28 14:21:26] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:26] info: [authController.register] Verification email sent
[2026-01-28 14:21:26] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:26] info: [POST] /api/auth/register
[2026-01-28 14:21:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:21:27] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:27] info: [EmailVerification] Created verification token
[2026-01-28 14:21:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:27] info: [authController.register] Verification email sent
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:27] info: [POST] /api/auth/register
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:21:27] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:27] info: [EmailVerification] Created verification token
[2026-01-28 14:21:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:27] info: [authController.register] Verification email sent
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:27] info: [POST] /api/auth/register
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:27] info: [POST] /api/auth/register
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:27] info: [POST] /api/auth/register
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:27] info: [POST] /api/auth/register
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 14:21:27] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:27] info: [EmailVerification] Created verification token
[2026-01-28 14:21:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:27] info: [authController.register] Verification email sent
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:27] info: [POST] /api/auth/register
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:27] info: [POST] /api/auth/register
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 14:21:27] info: [auth:imy1iu] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:imy1iu] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:imy1iu] Token from header: true
[2026-01-28 14:21:27] info: [auth:imy1iu] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:21:27] info: [auth:wq1l9] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:wq1l9] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:wq1l9] Token from header: true
[2026-01-28 14:21:27] info: [auth:wq1l9] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:21:27] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:21:27] error: Error At least one field is required
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:21:27] info: [auth:xgj3e] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:xgj3e] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:xgj3e] Token from header: true
[2026-01-28 14:21:27] info: [auth:xgj3e] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:21:27] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:21:27] error: Error At least one field is required
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:21:27] info: [auth:pmyy2r] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:pmyy2r] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:pmyy2r] Token from header: true
[2026-01-28 14:21:27] info: [auth:pmyy2r] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:21:27] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:21:27] error: Error At least one field is required
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 14:21:27] info: [auth:jbbyy] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:jbbyy] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:jbbyy] Token from header: true
[2026-01-28 14:21:27] info: [auth:jbbyy] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB
[2026-01-28 14:21:27] info: [auth:e7x4] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:e7x4] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:e7x4] Token from header: true
[2026-01-28 14:21:27] info: [auth:e7x4] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1245MB
[2026-01-28 14:21:27] info: [auth:96i4i] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:96i4i] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:96i4i] Token from header: true
[2026-01-28 14:21:27] info: [auth:96i4i] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:21:27] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:21:27] error: Error At least one field is required
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1244MB
[2026-01-28 14:21:27] info: [auth:n7e2ru] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:n7e2ru] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:n7e2ru] Token from header: true
[2026-01-28 14:21:27] info: [auth:n7e2ru] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 14:21:27] info: [auth:fr173p] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:fr173p] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:fr173p] Token from header: true
[2026-01-28 14:21:27] info: [auth:fr173p] Authenticated user test-user-uuid-123
[2026-01-28 14:21:27] warn: [Validation] Input validation failed
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:27] info: [PUT] /api/auth/profile
[2026-01-28 14:21:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 14:21:27] info: [auth:z3ohfs] Starting auth for PUT /profile
[2026-01-28 14:21:27] info: [auth:z3ohfs] Token from cookie: false
[2026-01-28 14:21:27] info: [auth:z3ohfs] Token from header: true
[2026-01-28 14:21:28] info: [auth:z3ohfs] Authenticated user test-user-uuid-123
[2026-01-28 14:21:28] error: [authController.updateProfile] Error updating profile: 
Invalid `prisma.user.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 14:21:28] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:21:28] error: Error 
Invalid `prisma.user.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 14:21:28] info: [PUT] /api/auth/profile - 404
[2026-01-28 14:21:28] info: [POST] /api/auth/register
[2026-01-28 14:21:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 14:21:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:28] info: [EmailVerification] Created verification token
[2026-01-28 14:21:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:28] info: [authController.register] Verification email sent
[2026-01-28 14:21:28] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:28] info: [PUT] /api/auth/profile
[2026-01-28 14:21:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 14:21:28] info: [auth:bmsyb] Starting auth for PUT /profile
[2026-01-28 14:21:28] info: [auth:bmsyb] Token from cookie: false
[2026-01-28 14:21:28] info: [auth:bmsyb] Token from header: true
[2026-01-28 14:21:28] info: [auth:bmsyb] Authenticated user test-user-uuid-123
[2026-01-28 14:21:28] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:21:28] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:21:28] error: Error At least one field is required
[2026-01-28 14:21:28] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:21:28] info: [POST] /api/auth/register
[2026-01-28 14:21:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 14:21:28] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 14:21:28] error: [POST] /api/auth/register - ERROR
[2026-01-28 14:21:28] error: Error User with this email or username already exists
[2026-01-28 14:21:28] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:28] info: [POST] /api/auth/register
[2026-01-28 14:21:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1251MB
[2026-01-28 14:21:28] warn: [Validation] Input validation failed
[2026-01-28 14:21:28] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:28] info: [POST] /api/auth/register
[2026-01-28 14:21:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1245MB
[2026-01-28 14:21:28] warn: [Validation] Input validation failed
[2026-01-28 14:21:28] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:28] info: [POST] /api/auth/register
[2026-01-28 14:21:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1240MB
[2026-01-28 14:21:28] warn: [Validation] Input validation failed
[2026-01-28 14:21:28] info: [POST] /api/auth/register - 400
[2026-01-28 14:21:28] info: [POST] /api/auth/register
[2026-01-28 14:21:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB
[2026-01-28 14:21:28] warn: [Validation] Input validation failed
[2026-01-28 14:21:28] info: [POST] /api/auth/register - 400
PASS __tests__/integration/input-validation.test.mjs (5.445 s)
  Input Validation Integration Tests
    Registration Validation
      Email Validation
        ‚àö should reject invalid email format (51 ms)
        ‚àö should accept valid email format (382 ms)
      Password Validation - Enhanced Requirements
        ‚àö should reject password without lowercase letter (16 ms)
        ‚àö should reject password without uppercase letter (19 ms)
        ‚àö should reject password without number (19 ms)
        ‚àö should reject password without special character (16 ms)
        ‚àö should reject password shorter than 8 characters (18 ms)
        ‚àö should reject password longer than 128 characters (16 ms)
        ‚àö should accept password meeting all requirements (313 ms)
        ‚àö should accept all supported special characters (2157 ms)
      Username Validation
        ‚àö should reject username shorter than 3 characters (17 ms)
        ‚àö should reject username longer than 30 characters (18 ms)
        ‚àö should reject username with special characters (16 ms)
        ‚àö should accept valid username (309 ms)
      Name Validation
        ‚àö should reject empty first name (16 ms)
        ‚àö should reject first name longer than 50 characters (19 ms)
    Profile Update Validation
      Bio Field Validation
        ‚àö should reject bio longer than 500 characters (21 ms)
        ‚àö should accept bio at maximum length (500 characters) (28 ms)
        ‚àö should accept empty bio (25 ms)
        ‚àö should sanitize bio with XSS prevention (24 ms)
      Name Update Validation
        ‚àö should reject first name longer than 50 characters (22 ms)
        ‚àö should reject last name longer than 50 characters (21 ms)
        ‚àö should accept valid name updates (24 ms)
      Username Update Validation
        ‚àö should reject username shorter than 3 characters (21 ms)
        ‚àö should reject username longer than 30 characters (20 ms)
        ‚àö should accept valid username update (31 ms)
    XSS Prevention Integration
      ‚àö should sanitize registration inputs with HTML tags (304 ms)
      ‚àö should sanitize profile bio with event handlers (24 ms)
    Field Trimming and Normalization
      ‚àö should trim whitespace from names (21 ms)
      ‚àö should normalize email addresses (19 ms)
    Required Fields Validation
      ‚àö should reject registration without email (16 ms)
      ‚àö should reject registration without username (18 ms)
      ‚àö should reject registration without password (18 ms)

[2026-01-28 14:21:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:28] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:29] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:29] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:29] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:21:29] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:21:29] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:21:29] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:21:29] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:21:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:29] info: [EmailVerification] Created verification token
[2026-01-28 14:21:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:29] info: [authController.register] Verification email sent
[2026-01-28 14:21:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:29] info: [EmailVerification] Created verification token
[2026-01-28 14:21:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:29] info: [authController.register] Verification email sent
[2026-01-28 14:21:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:30] info: [EmailVerification] Created verification token
[2026-01-28 14:21:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:30] info: [authController.register] Verification email sent
[2026-01-28 14:21:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:30] info: [EmailVerification] Created verification token
[2026-01-28 14:21:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:30] info: [authController.register] Verification email sent
[2026-01-28 14:21:30] info: [auth:hjqee] Starting auth for POST /endpoints
[2026-01-28 14:21:30] info: [auth:hjqee] Token from cookie: false
[2026-01-28 14:21:30] info: [auth:hjqee] Token from header: true
[2026-01-28 14:21:30] info: [auth:hjqee] Authenticated user 8e278d5a-4f61-4f85-83cd-feddf104dcb9
[2026-01-28 14:21:30] info: [DocumentationRoutes] Registering endpoint: GET /api/test/integration
[2026-01-28 14:21:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:30] info: [EmailVerification] Created verification token
[2026-01-28 14:21:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:30] info: [authController.register] Verification email sent
[2026-01-28 14:21:30] info: [auth:2oo5vl] Starting auth for POST /schemas
[2026-01-28 14:21:30] info: [auth:2oo5vl] Token from cookie: false
[2026-01-28 14:21:30] info: [auth:2oo5vl] Token from header: true
[2026-01-28 14:21:30] info: [auth:2oo5vl] Authenticated user d81a6eaf-01c9-4eb1-8113-bf4091410675
[2026-01-28 14:21:30] info: [DocumentationRoutes] Registering schema: TestSchema
[2026-01-28 14:21:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:31] info: [EmailVerification] Created verification token
[2026-01-28 14:21:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:31] info: [authController.register] Verification email sent
[2026-01-28 14:21:31] info: [auth:k8uyjj] Starting auth for POST /endpoints
[2026-01-28 14:21:31] info: [auth:k8uyjj] Token from cookie: false
[2026-01-28 14:21:31] info: [auth:k8uyjj] Token from header: true
[2026-01-28 14:21:31] info: [auth:k8uyjj] Authenticated user 0d29ce5f-b2b1-4327-9eab-0d4aaa7b6d23
[2026-01-28 14:21:31] info: [DocumentationRoutes] Registering endpoint: POST /api/test/create
[2026-01-28 14:21:31] info: [auth:6fwqnb] Starting auth for POST /schemas
[2026-01-28 14:21:31] info: [auth:6fwqnb] Token from cookie: false
[2026-01-28 14:21:31] info: [auth:6fwqnb] Token from header: true
[2026-01-28 14:21:31] info: [auth:6fwqnb] Authenticated user 0d29ce5f-b2b1-4327-9eab-0d4aaa7b6d23
[2026-01-28 14:21:31] info: [DocumentationRoutes] Registering schema: CreateTestSchema
[2026-01-28 14:21:31] info: [auth:7268x] Starting auth for POST /generate
[2026-01-28 14:21:31] info: [auth:7268x] Token from cookie: false
[2026-01-28 14:21:31] info: [auth:7268x] Token from header: true
[2026-01-28 14:21:31] info: [auth:7268x] Authenticated user 0d29ce5f-b2b1-4327-9eab-0d4aaa7b6d23
[2026-01-28 14:21:31] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 14:21:31] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:21:31] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:21:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:31] info: [EmailVerification] Created verification token
[2026-01-28 14:21:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:31] info: [authController.register] Verification email sent
[2026-01-28 14:21:31] info: [auth:kvky4a] Starting auth for GET /metrics
[2026-01-28 14:21:31] info: [auth:kvky4a] Token from cookie: false
[2026-01-28 14:21:31] info: [auth:kvky4a] Token from header: true
[2026-01-28 14:21:31] info: [auth:kvky4a] Authenticated user d0b31172-f869-433b-8270-3c7d49c9ed7f
[2026-01-28 14:21:31] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:21:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:31] info: [EmailVerification] Created verification token
[2026-01-28 14:21:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:31] info: [authController.register] Verification email sent
[2026-01-28 14:21:31] info: [auth:jw4kbc] Starting auth for GET /health
[2026-01-28 14:21:31] info: [auth:jw4kbc] Token from cookie: false
[2026-01-28 14:21:31] info: [auth:jw4kbc] Token from header: true
[2026-01-28 14:21:31] info: [auth:jw4kbc] Authenticated user dbd7129a-a83f-49ff-b988-e0beb5f9ba3f
[2026-01-28 14:21:31] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:21:31] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:21:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:32] info: [EmailVerification] Created verification token
[2026-01-28 14:21:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:32] info: [authController.register] Verification email sent
[2026-01-28 14:21:32] info: [auth:ygms5m] Starting auth for GET /coverage
[2026-01-28 14:21:32] info: [auth:ygms5m] Token from cookie: false
[2026-01-28 14:21:32] info: [auth:ygms5m] Token from header: true
[2026-01-28 14:21:32] info: [auth:ygms5m] Authenticated user 4ef07b3e-b860-4199-a332-9d159a1ed2e7
[2026-01-28 14:21:32] info: [DocumentationRoutes] Getting documentation coverage analysis
[2026-01-28 14:21:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:32] info: [EmailVerification] Created verification token
[2026-01-28 14:21:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:32] info: [authController.register] Verification email sent
[2026-01-28 14:21:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:32] info: [EmailVerification] Created verification token
[2026-01-28 14:21:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:32] info: [authController.register] Verification email sent
[2026-01-28 14:21:32] info: [auth:ofnuln] Starting auth for GET /api/test/documented
[2026-01-28 14:21:32] info: [auth:ofnuln] Token from cookie: false
[2026-01-28 14:21:32] info: [auth:ofnuln] Token from header: true
[2026-01-28 14:21:32] info: [auth:ofnuln] Authenticated user d2e4b295-55af-4cc0-8a0d-2b13946d7a2c
[2026-01-28 14:21:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:33] info: [EmailVerification] Created verification token
[2026-01-28 14:21:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:33] info: [authController.register] Verification email sent
[2026-01-28 14:21:33] info: [auth:s8shsq] Starting auth for POST /endpoints
[2026-01-28 14:21:33] info: [auth:s8shsq] Token from cookie: false
[2026-01-28 14:21:33] warn: [auth:s8shsq] Access token is required for POST /endpoints from ::ffff:127.0.0.1
[2026-01-28 14:21:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:33] info: [EmailVerification] Created verification token
[2026-01-28 14:21:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:33] info: [authController.register] Verification email sent
[2026-01-28 14:21:33] info: [auth:81sr9e] Starting auth for POST /endpoints
[2026-01-28 14:21:33] info: [auth:81sr9e] Token from cookie: false
[2026-01-28 14:21:33] info: [auth:81sr9e] Token from header: true
[2026-01-28 14:21:33] info: [auth:81sr9e] Authenticated user ae383386-6ff2-4348-bb7a-677364c6f88e
PASS tests/integration/documentation-system-integration.test.mjs (5.027 s)
  üìö Documentation System Integration Tests
    üìã Swagger/OpenAPI Specification Validation
      ‚àö should load and validate OpenAPI specification (401 ms)
      ‚àö should serve YAML specification format (319 ms)
      ‚àö should provide interactive Swagger UI (314 ms)
    üîç API Documentation Service Integration
      ‚àö should register and validate endpoint documentation (319 ms)
      ‚àö should register and validate schema documentation (318 ms)
      ‚àö should generate documentation with metrics (366 ms)
    üìä Documentation Coverage and Health
      ‚àö should provide documentation metrics and coverage (317 ms)
      ‚àö should provide documentation health status (327 ms)
      ‚àö should analyze documentation coverage by system (333 ms)
    üîó Live API Integration Validation
      ‚àö should validate API root endpoint documentation (319 ms)
      ‚àö should validate documented endpoint response format (333 ms)
    üõ°Ô∏è Documentation Security and Access
      ‚àö should require authentication for documentation management (315 ms)
      ‚àö should validate documentation input data (314 ms)

[2026-01-28 14:21:33] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:33] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:33] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:33] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:34] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:34] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:21:34] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:34] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:21:34] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:21:34] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:21:34] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:21:34] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:21:34] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1336MB
[2026-01-28 14:21:35] info: [auth:quv4cb] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:quv4cb] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:quv4cb] Token from header: true
[2026-01-28 14:21:35] info: [auth:quv4cb] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:zf8dxq] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:zf8dxq] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:zf8dxq] Token from header: true
[2026-01-28 14:21:35] info: [auth:zf8dxq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147261)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147261)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1344MB
[2026-01-28 14:21:35] info: [auth:fnbz3t] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:fnbz3t] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:fnbz3t] Token from header: true
[2026-01-28 14:21:35] info: [auth:fnbz3t] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:uk5ez] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:uk5ez] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:uk5ez] Token from header: true
[2026-01-28 14:21:35] info: [auth:uk5ez] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147262)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147262)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB
[2026-01-28 14:21:35] info: [auth:ta5nc] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:ta5nc] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:ta5nc] Token from header: true
[2026-01-28 14:21:35] info: [auth:ta5nc] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:fz4y4w] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:fz4y4w] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:fz4y4w] Token from header: true
[2026-01-28 14:21:35] info: [auth:fz4y4w] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1333MB
[2026-01-28 14:21:35] info: [auth:zcvv9b] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:zcvv9b] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:zcvv9b] Token from header: true
[2026-01-28 14:21:35] info: [auth:zcvv9b] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:0k28r8] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:0k28r8] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:0k28r8] Token from header: true
[2026-01-28 14:21:35] info: [auth:0k28r8] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147263)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147263)
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147264)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147264)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1344MB
[2026-01-28 14:21:35] info: [auth:il5sk] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:35] info: [auth:il5sk] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:il5sk] Token from header: true
[2026-01-28 14:21:35] info: [auth:il5sk] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:tm5l3] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:35] info: [auth:tm5l3] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:tm5l3] Token from header: true
[2026-01-28 14:21:35] info: [auth:tm5l3] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [advancedBreedingGeneticsRoutes.genetic-probability] User 26fe5676-70be-4b4c-b68a-102082e37776 calculating for stallion 147261 and mare 147262
[2026-01-28 14:21:35] info: Calculating enhanced genetic probabilities
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147261 and mare 147262, 3 generations
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:21:35] info: Calculating genetic diversity impact
[2026-01-28 14:21:35] info: Calculating multi-generational predictions
[2026-01-28 14:21:35] info: [POST] /api/breeding/genetic-probability - 200
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1345MB
[2026-01-28 14:21:35] info: [auth:ld539i] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:ld539i] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:ld539i] Token from header: true
[2026-01-28 14:21:35] info: [auth:ld539i] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:asvj6g] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:asvj6g] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:asvj6g] Token from header: true
[2026-01-28 14:21:35] info: [auth:asvj6g] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147265)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147265)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB
[2026-01-28 14:21:35] info: [auth:7lim3] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:7lim3] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:7lim3] Token from header: true
[2026-01-28 14:21:35] info: [auth:7lim3] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:qat51] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:qat51] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:qat51] Token from header: true
[2026-01-28 14:21:35] info: [auth:qat51] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147266)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147266)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB
[2026-01-28 14:21:35] info: [auth:9urjv] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:9urjv] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:9urjv] Token from header: true
[2026-01-28 14:21:35] info: [auth:9urjv] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:bix1u] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:bix1u] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:bix1u] Token from header: true
[2026-01-28 14:21:35] info: [auth:bix1u] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:21:35] info: [auth:uov09j] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:uov09j] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:uov09j] Token from header: true
[2026-01-28 14:21:35] info: [auth:uov09j] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:kq88qn] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:kq88qn] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:kq88qn] Token from header: true
[2026-01-28 14:21:35] info: [auth:kq88qn] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147267)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147267)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147268)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147268)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB
[2026-01-28 14:21:35] info: [auth:kdg3w] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:35] info: [auth:kdg3w] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:kdg3w] Token from header: true
[2026-01-28 14:21:35] info: [auth:kdg3w] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:zjr5bf] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:35] info: [auth:zjr5bf] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:zjr5bf] Token from header: true
[2026-01-28 14:21:35] info: [auth:zjr5bf] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [advancedBreedingGeneticsRoutes.genetic-probability] User 26fe5676-70be-4b4c-b68a-102082e37776 calculating for stallion 99999 and mare 147266
[2026-01-28 14:21:35] info: [POST] /api/breeding/genetic-probability - 404
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB
[2026-01-28 14:21:35] info: [auth:4ta2u7] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:4ta2u7] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:4ta2u7] Token from header: true
[2026-01-28 14:21:35] info: [auth:4ta2u7] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:2naqce] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:2naqce] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:2naqce] Token from header: true
[2026-01-28 14:21:35] info: [auth:2naqce] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147269)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147269)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:35] info: [auth:2nxqeq] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:2nxqeq] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:2nxqeq] Token from header: true
[2026-01-28 14:21:35] info: [auth:2nxqeq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:bg73jj] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:bg73jj] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:bg73jj] Token from header: true
[2026-01-28 14:21:35] info: [auth:bg73jj] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147270)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147270)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1338MB
[2026-01-28 14:21:35] info: [auth:yus35r] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:yus35r] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:yus35r] Token from header: true
[2026-01-28 14:21:35] info: [auth:yus35r] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:3mt7jp] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:3mt7jp] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:3mt7jp] Token from header: true
[2026-01-28 14:21:35] info: [auth:3mt7jp] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1336MB
[2026-01-28 14:21:35] info: [auth:zxvj2d] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:zxvj2d] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:zxvj2d] Token from header: true
[2026-01-28 14:21:35] info: [auth:zxvj2d] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:e6r8v] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:e6r8v] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:e6r8v] Token from header: true
[2026-01-28 14:21:35] info: [auth:e6r8v] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147271)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147271)
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147272)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147272)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:35] info: [auth:auph3j] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:35] info: [auth:auph3j] Token from cookie: false
[2026-01-28 14:21:35] warn: [auth:auph3j] Access token is required for POST /breeding/genetic-probability from ::ffff:127.0.0.1
[2026-01-28 14:21:35] info: [POST] /api/breeding/genetic-probability - 401
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:35] info: [auth:qy70fg] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:qy70fg] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:qy70fg] Token from header: true
[2026-01-28 14:21:35] info: [auth:qy70fg] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:dt9xud] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:dt9xud] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:dt9xud] Token from header: true
[2026-01-28 14:21:35] info: [auth:dt9xud] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147273)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147273)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1337MB
[2026-01-28 14:21:35] info: [auth:99t7a] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:99t7a] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:99t7a] Token from header: true
[2026-01-28 14:21:35] info: [auth:99t7a] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:gm89tr] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:gm89tr] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:gm89tr] Token from header: true
[2026-01-28 14:21:35] info: [auth:gm89tr] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147274)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147274)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB
[2026-01-28 14:21:35] info: [auth:ue0g9] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:ue0g9] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:ue0g9] Token from header: true
[2026-01-28 14:21:35] info: [auth:ue0g9] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:8u8etq] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:8u8etq] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:8u8etq] Token from header: true
[2026-01-28 14:21:35] info: [auth:8u8etq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB
[2026-01-28 14:21:35] info: [auth:h0kne] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:h0kne] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:h0kne] Token from header: true
[2026-01-28 14:21:35] info: [auth:h0kne] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:lv1w3q] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:lv1w3q] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:lv1w3q] Token from header: true
[2026-01-28 14:21:35] info: [auth:lv1w3q] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147275)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147275)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147276)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147276)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [GET] /api/breeding/lineage-analysis/147273/147274?generations=3
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1336MB
[2026-01-28 14:21:35] info: [auth:h5mo2a] Starting auth for GET /breeding/lineage-analysis/147273/147274
[2026-01-28 14:21:35] info: [auth:h5mo2a] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:h5mo2a] Token from header: true
[2026-01-28 14:21:35] info: [auth:h5mo2a] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:tjklih] Starting auth for GET /breeding/lineage-analysis/147273/147274
[2026-01-28 14:21:35] info: [auth:tjklih] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:tjklih] Token from header: true
[2026-01-28 14:21:35] info: [auth:tjklih] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User 26fe5676-70be-4b4c-b68a-102082e37776 analyzing lineage for stallion 147273 and mare 147274
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147273 and mare 147274, 3 generations
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 147273 and mare 147274
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147273 and mare 147274, 3 generations
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:21:35] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:21:35] info: [GET] /api/breeding/lineage-analysis/147273/147274?generations=3 - 200
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB
[2026-01-28 14:21:35] info: [auth:8ex8o3] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:8ex8o3] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:8ex8o3] Token from header: true
[2026-01-28 14:21:35] info: [auth:8ex8o3] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:3hrf7o] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:3hrf7o] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:3hrf7o] Token from header: true
[2026-01-28 14:21:35] info: [auth:3hrf7o] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147277)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147277)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1345MB
[2026-01-28 14:21:35] info: [auth:ko8atn] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:ko8atn] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:ko8atn] Token from header: true
[2026-01-28 14:21:35] info: [auth:ko8atn] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:re65n9] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:re65n9] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:re65n9] Token from header: true
[2026-01-28 14:21:35] info: [auth:re65n9] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147278)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147278)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1350MB
[2026-01-28 14:21:35] info: [auth:g0jeqi] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:g0jeqi] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:g0jeqi] Token from header: true
[2026-01-28 14:21:35] info: [auth:g0jeqi] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:z5n37] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:z5n37] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:z5n37] Token from header: true
[2026-01-28 14:21:35] info: [auth:z5n37] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:21:35] info: [auth:dg60ad] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:dg60ad] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:dg60ad] Token from header: true
[2026-01-28 14:21:35] info: [auth:dg60ad] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:9udtkq] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:9udtkq] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:9udtkq] Token from header: true
[2026-01-28 14:21:35] info: [auth:9udtkq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147279)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147279)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147280)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147280)
[2026-01-28 14:21:35] info: [POST] /api/horses - 201
[2026-01-28 14:21:35] info: [GET] /api/breeding/lineage-analysis/99999/99998
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB
[2026-01-28 14:21:35] info: [auth:vf13go] Starting auth for GET /breeding/lineage-analysis/99999/99998
[2026-01-28 14:21:35] info: [auth:vf13go] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:vf13go] Token from header: true
[2026-01-28 14:21:35] info: [auth:vf13go] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:sq2g7e] Starting auth for GET /breeding/lineage-analysis/99999/99998
[2026-01-28 14:21:35] info: [auth:sq2g7e] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:sq2g7e] Token from header: true
[2026-01-28 14:21:35] info: [auth:sq2g7e] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User 26fe5676-70be-4b4c-b68a-102082e37776 analyzing lineage for stallion 99999 and mare 99998
[2026-01-28 14:21:35] info: [GET] /api/breeding/lineage-analysis/99999/99998 - 404
[2026-01-28 14:21:35] info: [POST] /api/horses
[2026-01-28 14:21:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1338MB
[2026-01-28 14:21:35] info: [auth:mtzqbb] Starting auth for POST /horses
[2026-01-28 14:21:35] info: [auth:mtzqbb] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:mtzqbb] Token from header: true
[2026-01-28 14:21:35] info: [auth:mtzqbb] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [auth:i5a51o] Starting auth for POST /
[2026-01-28 14:21:35] info: [auth:i5a51o] Token from cookie: false
[2026-01-28 14:21:35] info: [auth:i5a51o] Token from header: true
[2026-01-28 14:21:35] info: [auth:i5a51o] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:35] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147281)
[2026-01-28 14:21:35] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147281)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1344MB
[2026-01-28 14:21:36] info: [auth:uqzrfd] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:uqzrfd] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:uqzrfd] Token from header: true
[2026-01-28 14:21:36] info: [auth:uqzrfd] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:zeouab] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:zeouab] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:zeouab] Token from header: true
[2026-01-28 14:21:36] info: [auth:zeouab] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147282)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147282)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1349MB
[2026-01-28 14:21:36] info: [auth:yxoto] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:yxoto] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:yxoto] Token from header: true
[2026-01-28 14:21:36] info: [auth:yxoto] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:1a9i3] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:1a9i3] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:1a9i3] Token from header: true
[2026-01-28 14:21:36] info: [auth:1a9i3] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:21:36] info: [auth:hfwtdj] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:hfwtdj] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:hfwtdj] Token from header: true
[2026-01-28 14:21:36] info: [auth:hfwtdj] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:37hwyp] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:37hwyp] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:37hwyp] Token from header: true
[2026-01-28 14:21:36] info: [auth:37hwyp] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147283)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147283)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147284)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147284)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/breeding/breeding-recommendations
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1344MB
[2026-01-28 14:21:36] info: [auth:wujdj9] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 14:21:36] info: [auth:wujdj9] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:wujdj9] Token from header: true
[2026-01-28 14:21:36] info: [auth:wujdj9] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:7smm3] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 14:21:36] info: [auth:7smm3] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:7smm3] Token from header: true
[2026-01-28 14:21:36] info: [auth:7smm3] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [advancedBreedingGeneticsRoutes.breeding-recommendations] User 26fe5676-70be-4b4c-b68a-102082e37776 generating recommendations for stallion 147281 and mare 147282
[2026-01-28 14:21:36] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 147281 and mare 147282
[2026-01-28 14:21:36] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:21:36] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 147281 and mare 147282
[2026-01-28 14:21:36] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:21:36] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 14:21:36] info: [POST] /api/breeding/breeding-recommendations - 200
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:21:36] info: [auth:jcocr] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:jcocr] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:jcocr] Token from header: true
[2026-01-28 14:21:36] info: [auth:jcocr] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:54dk9s] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:54dk9s] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:54dk9s] Token from header: true
[2026-01-28 14:21:36] info: [auth:54dk9s] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147285)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147285)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1352MB
[2026-01-28 14:21:36] info: [auth:h6acig] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:h6acig] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:h6acig] Token from header: true
[2026-01-28 14:21:36] info: [auth:h6acig] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:yr6arx] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:yr6arx] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:yr6arx] Token from header: true
[2026-01-28 14:21:36] info: [auth:yr6arx] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147286)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147286)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1342MB
[2026-01-28 14:21:36] info: [auth:pdrqxo] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:pdrqxo] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:pdrqxo] Token from header: true
[2026-01-28 14:21:36] info: [auth:pdrqxo] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:6r05t7] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:6r05t7] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:6r05t7] Token from header: true
[2026-01-28 14:21:36] info: [auth:6r05t7] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB
[2026-01-28 14:21:36] info: [auth:0kzyqb] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:0kzyqb] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:0kzyqb] Token from header: true
[2026-01-28 14:21:36] info: [auth:0kzyqb] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:3da11] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:3da11] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:3da11] Token from header: true
[2026-01-28 14:21:36] info: [auth:3da11] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147287)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147287)
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147288)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147288)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/genetics/population-analysis
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1351MB
[2026-01-28 14:21:36] info: [auth:krf3rd] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:21:36] info: [auth:krf3rd] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:krf3rd] Token from header: true
[2026-01-28 14:21:36] info: [auth:krf3rd] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:z4a45p] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:21:36] info: [auth:z4a45p] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:z4a45p] Token from header: true
[2026-01-28 14:21:36] info: [auth:z4a45p] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [advancedBreedingGeneticsRoutes.population-analysis] User 26fe5676-70be-4b4c-b68a-102082e37776 analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 14:21:36] info: [POST] /api/genetics/population-analysis - 200
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1342MB
[2026-01-28 14:21:36] info: [auth:3ox8c8m] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:3ox8c8m] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:3ox8c8m] Token from header: true
[2026-01-28 14:21:36] info: [auth:3ox8c8m] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:3cn2jd] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:3cn2jd] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:3cn2jd] Token from header: true
[2026-01-28 14:21:36] info: [auth:3cn2jd] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147289)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147289)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:36] info: [auth:15go5m] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:15go5m] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:15go5m] Token from header: true
[2026-01-28 14:21:36] info: [auth:15go5m] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:9c02g] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:9c02g] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:9c02g] Token from header: true
[2026-01-28 14:21:36] info: [auth:9c02g] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147290)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147290)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1352MB
[2026-01-28 14:21:36] info: [auth:9sz1ws] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:9sz1ws] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:9sz1ws] Token from header: true
[2026-01-28 14:21:36] info: [auth:9sz1ws] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:vrnvvf] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:vrnvvf] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:vrnvvf] Token from header: true
[2026-01-28 14:21:36] info: [auth:vrnvvf] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1350MB
[2026-01-28 14:21:36] info: [auth:yxhf3i] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:yxhf3i] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:yxhf3i] Token from header: true
[2026-01-28 14:21:36] info: [auth:yxhf3i] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:foghjz] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:foghjz] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:foghjz] Token from header: true
[2026-01-28 14:21:36] info: [auth:foghjz] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147291)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147291)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147292)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147292)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:36] info: [auth:g8i87h] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:21:36] info: [auth:g8i87h] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:g8i87h] Token from header: true
[2026-01-28 14:21:36] info: [auth:g8i87h] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:c6gh4k] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:21:36] info: [auth:c6gh4k] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:c6gh4k] Token from header: true
[2026-01-28 14:21:36] info: [auth:c6gh4k] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [advancedBreedingGeneticsRoutes.inbreeding-analysis] User 26fe5676-70be-4b4c-b68a-102082e37776 analyzing inbreeding for stallion 147289 and mare 147290
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147289 and mare 147290
[2026-01-28 14:21:36] info: [POST] /api/genetics/inbreeding-analysis - 200
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB
[2026-01-28 14:21:36] info: [auth:ty706f] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:ty706f] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:ty706f] Token from header: true
[2026-01-28 14:21:36] info: [auth:ty706f] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:vk70kb] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:vk70kb] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:vk70kb] Token from header: true
[2026-01-28 14:21:36] info: [auth:vk70kb] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147293)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147293)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:21:36] info: [auth:65ox3h] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:65ox3h] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:65ox3h] Token from header: true
[2026-01-28 14:21:36] info: [auth:65ox3h] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:zvtp2] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:zvtp2] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:zvtp2] Token from header: true
[2026-01-28 14:21:36] info: [auth:zvtp2] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147294)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147294)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1353MB
[2026-01-28 14:21:36] info: [auth:pn80sm] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:pn80sm] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:pn80sm] Token from header: true
[2026-01-28 14:21:36] info: [auth:pn80sm] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:wir7xl] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:wir7xl] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:wir7xl] Token from header: true
[2026-01-28 14:21:36] info: [auth:wir7xl] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1351MB
[2026-01-28 14:21:36] info: [auth:wck3bi] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:wck3bi] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:wck3bi] Token from header: true
[2026-01-28 14:21:36] info: [auth:wck3bi] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:fl5jta] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:fl5jta] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:fl5jta] Token from header: true
[2026-01-28 14:21:36] info: [auth:fl5jta] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147295)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147295)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147296)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147296)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [GET] /api/genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:36] info: [auth:ycp8cu] Starting auth for GET /genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:ycp8cu] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:ycp8cu] Token from header: true
[2026-01-28 14:21:36] info: [auth:ycp8cu] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:b84fq] Starting auth for GET /genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:b84fq] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:b84fq] Token from header: true
[2026-01-28 14:21:36] info: [auth:b84fq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [advancedBreedingGeneticsRoutes.diversity-report] Generating report for user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 14:21:36] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 14:21:36] info: [GET] /api/genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776 - 200
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:36] info: [auth:4p2g2g] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:4p2g2g] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:4p2g2g] Token from header: true
[2026-01-28 14:21:36] info: [auth:4p2g2g] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:3f0umc] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:3f0umc] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:3f0umc] Token from header: true
[2026-01-28 14:21:36] info: [auth:3f0umc] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147297)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147297)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1351MB
[2026-01-28 14:21:36] info: [auth:c7k0z] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:c7k0z] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:c7k0z] Token from header: true
[2026-01-28 14:21:36] info: [auth:c7k0z] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:exi22] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:exi22] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:exi22] Token from header: true
[2026-01-28 14:21:36] info: [auth:exi22] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147298)
[2026-01-28 14:21:36] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147298)
[2026-01-28 14:21:36] info: [POST] /api/horses - 201
[2026-01-28 14:21:36] info: [POST] /api/horses
[2026-01-28 14:21:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1356MB
[2026-01-28 14:21:36] info: [auth:qx5l4] Starting auth for POST /horses
[2026-01-28 14:21:36] info: [auth:qx5l4] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:qx5l4] Token from header: true
[2026-01-28 14:21:36] info: [auth:qx5l4] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:36] info: [auth:033spq] Starting auth for POST /
[2026-01-28 14:21:36] info: [auth:033spq] Token from cookie: false
[2026-01-28 14:21:36] info: [auth:033spq] Token from header: true
[2026-01-28 14:21:37] info: [auth:033spq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1354MB
[2026-01-28 14:21:37] info: [auth:gh7obb] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:gh7obb] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:gh7obb] Token from header: true
[2026-01-28 14:21:37] info: [auth:gh7obb] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:hzl7rq] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:hzl7rq] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:hzl7rq] Token from header: true
[2026-01-28 14:21:37] info: [auth:hzl7rq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147299)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147299)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147300)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147300)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/genetics/optimal-breeding
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1349MB
[2026-01-28 14:21:37] info: [auth:nhf7ys] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 14:21:37] info: [auth:nhf7ys] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:nhf7ys] Token from header: true
[2026-01-28 14:21:37] info: [auth:nhf7ys] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:h1j18s] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 14:21:37] info: [auth:h1j18s] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:h1j18s] Token from header: true
[2026-01-28 14:21:37] info: [auth:h1j18s] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [advancedBreedingGeneticsRoutes.optimal-breeding] User 26fe5676-70be-4b4c-b68a-102082e37776 generating optimal breeding for 4 horses
[2026-01-28 14:21:37] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 14:21:37] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:21:37] info: [POST] /api/genetics/optimal-breeding - 200
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1346MB
[2026-01-28 14:21:37] info: [auth:xayrrk] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:xayrrk] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:xayrrk] Token from header: true
[2026-01-28 14:21:37] info: [auth:xayrrk] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:h6ykeh] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:h6ykeh] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:h6ykeh] Token from header: true
[2026-01-28 14:21:37] info: [auth:h6ykeh] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147301)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147301)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1350MB
[2026-01-28 14:21:37] info: [auth:nyqmbo] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:nyqmbo] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:nyqmbo] Token from header: true
[2026-01-28 14:21:37] info: [auth:nyqmbo] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:y9hua] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:y9hua] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:y9hua] Token from header: true
[2026-01-28 14:21:37] info: [auth:y9hua] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147302)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147302)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1355MB
[2026-01-28 14:21:37] info: [auth:0h78l2] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:0h78l2] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:0h78l2] Token from header: true
[2026-01-28 14:21:37] info: [auth:0h78l2] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:fq1pu] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:fq1pu] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:fq1pu] Token from header: true
[2026-01-28 14:21:37] info: [auth:fq1pu] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1354MB
[2026-01-28 14:21:37] info: [auth:bd417s] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:bd417s] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:bd417s] Token from header: true
[2026-01-28 14:21:37] info: [auth:bd417s] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:pox39] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:pox39] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:pox39] Token from header: true
[2026-01-28 14:21:37] info: [auth:pox39] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147303)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147303)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147304)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147304)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1350MB
[2026-01-28 14:21:37] info: [auth:og88wt] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:37] info: [auth:og88wt] Token from cookie: false
[2026-01-28 14:21:37] warn: [auth:og88wt] Access token is required for POST /breeding/genetic-probability from ::ffff:127.0.0.1
[2026-01-28 14:21:37] info: [POST] /api/breeding/genetic-probability - 401
[2026-01-28 14:21:37] info: [GET] /api/breeding/lineage-analysis/147301/147302
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1349MB
[2026-01-28 14:21:37] info: [auth:duu7z] Starting auth for GET /breeding/lineage-analysis/147301/147302
[2026-01-28 14:21:37] info: [auth:duu7z] Token from cookie: false
[2026-01-28 14:21:37] warn: [auth:duu7z] Access token is required for GET /breeding/lineage-analysis/147301/147302 from ::ffff:127.0.0.1
[2026-01-28 14:21:37] info: [GET] /api/breeding/lineage-analysis/147301/147302 - 401
[2026-01-28 14:21:37] info: [POST] /api/breeding/breeding-recommendations
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:37] info: [auth:d8rohi] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 14:21:37] info: [auth:d8rohi] Token from cookie: false
[2026-01-28 14:21:37] warn: [auth:d8rohi] Access token is required for POST /breeding/breeding-recommendations from ::ffff:127.0.0.1
[2026-01-28 14:21:37] info: [POST] /api/breeding/breeding-recommendations - 401
[2026-01-28 14:21:37] info: [POST] /api/genetics/population-analysis
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:21:37] info: [auth:xoexm] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:21:37] info: [auth:xoexm] Token from cookie: false
[2026-01-28 14:21:37] warn: [auth:xoexm] Access token is required for POST /genetics/population-analysis from ::ffff:127.0.0.1
[2026-01-28 14:21:37] info: [POST] /api/genetics/population-analysis - 401
[2026-01-28 14:21:37] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1346MB
[2026-01-28 14:21:37] info: [auth:2fltlh] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:21:37] info: [auth:2fltlh] Token from cookie: false
[2026-01-28 14:21:37] warn: [auth:2fltlh] Access token is required for POST /genetics/inbreeding-analysis from ::ffff:127.0.0.1
[2026-01-28 14:21:37] info: [POST] /api/genetics/inbreeding-analysis - 401
[2026-01-28 14:21:37] info: [GET] /api/genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1345MB
[2026-01-28 14:21:37] info: [auth:eymg3d] Starting auth for GET /genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:eymg3d] Token from cookie: false
[2026-01-28 14:21:37] warn: [auth:eymg3d] Access token is required for GET /genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776 from ::ffff:127.0.0.1
[2026-01-28 14:21:37] info: [GET] /api/genetics/diversity-report/26fe5676-70be-4b4c-b68a-102082e37776 - 401
[2026-01-28 14:21:37] info: [POST] /api/genetics/optimal-breeding
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1345MB
[2026-01-28 14:21:37] info: [auth:ohm9pi] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 14:21:37] info: [auth:ohm9pi] Token from cookie: false
[2026-01-28 14:21:37] warn: [auth:ohm9pi] Access token is required for POST /genetics/optimal-breeding from ::ffff:127.0.0.1
[2026-01-28 14:21:37] info: [POST] /api/genetics/optimal-breeding - 401
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:21:37] info: [auth:tabbj] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:tabbj] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:tabbj] Token from header: true
[2026-01-28 14:21:37] info: [auth:tabbj] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:yw53co] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:yw53co] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:yw53co] Token from header: true
[2026-01-28 14:21:37] info: [auth:yw53co] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147305)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147305)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1352MB
[2026-01-28 14:21:37] info: [auth:o6wlxi] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:o6wlxi] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:o6wlxi] Token from header: true
[2026-01-28 14:21:37] info: [auth:o6wlxi] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:0wt5w1e] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:0wt5w1e] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:0wt5w1e] Token from header: true
[2026-01-28 14:21:37] info: [auth:0wt5w1e] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147306)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147306)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1357MB
[2026-01-28 14:21:37] info: [auth:t3nhv] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:t3nhv] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:t3nhv] Token from header: true
[2026-01-28 14:21:37] info: [auth:t3nhv] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:zl35oq] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:zl35oq] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:zl35oq] Token from header: true
[2026-01-28 14:21:37] info: [auth:zl35oq] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1356MB
[2026-01-28 14:21:37] info: [auth:d9xqj] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:d9xqj] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:d9xqj] Token from header: true
[2026-01-28 14:21:37] info: [auth:d9xqj] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:b3e6ej] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:b3e6ej] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:b3e6ej] Token from header: true
[2026-01-28 14:21:37] info: [auth:b3e6ej] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147307)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147307)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147308)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147308)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1352MB
[2026-01-28 14:21:37] info: [auth:73c3w] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:37] info: [auth:73c3w] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:73c3w] Token from header: true
[2026-01-28 14:21:37] info: [auth:73c3w] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:osz88] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:37] info: [auth:osz88] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:osz88] Token from header: true
[2026-01-28 14:21:37] info: [auth:osz88] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [POST] /api/breeding/genetic-probability - 400
[2026-01-28 14:21:37] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1358MB
[2026-01-28 14:21:37] info: [auth:0mjtu] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:21:37] info: [auth:0mjtu] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:0mjtu] Token from header: true
[2026-01-28 14:21:37] info: [auth:0mjtu] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:rf43se] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:21:37] info: [auth:rf43se] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:rf43se] Token from header: true
[2026-01-28 14:21:37] info: [auth:rf43se] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [POST] /api/genetics/inbreeding-analysis - 400
[2026-01-28 14:21:37] info: [POST] /api/genetics/population-analysis
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1349MB
[2026-01-28 14:21:37] info: [auth:5pr6id] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:21:37] info: [auth:5pr6id] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:5pr6id] Token from header: true
[2026-01-28 14:21:37] info: [auth:5pr6id] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:yqojce] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:21:37] info: [auth:yqojce] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:yqojce] Token from header: true
[2026-01-28 14:21:37] info: [auth:yqojce] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [POST] /api/genetics/population-analysis - 400
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1357MB
[2026-01-28 14:21:37] info: [auth:i82s7f] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:i82s7f] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:i82s7f] Token from header: true
[2026-01-28 14:21:37] info: [auth:i82s7f] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:3e0qxo] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:3e0qxo] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:3e0qxo] Token from header: true
[2026-01-28 14:21:37] info: [auth:3e0qxo] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147309)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147309)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:21:37] info: [auth:zneavu] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:zneavu] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:zneavu] Token from header: true
[2026-01-28 14:21:37] info: [auth:zneavu] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:pmfc0q] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:pmfc0q] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:pmfc0q] Token from header: true
[2026-01-28 14:21:37] info: [auth:pmfc0q] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147310)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147310)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1355MB
[2026-01-28 14:21:37] info: [auth:jven3x] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:jven3x] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:jven3x] Token from header: true
[2026-01-28 14:21:37] info: [auth:jven3x] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:gk4y55] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:gk4y55] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:gk4y55] Token from header: true
[2026-01-28 14:21:37] info: [auth:gk4y55] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [POST] /api/horses
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1353MB
[2026-01-28 14:21:37] info: [auth:yivg0l] Starting auth for POST /horses
[2026-01-28 14:21:37] info: [auth:yivg0l] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:yivg0l] Token from header: true
[2026-01-28 14:21:37] info: [auth:yivg0l] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [auth:bjmhp] Starting auth for POST /
[2026-01-28 14:21:37] info: [auth:bjmhp] Token from cookie: false
[2026-01-28 14:21:37] info: [auth:bjmhp] Token from header: true
[2026-01-28 14:21:37] info: [auth:bjmhp] Authenticated user 26fe5676-70be-4b4c-b68a-102082e37776
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147311)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147311)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147312)
[2026-01-28 14:21:37] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147312)
[2026-01-28 14:21:37] info: [POST] /api/horses - 201
[2026-01-28 14:21:37] info: [POST] /api/auth/register
[2026-01-28 14:21:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:21:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:38] info: [EmailVerification] Created verification token
[2026-01-28 14:21:38] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:38] info: [authController.register] Verification email sent
[2026-01-28 14:21:38] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:38] info: [POST] /api/auth/login
[2026-01-28 14:21:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1350MB
[2026-01-28 14:21:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:38] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:38] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:38] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:21:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1361MB
[2026-01-28 14:21:38] info: [auth:yvtvom] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:21:38] info: [auth:yvtvom] Token from cookie: false
[2026-01-28 14:21:38] info: [auth:yvtvom] Token from header: true
[2026-01-28 14:21:38] info: [auth:yvtvom] Authenticated user bce115ce-0fe0-4888-bf7e-817c02a4308a
[2026-01-28 14:21:38] info: [POST] /api/breeding/genetic-probability - 403
PASS tests/integration/advancedBreedingGeneticsAPI.test.mjs
  üß¨ Advanced Breeding Genetics API Integration
    üéØ Enhanced Genetic Probability API
      ‚àö POST /api/breeding/genetic-probability should calculate breeding probabilities (252 ms)
      ‚àö POST /api/breeding/genetic-probability should handle invalid horse IDs (179 ms)
      ‚àö POST /api/breeding/genetic-probability should require authentication (165 ms)
    üå≥ Advanced Lineage Analysis API
      ‚àö GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree (200 ms)
      ‚àö GET /api/breeding/lineage-analysis should handle missing horses gracefully (177 ms)
      ‚àö POST /api/breeding/breeding-recommendations should generate comprehensive recommendations (201 ms)
    üìä Genetic Diversity Tracking API
      ‚àö POST /api/genetics/population-analysis should analyze population genetics (274 ms)
      ‚àö POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding (183 ms)
      ‚àö GET /api/genetics/diversity-report/:userId should generate comprehensive report (273 ms)
      ‚àö POST /api/genetics/optimal-breeding should recommend optimal breeding pairs (185 ms)
    üîí API Security and Validation
      ‚àö All genetic endpoints should require authentication (291 ms)
      ‚àö Genetic endpoints should validate input parameters (238 ms)
      ‚àö Genetic endpoints should handle ownership validation (787 ms)

[2026-01-28 14:21:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:38] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:38] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:38] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:39] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:39] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:21:39] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:39] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:21:39] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:21:39] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:21:39] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:21:39] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:21:39] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:21:39] info: [POST] /api/auth/login
[2026-01-28 14:21:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1410MB
[2026-01-28 14:21:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:39] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:39] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:39] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1408MB
[2026-01-28 14:21:39] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:39] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:39] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:39] info: [POST] /api/auth/login
[2026-01-28 14:21:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1410MB
[2026-01-28 14:21:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:40] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1406MB
[2026-01-28 14:21:40] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 14:21:40] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:40] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:40] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:40] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:40] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:40] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:40] error: Error Token reuse detected - please login again
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:40] info: [POST] /api/auth/login
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1408MB
[2026-01-28 14:21:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:40] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB
[2026-01-28 14:21:40] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/login
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 14:21:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:40] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:40] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1410MB
[2026-01-28 14:21:40] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:40] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:40] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:40] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:40] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:40] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:40] error: Error Token reuse detected - please login again
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:40] info: [POST] /api/auth/login
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:40] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:40] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1410MB
[2026-01-28 14:21:40] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1408MB
[2026-01-28 14:21:40] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:40] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1420MB
[2026-01-28 14:21:40] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:40] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:40] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:40] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:40] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:40] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:40] error: Error Token reuse detected - please login again
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1420MB
[2026-01-28 14:21:40] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 14:21:40] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 14:21:40] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:40] error: Error Invalid refresh token
[2026-01-28 14:21:40] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:40] info: [POST] /api/auth/login
[2026-01-28 14:21:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB
[2026-01-28 14:21:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:41] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1416MB
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:21:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:41] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:41] error: Error Token reuse detected - please login again
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:41] info: [POST] /api/auth/login
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:21:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:41] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1412MB
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/login
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:41] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1408MB
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:41] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:41] error: Error Token reuse detected - please login again
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:41] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:41] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:41] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:41] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:41] error: Error Token reuse detected - please login again
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:41] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 14:21:41] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 14:21:41] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:41] error: Error Invalid refresh token
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/login
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB
[2026-01-28 14:21:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:41] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/login
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1423MB
[2026-01-28 14:21:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:41] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 14:21:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1417MB
[2026-01-28 14:21:41] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:42] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Token reuse detected - please login again
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1417MB
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Invalid refresh token
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/login
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 14:21:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:42] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 14:21:42] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:42] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Token reuse detected - please login again
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Invalid refresh token
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/login
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1416MB
[2026-01-28 14:21:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:42] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:42] info: [POST] /api/auth/logout
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1413MB
[2026-01-28 14:21:42] info: [auth:y7eybd] Starting auth for POST /logout
[2026-01-28 14:21:42] info: [auth:y7eybd] Token from cookie: false
[2026-01-28 14:21:42] warn: [auth:y7eybd] Access token is required for POST /logout from ::ffff:127.0.0.1
[2026-01-28 14:21:42] info: [POST] /api/auth/logout - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/login
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 14:21:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:42] info: [POST] /api/auth/login - 200
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1425MB
[2026-01-28 14:21:42] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:42] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:21:42] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Token reuse detected - please login again
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/cleanup-tokens
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB
[2026-01-28 14:21:42] info: [auth:ddyx8v] Starting auth for POST /auth/cleanup-tokens
[2026-01-28 14:21:42] info: [auth:ddyx8v] Token from cookie: false
[2026-01-28 14:21:42] warn: [auth:ddyx8v] Access token is required for POST /auth/cleanup-tokens from ::ffff:127.0.0.1
[2026-01-28 14:21:42] info: [POST] /api/auth/cleanup-tokens - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Token reuse detected - please login again
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Refresh token is required
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Refresh token is required
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 400
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1417MB
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Token reuse detected - please login again
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:21:42] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:42] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:42] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:42] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:42] error: Error Token reuse detected - please login again
[2026-01-28 14:21:42] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:21:43] info: [POST] /api/auth/refresh-token
[2026-01-28 14:21:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:21:43] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:43] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:43] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:43] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:21:43] error: Error Token reuse detected - please login again
[2026-01-28 14:21:43] info: [POST] /api/auth/refresh-token - 401
PASS __tests__/integration/token-rotation.test.mjs
  Token Rotation and Reuse Detection System
    Basic Token Rotation
      ‚àö should_rotate_refresh_token_on_each_use (297 ms)
      ‚àö should_invalidate_old_refresh_token_after_rotation (235 ms)
      ‚àö should_track_token_families_in_database (200 ms)
    Token Reuse Detection
      ‚àö should_detect_refresh_token_reuse (239 ms)
      ‚àö should_invalidate_entire_token_family_on_reuse_detection (283 ms)
      ‚àö should_require_reauthentication_after_family_invalidation (339 ms)
    Concurrent Token Usage
      ‚àö should_handle_concurrent_refresh_requests_gracefully (334 ms)
      ‚àö should_prevent_race_conditions_in_token_rotation (248 ms)
    Token Compromise Scenarios
      ‚àö should_handle_legitimate_user_concurrent_with_attacker (265 ms)
      ‚àö should_log_security_events_for_monitoring (222 ms)
    Token Expiration and Cleanup
      ‚àö should_reject_expired_refresh_tokens (118 ms)
      ‚àö should_clean_up_invalidated_token_families (370 ms)
    Database Constraints and Security
      ‚àö should_enforce_unique_constraints_on_token_families (77 ms)
      ‚àö should_validate_token_structure_and_signatures (197 ms)

[2026-01-28 14:21:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:43] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:43] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:44] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:44] info: [EmailVerification] Created verification token
[2026-01-28 14:21:44] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:44] info: [authController.register] Verification email sent
[2026-01-28 14:21:44] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:44] info: [EmailVerification] Created verification token
[2026-01-28 14:21:44] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:44] info: [authController.register] Verification email sent
[2026-01-28 14:21:44] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 14:21:44] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:44] info: [EmailVerification] Created verification token
[2026-01-28 14:21:44] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:44] info: [authController.register] Verification email sent
[2026-01-28 14:21:45] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:45] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:21:45] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:45] info: [EmailVerification] Created verification token
[2026-01-28 14:21:45] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:45] info: [authController.register] Verification email sent
[2026-01-28 14:21:45] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:21:45] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:45] info: [EmailVerification] Created verification token
[2026-01-28 14:21:45] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:45] info: [authController.register] Verification email sent
[2026-01-28 14:21:45] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:45] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:46] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:46] info: [EmailVerification] Created verification token
[2026-01-28 14:21:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:46] info: [authController.register] Verification email sent
[2026-01-28 14:21:46] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:21:46] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:21:46] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:21:46] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:46] info: [EmailVerification] Created verification token
[2026-01-28 14:21:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:46] info: [authController.register] Verification email sent
[2026-01-28 14:21:46] info: [auth:pl8bsl] Starting auth for GET /api/auth/me
[2026-01-28 14:21:46] info: [auth:pl8bsl] Token from cookie: false
[2026-01-28 14:21:46] info: [auth:pl8bsl] Token from header: true
[2026-01-28 14:21:46] info: [auth:pl8bsl] Authenticated user eccb587b-6f86-4883-834f-bd19b80a7220
[2026-01-28 14:21:46] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:46] info: [EmailVerification] Created verification token
[2026-01-28 14:21:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:46] info: [authController.register] Verification email sent
[2026-01-28 14:21:46] info: [auth:r8mcbo] Starting auth for GET /api/auth/me
[2026-01-28 14:21:46] info: [auth:r8mcbo] Token from cookie: false
[2026-01-28 14:21:46] warn: [auth:r8mcbo] Access token is required for GET /api/auth/me from ::ffff:127.0.0.1
[2026-01-28 14:21:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:47] info: [EmailVerification] Created verification token
[2026-01-28 14:21:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:47] info: [authController.register] Verification email sent
[2026-01-28 14:21:47] info: [auth:gc1obn] Starting auth for POST /api/auth/logout
[2026-01-28 14:21:47] info: [auth:gc1obn] Token from cookie: false
[2026-01-28 14:21:47] info: [auth:gc1obn] Token from header: true
[2026-01-28 14:21:47] info: [auth:gc1obn] Authenticated user f845140f-5409-4af3-953a-4405f81e0a67
PASS tests/auth-working.test.mjs
  üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation
    User Registration
      ‚àö should register a new user successfully (422 ms)
      ‚àö should reject duplicate email registration (319 ms)
    User Login
      ‚àö should login successfully with valid credentials (609 ms)
      ‚àö should reject login with invalid credentials (581 ms)
    Token Management
      ‚àö should refresh token successfully (332 ms)
      ‚àö should reject invalid refresh token (308 ms)
    Protected Routes
      ‚àö should get user profile with valid token (328 ms)
      ‚àö should reject profile request without token (316 ms)
      ‚àö should logout successfully (316 ms)

[2026-01-28 14:21:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:47] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:47] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:47] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:47] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:47] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:48] info: [EmailVerification] Created verification token
[2026-01-28 14:21:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:48] info: [authController.register] Verification email sent
[2026-01-28 14:21:48] info: [auth:1qohnp4] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:48] info: [auth:1qohnp4] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:1qohnp4] Token from header: true
[2026-01-28 14:21:48] info: [auth:1qohnp4] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [auth:p6l9] Starting auth for GET /api/horses
[2026-01-28 14:21:48] info: [auth:p6l9] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:p6l9] Token from header: true
[2026-01-28 14:21:48] info: [auth:p6l9] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [auth:48zl0p] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:21:48] info: [auth:48zl0p] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:48zl0p] Token from header: true
[2026-01-28 14:21:48] info: [auth:48zl0p] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [auth:ft8d99] Starting auth for GET /api/training/status
[2026-01-28 14:21:48] info: [auth:ft8d99] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:ft8d99] Token from header: true
[2026-01-28 14:21:48] info: [auth:ft8d99] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [auth:yxuk7z] Starting auth for GET /api/grooms/my-grooms
[2026-01-28 14:21:48] info: [auth:yxuk7z] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:yxuk7z] Token from header: true
[2026-01-28 14:21:48] info: [auth:yxuk7z] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [auth:1j2cap7] Starting auth for GET /api/traits/my-discoveries
[2026-01-28 14:21:48] info: [auth:1j2cap7] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:1j2cap7] Token from header: true
[2026-01-28 14:21:48] info: [auth:1j2cap7] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [auth:oqp2vv] Starting auth for GET /api/dashboard/overview
[2026-01-28 14:21:48] info: [auth:oqp2vv] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:oqp2vv] Token from header: true
[2026-01-28 14:21:48] info: [auth:oqp2vv] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [auth:gdl2nl] Starting auth for GET /api/health/protected
[2026-01-28 14:21:48] info: [auth:gdl2nl] Token from cookie: false
[2026-01-28 14:21:48] info: [auth:gdl2nl] Token from header: true
[2026-01-28 14:21:48] info: [auth:gdl2nl] Authenticated user 4f77c184-d00d-44ef-803e-775a1678eafd
[2026-01-28 14:21:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:48] info: [EmailVerification] Created verification token
[2026-01-28 14:21:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:48] info: [authController.register] Verification email sent
[2026-01-28 14:21:48] info: [auth:pseaiq] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:48] info: [auth:pseaiq] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:pseaiq] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:21:48] info: [auth:b7qteb] Starting auth for GET /api/horses
[2026-01-28 14:21:48] info: [auth:b7qteb] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:b7qteb] Access token is required for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 14:21:48] info: [auth:lva9r] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:21:48] info: [auth:lva9r] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:lva9r] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 14:21:48] info: [auth:57d3ps] Starting auth for GET /api/training/status
[2026-01-28 14:21:48] info: [auth:57d3ps] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:57d3ps] Access token is required for GET /api/training/status from ::ffff:127.0.0.1
[2026-01-28 14:21:48] info: [auth:qosmha] Starting auth for GET /api/grooms/my-grooms
[2026-01-28 14:21:48] info: [auth:qosmha] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:qosmha] Access token is required for GET /api/grooms/my-grooms from ::ffff:127.0.0.1
[2026-01-28 14:21:48] info: [auth:tt0ib] Starting auth for GET /api/traits/my-discoveries
[2026-01-28 14:21:48] info: [auth:tt0ib] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:tt0ib] Access token is required for GET /api/traits/my-discoveries from ::ffff:127.0.0.1
[2026-01-28 14:21:48] info: [auth:rl4usj] Starting auth for GET /api/dashboard/overview
[2026-01-28 14:21:48] info: [auth:rl4usj] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:rl4usj] Access token is required for GET /api/dashboard/overview from ::ffff:127.0.0.1
[2026-01-28 14:21:48] info: [auth:1gh1tn] Starting auth for GET /api/health/protected
[2026-01-28 14:21:48] info: [auth:1gh1tn] Token from cookie: false
[2026-01-28 14:21:48] warn: [auth:1gh1tn] Access token is required for GET /api/health/protected from ::ffff:127.0.0.1
[2026-01-28 14:21:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:49] info: [EmailVerification] Created verification token
[2026-01-28 14:21:49] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:49] info: [authController.register] Verification email sent
[2026-01-28 14:21:49] info: [auth:izyyh] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:49] info: [auth:izyyh] Token from cookie: false
[2026-01-28 14:21:49] info: [auth:izyyh] Token from header: true
[2026-01-28 14:21:49] warn: [auth:izyyh] Invalid or expired token for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:21:49] info: [auth:dmg2el] Starting auth for GET /api/horses
[2026-01-28 14:21:49] info: [auth:dmg2el] Token from cookie: false
[2026-01-28 14:21:49] info: [auth:dmg2el] Token from header: true
[2026-01-28 14:21:49] warn: [auth:dmg2el] Invalid or expired token for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 14:21:49] info: [auth:kcmvxr] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:21:49] info: [auth:kcmvxr] Token from cookie: false
[2026-01-28 14:21:49] info: [auth:kcmvxr] Token from header: true
[2026-01-28 14:21:49] warn: [auth:kcmvxr] Invalid or expired token for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 14:21:49] info: [auth:vyrmd] Starting auth for GET /api/training/status
[2026-01-28 14:21:49] info: [auth:vyrmd] Token from cookie: false
[2026-01-28 14:21:49] info: [auth:vyrmd] Token from header: true
[2026-01-28 14:21:49] warn: [auth:vyrmd] Invalid or expired token for GET /api/training/status from ::ffff:127.0.0.1
[2026-01-28 14:21:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:49] info: [EmailVerification] Created verification token
[2026-01-28 14:21:49] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:49] info: [authController.register] Verification email sent
[2026-01-28 14:21:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:21:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:21:50] info: [auth:k8c12n] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:50] info: [auth:k8c12n] Token from cookie: false
[2026-01-28 14:21:50] info: [auth:k8c12n] Token from header: true
[2026-01-28 14:21:50] info: [auth:k8c12n] Authenticated user 153f0ff8-bf04-4d3c-9d82-d7f2a1dbae40
[2026-01-28 14:21:50] info: [auth:0xfz4d] Starting auth for GET /api/horses
[2026-01-28 14:21:50] info: [auth:0xfz4d] Token from cookie: false
[2026-01-28 14:21:50] info: [auth:0xfz4d] Token from header: true
[2026-01-28 14:21:50] info: [auth:0xfz4d] Authenticated user 153f0ff8-bf04-4d3c-9d82-d7f2a1dbae40
[2026-01-28 14:21:50] info: [auth:0lzo0o] Starting auth for GET /api/dashboard/overview
[2026-01-28 14:21:50] info: [auth:0lzo0o] Token from cookie: false
[2026-01-28 14:21:50] info: [auth:0lzo0o] Token from header: true
[2026-01-28 14:21:50] info: [auth:0lzo0o] Authenticated user 153f0ff8-bf04-4d3c-9d82-d7f2a1dbae40
[2026-01-28 14:21:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:50] info: [EmailVerification] Created verification token
[2026-01-28 14:21:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:50] info: [authController.register] Verification email sent
[2026-01-28 14:21:50] info: [auth:jr7e3e] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:50] info: [auth:jr7e3e] Token from cookie: false
[2026-01-28 14:21:50] warn: [auth:jr7e3e] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:21:50] info: [auth:1zjad8] Starting auth for GET /api/horses
[2026-01-28 14:21:50] info: [auth:1zjad8] Token from cookie: false
[2026-01-28 14:21:50] warn: [auth:1zjad8] Access token is required for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 14:21:50] info: [auth:sbhdai] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:21:50] info: [auth:sbhdai] Token from cookie: false
[2026-01-28 14:21:50] warn: [auth:sbhdai] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 14:21:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:51] info: [EmailVerification] Created verification token
[2026-01-28 14:21:51] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:51] info: [authController.register] Verification email sent
[2026-01-28 14:21:51] info: [auth:u2ev2g] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:51] info: [auth:u2ev2g] Token from cookie: false
[2026-01-28 14:21:51] warn: [auth:u2ev2g] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:21:51] info: [auth:yazvob] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:51] info: [auth:yazvob] Token from cookie: false
[2026-01-28 14:21:51] warn: [auth:yazvob] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:21:51] info: [auth:jufd7g] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:51] info: [auth:jufd7g] Token from cookie: false
[2026-01-28 14:21:51] warn: [auth:jufd7g] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:21:51] info: [auth:k82l6i] Starting auth for GET /api/auth/profile
[2026-01-28 14:21:51] info: [auth:k82l6i] Token from cookie: false
[2026-01-28 14:21:51] warn: [auth:k82l6i] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
PASS tests/integration/auth-system-integration.test.mjs
  üîê Authentication System Integration Tests
    üåê Cross-System Authentication Validation
      ‚àö should authenticate successfully across all protected endpoints (521 ms)
      ‚àö should reject access to all protected endpoints without token (406 ms)
      ‚àö should reject access with invalid token across all systems (358 ms)
    üîÑ Token Refresh Integration
      ‚àö should refresh token and maintain access across systems (1375 ms)
    üõ°Ô∏è Security Validation
      ‚àö should maintain consistent error responses across systems (345 ms)
      ‚àö should handle malformed authorization headers consistently (355 ms)

[2026-01-28 14:21:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:51] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:51] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:51] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:51] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:51] warn: [RedisCircuitBreaker] Operation failed: get
[2026-01-28 14:21:51] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:54] warn: [RedisCircuitBreaker] Operation timeout: get
[2026-01-28 14:21:54] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:54] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:54] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:55] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:55] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:21:55] info: [RedisCircuitBreaker] Circuit breaker manually reset
PASS __tests__/integration/redis-circuit-breaker.test.mjs
  Redis Circuit Breaker Integration Tests
    Circuit Breaker Initialization
      ‚àö should create circuit breaker with default configuration (10 ms)
      ‚àö should create circuit breaker with custom configuration (12 ms)
      ‚àö should wrap all Redis operations with circuit breaker (6 ms)
    Circuit State Transitions
      ‚àö should start in CLOSED state (6 ms)
      ‚óã skipped should open circuit after 50% error rate over 10 requests (default threshold)
      ‚óã skipped should enter HALF_OPEN state after reset timeout
      ‚óã skipped should close circuit after successful recovery in HALF_OPEN state
    Redis Failure Scenarios
      ‚àö should handle Redis connection refused errors (14 ms)
      ‚àö should handle Redis operation timeout (> 3s) (3017 ms)
      ‚óã skipped should handle intermittent Redis failures
      ‚óã skipped should handle multiple operation types failing simultaneously
    Fallback Strategies
      ‚àö should allow operations to fail when circuit is CLOSED (11 ms)
      ‚óã skipped should reject operations immediately when circuit is OPEN
      ‚óã skipped should track fallback count when circuit is open
    Concurrent Request Handling
      ‚àö should handle concurrent successful requests (315 ms)
      ‚óã skipped should handle concurrent requests during circuit opening
    Metrics and Health Monitoring
      ‚àö should accurately track success count (385 ms)
      ‚àö should return correct health status based on circuit state (7 ms)
      ‚óã skipped should accurately track failure count
      ‚óã skipped should calculate error rate correctly
      ‚óã skipped should return degraded health status when circuit is OPEN
    Manual Circuit Control
      ‚àö should access raw Redis client for unwrapped operations (5 ms)
      ‚óã skipped should allow manual circuit reset
    Error Filtering
      ‚àö should filter ECONNREFUSED errors in test environment (1 ms)
      ‚àö should count ECONNREFUSED errors in production environment (1 ms)

[2026-01-28 14:21:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:55] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:21:56] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:21:56] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:21:56] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:21:56] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:21:56] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:21:56] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:21:56] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:21:56] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:21:56] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:21:56] info: [POST] /api/auth/register
[2026-01-28 14:21:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1560MB
[2026-01-28 14:21:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:21:56] info: [EmailVerification] Created verification token
[2026-01-28 14:21:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:21:56] info: [authController.register] Verification email sent
[2026-01-28 14:21:56] info: [POST] /api/auth/register - 201
[2026-01-28 14:21:56] info: [GET] /api/user-docs
[2026-01-28 14:21:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1565MB
[2026-01-28 14:21:56] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:21:56] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:21:56] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:21:56] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:21:56] info: [GET] /api/user-docs - 200
[2026-01-28 14:21:56] info: [GET] /api-docs/swagger.json
[2026-01-28 14:21:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB
[2026-01-28 14:21:56] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 14:21:56] info: [GET] /api/memory/status
[2026-01-28 14:21:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 14:21:56] info: [auth:ws3a1f] Starting auth for GET /memory/status
[2026-01-28 14:21:56] info: [auth:ws3a1f] Token from cookie: false
[2026-01-28 14:21:56] info: [auth:ws3a1f] Token from header: true
[2026-01-28 14:21:56] info: [auth:ws3a1f] Authenticated user 3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710
[2026-01-28 14:21:57] info: [auth:p94mgl] Starting auth for GET /status
[2026-01-28 14:21:57] info: [auth:p94mgl] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:p94mgl] Token from header: true
[2026-01-28 14:21:57] info: [auth:p94mgl] Authenticated user 3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710
[2026-01-28 14:21:57] info: [MemoryManagement] Getting memory status
[2026-01-28 14:21:57] info: [GET] /api/memory/status - 200
[2026-01-28 14:21:57] info: [GET] /api/users/3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710/progress
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1568MB
[2026-01-28 14:21:57] info: [auth:jiiqq] Starting auth for GET /users/3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710/progress
[2026-01-28 14:21:57] info: [auth:jiiqq] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:jiiqq] Token from header: true
[2026-01-28 14:21:57] info: [auth:jiiqq] Authenticated user 3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710
[2026-01-28 14:21:57] info: [auth:lfokco] Starting auth for GET /3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710/progress
[2026-01-28 14:21:57] info: [auth:lfokco] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:lfokco] Token from header: true
[2026-01-28 14:21:57] info: [auth:lfokco] Authenticated user 3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710
[2026-01-28 14:21:57] info: [userRoutes] Self-access validated: user 3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710 accessing own data
[2026-01-28 14:21:57] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710
[2026-01-28 14:21:57] info: [GET] /api/users/3fd5d8a7-ad00-44c0-8f46-41ebc7b8b710/progress - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1571MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse - 200
[2026-01-28 14:21:57] info: [GET] /health
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 14:21:57] info: [GET] /health - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/health
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1560MB
[2026-01-28 14:21:57] info: [GET] /api/user-docs/health - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/analytics
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:21:57] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 14:21:57] info: [POST] /api/grooms/interact
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 14:21:57] info: [auth:hvfuzv] Starting auth for POST /grooms/interact
[2026-01-28 14:21:57] info: [auth:hvfuzv] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:hvfuzv] Token from header: true
[2026-01-28 14:21:57] info: [auth:hvfuzv] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [auth:d1p3cb] Starting auth for POST /interact
[2026-01-28 14:21:57] info: [auth:d1p3cb] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:d1p3cb] Token from header: true
[2026-01-28 14:21:57] info: [auth:d1p3cb] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [ownership] Found owned foal 147313 for user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [ownership] Found owned groom 73723 for user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [groomController.recordInteraction] Recording early_touch interaction for foal 147313
[2026-01-28 14:21:57] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: calm
[2026-01-28 14:21:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for calm: none
[2026-01-28 14:21:57] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -4 stress
[2026-01-28 14:21:57] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73723 for interaction_completed
[2026-01-28 14:21:57] info: [groomProgressionService.awardGroomXP] Groom 73723 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:21:57] info: [groomController.recordInteraction] Awarded 2 XP to groom 73723 for interaction
[2026-01-28 14:21:57] info: [POST] /api/grooms/interact - 200
[2026-01-28 14:21:57] info: [GET] /api/grooms/user/0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1568MB
[2026-01-28 14:21:57] info: [auth:3l9z06] Starting auth for GET /grooms/user/0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [auth:3l9z06] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:3l9z06] Token from header: true
[2026-01-28 14:21:57] info: [auth:3l9z06] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [auth:runouj] Starting auth for GET /user/0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [auth:runouj] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:runouj] Token from header: true
[2026-01-28 14:21:57] info: [auth:runouj] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [groomController.getUserGrooms] Getting grooms for user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/grooms/user/0966167e-80ef-40e4-8fc6-a254e0d6ba54 - 200
[2026-01-28 14:21:57] info: [GET] /api-docs/swagger.json
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 14:21:57] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1562MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:21:57] info: [GET] /api/user-docs - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1573MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/analytics
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:21:57] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1573MB
[2026-01-28 14:21:57] info: [auth:pnuk5d] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:pnuk5d] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:pnuk5d] Token from header: true
[2026-01-28 14:21:57] info: [auth:pnuk5d] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:21:57] info: [auth:ihfjy] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:ihfjy] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:ihfjy] Token from header: true
[2026-01-28 14:21:57] info: [auth:ihfjy] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 14:21:57] info: [auth:5tgvll] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:5tgvll] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:5tgvll] Token from header: true
[2026-01-28 14:21:57] info: [auth:5tgvll] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1574MB
[2026-01-28 14:21:57] info: [auth:rmae7g] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:rmae7g] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:rmae7g] Token from header: true
[2026-01-28 14:21:57] info: [auth:rmae7g] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:21:57] info: [auth:373rca] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:373rca] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:373rca] Token from header: true
[2026-01-28 14:21:57] info: [auth:373rca] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 14:21:57] info: [auth:u39jqa] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:u39jqa] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:u39jqa] Token from header: true
[2026-01-28 14:21:57] info: [auth:u39jqa] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1574MB
[2026-01-28 14:21:57] info: [auth:jmvi5] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:jmvi5] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:jmvi5] Token from header: true
[2026-01-28 14:21:57] info: [auth:jmvi5] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:21:57] info: [auth:ccml8q] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:ccml8q] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:ccml8q] Token from header: true
[2026-01-28 14:21:57] info: [auth:ccml8q] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 14:21:57] info: [auth:kxvsgm] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:kxvsgm] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:kxvsgm] Token from header: true
[2026-01-28 14:21:57] info: [auth:kxvsgm] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1575MB
[2026-01-28 14:21:57] info: [auth:scxzz] Starting auth for GET /horses
[2026-01-28 14:21:57] info: [auth:scxzz] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:scxzz] Token from header: true
[2026-01-28 14:21:57] info: [auth:scxzz] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/horses - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1572MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1563MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1568MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1574MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1575MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1571MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1577MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1573MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1574MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1565MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1576MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 14:21:57] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:21:57] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:21:57] info: [POST] /api/horses
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:21:57] info: [auth:k74avt] Starting auth for POST /horses
[2026-01-28 14:21:57] info: [auth:k74avt] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:k74avt] Token from header: true
[2026-01-28 14:21:57] info: [auth:k74avt] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [auth:kgys2k] Starting auth for POST /
[2026-01-28 14:21:57] info: [auth:kgys2k] Token from cookie: false
[2026-01-28 14:21:57] info: [auth:kgys2k] Token from header: true
[2026-01-28 14:21:57] info: [auth:kgys2k] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:57] info: [horseModel.createHorse] Successfully created horse: Consistency Test Horse (ID: 147314)
[2026-01-28 14:21:57] info: [horseRoutes] Created new horse: Consistency Test Horse (ID: 147314)
[2026-01-28 14:21:57] info: [POST] /api/horses - 201
[2026-01-28 14:21:57] info: [GET] /api/users/0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress
[2026-01-28 14:21:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1574MB
[2026-01-28 14:21:58] info: [auth:vvi40q] Starting auth for GET /users/0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress
[2026-01-28 14:21:58] info: [auth:vvi40q] Token from cookie: false
[2026-01-28 14:21:58] info: [auth:vvi40q] Token from header: true
[2026-01-28 14:21:58] info: [auth:vvi40q] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:58] info: [auth:ac3kjn] Starting auth for GET /0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress
[2026-01-28 14:21:58] info: [auth:ac3kjn] Token from cookie: false
[2026-01-28 14:21:58] info: [auth:ac3kjn] Token from header: true
[2026-01-28 14:21:58] info: [auth:ac3kjn] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:58] info: [userRoutes] Self-access validated: user 0966167e-80ef-40e4-8fc6-a254e0d6ba54 accessing own data
[2026-01-28 14:21:58] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:58] info: [GET] /api/users/0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress - 200
[2026-01-28 14:21:59] info: [POST] /api/training/train
[2026-01-28 14:21:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:21:59] info: [auth:inuwy4] Starting auth for POST /training/train
[2026-01-28 14:21:59] info: [auth:inuwy4] Token from cookie: false
[2026-01-28 14:21:59] info: [auth:inuwy4] Token from header: true
[2026-01-28 14:21:59] info: [auth:inuwy4] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:59] info: [ownership] Found owned horse 147315 for user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:59] info: [trainingController.trainRouteHandler] Training request for horse 147315 in Dressage
[2026-01-28 14:21:59] info: [trainingController.trainHorse] Attempting to train horse 147315 in Dressage
[2026-01-28 14:21:59] info: [trainingController.canTrain] Checking training eligibility for horse 147315 in Dressage
[2026-01-28 14:21:59] info: [trainingModel.getHorseAge] Getting age for horse 147315
[2026-01-28 14:21:59] info: [trainingModel.getHorseAge] Horse 147315 is 7 years old
[2026-01-28 14:21:59] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147315 across all disciplines
[2026-01-28 14:21:59] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147315
[2026-01-28 14:21:59] info: [trainingController.canTrain] Horse 147315 is eligible to train in Dressage
[2026-01-28 14:21:59] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147315)
[2026-01-28 14:21:59] info: [trainingController.trainHorse] Horse 147315 has traits: 
[2026-01-28 14:21:59] info: [trainingModel.logTrainingSession] Logging training session for horse 147315 in Dressage
[2026-01-28 14:21:59] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9018
[2026-01-28 14:21:59] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147315 by +5
[2026-01-28 14:21:59] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147315 by +5
[2026-01-28 14:21:59] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147315: 0 -> 5
[2026-01-28 14:21:59] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147315
[2026-01-28 14:21:59] info: [xpLogModel.logXpEvent] Logging XP event: User 0966167e-80ef-40e4-8fc6-a254e0d6ba54, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:21:59] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4456, User 0966167e-80ef-40e4-8fc6-a254e0d6ba54, Amount: 5
[2026-01-28 14:21:59] info: [trainingController.trainHorse] Awarded 5 XP to user 0966167e-80ef-40e4-8fc6-a254e0d6ba54 for training
[2026-01-28 14:21:59] info: [trainingController.trainHorse] Successfully trained horse 147315 in Dressage (Log ID: 9018, Score +5)
[2026-01-28 14:21:59] info: [POST] /api/training/train - 200
[2026-01-28 14:21:59] info: [GET] /api/users/0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress
[2026-01-28 14:21:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:21:59] info: [auth:twe60f] Starting auth for GET /users/0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress
[2026-01-28 14:21:59] info: [auth:twe60f] Token from cookie: false
[2026-01-28 14:21:59] info: [auth:twe60f] Token from header: true
[2026-01-28 14:21:59] info: [auth:twe60f] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:59] info: [auth:hsy5vq] Starting auth for GET /0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress
[2026-01-28 14:21:59] info: [auth:hsy5vq] Token from cookie: false
[2026-01-28 14:21:59] info: [auth:hsy5vq] Token from header: true
[2026-01-28 14:21:59] info: [auth:hsy5vq] Authenticated user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:59] info: [userRoutes] Self-access validated: user 0966167e-80ef-40e4-8fc6-a254e0d6ba54 accessing own data
[2026-01-28 14:21:59] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 0966167e-80ef-40e4-8fc6-a254e0d6ba54
[2026-01-28 14:21:59] info: [GET] /api/users/0966167e-80ef-40e4-8fc6-a254e0d6ba54/progress - 200
PASS __tests__/integration/systemWideIntegration.test.mjs
  System-Wide Integration Tests
    Complete User Journey: Registration to Competition
      ‚àö End-to-end user workflow: registration ‚Üí horse purchase ‚Üí training ‚Üí competition (487 ms)
    System Integration Validation
      ‚àö Documentation system integration (53 ms)
      ‚àö Groom career progression and talent system integration (204 ms)
      ‚àö Documentation system integration with API endpoints (69 ms)
    Performance and Load Testing
      ‚àö API response times under load (261 ms)
      ‚àö Memory usage monitoring during operations (282 ms)
    Data Consistency Validation
      ‚àö Database transaction integrity across systems (56 ms)
      ‚àö User progress tracking accuracy (1246 ms)

[2026-01-28 14:21:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:21:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:21:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:21:59] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:00] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:00] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:00] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:00] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:00] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:00] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:00] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:00] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:00] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1406MB
[2026-01-28 14:22:01] info: [auth:2fj9q] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:01] info: [auth:2fj9q] Token from cookie: false
[2026-01-28 14:22:01] warn: [auth:2fj9q] Access token is required for GET /groom-marketplace from ::ffff:127.0.0.1
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace - 401
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1406MB
[2026-01-28 14:22:01] info: [auth:n0dug8] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:22:01] info: [auth:n0dug8] Token from cookie: false
[2026-01-28 14:22:01] warn: [auth:n0dug8] Access token is required for POST /groom-marketplace/refresh from ::ffff:127.0.0.1
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh - 401
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1404MB
[2026-01-28 14:22:01] info: [auth:gbyh9t] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:22:01] info: [auth:gbyh9t] Token from cookie: false
[2026-01-28 14:22:01] warn: [auth:gbyh9t] Access token is required for POST /groom-marketplace/hire from ::ffff:127.0.0.1
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/hire - 401
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace/stats
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1403MB
[2026-01-28 14:22:01] info: [auth:f8kfei] Starting auth for GET /groom-marketplace/stats
[2026-01-28 14:22:01] info: [auth:f8kfei] Token from cookie: false
[2026-01-28 14:22:01] warn: [auth:f8kfei] Access token is required for GET /groom-marketplace/stats from ::ffff:127.0.0.1
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace/stats - 401
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:22:01] info: [auth:blshz] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:01] info: [auth:blshz] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:blshz] Token from header: true
[2026-01-28 14:22:01] info: [auth:blshz] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [auth:wzlix9] Starting auth for GET /
[2026-01-28 14:22:01] info: [auth:wzlix9] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:wzlix9] Token from header: true
[2026-01-28 14:22:01] info: [auth:wzlix9] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [groomMarketplace] Generated new marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49 with 12 grooms
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1403MB
[2026-01-28 14:22:01] info: [auth:g7yon7r] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:01] info: [auth:g7yon7r] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:g7yon7r] Token from header: true
[2026-01-28 14:22:01] info: [auth:g7yon7r] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [auth:v1b6z] Starting auth for GET /
[2026-01-28 14:22:01] info: [auth:v1b6z] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:v1b6z] Token from header: true
[2026-01-28 14:22:01] info: [auth:v1b6z] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1398MB
[2026-01-28 14:22:01] info: [auth:fo1dzi] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:01] info: [auth:fo1dzi] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:fo1dzi] Token from header: true
[2026-01-28 14:22:01] info: [auth:fo1dzi] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [auth:dgcdk8] Starting auth for GET /
[2026-01-28 14:22:01] info: [auth:dgcdk8] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:dgcdk8] Token from header: true
[2026-01-28 14:22:01] info: [auth:dgcdk8] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1408MB
[2026-01-28 14:22:01] info: [auth:a1956g] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:01] info: [auth:a1956g] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:a1956g] Token from header: true
[2026-01-28 14:22:01] info: [auth:a1956g] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [auth:d9qlj] Starting auth for GET /
[2026-01-28 14:22:01] info: [auth:d9qlj] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:d9qlj] Token from header: true
[2026-01-28 14:22:01] info: [auth:d9qlj] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1404MB
[2026-01-28 14:22:01] info: [auth:bo0i0b] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:22:01] info: [auth:bo0i0b] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:bo0i0b] Token from header: true
[2026-01-28 14:22:01] info: [auth:bo0i0b] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [auth:8k2lmm] Starting auth for POST /refresh
[2026-01-28 14:22:01] info: [auth:8k2lmm] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:8k2lmm] Token from header: true
[2026-01-28 14:22:01] info: [auth:8k2lmm] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [groomMarketplace] Refreshing marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49, force: false
[2026-01-28 14:22:01] info: [groomMarketplace] Refreshed marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49 with 12 new grooms
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh - 200
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1404MB
[2026-01-28 14:22:01] info: [auth:oyf7dc] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:22:01] info: [auth:oyf7dc] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:oyf7dc] Token from header: true
[2026-01-28 14:22:01] info: [auth:oyf7dc] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh - 403
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:22:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1405MB
[2026-01-28 14:22:01] info: [auth:m64lnf] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:22:01] info: [auth:m64lnf] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:m64lnf] Token from header: true
[2026-01-28 14:22:01] info: [auth:m64lnf] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [auth:qh5vx9] Starting auth for POST /refresh
[2026-01-28 14:22:01] info: [auth:qh5vx9] Token from cookie: false
[2026-01-28 14:22:01] info: [auth:qh5vx9] Token from header: true
[2026-01-28 14:22:01] info: [auth:qh5vx9] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:01] info: [groomMarketplace] Refreshing marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49, force: false
[2026-01-28 14:22:01] info: [POST] /api/groom-marketplace/refresh - 400
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:22:02] info: [auth:5lhrxx] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:22:02] info: [auth:5lhrxx] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:5lhrxx] Token from header: true
[2026-01-28 14:22:02] info: [auth:5lhrxx] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:b6q6k5] Starting auth for POST /refresh
[2026-01-28 14:22:02] info: [auth:b6q6k5] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:b6q6k5] Token from header: true
[2026-01-28 14:22:02] info: [auth:b6q6k5] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Refreshing marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49, force: false
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/refresh - 400
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1411MB
[2026-01-28 14:22:02] info: [auth:b251of] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:22:02] info: [auth:b251of] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:b251of] Token from header: true
[2026-01-28 14:22:02] info: [auth:b251of] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:lxmcvc] Starting auth for POST /refresh
[2026-01-28 14:22:02] info: [auth:lxmcvc] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:lxmcvc] Token from header: true
[2026-01-28 14:22:02] info: [auth:lxmcvc] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Refreshing marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49, force: true
[2026-01-28 14:22:02] info: [groomMarketplace] Charged user 75414e08-83dd-4f1c-a698-d66dbb5d0c49 $100 for premium refresh
[2026-01-28 14:22:02] info: [groomMarketplace] Refreshed marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49 with 12 new grooms
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/refresh - 200
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1406MB
[2026-01-28 14:22:02] info: [auth:fb9int] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:fb9int] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:fb9int] Token from header: true
[2026-01-28 14:22:02] info: [auth:fb9int] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:5hwu3j] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:5hwu3j] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:5hwu3j] Token from header: true
[2026-01-28 14:22:02] info: [auth:5hwu3j] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:22:02] info: [auth:2f31v6] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:22:02] info: [auth:2f31v6] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:2f31v6] Token from header: true
[2026-01-28 14:22:02] info: [auth:2f31v6] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:cuzu1l] Starting auth for POST /hire
[2026-01-28 14:22:02] info: [auth:cuzu1l] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:cuzu1l] Token from header: true
[2026-01-28 14:22:02] info: [auth:cuzu1l] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] User 75414e08-83dd-4f1c-a698-d66dbb5d0c49 attempting to hire groom mkt_1cc3e62e-70c7-4088-8471-8afecca4c4fb
[2026-01-28 14:22:02] info: [groomMarketplace] User 75414e08-83dd-4f1c-a698-d66dbb5d0c49 hired groom 73724 for $462
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire - 201
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1411MB
[2026-01-28 14:22:02] info: [auth:m5nonb] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:m5nonb] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:m5nonb] Token from header: true
[2026-01-28 14:22:02] info: [auth:m5nonb] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:dqms5e] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:dqms5e] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:dqms5e] Token from header: true
[2026-01-28 14:22:02] info: [auth:dqms5e] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1405MB
[2026-01-28 14:22:02] info: [auth:dbxcq5] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:dbxcq5] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:dbxcq5] Token from header: true
[2026-01-28 14:22:02] info: [auth:dbxcq5] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:29jtee] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:29jtee] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:29jtee] Token from header: true
[2026-01-28 14:22:02] info: [auth:29jtee] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:22:02] info: [auth:5aoto9] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:22:02] info: [auth:5aoto9] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:5aoto9] Token from header: true
[2026-01-28 14:22:02] info: [auth:5aoto9] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:rql5j6] Starting auth for POST /hire
[2026-01-28 14:22:02] info: [auth:rql5j6] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:rql5j6] Token from header: true
[2026-01-28 14:22:02] info: [auth:rql5j6] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] User 75414e08-83dd-4f1c-a698-d66dbb5d0c49 attempting to hire groom mkt_6edf0be9-3ae2-4465-939f-61a43169186f
[2026-01-28 14:22:02] info: [groomMarketplace] User 75414e08-83dd-4f1c-a698-d66dbb5d0c49 hired groom 73725 for $175
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire - 201
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1410MB
[2026-01-28 14:22:02] info: [auth:0eb7hg] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:0eb7hg] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:0eb7hg] Token from header: true
[2026-01-28 14:22:02] info: [auth:0eb7hg] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:vn51c] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:vn51c] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:vn51c] Token from header: true
[2026-01-28 14:22:02] info: [auth:vn51c] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1406MB
[2026-01-28 14:22:02] info: [auth:v1grwa] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:v1grwa] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:v1grwa] Token from header: true
[2026-01-28 14:22:02] info: [auth:v1grwa] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:a8kcc] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:a8kcc] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:a8kcc] Token from header: true
[2026-01-28 14:22:02] info: [auth:a8kcc] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1404MB
[2026-01-28 14:22:02] info: [auth:bp8mwc] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:bp8mwc] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:bp8mwc] Token from header: true
[2026-01-28 14:22:02] info: [auth:bp8mwc] Authenticated user 0b72ebbc-b111-45f5-88fa-9040d9659bab
[2026-01-28 14:22:02] info: [auth:uz17rti] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:uz17rti] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:uz17rti] Token from header: true
[2026-01-28 14:22:02] info: [auth:uz17rti] Authenticated user 0b72ebbc-b111-45f5-88fa-9040d9659bab
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 0b72ebbc-b111-45f5-88fa-9040d9659bab
[2026-01-28 14:22:02] info: [groomMarketplace] Generated new marketplace for user 0b72ebbc-b111-45f5-88fa-9040d9659bab with 12 grooms
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1403MB
[2026-01-28 14:22:02] info: [auth:20z4ja] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:22:02] info: [auth:20z4ja] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:20z4ja] Token from header: true
[2026-01-28 14:22:02] info: [auth:20z4ja] Authenticated user 0b72ebbc-b111-45f5-88fa-9040d9659bab
[2026-01-28 14:22:02] info: [auth:afevmf] Starting auth for POST /hire
[2026-01-28 14:22:02] info: [auth:afevmf] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:afevmf] Token from header: true
[2026-01-28 14:22:02] info: [auth:afevmf] Authenticated user 0b72ebbc-b111-45f5-88fa-9040d9659bab
[2026-01-28 14:22:02] info: [groomMarketplace] User 0b72ebbc-b111-45f5-88fa-9040d9659bab attempting to hire groom mkt_d781655b-19ba-4a12-bd34-000857df31c0
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire - 400
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1411MB
[2026-01-28 14:22:02] info: [auth:s84wu] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:s84wu] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:s84wu] Token from header: true
[2026-01-28 14:22:02] info: [auth:s84wu] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:6e691s] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:6e691s] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:6e691s] Token from header: true
[2026-01-28 14:22:02] info: [auth:6e691s] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Generated new marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49 with 12 grooms
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1408MB
[2026-01-28 14:22:02] info: [auth:e537u] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:22:02] info: [auth:e537u] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:e537u] Token from header: true
[2026-01-28 14:22:02] info: [auth:e537u] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:7e0vlm] Starting auth for POST /hire
[2026-01-28 14:22:02] info: [auth:7e0vlm] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:7e0vlm] Token from header: true
[2026-01-28 14:22:02] info: [auth:7e0vlm] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] User 75414e08-83dd-4f1c-a698-d66dbb5d0c49 attempting to hire groom non-existent-id
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire - 404
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:22:02] info: [auth:enyou] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:enyou] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:enyou] Token from header: true
[2026-01-28 14:22:02] info: [auth:enyou] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:28de9] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:28de9] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:28de9] Token from header: true
[2026-01-28 14:22:02] info: [auth:28de9] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1412MB
[2026-01-28 14:22:02] info: [auth:d5s35q] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:22:02] info: [auth:d5s35q] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:d5s35q] Token from header: true
[2026-01-28 14:22:02] info: [auth:d5s35q] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:kboh85] Starting auth for POST /hire
[2026-01-28 14:22:02] info: [auth:kboh85] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:kboh85] Token from header: true
[2026-01-28 14:22:02] info: [auth:kboh85] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [POST] /api/groom-marketplace/hire - 400
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1405MB
[2026-01-28 14:22:02] info: [auth:jjwnd9] Starting auth for GET /groom-marketplace
[2026-01-28 14:22:02] info: [auth:jjwnd9] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:jjwnd9] Token from header: true
[2026-01-28 14:22:02] info: [auth:jjwnd9] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:9q123u] Starting auth for GET /
[2026-01-28 14:22:02] info: [auth:9q123u] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:9q123u] Token from header: true
[2026-01-28 14:22:02] info: [auth:9q123u] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [groomMarketplace] Getting marketplace for user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace/stats
[2026-01-28 14:22:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1414MB
[2026-01-28 14:22:02] info: [auth:dhvydc] Starting auth for GET /groom-marketplace/stats
[2026-01-28 14:22:02] info: [auth:dhvydc] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:dhvydc] Token from header: true
[2026-01-28 14:22:02] info: [auth:dhvydc] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [auth:7bt3p] Starting auth for GET /stats
[2026-01-28 14:22:02] info: [auth:7bt3p] Token from cookie: false
[2026-01-28 14:22:02] info: [auth:7bt3p] Token from header: true
[2026-01-28 14:22:02] info: [auth:7bt3p] Authenticated user 75414e08-83dd-4f1c-a698-d66dbb5d0c49
[2026-01-28 14:22:02] info: [GET] /api/groom-marketplace/stats - 200
[2026-01-28 14:22:03] info: [GET] /api/groom-marketplace/stats
[2026-01-28 14:22:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1409MB
[2026-01-28 14:22:03] info: [auth:ticq5y] Starting auth for GET /groom-marketplace/stats
[2026-01-28 14:22:03] info: [auth:ticq5y] Token from cookie: false
[2026-01-28 14:22:03] info: [auth:ticq5y] Token from header: true
[2026-01-28 14:22:03] info: [auth:ticq5y] Authenticated user 0e18aae1-e5bd-474e-b210-99febd55b369
[2026-01-28 14:22:03] info: [auth:4r131r] Starting auth for GET /stats
[2026-01-28 14:22:03] info: [auth:4r131r] Token from cookie: false
[2026-01-28 14:22:03] info: [auth:4r131r] Token from header: true
[2026-01-28 14:22:03] info: [auth:4r131r] Authenticated user 0e18aae1-e5bd-474e-b210-99febd55b369
[2026-01-28 14:22:03] info: [groomMarketplace.getStats] Returning empty stats: {"totalGrooms":0,"lastRefresh":"never","refreshCount":0,"qualityDistribution":{},"specialtyDistribution":{}}
[2026-01-28 14:22:03] info: [GET] /api/groom-marketplace/stats - 200
PASS tests/integration/groomMarketplaceAPI.test.mjs
  üè™ INTEGRATION: Groom Marketplace API
    Authentication
      ‚àö should require authentication for all marketplace endpoints (103 ms)
    GET /api/groom-marketplace
      ‚àö should get marketplace with available grooms (47 ms)
      ‚àö should return same marketplace on subsequent calls (75 ms)
    POST /api/groom-marketplace/refresh
      ‚àö should refresh marketplace when free refresh available (589 ms)
      ‚àö should require payment for premium refresh when not enough time passed (61 ms)
      ‚àö should allow premium refresh with force=true (78 ms)
    POST /api/groom-marketplace/hire
      ‚àö should hire groom from marketplace successfully (78 ms)
      ‚àö should remove hired groom from marketplace (148 ms)
      ‚àö should reject hiring with insufficient funds (393 ms)
      ‚àö should reject hiring non-existent groom (75 ms)
      ‚àö should require marketplaceId (76 ms)
    GET /api/groom-marketplace/stats
      ‚àö should return marketplace statistics (72 ms)
      ‚àö should return empty stats for user with no marketplace (310 ms)

[2026-01-28 14:22:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:04] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:04] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:04] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:04] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:04] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:04] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:04] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:04] info: [POST] /api/auth/register
[2026-01-28 14:22:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1466MB
[2026-01-28 14:22:04] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:04] info: [EmailVerification] Created verification token
[2026-01-28 14:22:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:22:04] info: [authController.register] Verification email sent
[2026-01-28 14:22:04] info: [POST] /api/auth/register - 201
[2026-01-28 14:22:04] info: [POST] /api/auth/register
[2026-01-28 14:22:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1473MB
[2026-01-28 14:22:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:05] info: [EmailVerification] Created verification token
[2026-01-28 14:22:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:22:05] info: [authController.register] Verification email sent
[2026-01-28 14:22:05] info: [POST] /api/auth/register - 201
[2026-01-28 14:22:05] info: [POST] /api/auth/login
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB
[2026-01-28 14:22:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:05] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:05] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:05] info: [POST] /api/auth/login
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1472MB
[2026-01-28 14:22:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:05] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:05] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:05] info: [POST] /api/auth/login
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1470MB
[2026-01-28 14:22:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:05] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:05] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:05] info: [GET] /api/auth/profile
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1467MB
[2026-01-28 14:22:05] info: [auth:eubmen] Starting auth for GET /profile
[2026-01-28 14:22:05] info: [auth:eubmen] Token from cookie: true
[2026-01-28 14:22:05] info: [auth:eubmen] Authenticated user f74aa76e-ccb1-4a28-992f-e66437a1fc40
[2026-01-28 14:22:05] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:05] info: [GET] /api/auth/profile
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1462MB
[2026-01-28 14:22:05] info: [auth:uothi] Starting auth for GET /profile
[2026-01-28 14:22:05] info: [auth:uothi] Token from cookie: false
[2026-01-28 14:22:05] warn: [auth:uothi] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:05] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:05] info: [GET] /api/auth/profile
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1472MB
[2026-01-28 14:22:05] info: [auth:8zdmb6] Starting auth for GET /profile
[2026-01-28 14:22:05] info: [auth:8zdmb6] Token from cookie: true
[2026-01-28 14:22:05] warn: [auth:8zdmb6] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:05] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:05] info: [POST] /api/auth/login
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1468MB
[2026-01-28 14:22:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:05] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:05] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:05] info: [POST] /api/auth/refresh-token
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1466MB
[2026-01-28 14:22:05] info: [TokenRotation] Token rotation successful
[2026-01-28 14:22:05] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:22:05] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:22:05] info: [POST] /api/auth/refresh-token
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB
[2026-01-28 14:22:05] error: [authController.refreshToken] Error refreshing token: Refresh token is required
[2026-01-28 14:22:05] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:22:05] error: Error Refresh token is required
[2026-01-28 14:22:05] info: [POST] /api/auth/refresh-token - 400
[2026-01-28 14:22:05] info: [POST] /api/auth/login
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1468MB
[2026-01-28 14:22:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:05] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:05] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:05] info: [POST] /api/auth/logout
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB
[2026-01-28 14:22:05] info: [auth:jws6k] Starting auth for POST /logout
[2026-01-28 14:22:05] info: [auth:jws6k] Token from cookie: true
[2026-01-28 14:22:05] info: [auth:jws6k] Authenticated user f74aa76e-ccb1-4a28-992f-e66437a1fc40
[2026-01-28 14:22:05] info: [POST] /api/auth/logout - 200
[2026-01-28 14:22:05] info: [POST] /api/auth/login
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1466MB
[2026-01-28 14:22:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:05] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:05] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:05] info: [POST] /api/auth/logout
[2026-01-28 14:22:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1477MB
[2026-01-28 14:22:06] info: [auth:msvbze] Starting auth for POST /logout
[2026-01-28 14:22:06] info: [auth:msvbze] Token from cookie: true
[2026-01-28 14:22:06] info: [auth:msvbze] Authenticated user f74aa76e-ccb1-4a28-992f-e66437a1fc40
[2026-01-28 14:22:06] info: [POST] /api/auth/logout - 200
[2026-01-28 14:22:06] info: [POST] /api/auth/register
[2026-01-28 14:22:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1478MB
[2026-01-28 14:22:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:06] info: [EmailVerification] Created verification token
[2026-01-28 14:22:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:22:06] info: [authController.register] Verification email sent
[2026-01-28 14:22:06] info: [POST] /api/auth/register - 201
[2026-01-28 14:22:06] info: [POST] /api/auth/login
[2026-01-28 14:22:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1479MB
[2026-01-28 14:22:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:06] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:06] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:06] info: [POST] /api/auth/login
[2026-01-28 14:22:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1477MB
[2026-01-28 14:22:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:06] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:06] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:06] info: [POST] /api/auth/login
[2026-01-28 14:22:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1474MB
[2026-01-28 14:22:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:06] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:06] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:06] info: [GET] /api/auth/profile
[2026-01-28 14:22:06] warn: [MemoryMonitoring] Memory threshold exceeded: 1472MB
[2026-01-28 14:22:06] info: [auth:z3l2uc] Starting auth for GET /profile
[2026-01-28 14:22:06] info: [auth:z3l2uc] Token from cookie: false
[2026-01-28 14:22:06] info: [auth:z3l2uc] Token from header: true
[2026-01-28 14:22:06] info: [auth:z3l2uc] Authenticated user 73aaa503-b6ab-4c41-beac-eae7871b1aa8
[2026-01-28 14:22:06] info: [GET] /api/auth/profile - 200
PASS __tests__/integration/auth-cookies.test.mjs
  Authentication with HttpOnly Cookies
    POST /api/auth/register - Cookie Setting
      ‚àö should set httpOnly cookies on successful registration (363 ms)
      ‚àö should NOT expose tokens in response body (XSS protection) (321 ms)
    POST /api/auth/login - Cookie Setting
      ‚àö should set httpOnly cookies on successful login (98 ms)
      ‚àö should include SameSite=Strict for CSRF protection (96 ms)
    GET /api/auth/profile - Cookie Authentication
      ‚àö should authenticate with httpOnly cookies (22 ms)
      ‚àö should reject request without cookies (19 ms)
      ‚àö should reject request with invalid cookies (19 ms)
    POST /api/auth/refresh-token - Cookie Refresh
      ‚àö should refresh accessToken using httpOnly refreshToken cookie (35 ms)
      ‚àö should reject refresh without refreshToken cookie (31 ms)
    POST /api/auth/logout - Cookie Clearing
      ‚àö should clear httpOnly cookies on logout (122 ms)
      ‚àö should invalidate refresh tokens in database on logout (120 ms)
    Security: XSS Protection Verification
      ‚àö should never include JWT tokens in any response body (608 ms)
    Security: CSRF Protection Verification
      ‚àö should set SameSite=Strict on all auth cookies (97 ms)
    Production Security: HTTPS Enforcement
      ‚àö should set Secure flag in production environment (100 ms)
    Backward Compatibility: Authorization Header Fallback
      ‚àö should still accept Authorization header for backward compatibility (21 ms)

[2026-01-28 14:22:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:08] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:08] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:08] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:08] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:08] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:08] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:08] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] info: [POST] /api/auth/login
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1533MB
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:08] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:08] info: [POST] /api/auth/login
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1534MB
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:08] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] info: [POST] /api/auth/login
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1534MB
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:08] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:08] info: [POST] /api/auth/logout
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1529MB
[2026-01-28 14:22:08] info: [auth:uzd8h] Starting auth for POST /logout
[2026-01-28 14:22:08] info: [auth:uzd8h] Token from cookie: true
[2026-01-28 14:22:08] info: [auth:uzd8h] Authenticated user 93224582-a645-453c-bb3e-12474e4c5b06
[2026-01-28 14:22:08] info: [POST] /api/auth/logout - 200
[2026-01-28 14:22:08] info: [POST] /api/auth/login
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1531MB
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:08] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:08] info: [POST] /api/auth/logout
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1529MB
[2026-01-28 14:22:08] info: [auth:t78bdk] Starting auth for POST /logout
[2026-01-28 14:22:08] info: [auth:t78bdk] Token from cookie: true
[2026-01-28 14:22:08] info: [auth:t78bdk] Authenticated user 93224582-a645-453c-bb3e-12474e4c5b06
[2026-01-28 14:22:08] info: [POST] /api/auth/logout - 200
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] info: [POST] /api/auth/login
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1533MB
[2026-01-28 14:22:08] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:08] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:08] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:08] info: [POST] /api/auth/change-password
[2026-01-28 14:22:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1531MB
[2026-01-28 14:22:08] info: [auth:2sr5gu] Starting auth for POST /change-password
[2026-01-28 14:22:08] info: [auth:2sr5gu] Token from cookie: true
[2026-01-28 14:22:08] info: [auth:2sr5gu] Authenticated user 93224582-a645-453c-bb3e-12474e4c5b06
[2026-01-28 14:22:09] info: [authController.changePassword] Password changed successfully
[2026-01-28 14:22:09] info: [POST] /api/auth/change-password - 200
[2026-01-28 14:22:09] info: [POST] /api/auth/login
[2026-01-28 14:22:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1537MB
[2026-01-28 14:22:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:09] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:09] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:09] info: [POST] /api/auth/change-password
[2026-01-28 14:22:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1533MB
[2026-01-28 14:22:09] info: [auth:y87e34] Starting auth for POST /change-password
[2026-01-28 14:22:09] info: [auth:y87e34] Token from cookie: true
[2026-01-28 14:22:09] info: [auth:y87e34] Authenticated user 93224582-a645-453c-bb3e-12474e4c5b06
[2026-01-28 14:22:09] error: [authController.changePassword] Error changing password: Current password is incorrect
[2026-01-28 14:22:09] error: [POST] /api/auth/change-password - ERROR
[2026-01-28 14:22:09] error: Error Current password is incorrect
[2026-01-28 14:22:09] info: [POST] /api/auth/change-password - 401
[2026-01-28 14:22:09] info: [POST] /api/auth/login
[2026-01-28 14:22:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1537MB
[2026-01-28 14:22:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:09] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:09] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:09] info: [POST] /api/auth/change-password
[2026-01-28 14:22:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1534MB
[2026-01-28 14:22:09] info: [auth:a07neh] Starting auth for POST /change-password
[2026-01-28 14:22:09] info: [auth:a07neh] Token from cookie: true
[2026-01-28 14:22:09] info: [auth:a07neh] Authenticated user 93224582-a645-453c-bb3e-12474e4c5b06
[2026-01-28 14:22:09] warn: [Validation] Input validation failed
[2026-01-28 14:22:09] info: [POST] /api/auth/change-password - 400
[2026-01-28 14:22:09] info: [POST] /api/auth/login
[2026-01-28 14:22:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1535MB
[2026-01-28 14:22:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:09] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:09] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:09] info: [GET] /api/auth/profile
[2026-01-28 14:22:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1532MB
[2026-01-28 14:22:09] info: [auth:8ld9pk] Starting auth for GET /profile
[2026-01-28 14:22:09] info: [auth:8ld9pk] Token from cookie: true
[2026-01-28 14:22:09] warn: [auth:8ld9pk] Session too old
[2026-01-28 14:22:09] warn: [auth:8ld9pk] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:09] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:09] info: [POST] /api/auth/login
[2026-01-28 14:22:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1536MB
[2026-01-28 14:22:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:10] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:10] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:10] info: [GET] /api/auth/profile
[2026-01-28 14:22:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1532MB
[2026-01-28 14:22:10] info: [auth:1o3jjv] Starting auth for GET /profile
[2026-01-28 14:22:10] info: [auth:1o3jjv] Token from cookie: true
[2026-01-28 14:22:10] info: [auth:1o3jjv] Authenticated user 93224582-a645-453c-bb3e-12474e4c5b06
[2026-01-28 14:22:10] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:10] info: [POST] /api/auth/login
[2026-01-28 14:22:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1534MB
[2026-01-28 14:22:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:10] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:22:10] info: [POST] /api/auth/login - 200
[2026-01-28 14:22:10] info: [GET] /api/auth/profile
[2026-01-28 14:22:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1532MB
[2026-01-28 14:22:10] info: [auth:85dosg] Starting auth for GET /profile
[2026-01-28 14:22:10] info: [auth:85dosg] Token from cookie: true
[2026-01-28 14:22:10] info: [auth:85dosg] Authenticated user 93224582-a645-453c-bb3e-12474e4c5b06
[2026-01-28 14:22:10] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:10] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:22:10] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:22:10] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:22:10] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:22:10] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:22:10.232Z"}
[2026-01-28 14:22:10] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:22:10] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:22:10] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:22:10] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:22:10] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:22:10.244Z"}
[2026-01-28 14:22:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:10] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:22:10] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:22:10] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:22:10] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:22:10] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:22:10.265Z"}
[2026-01-28 14:22:10] info: [POST] /api/auth/register
[2026-01-28 14:22:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1537MB
[2026-01-28 14:22:10] warn: [Validation] Input validation failed
[2026-01-28 14:22:10] info: [POST] /api/auth/register - 400
PASS __tests__/integration/session-lifecycle.test.mjs
  Session Lifecycle Management
    CWE-384: Token Regeneration on Login
      ‚àö should delete all existing refresh tokens on login (144 ms)
      ‚àö should create fresh token pair on login (100 ms)
    CWE-613: Token Cleanup on Logout
      ‚àö should delete all refresh tokens on logout (133 ms)
      ‚àö should clear auth cookies on logout (121 ms)
    Force Logout on Password Change
      ‚àö should invalidate all sessions when password is changed (759 ms)
      ‚àö should reject password change with incorrect old password (197 ms)
      ‚àö should validate new password requirements (123 ms)
    CWE-613: Absolute Session Expiry
      ‚àö should reject tokens older than 7 days (125 ms)
      ‚àö should accept tokens less than 7 days old (122 ms)
      ‚àö should calculate token age correctly at the boundary (exactly 7 days) (123 ms)
    Token Cleanup Cron Job
      ‚àö should remove expired refresh tokens (18 ms)
      ‚àö should remove old invalidated tokens (30+ days) (9 ms)
      ‚àö should not remove valid active tokens (22 ms)
    Integration: Complete Session Lifecycle
      ‚àö should handle complete user journey: register -> login -> use session -> change password -> re-login (24 ms)

[2026-01-28 14:22:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:10] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:10] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] error: [EmailVerification] Error creating verification token: Maximum pending verification tokens (5) reached
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:11] info: [EmailVerification] Created verification token
[2026-01-28 14:22:11] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:11] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:12] info: [EmailVerification] Verification status check
[2026-01-28 14:22:12] info: [EmailVerification] Verification status check
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Resent verification email
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:12] error: [EmailVerification] Error resending verification email: Email is already verified
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Resent verification email
[2026-01-28 14:22:12] info: [EmailVerification] Created verification token
[2026-01-28 14:22:12] info: [EmailVerification] Resent verification email
[2026-01-28 14:22:12] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:22:12] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:22:13] info: [EmailVerification] Created verification token
[2026-01-28 14:22:13] info: [EmailVerification] Token cleanup completed
[2026-01-28 14:22:13] info: [EmailVerification] Created verification token
[2026-01-28 14:22:13] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:13] info: [EmailVerification] Token cleanup completed
[2026-01-28 14:22:13] info: [EmailVerification] Created verification token
[2026-01-28 14:22:13] info: [EmailVerification] Token cleanup completed
[2026-01-28 14:22:13] info: [EmailVerification] Created verification token
[2026-01-28 14:22:13] info: [EmailVerification] Created verification token
[2026-01-28 14:22:13] info: [EmailVerification] Email verified successfully
[2026-01-28 14:22:13] info: [EmailVerification] Created verification token
PASS __tests__/unit/email-verification.test.mjs
  Email Verification Service - Unit Tests
    generateVerificationToken()
      ‚àö should_generate_unique_tokens (134 ms)
      ‚àö should_generate_64_character_hex_tokens (74 ms)
      ‚àö should_generate_cryptographically_secure_tokens (80 ms)
    createVerificationToken()
      ‚àö should_create_token_with_valid_user_id (82 ms)
      ‚àö should_store_token_in_database (79 ms)
      ‚àö should_set_expiration_to_24_hours (77 ms)
      ‚àö should_store_ip_address_and_user_agent (81 ms)
      ‚àö should_enforce_maximum_pending_tokens_limit (80 ms)
      ‚àö should_enforce_rate_limiting_cooldown (80 ms)
      ‚àö should_allow_token_creation_after_cooldown (82 ms)
    verifyEmailToken()
      ‚àö should_verify_valid_token (88 ms)
      ‚àö should_mark_user_email_as_verified (87 ms)
      ‚àö should_mark_token_as_used (84 ms)
      ‚àö should_reject_invalid_token (183 ms)
      ‚àö should_reject_already_used_token (90 ms)
      ‚àö should_reject_expired_token (80 ms)
      ‚àö should_use_atomic_transaction_for_verification (133 ms)
      ‚àö should_implement_timing_safe_response_for_invalid_tokens (179 ms)
    checkVerificationStatus()
      ‚àö should_return_verification_status_for_verified_user (89 ms)
      ‚àö should_return_verification_status_for_unverified_user (75 ms)
      ‚àö should_handle_non_existent_user (76 ms)
    resendVerificationEmail()
      ‚àö should_create_new_token_for_unverified_user (79 ms)
      ‚àö should_reject_resend_for_verified_user (86 ms)
      ‚àö should_cleanup_expired_tokens_before_creating_new (90 ms)
      ‚àö should_enforce_rate_limiting_on_resend (84 ms)
    cleanupExpiredTokens()
      ‚àö should_delete_expired_tokens (82 ms)
      ‚àö should_delete_old_used_tokens (90 ms)
      ‚àö should_keep_active_valid_tokens (78 ms)
    getTokenInfo()
      ‚àö should_return_token_information (77 ms)
      ‚àö should_indicate_used_token (84 ms)
      ‚àö should_indicate_expired_token (78 ms)
      ‚àö should_return_null_for_invalid_token (72 ms)

[2026-01-28 14:22:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:14] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:14] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:14] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:14] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:14] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:14] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:14] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:14] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:14] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:14] info: [POST] /api/horses/foals
[2026-01-28 14:22:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1604MB
[2026-01-28 14:22:14] info: [auth:yi4txd] Starting auth for POST /horses/foals
[2026-01-28 14:22:14] info: [auth:yi4txd] Token from cookie: false
[2026-01-28 14:22:14] info: [auth:yi4txd] Token from header: true
[2026-01-28 14:22:14] info: [auth:yi4txd] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:14] info: [auth:5ql02w] Starting auth for POST /foals
[2026-01-28 14:22:14] info: [auth:5ql02w] Token from cookie: false
[2026-01-28 14:22:14] info: [auth:5ql02w] Token from header: true
[2026-01-28 14:22:14] info: [auth:5ql02w] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:14] info: [horseController.createFoal] Creating foal: Trait Test Foal with sire 147316 and dam 147316
[2026-01-28 14:22:14] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 147316)
[2026-01-28 14:22:14] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 147316)
[2026-01-28 14:22:14] info: [horseController.gatherLineage] Gathering lineage for sire 147316 and dam 147316, 3 generations
[2026-01-28 14:22:14] info: [horseController.gatherLineage] Gathered 1 ancestors
[2026-01-28 14:22:14] info: [horseController.assessFeedQualityFromMare] Mare Cross System Test Horse feed quality: 75 (health: Good, bond: 50)
[2026-01-28 14:22:14] info: [horseController.createFoal] Mare stress: 50, Feed quality: 75, Lineage count: 1
[2026-01-28 14:22:14] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth
[2026-01-28 14:22:14] info: [applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 75
[2026-01-28 14:22:14] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}
[2026-01-28 14:22:14] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}
[2026-01-28 14:22:14] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 147316 and dam 147316
[2026-01-28 14:22:14] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 147316 and dam 147316
[2026-01-28 14:22:14] info: [atBirthTraits.assessFeedQuality] Mare 147316 feed quality: 70
[2026-01-28 14:22:14] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 70
[2026-01-28 14:22:15] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 147316 and dam 147316
[2026-01-28 14:22:15] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions
[2026-01-28 14:22:15] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 147316 and dam 147316
[2026-01-28 14:22:15] info: [atBirthTraits.detectInbreeding] Inbreeding not detected
[2026-01-28 14:22:15] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":50,"feedQuality":70,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}
[2026-01-28 14:22:15] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}
[2026-01-28 14:22:15] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}
[2026-01-28 14:22:15] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false
[2026-01-28 14:22:15] info: [horseModel.createHorse] Successfully created horse: Trait Test Foal (ID: 147317)
[2026-01-28 14:22:15] info: [horseController.createFoal] Successfully created foal: Trait Test Foal (ID: 147317)
[2026-01-28 14:22:15] info: [POST] /api/horses/foals - 201
[2026-01-28 14:22:15] info: [POST] /api/foals/147317/enrichment
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:22:15] info: [auth:5qtlog] Starting auth for POST /foals/147317/enrichment
[2026-01-28 14:22:15] info: [auth:5qtlog] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:5qtlog] Token from header: true
[2026-01-28 14:22:15] info: [auth:5qtlog] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns foal 147317
[2026-01-28 14:22:15] info: [foalRoutes] POST /api/foals/147317/enrichment - Day 1, Activity: Feeding Assistance
[2026-01-28 14:22:15] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 147317 on day 1
[2026-01-28 14:22:15] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 0 -> 7, Stress: 0 -> 0
[2026-01-28 14:22:15] info: [POST] /api/foals/147317/enrichment - 200
[2026-01-28 14:22:15] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147317
[2026-01-28 14:22:15] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147317
[2026-01-28 14:22:15] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147317
[2026-01-28 14:22:15] info: [POST] /api/traits/discover/147317
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1608MB
[2026-01-28 14:22:15] info: [auth:9hc2l] Starting auth for POST /traits/discover/147317
[2026-01-28 14:22:15] info: [auth:9hc2l] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:9hc2l] Token from header: true
[2026-01-28 14:22:15] info: [auth:9hc2l] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147317
[2026-01-28 14:22:15] info: [traitController.discoverTraits] Triggering trait discovery for horse 147317
[2026-01-28 14:22:15] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147317
[2026-01-28 14:22:15] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147317
[2026-01-28 14:22:15] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147317
[2026-01-28 14:22:15] info: [POST] /api/traits/discover/147317 - 200
[2026-01-28 14:22:15] info: [GET] /api/traits/discovery-status/147317
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:22:15] info: [auth:7oljd] Starting auth for GET /traits/discovery-status/147317
[2026-01-28 14:22:15] info: [auth:7oljd] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:7oljd] Token from header: true
[2026-01-28 14:22:15] info: [auth:7oljd] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147317
[2026-01-28 14:22:15] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 147317
[2026-01-28 14:22:15] info: [GET] /api/traits/discovery-status/147317 - 200
[2026-01-28 14:22:15] info: [POST] /api/milestones/evaluate-milestone
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1599MB
[2026-01-28 14:22:15] info: [auth:utpg4c] Starting auth for POST /milestones/evaluate-milestone
[2026-01-28 14:22:15] info: [auth:utpg4c] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:utpg4c] Token from header: true
[2026-01-28 14:22:15] info: [auth:utpg4c] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:ix32e7] Starting auth for POST /evaluate-milestone
[2026-01-28 14:22:15] info: [auth:ix32e7] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:ix32e7] Token from header: true
[2026-01-28 14:22:15] info: [auth:ix32e7] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 147317
[2026-01-28 14:22:15] info: [ownership] Found owned horse 147317 for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 147317, milestone imprinting
[2026-01-28 14:22:15] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament
[2026-01-28 14:22:15] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 147317: withdrawn (score: -5)
[2026-01-28 14:22:15] info: [POST] /api/milestones/evaluate-milestone - 200
[2026-01-28 14:22:15] info: [GET] /api/horses/147316/environmental-analysis
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:22:15] info: [auth:7ws4nc] Starting auth for GET /horses/147316/environmental-analysis
[2026-01-28 14:22:15] info: [auth:7ws4nc] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:7ws4nc] Token from header: true
[2026-01-28 14:22:15] info: [auth:7ws4nc] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:0j276] Starting auth for GET /horses/147316/environmental-analysis
[2026-01-28 14:22:15] info: [auth:0j276] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:0j276] Token from header: true
[2026-01-28 14:22:15] info: [auth:0j276] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147316
[2026-01-28 14:22:15] info: Environmental analysis generated for horse 147316 by user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [GET] /api/horses/147316/environmental-analysis - 200
[2026-01-28 14:22:15] info: [GET] /api/horses/147316/trait-matrix
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1601MB
[2026-01-28 14:22:15] info: [auth:gbef8t] Starting auth for GET /horses/147316/trait-matrix
[2026-01-28 14:22:15] info: [auth:gbef8t] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:gbef8t] Token from header: true
[2026-01-28 14:22:15] info: [auth:gbef8t] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:5un42o] Starting auth for GET /horses/147316/trait-matrix
[2026-01-28 14:22:15] info: [auth:5un42o] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:5un42o] Token from header: true
[2026-01-28 14:22:15] info: [auth:5un42o] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147316
[2026-01-28 14:22:15] info: Trait interaction matrix generated for horse 147316 by user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [GET] /api/horses/147316/trait-matrix - 200
[2026-01-28 14:22:15] info: [GET] /api/horses/147316
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1600MB
[2026-01-28 14:22:15] info: [auth:01ffc] Starting auth for GET /horses/147316
[2026-01-28 14:22:15] info: [auth:01ffc] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:01ffc] Token from header: true
[2026-01-28 14:22:15] info: [auth:01ffc] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147316
[2026-01-28 14:22:15] info: [GET] /api/horses/147316 - 200
[2026-01-28 14:22:15] info: [POST] /api/training/train
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1602MB
[2026-01-28 14:22:15] info: [auth:yzjwnv] Starting auth for POST /training/train
[2026-01-28 14:22:15] info: [auth:yzjwnv] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:yzjwnv] Token from header: true
[2026-01-28 14:22:15] info: [auth:yzjwnv] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Found owned horse 147316 for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [trainingController.trainRouteHandler] Training request for horse 147316 in Racing
[2026-01-28 14:22:15] info: [trainingController.trainHorse] Attempting to train horse 147316 in Racing
[2026-01-28 14:22:15] info: [trainingController.canTrain] Checking training eligibility for horse 147316 in Racing
[2026-01-28 14:22:15] info: [trainingModel.getHorseAge] Getting age for horse 147316
[2026-01-28 14:22:15] info: [trainingModel.getHorseAge] Horse 147316 is 3 years old
[2026-01-28 14:22:15] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147316 across all disciplines
[2026-01-28 14:22:15] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147316
[2026-01-28 14:22:15] info: [trainingController.canTrain] Horse 147316 is eligible to train in Racing
[2026-01-28 14:22:15] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 147316)
[2026-01-28 14:22:15] info: [trainingController.trainHorse] Horse 147316 has traits: 
[2026-01-28 14:22:15] info: [trainingModel.logTrainingSession] Logging training session for horse 147316 in Racing
[2026-01-28 14:22:15] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9019
[2026-01-28 14:22:15] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147316 by +5
[2026-01-28 14:22:15] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147316 by +5
[2026-01-28 14:22:15] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147316: 0 -> 5
[2026-01-28 14:22:15] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147316
[2026-01-28 14:22:15] info: [xpLogModel.logXpEvent] Logging XP event: User b84121ac-b8ea-425a-a3b9-d34ac70eed28, Amount: 5, Reason: Trained horse Cross System Test Horse in Racing
[2026-01-28 14:22:15] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4457, User b84121ac-b8ea-425a-a3b9-d34ac70eed28, Amount: 5
[2026-01-28 14:22:15] info: [trainingController.trainHorse] Awarded 5 XP to user b84121ac-b8ea-425a-a3b9-d34ac70eed28 for training
[2026-01-28 14:22:15] info: [trainingController.trainHorse] Successfully trained horse 147316 in Racing (Log ID: 9019, Score +5)
[2026-01-28 14:22:15] info: [POST] /api/training/train - 200
[2026-01-28 14:22:15] info: [GET] /api/horses/147316
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:22:15] info: [auth:pfxp6g] Starting auth for GET /horses/147316
[2026-01-28 14:22:15] info: [auth:pfxp6g] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:pfxp6g] Token from header: true
[2026-01-28 14:22:15] info: [auth:pfxp6g] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147316
[2026-01-28 14:22:15] info: [GET] /api/horses/147316 - 200
[2026-01-28 14:22:15] info: [GET] /api/competition/eligibility/147316/Racing
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1607MB
[2026-01-28 14:22:15] info: [auth:f387t] Starting auth for GET /competition/eligibility/147316/Racing
[2026-01-28 14:22:15] info: [auth:f387t] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:f387t] Token from header: true
[2026-01-28 14:22:15] info: [auth:f387t] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:delkcc] Starting auth for GET /eligibility/147316/Racing
[2026-01-28 14:22:15] info: [auth:delkcc] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:delkcc] Token from header: true
[2026-01-28 14:22:15] info: [auth:delkcc] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147316
[2026-01-28 14:22:15] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147316 in Racing
[2026-01-28 14:22:15] info: [competitionRoutes.GET /eligibility] Horse 147316 eligibility checked for Racing
[2026-01-28 14:22:15] info: [GET] /api/competition/eligibility/147316/Racing - 200
[2026-01-28 14:22:15] info: [POST] /api/competition/enter
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:22:15] info: [auth:qp0jum] Starting auth for POST /competition/enter
[2026-01-28 14:22:15] info: [auth:qp0jum] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:qp0jum] Token from header: true
[2026-01-28 14:22:15] info: [auth:qp0jum] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:tvm1eb] Starting auth for POST /enter
[2026-01-28 14:22:15] info: [auth:tvm1eb] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:tvm1eb] Token from header: true
[2026-01-28 14:22:15] info: [auth:tvm1eb] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [competitionRoutes.POST /enter] User b84121ac-b8ea-425a-a3b9-d34ac70eed28 entering horse 147316 in show 8288
[2026-01-28 14:22:15] info: [ownership] Found owned horse 147316 for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [competitionRoutes.POST /enter] Successfully entered horse 147316 in show 8288
[2026-01-28 14:22:15] info: [POST] /api/competition/enter - 201
[2026-01-28 14:22:15] info: [POST] /api/competition/execute
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1602MB
[2026-01-28 14:22:15] info: [auth:b7p74r] Starting auth for POST /competition/execute
[2026-01-28 14:22:15] info: [auth:b7p74r] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:b7p74r] Token from header: true
[2026-01-28 14:22:15] info: [auth:b7p74r] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:9hnhye] Starting auth for POST /execute
[2026-01-28 14:22:15] info: [auth:9hnhye] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:9hnhye] Token from header: true
[2026-01-28 14:22:15] info: [auth:9hnhye] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [competitionRoutes.POST /execute] User b84121ac-b8ea-425a-a3b9-d34ac70eed28 executing competition for show 8288
[2026-01-28 14:22:15] info: [competitionRoutes.POST /execute] Executing competition with 1 entries
[2026-01-28 14:22:15] info: [enhancedCompetitionSimulation] Executing competition: Cross System Test Show 1769628135680 (Racing)
[2026-01-28 14:22:15] info: [calculateCompetitionScore] Horse Cross System Test Horse: Base score for Racing: 240
[2026-01-28 14:22:15] info: [calculateCompetitionScore] Horse Cross System Test Horse: Luck modifier: 6.5%, adjustment: 15.5
[2026-01-28 14:22:15] info: [calculateCompetitionScore] Horse Cross System Test Horse: Final score: 256 (base: 240, trait: +0, luck: 15.5)
[2026-01-28 14:22:15] info: [enhancedCompetitionSimulation] Horse Cross System Test Horse (ID: 147316) scored 256 in Racing
[2026-01-28 14:22:15] info: [resultModel.saveResult] Successfully updated placeholder result for horse 147316 in show 8288 with score 256
[2026-01-28 14:22:15] info: [horseXpModel.addXpToHorse] Added 30 XP to horse Cross System Test Horse (ID: 147316). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:22:15] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to Cross System Test Horse for 1st place
[2026-01-28 14:22:15] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.
[2026-01-28 14:22:15] info: [competitionRoutes.POST /execute] Competition executed successfully for show 8288
[2026-01-28 14:22:15] info: [POST] /api/competition/execute - 200
[2026-01-28 14:22:15] info: [GET] /api/horses/147316/xp
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1613MB
[2026-01-28 14:22:15] info: [auth:9hznagv] Starting auth for GET /horses/147316/xp
[2026-01-28 14:22:15] info: [auth:9hznagv] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:9hznagv] Token from header: true
[2026-01-28 14:22:15] info: [auth:9hznagv] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns horse 147316
[2026-01-28 14:22:15] info: [horseXpController.getHorseXpStatus] Retrieved XP status for horse Cross System Test Horse (ID: 147316)
[2026-01-28 14:22:15] info: [GET] /api/horses/147316/xp - 200
[2026-01-28 14:22:15] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1602MB
[2026-01-28 14:22:15] info: [auth:2jg6p] Starting auth for GET /leaderboards/competition
[2026-01-28 14:22:15] info: [auth:2jg6p] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:2jg6p] Token from header: true
[2026-01-28 14:22:15] info: [auth:2jg6p] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:a90wa] Starting auth for GET /competition
[2026-01-28 14:22:15] info: [auth:a90wa] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:a90wa] Token from header: true
[2026-01-28 14:22:15] info: [auth:a90wa] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=wins
[2026-01-28 14:22:15] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries
[2026-01-28 14:22:15] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all - 200
[2026-01-28 14:22:15] info: [GET] /api/grooms/user/b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:22:15] info: [auth:2ryp0d] Starting auth for GET /grooms/user/b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:2ryp0d] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:2ryp0d] Token from header: true
[2026-01-28 14:22:15] info: [auth:2ryp0d] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:ttoyro] Starting auth for GET /user/b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:ttoyro] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:ttoyro] Token from header: true
[2026-01-28 14:22:15] info: [auth:ttoyro] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [groomController.getUserGrooms] Getting grooms for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [GET] /api/grooms/user/b84121ac-b8ea-425a-a3b9-d34ac70eed28 - 200
[2026-01-28 14:22:15] info: [POST] /api/grooms/interact
[2026-01-28 14:22:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1605MB
[2026-01-28 14:22:15] info: [auth:ru897p] Starting auth for POST /grooms/interact
[2026-01-28 14:22:15] info: [auth:ru897p] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:ru897p] Token from header: true
[2026-01-28 14:22:15] info: [auth:ru897p] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [auth:a4he7] Starting auth for POST /interact
[2026-01-28 14:22:15] info: [auth:a4he7] Token from cookie: false
[2026-01-28 14:22:15] info: [auth:a4he7] Token from header: true
[2026-01-28 14:22:15] info: [auth:a4he7] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Found owned foal 147316 for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [ownership] Found owned groom 73726 for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:15] info: [groomController.recordInteraction] Recording brushing interaction for foal 147316
[2026-01-28 14:22:15] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: methodical
[2026-01-28 14:22:15] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for methodical: none
[2026-01-28 14:22:15] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -3 stress
[2026-01-28 14:22:15] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 73726 for interaction_completed
[2026-01-28 14:22:15] info: [groomProgressionService.awardGroomXP] Groom 73726 gained 2 XP: 200 ‚Üí 202 (Level 4 ‚Üí 2)
[2026-01-28 14:22:15] info: [groomController.recordInteraction] Awarded 2 XP to groom 73726 for interaction
[2026-01-28 14:22:15] info: [POST] /api/grooms/interact - 200
[2026-01-28 14:22:16] info: [GET] /api/grooms/user/b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1605MB
[2026-01-28 14:22:16] info: [auth:g4xjhv] Starting auth for GET /grooms/user/b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:g4xjhv] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:g4xjhv] Token from header: true
[2026-01-28 14:22:16] info: [auth:g4xjhv] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:25bcfl] Starting auth for GET /user/b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:25bcfl] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:25bcfl] Token from header: true
[2026-01-28 14:22:16] info: [auth:25bcfl] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [groomController.getUserGrooms] Getting grooms for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/grooms/user/b84121ac-b8ea-425a-a3b9-d34ac70eed28 - 200
[2026-01-28 14:22:16] info: [GET] /api/grooms/73726/retirement/eligibility
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1613MB
[2026-01-28 14:22:16] info: [auth:s53mn9] Starting auth for GET /grooms/73726/retirement/eligibility
[2026-01-28 14:22:16] info: [auth:s53mn9] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:s53mn9] Token from header: true
[2026-01-28 14:22:16] info: [auth:s53mn9] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns groom 73726
[2026-01-28 14:22:16] info: [GET] /api/grooms/73726/retirement/eligibility - 200
[2026-01-28 14:22:16] info: [POST] /api/grooms/assign
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1614MB
[2026-01-28 14:22:16] info: [auth:zjpdxy] Starting auth for POST /grooms/assign
[2026-01-28 14:22:16] info: [auth:zjpdxy] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:zjpdxy] Token from header: true
[2026-01-28 14:22:16] info: [auth:zjpdxy] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:g7br3l] Starting auth for POST /assign
[2026-01-28 14:22:16] info: [auth:g7br3l] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:g7br3l] Token from header: true
[2026-01-28 14:22:16] info: [auth:g7br3l] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [ownership] Found owned foal 147316 for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [ownership] Found owned groom 73726 for user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [groomController.assignGroom] Assigning groom 73726 to foal 147316
[2026-01-28 14:22:16] info: [groomSystem.assignGroomToFoal] Assigning groom 73726 to foal 147316
[2026-01-28 14:22:16] info: [groomSystem.assignGroomToFoal] Successfully assigned Cross System Test Groom to foal Cross System Test Horse
[2026-01-28 14:22:16] info: [POST] /api/grooms/assign - 201
[2026-01-28 14:22:16] info: [GET] /api/grooms/assignments/147316
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1612MB
[2026-01-28 14:22:16] info: [auth:usswbp] Starting auth for GET /grooms/assignments/147316
[2026-01-28 14:22:16] info: [auth:usswbp] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:usswbp] Token from header: true
[2026-01-28 14:22:16] info: [auth:usswbp] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:hxu4hwm] Starting auth for GET /assignments/147316
[2026-01-28 14:22:16] info: [auth:hxu4hwm] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:hxu4hwm] Token from header: true
[2026-01-28 14:22:16] info: [auth:hxu4hwm] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [ownership] Validated ownership: user b84121ac-b8ea-425a-a3b9-d34ac70eed28 owns foal 147316
[2026-01-28 14:22:16] info: [groomController.getFoalAssignments] Getting assignments for foal 147316
[2026-01-28 14:22:16] info: [GET] /api/grooms/assignments/147316 - 200
[2026-01-28 14:22:16] info: [GET] /api/memory/status
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1606MB
[2026-01-28 14:22:16] info: [auth:wqxovg] Starting auth for GET /memory/status
[2026-01-28 14:22:16] info: [auth:wqxovg] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:wqxovg] Token from header: true
[2026-01-28 14:22:16] info: [auth:wqxovg] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:k729c] Starting auth for GET /status
[2026-01-28 14:22:16] info: [auth:k729c] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:k729c] Token from header: true
[2026-01-28 14:22:16] info: [auth:k729c] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [MemoryManagement] Getting memory status
[2026-01-28 14:22:16] info: [GET] /api/memory/status - 200
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1606MB
[2026-01-28 14:22:16] info: [auth:pkq36m] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:pkq36m] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:pkq36m] Token from header: true
[2026-01-28 14:22:16] info: [auth:pkq36m] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1616MB
[2026-01-28 14:22:16] info: [auth:y7ccym] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:y7ccym] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:y7ccym] Token from header: true
[2026-01-28 14:22:16] info: [auth:y7ccym] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1611MB
[2026-01-28 14:22:16] info: [auth:ng5ll7] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:ng5ll7] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:ng5ll7] Token from header: true
[2026-01-28 14:22:16] info: [auth:ng5ll7] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1606MB
[2026-01-28 14:22:16] info: [auth:tlr7s] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:tlr7s] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:tlr7s] Token from header: true
[2026-01-28 14:22:16] info: [auth:tlr7s] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1617MB
[2026-01-28 14:22:16] info: [auth:t2ymnl] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:t2ymnl] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:t2ymnl] Token from header: true
[2026-01-28 14:22:16] info: [auth:t2ymnl] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1612MB
[2026-01-28 14:22:16] info: [auth:mknld] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:mknld] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:mknld] Token from header: true
[2026-01-28 14:22:16] info: [auth:mknld] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1606MB
[2026-01-28 14:22:16] info: [auth:6r3k9n] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:6r3k9n] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:6r3k9n] Token from header: true
[2026-01-28 14:22:16] info: [auth:6r3k9n] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1617MB
[2026-01-28 14:22:16] info: [auth:leajd] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:leajd] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:leajd] Token from header: true
[2026-01-28 14:22:16] info: [auth:leajd] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1612MB
[2026-01-28 14:22:16] info: [auth:fxagc] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:fxagc] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:fxagc] Token from header: true
[2026-01-28 14:22:16] info: [auth:fxagc] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1607MB
[2026-01-28 14:22:16] info: [auth:ipvks] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:ipvks] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:ipvks] Token from header: true
[2026-01-28 14:22:16] info: [auth:ipvks] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/memory/status
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1616MB
[2026-01-28 14:22:16] info: [auth:51e5st] Starting auth for GET /memory/status
[2026-01-28 14:22:16] info: [auth:51e5st] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:51e5st] Token from header: true
[2026-01-28 14:22:16] info: [auth:51e5st] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:f4d8b8] Starting auth for GET /status
[2026-01-28 14:22:16] info: [auth:f4d8b8] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:f4d8b8] Token from header: true
[2026-01-28 14:22:16] info: [auth:f4d8b8] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [MemoryManagement] Getting memory status
[2026-01-28 14:22:16] info: [GET] /api/memory/status - 200
[2026-01-28 14:22:16] info: [POST] /api/memory/gc
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1607MB
[2026-01-28 14:22:16] info: [auth:ome5xn] Starting auth for POST /memory/gc
[2026-01-28 14:22:16] info: [auth:ome5xn] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:ome5xn] Token from header: true
[2026-01-28 14:22:16] info: [auth:ome5xn] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:331ej] Starting auth for POST /gc
[2026-01-28 14:22:16] info: [auth:331ej] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:331ej] Token from header: true
[2026-01-28 14:22:16] info: [auth:331ej] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 14:22:16] info: [POST] /api/memory/gc - 400
[2026-01-28 14:22:16] info: [GET] /api/horses
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1611MB
[2026-01-28 14:22:16] info: [auth:2b6w77] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:2b6w77] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:2b6w77] Token from header: true
[2026-01-28 14:22:16] info: [auth:2b6w77] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses - 200
[2026-01-28 14:22:16] info: [GET] /api/horses?page=1&limit=5
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1612MB
[2026-01-28 14:22:16] info: [auth:g3qju] Starting auth for GET /horses
[2026-01-28 14:22:16] info: [auth:g3qju] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:g3qju] Token from header: true
[2026-01-28 14:22:16] info: [auth:g3qju] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [GET] /api/horses?page=1&limit=5 - 200
[2026-01-28 14:22:16] info: [GET] /api-docs/swagger.json
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1615MB
[2026-01-28 14:22:16] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 14:22:16] info: [GET] /api/docs/health
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1613MB
[2026-01-28 14:22:16] info: [auth:qywm1e] Starting auth for GET /health
[2026-01-28 14:22:16] info: [auth:qywm1e] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:qywm1e] Token from header: true
[2026-01-28 14:22:16] info: [auth:qywm1e] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:22:16] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:22:16] info: [GET] /api/docs/health - 200
[2026-01-28 14:22:16] info: [GET] /api/user-docs/search?q=competition
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1619MB
[2026-01-28 14:22:16] info: [UserDocRoutes] Searching documentation for: "competition"
[2026-01-28 14:22:16] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:22:16] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:22:16] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:22:16] info: [GET] /api/user-docs/search?q=competition - 200
[2026-01-28 14:22:16] info: [GET] /api/user-docs/feature-guide
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1613MB
[2026-01-28 14:22:16] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:22:16] info: [GET] /api/user-docs/feature-guide - 200
[2026-01-28 14:22:16] info: [GET] /api/user-docs/analytics
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1609MB
[2026-01-28 14:22:16] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:22:16] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 14:22:16] info: [GET] /health
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1622MB
[2026-01-28 14:22:16] info: [GET] /health - 200
[2026-01-28 14:22:16] info: [GET] /ping
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1618MB
[2026-01-28 14:22:16] info: [GET] /ping - 200
[2026-01-28 14:22:16] info: [GET] /api/memory/health
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1611MB
[2026-01-28 14:22:16] info: [auth:nsb10q] Starting auth for GET /memory/health
[2026-01-28 14:22:16] info: [auth:nsb10q] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:nsb10q] Token from header: true
[2026-01-28 14:22:16] info: [auth:nsb10q] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [auth:47aq8l] Starting auth for GET /health
[2026-01-28 14:22:16] info: [auth:47aq8l] Token from cookie: false
[2026-01-28 14:22:16] info: [auth:47aq8l] Token from header: true
[2026-01-28 14:22:16] info: [auth:47aq8l] Authenticated user b84121ac-b8ea-425a-a3b9-d34ac70eed28
[2026-01-28 14:22:16] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:22:16] info: [GET] /api/memory/health - 200
[2026-01-28 14:22:16] info: [GET] /api/user-docs/health
[2026-01-28 14:22:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1615MB
[2026-01-28 14:22:16] info: [GET] /api/user-docs/health - 200
PASS __tests__/integration/crossSystemValidation.test.mjs
  Cross-System Validation Tests
    Epigenetic Trait System Integration
      ‚àö Trait discovery integration with groom care patterns (273 ms)
      ‚àö Environmental trigger system integration (323 ms)
    Competition System Integration
      ‚àö Training system integration with competition performance (296 ms)
      ‚àö Leaderboard integration with competition results (42 ms)
    Groom System Integration
      ‚àö Groom career progression with horse development (219 ms)
      ‚àö Groom assignment integration with horse care (95 ms)
    Performance System Integration
      ‚àö Memory management integration with API operations (347 ms)
      ‚àö API optimization integration with response compression (61 ms)
    Documentation System Integration
      ‚àö API documentation integration with live endpoints (53 ms)
      ‚àö User documentation integration with search functionality (56 ms)
    System Health and Monitoring
      ‚àö Overall system health validation (82 ms)

[2026-01-28 14:22:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:17] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:17] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:17] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:17] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:17] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:17] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:17] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:17] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:17] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:18] info: [GET] /api/horses/1'%20OR%20'1'='1
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1667MB
[2026-01-28 14:22:18] info: [auth:gl3vjl] Starting auth for GET /horses/1'%20OR%20'1'='1
[2026-01-28 14:22:18] info: [auth:gl3vjl] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:gl3vjl] Token from header: true
[2026-01-28 14:22:18] info: [auth:gl3vjl] Authenticated user 064924f2-caa7-486a-8213-f8a2e7c88857
[2026-01-28 14:22:18] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1669MB
[2026-01-28 14:22:18] info: [auth:ddo6c] Starting auth for GET /horses/1;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:22:18] info: [auth:ddo6c] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:ddo6c] Token from header: true
[2026-01-28 14:22:18] info: [auth:ddo6c] Authenticated user 8a0ab401-c97d-4581-9e98-410b8a1a529e
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20-- - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1670MB
[2026-01-28 14:22:18] info: [auth:9xh5o] Starting auth for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:22:18] info: [auth:9xh5o] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:9xh5o] Token from header: true
[2026-01-28 14:22:18] info: [auth:9xh5o] Authenticated user 0c7cbc19-ddac-40d4-abf4-cdc1d97a2eac
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1671MB
[2026-01-28 14:22:18] info: [auth:5ervto] Starting auth for GET /horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200
[2026-01-28 14:22:18] info: [auth:5ervto] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:5ervto] Token from header: true
[2026-01-28 14:22:18] info: [auth:5ervto] Authenticated user 2cad56b0-1c5f-43ad-93b5-a7000756197c
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/0x31
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1672MB
[2026-01-28 14:22:18] info: [auth:88dcdi] Starting auth for GET /horses/0x31
[2026-01-28 14:22:18] info: [auth:88dcdi] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:88dcdi] Token from header: true
[2026-01-28 14:22:18] info: [auth:88dcdi] Authenticated user 2153960a-1ca4-48eb-9b4f-810ba4aa568a
[2026-01-28 14:22:18] info: [GET] /api/horses/0x31 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/147323'%20AND%201=1%20AND%20'1'='1
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1672MB
[2026-01-28 14:22:18] info: [auth:upq8jr] Starting auth for GET /horses/147323'%20AND%201=1%20AND%20'1'='1
[2026-01-28 14:22:18] info: [auth:upq8jr] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:upq8jr] Token from header: true
[2026-01-28 14:22:18] info: [auth:upq8jr] Authenticated user 69cb6ef4-4a96-43b6-a37a-4d1cde9f7524
[2026-01-28 14:22:18] info: [GET] /api/horses/147323'%20AND%201=1%20AND%20'1'='1 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1673MB
[2026-01-28 14:22:18] info: [auth:lmsngj] Starting auth for GET /horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--
[2026-01-28 14:22:18] info: [auth:lmsngj] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:lmsngj] Token from header: true
[2026-01-28 14:22:18] info: [auth:lmsngj] Authenticated user 7febb950-3735-466f-a8a1-c63b8cc32f47
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20-- - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20--
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1674MB
[2026-01-28 14:22:18] info: [auth:jaappu] Starting auth for GET /horses/1;%20SELECT%20pg_sleep(5);%20--
[2026-01-28 14:22:18] info: [auth:jaappu] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:jaappu] Token from header: true
[2026-01-28 14:22:18] info: [auth:jaappu] Authenticated user 84952eed-e5f3-4bdb-bc35-439bcb9340d0
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20-- - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0)
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1674MB
[2026-01-28 14:22:18] info: [auth:1e6bb] Starting auth for GET /horses/1'%20AND%20(SELECT%201/0)
[2026-01-28 14:22:18] info: [auth:1e6bb] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:1e6bb] Token from header: true
[2026-01-28 14:22:18] info: [auth:1e6bb] Authenticated user c493328e-e5de-4715-b55d-4a3e9dc05a1e
[2026-01-28 14:22:18] warn: 404 - Route not found: GET /api/horses/1'%20AND%20(SELECT%201/0) from ::ffff:127.0.0.1
[2026-01-28 14:22:18] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0) - 404
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1677MB
[2026-01-28 14:22:18] info: [auth:xuv4s9] Starting auth for GET /horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users
[2026-01-28 14:22:18] info: [auth:xuv4s9] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:xuv4s9] Token from header: true
[2026-01-28 14:22:18] info: [auth:xuv4s9] Authenticated user 3af00206-f11f-4727-96b2-153fa3109530
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1678MB
[2026-01-28 14:22:18] info: [auth:fc2s3o] Starting auth for GET /horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1
[2026-01-28 14:22:18] info: [auth:fc2s3o] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:fc2s3o] Token from header: true
[2026-01-28 14:22:18] info: [auth:fc2s3o] Authenticated user 56ed9af1-2bda-40e7-aca6-e5e94a55116f
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20ORDER%20BY%20100
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1679MB
[2026-01-28 14:22:18] info: [auth:r4g86f] Starting auth for GET /horses/1%20ORDER%20BY%20100
[2026-01-28 14:22:18] info: [auth:r4g86f] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:r4g86f] Token from header: true
[2026-01-28 14:22:18] info: [auth:r4g86f] Authenticated user 35197b31-941b-4b57-80e7-5d8bbc169d2c
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20ORDER%20BY%20100 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1679MB
[2026-01-28 14:22:18] info: [auth:7w78xm] Starting auth for GET /horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL
[2026-01-28 14:22:18] info: [auth:7w78xm] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:7w78xm] Token from header: true
[2026-01-28 14:22:18] info: [auth:7w78xm] Authenticated user 2da46039-1f53-4a12-ab49-ad04d4aa3da2
[2026-01-28 14:22:18] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 14:22:18] info: [auth:nks1w] Starting auth for GET /horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200
[2026-01-28 14:22:18] info: [auth:nks1w] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:nks1w] Token from header: true
[2026-01-28 14:22:18] info: [auth:nks1w] Authenticated user 593c481c-7e85-413d-b18c-3cf54b58ab08
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=d8c41baf-dfa2-4eb3-a384-36fd2db91879
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1681MB
[2026-01-28 14:22:18] info: [auth:xd60n] Starting auth for GET /horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=d8c41baf-dfa2-4eb3-a384-36fd2db91879
[2026-01-28 14:22:18] info: [auth:xd60n] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:xd60n] Token from header: true
[2026-01-28 14:22:18] info: [auth:xd60n] Authenticated user d8c41baf-dfa2-4eb3-a384-36fd2db91879
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=d8c41baf-dfa2-4eb3-a384-36fd2db91879 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1669MB
[2026-01-28 14:22:18] info: [auth:xbcrd8] Starting auth for GET /horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)
[2026-01-28 14:22:18] info: [auth:xbcrd8] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:xbcrd8] Token from header: true
[2026-01-28 14:22:18] info: [auth:xbcrd8] Authenticated user a7157d1e-3288-4bfb-8050-b1c402a69a6b
[2026-01-28 14:22:18] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201) - 400
[2026-01-28 14:22:18] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1671MB
[2026-01-28 14:22:18] info: [auth:4xv5k9] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:4xv5k9] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:4xv5k9] Token from header: true
[2026-01-28 14:22:18] info: [auth:4xv5k9] Authenticated user 58d4adc1-b125-4132-8347-fda2a121d7f7
[2026-01-28 14:22:18] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1673MB
[2026-01-28 14:22:18] info: [auth:o7snqia] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:o7snqia] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:o7snqia] Token from header: true
[2026-01-28 14:22:18] info: [auth:o7snqia] Authenticated user c78a2e17-b6b3-496e-bee7-64edfc7076cf
[2026-01-28 14:22:18] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20-- - 200
[2026-01-28 14:22:18] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1676MB
[2026-01-28 14:22:18] info: [auth:7acq37] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:7acq37] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:7acq37] Token from header: true
[2026-01-28 14:22:18] info: [auth:7acq37] Authenticated user 313a1855-6cbc-4ca9-b932-6f7e0c6bebe9
[2026-01-28 14:22:18] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27 - 200
[2026-01-28 14:22:18] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1678MB
[2026-01-28 14:22:18] info: [auth:a547t] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:a547t] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:a547t] Token from header: true
[2026-01-28 14:22:18] info: [auth:a547t] Authenticated user d5818fba-d040-4378-bae0-e7cca890cdf4
[2026-01-28 14:22:18] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271 - 200
[2026-01-28 14:22:18] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20--
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 14:22:18] info: [auth:y67f85] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:y67f85] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:y67f85] Token from header: true
[2026-01-28 14:22:18] info: [auth:y67f85] Authenticated user 92751b4a-72f8-491f-aafa-63a8a0c24951
[2026-01-28 14:22:18] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20-- - 200
[2026-01-28 14:22:18] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1670MB
[2026-01-28 14:22:18] info: [auth:rj4lhv] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:rj4lhv] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:rj4lhv] Token from header: true
[2026-01-28 14:22:18] info: [auth:rj4lhv] Authenticated user 934f8c53-2feb-43dc-a974-c48de79e002d
[2026-01-28 14:22:18] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20-- - 200
[2026-01-28 14:22:18] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1673MB
[2026-01-28 14:22:18] info: [auth:ard0v] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:ard0v] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:ard0v] Token from header: true
[2026-01-28 14:22:18] info: [auth:ard0v] Authenticated user 82f16d70-2eb6-4126-8542-0fe29b0995ea
[2026-01-28 14:22:18] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271 - 400
[2026-01-28 14:22:18] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20--
[2026-01-28 14:22:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1674MB
[2026-01-28 14:22:18] info: [auth:k34x8n] Starting auth for GET /horses
[2026-01-28 14:22:18] info: [auth:k34x8n] Token from cookie: false
[2026-01-28 14:22:18] info: [auth:k34x8n] Token from header: true
[2026-01-28 14:22:18] info: [auth:k34x8n] Authenticated user af23c304-0494-4050-9e80-8fb54bb80e11
[2026-01-28 14:22:18] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20-- - 200
[2026-01-28 14:22:19] info: [POST] /api/horses
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1679MB
[2026-01-28 14:22:19] info: [auth:452a2i] Starting auth for POST /horses
[2026-01-28 14:22:19] info: [auth:452a2i] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:452a2i] Token from header: true
[2026-01-28 14:22:19] info: [auth:452a2i] Authenticated user 95e47b43-5f99-44f8-ac36-f0252d1c7fa5
[2026-01-28 14:22:19] info: [POST] /api/horses - 403
[2026-01-28 14:22:19] info: [PUT] /api/auth/profile
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1682MB
[2026-01-28 14:22:19] info: [auth:kl7zkt] Starting auth for PUT /profile
[2026-01-28 14:22:19] info: [auth:kl7zkt] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:kl7zkt] Token from header: true
[2026-01-28 14:22:19] info: [auth:kl7zkt] Authenticated user 87aaf3ae-e65a-4a67-8cb2-8cb88f77f231
[2026-01-28 14:22:19] warn: [Validation] Input validation failed
[2026-01-28 14:22:19] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:22:19] info: [POST] /api/horses/query
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 14:22:19] info: [auth:gt2lbrt] Starting auth for POST /horses/query
[2026-01-28 14:22:19] info: [auth:gt2lbrt] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:gt2lbrt] Token from header: true
[2026-01-28 14:22:19] info: [auth:gt2lbrt] Authenticated user 6fccdbd2-d88c-46e6-818d-e85a67bcee35
[2026-01-28 14:22:19] info: [POST] /api/horses/query - 403
[2026-01-28 14:22:19] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22}
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1681MB
[2026-01-28 14:22:19] info: [auth:2m7vke] Starting auth for GET /horses
[2026-01-28 14:22:19] info: [auth:2m7vke] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:2m7vke] Token from header: true
[2026-01-28 14:22:19] info: [auth:2m7vke] Authenticated user 1576adf2-1a96-49c8-a7db-3d327e2b47b9
[2026-01-28 14:22:19] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22} - 200
[2026-01-28 14:22:19] info: [POST] /api/horses/search
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1684MB
[2026-01-28 14:22:19] info: [auth:mrw4w] Starting auth for POST /horses/search
[2026-01-28 14:22:19] info: [auth:mrw4w] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:mrw4w] Token from header: true
[2026-01-28 14:22:19] info: [auth:mrw4w] Authenticated user 4c978504-4184-4624-a3fd-3de6e004cc2a
[2026-01-28 14:22:19] info: [POST] /api/horses/search - 403
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20SELECT%20version()
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1672MB
[2026-01-28 14:22:19] info: [auth:ttqqv] Starting auth for GET /horses/1;%20SELECT%20version()
[2026-01-28 14:22:19] info: [auth:ttqqv] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:ttqqv] Token from header: true
[2026-01-28 14:22:19] info: [auth:ttqqv] Authenticated user 2772e3c0-e4a5-40ea-801a-22ef60240f60
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20SELECT%20version() - 400
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 14:22:19] info: [auth:5bkrlh5] Starting auth for GET /horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'
[2026-01-28 14:22:19] info: [auth:5bkrlh5] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:5bkrlh5] Token from header: true
[2026-01-28 14:22:19] info: [auth:5bkrlh5] Authenticated user c3bb7114-0b5d-45ef-acae-e865bd16bed0
[2026-01-28 14:22:19] warn: 404 - Route not found: GET /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' from ::ffff:127.0.0.1
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' - 404
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd')
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1677MB
[2026-01-28 14:22:19] info: [auth:khm8el] Starting auth for GET /horses/1;%20SELECT%20pg_read_file('/etc/passwd')
[2026-01-28 14:22:19] info: [auth:khm8el] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:khm8el] Token from header: true
[2026-01-28 14:22:19] info: [auth:khm8el] Authenticated user 0c0d47fb-74e7-44d9-a6a6-b80bcc7288c6
[2026-01-28 14:22:19] warn: 404 - Route not found: GET /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') from ::ffff:127.0.0.1
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') - 404
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234)
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1679MB
[2026-01-28 14:22:19] info: [auth:zjrzzj] Starting auth for GET /horses/1;%20SELECT%20lo_create(1234)
[2026-01-28 14:22:19] info: [auth:zjrzzj] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:zjrzzj] Token from header: true
[2026-01-28 14:22:19] info: [auth:zjrzzj] Authenticated user e35d27c0-50d7-494b-a125-863351b09458
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234) - 400
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20CALL%20malicious_procedure()
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 14:22:19] info: [auth:8fk7y7] Starting auth for GET /horses/1;%20CALL%20malicious_procedure()
[2026-01-28 14:22:19] info: [auth:8fk7y7] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:8fk7y7] Token from header: true
[2026-01-28 14:22:19] info: [auth:8fk7y7] Authenticated user fd82760d-52e4-48a3-bda8-fce33ea8d54f
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20CALL%20malicious_procedure() - 400
[2026-01-28 14:22:19] info: [POST] /api/horses/batch-update
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1681MB
[2026-01-28 14:22:19] info: [auth:z1yvy] Starting auth for POST /horses/batch-update
[2026-01-28 14:22:19] info: [auth:z1yvy] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:z1yvy] Token from header: true
[2026-01-28 14:22:19] info: [auth:z1yvy] Authenticated user 8b9261c9-9deb-44c7-94c6-73188e7c8195
[2026-01-28 14:22:19] info: [POST] /api/horses/batch-update - 403
[2026-01-28 14:22:19] info: [POST] /api/grooms/batch-delete
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1684MB
[2026-01-28 14:22:19] info: [auth:c9m52o] Starting auth for POST /grooms/batch-delete
[2026-01-28 14:22:19] info: [auth:c9m52o] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:c9m52o] Token from header: true
[2026-01-28 14:22:19] info: [auth:c9m52o] Authenticated user 7b4a545a-9d91-473c-b2d4-9cad22c8b615
[2026-01-28 14:22:19] info: [POST] /api/grooms/batch-delete - 403
[2026-01-28 14:22:19] info: [GET] /api/horses/invalid-sql-injection
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1686MB
[2026-01-28 14:22:19] info: [auth:pr0f34] Starting auth for GET /horses/invalid-sql-injection
[2026-01-28 14:22:19] info: [auth:pr0f34] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:pr0f34] Token from header: true
[2026-01-28 14:22:19] info: [auth:pr0f34] Authenticated user 8a058c30-e139-4df7-919c-70a8acade2f5
[2026-01-28 14:22:19] info: [GET] /api/horses/invalid-sql-injection - 400
[2026-01-28 14:22:19] info: [GET] /api/horses/1'%20OR%20'1'='1
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 14:22:19] info: [auth:3epwra] Starting auth for GET /horses/1'%20OR%20'1'='1
[2026-01-28 14:22:19] info: [auth:3epwra] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:3epwra] Token from header: true
[2026-01-28 14:22:19] info: [auth:3epwra] Authenticated user 361818c3-98d5-4be8-a643-b4ccfd7d6623
[2026-01-28 14:22:19] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1687MB
[2026-01-28 14:22:19] info: [auth:fqpy3d] Starting auth for GET /horses/1;%20DROP%20TABLE%20horses
[2026-01-28 14:22:19] info: [auth:fqpy3d] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:fqpy3d] Token from header: true
[2026-01-28 14:22:19] info: [auth:fqpy3d] Authenticated user 361818c3-98d5-4be8-a643-b4ccfd7d6623
[2026-01-28 14:22:19] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses - 400
[2026-01-28 14:22:19] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1683MB
[2026-01-28 14:22:19] info: [auth:53kwqs] Starting auth for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:22:19] info: [auth:53kwqs] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:53kwqs] Token from header: true
[2026-01-28 14:22:19] info: [auth:53kwqs] Authenticated user 361818c3-98d5-4be8-a643-b4ccfd7d6623
[2026-01-28 14:22:19] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400
[2026-01-28 14:22:19] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users)
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 14:22:19] info: [auth:gw3tmj] Starting auth for GET /horses/1%20AND%20(SELECT%201%20FROM%20users)
[2026-01-28 14:22:19] info: [auth:gw3tmj] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:gw3tmj] Token from header: true
[2026-01-28 14:22:19] info: [auth:gw3tmj] Authenticated user 361818c3-98d5-4be8-a643-b4ccfd7d6623
[2026-01-28 14:22:19] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users) - 400
[2026-01-28 14:22:19] info: [GET] /api/horses/147356
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1685MB
[2026-01-28 14:22:19] info: [auth:lz8o6] Starting auth for GET /horses/147356
[2026-01-28 14:22:19] info: [auth:lz8o6] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:lz8o6] Token from header: true
[2026-01-28 14:22:19] info: [auth:lz8o6] Authenticated user 9d34db2d-1fd1-4d10-8d96-f364f88210f1
[2026-01-28 14:22:19] info: [ownership] Validated ownership: user 9d34db2d-1fd1-4d10-8d96-f364f88210f1 owns horse 147356
[2026-01-28 14:22:19] info: [GET] /api/horses/147356 - 200
[2026-01-28 14:22:19] info: [POST] /api/horses
[2026-01-28 14:22:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 14:22:19] info: [auth:smpbnc] Starting auth for POST /horses
[2026-01-28 14:22:19] info: [auth:smpbnc] Token from cookie: false
[2026-01-28 14:22:19] info: [auth:smpbnc] Token from header: true
[2026-01-28 14:22:19] info: [auth:smpbnc] Authenticated user 80b43178-697b-4fdc-ad2b-2fe19fe0aadd
[2026-01-28 14:22:19] info: [POST] /api/horses - 403
PASS __tests__/integration/security/sql-injection-attempts.test.mjs
  SQL Injection Attempts Integration Tests
    Classic SQL Injection in ID Parameters
      ‚àö should reject SQL injection in horse ID (212 ms)
      ‚àö should reject SQL injection with comment syntax (36 ms)
      ‚àö should reject SQL injection with union select (35 ms)
      ‚àö should reject SQL injection with nested queries (31 ms)
      ‚àö should reject SQL injection with hex encoding (30 ms)
    Blind SQL Injection Attempts
      ‚àö should reject boolean-based blind injection (31 ms)
      ‚àö should reject time-based blind injection (31 ms)
      ‚àö should reject PostgreSQL-specific time injection (30 ms)
      ‚àö should reject error-based blind injection (35 ms)
    Union-Based SQL Injection
      ‚àö should reject UNION SELECT attacks (30 ms)
      ‚àö should reject UNION ALL attacks (32 ms)
      ‚àö should reject UNION with ORDER BY column enumeration (31 ms)
      ‚àö should reject UNION with NULL padding (32 ms)
    Stacked Queries
      ‚àö should reject semicolon-separated queries (36 ms)
      ‚àö should reject multiple statements in ownership check (32 ms)
      ‚àö should reject batch operations via stacking (33 ms)
    SQL Injection in Search/Filter Parameters
      ‚àö should reject SQL injection in breed filter (32 ms)
      ‚àö should reject SQL injection in name search (38 ms)
      ‚àö should reject SQL injection in sort parameter (37 ms)
      ‚àö should reject SQL injection in LIKE wildcards (38 ms)
      ‚àö should reject SQL injection in IN clause (40 ms)
    SQL Injection in JSON/JSONB Queries
      ‚àö should reject SQL injection in JSONB path (37 ms)
      ‚àö should reject SQL injection in JSON operators (31 ms)
      ‚àö should reject SQL injection in JSON array queries (36 ms)
    Second-Order SQL Injection
      ‚àö should sanitize stored data used in subsequent queries (45 ms)
      ‚àö should prevent injection via profile data used in ownership checks (34 ms)
    ORM Bypass Attempts (Prisma)
      ‚àö should reject raw query injection via Prisma (31 ms)
      ‚àö should reject Prisma findRaw injection attempts (36 ms)
      ‚àö should reject $queryRaw parameter injection (31 ms)
    PostgreSQL-Specific Injection Attacks
      ‚àö should reject PostgreSQL function calls (29 ms)
      ‚àö should reject PostgreSQL COPY command (35 ms)
      ‚àö should reject pg_read_file attempts (32 ms)
      ‚àö should reject large object manipulation (31 ms)
      ‚àö should reject PostgreSQL stored procedure execution (30 ms)
    SQL Injection in Batch Operations
      ‚àö should reject SQL injection in batch horse updates (37 ms)
      ‚àö should reject SQL injection in batch groom deletion (34 ms)
    SQL Injection Error Handling
      ‚àö should not leak database structure in error messages (31 ms)
      ‚àö should return consistent error format for all injection attempts (97 ms)
    Parameterized Query Validation
      ‚àö should use parameterized queries for ownership checks (40 ms)
      ‚àö should properly escape special characters in valid data (31 ms)

[2026-01-28 14:22:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:19] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:20] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:20] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:20] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:20] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:20] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:20] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:20] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:20] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:20] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:20] info: [GET] /api/horses/147358?id=147358&id=999
[2026-01-28 14:22:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1733MB
[2026-01-28 14:22:20] info: [auth:cubwuo] Starting auth for GET /horses/147358
[2026-01-28 14:22:20] info: [auth:cubwuo] Token from cookie: false
[2026-01-28 14:22:20] info: [auth:cubwuo] Token from header: true
[2026-01-28 14:22:20] info: [auth:cubwuo] Authenticated user 0157aadf-6abe-4348-a73f-8729b1fc869b
[2026-01-28 14:22:20] info: [GET] /api/horses/147358?id=147358&id=999 - 400
[2026-01-28 14:22:20] info: [GET] /api/horses?id=1&id=2&id=3
[2026-01-28 14:22:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1735MB
[2026-01-28 14:22:20] info: [auth:5r8yz] Starting auth for GET /horses
[2026-01-28 14:22:20] info: [auth:5r8yz] Token from cookie: false
[2026-01-28 14:22:20] info: [auth:5r8yz] Token from header: true
[2026-01-28 14:22:20] info: [auth:5r8yz] Authenticated user 9b445a7a-80a7-48b0-b5e4-a41ede7fa7b8
[2026-01-28 14:22:20] info: [GET] /api/horses?id=1&id=2&id=3 - 400
[2026-01-28 14:22:20] info: [GET] /api/horses/147360?sort=name&sort=age
[2026-01-28 14:22:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1735MB
[2026-01-28 14:22:20] info: [auth:mehzy] Starting auth for GET /horses/147360
[2026-01-28 14:22:20] info: [auth:mehzy] Token from cookie: false
[2026-01-28 14:22:20] info: [auth:mehzy] Token from header: true
[2026-01-28 14:22:20] info: [auth:mehzy] Authenticated user c84b58cf-95b0-422a-bd78-14659aac3a91
[2026-01-28 14:22:20] info: [ownership] Validated ownership: user c84b58cf-95b0-422a-bd78-14659aac3a91 owns horse 147360
[2026-01-28 14:22:21] info: [GET] /api/horses/147360?sort=name&sort=age - 200
[2026-01-28 14:22:21] info: [PUT] /api/horses/147361
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1740MB
[2026-01-28 14:22:21] info: [auth:7f19r] Starting auth for PUT /horses/147361
[2026-01-28 14:22:21] info: [auth:7f19r] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:7f19r] Token from header: true
[2026-01-28 14:22:21] info: [auth:7f19r] Authenticated user 3306d707-32fe-4678-9ed6-b9a8ab78005a
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 3306d707-32fe-4678-9ed6-b9a8ab78005a owns horse 147361
[2026-01-28 14:22:21] info: [PUT] /api/horses/147361 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147362
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:21] info: [auth:t06pso] Starting auth for PUT /horses/147362
[2026-01-28 14:22:21] info: [auth:t06pso] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:t06pso] Token from header: true
[2026-01-28 14:22:21] info: [auth:t06pso] Authenticated user 366cb7ed-c179-401f-9dd0-4755a5b2b701
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 366cb7ed-c179-401f-9dd0-4755a5b2b701 owns horse 147362
[2026-01-28 14:22:21] info: [PUT] /api/horses/147362 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147363
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1745MB
[2026-01-28 14:22:21] info: [auth:pt8ad] Starting auth for PUT /horses/147363
[2026-01-28 14:22:21] info: [auth:pt8ad] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:pt8ad] Token from header: true
[2026-01-28 14:22:21] info: [auth:pt8ad] Authenticated user 36212e22-9c77-42f9-995c-aa10a3075df0
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 36212e22-9c77-42f9-995c-aa10a3075df0 owns horse 147363
[2026-01-28 14:22:21] info: [PUT] /api/horses/147363 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147364
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1734MB
[2026-01-28 14:22:21] info: [auth:byrz78] Starting auth for PUT /horses/147364
[2026-01-28 14:22:21] info: [auth:byrz78] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:byrz78] Token from header: true
[2026-01-28 14:22:21] info: [auth:byrz78] Authenticated user 3f77f611-d717-4032-9cc6-0a6c5dd46679
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 3f77f611-d717-4032-9cc6-0a6c5dd46679 owns horse 147364
[2026-01-28 14:22:21] info: [PUT] /api/horses/147364 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147365
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1737MB
[2026-01-28 14:22:21] info: [auth:40yaur] Starting auth for PUT /horses/147365
[2026-01-28 14:22:21] info: [auth:40yaur] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:40yaur] Token from header: true
[2026-01-28 14:22:21] info: [auth:40yaur] Authenticated user cedc0d31-a9bc-4650-ab52-76799d844141
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user cedc0d31-a9bc-4650-ab52-76799d844141 owns horse 147365
[2026-01-28 14:22:21] info: [PUT] /api/horses/147365 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147366
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1740MB
[2026-01-28 14:22:21] info: [auth:1j94xg] Starting auth for PUT /horses/147366
[2026-01-28 14:22:21] info: [auth:1j94xg] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:1j94xg] Token from header: true
[2026-01-28 14:22:21] info: [auth:1j94xg] Authenticated user 47bb22cc-d3a6-4c48-8393-b77c946d6d2a
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 47bb22cc-d3a6-4c48-8393-b77c946d6d2a owns horse 147366
[2026-01-28 14:22:21] info: [PUT] /api/horses/147366 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147367
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1741MB
[2026-01-28 14:22:21] info: [auth:18i8b] Starting auth for PUT /horses/147367
[2026-01-28 14:22:21] info: [auth:18i8b] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:18i8b] Token from header: true
[2026-01-28 14:22:21] info: [auth:18i8b] Authenticated user 47c3a527-ccc3-4fe4-a6bb-627b5c41ec54
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 47c3a527-ccc3-4fe4-a6bb-627b5c41ec54 owns horse 147367
[2026-01-28 14:22:21] info: [PUT] /api/horses/147367 - 400
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:21] info: [auth:xd7b7] Starting auth for POST /horses/batch-update
[2026-01-28 14:22:21] info: [auth:xd7b7] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:xd7b7] Token from header: true
[2026-01-28 14:22:21] info: [auth:xd7b7] Authenticated user 3f52c6d4-7247-4ff8-8a83-eae35208f4f6
[2026-01-28 14:22:21] info: [auth:2s3wj4] Starting auth for POST /batch-update
[2026-01-28 14:22:21] info: [auth:2s3wj4] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:2s3wj4] Token from header: true
[2026-01-28 14:22:21] info: [auth:2s3wj4] Authenticated user 3f52c6d4-7247-4ff8-8a83-eae35208f4f6
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1746MB
[2026-01-28 14:22:21] info: [auth:lqred] Starting auth for POST /horses/batch-update
[2026-01-28 14:22:21] info: [auth:lqred] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:lqred] Token from header: true
[2026-01-28 14:22:21] info: [auth:lqred] Authenticated user 968008d8-257b-4ca7-81c7-c66388ee1227
[2026-01-28 14:22:21] info: [auth:djjdim] Starting auth for POST /batch-update
[2026-01-28 14:22:21] info: [auth:djjdim] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:djjdim] Token from header: true
[2026-01-28 14:22:21] info: [auth:djjdim] Authenticated user 968008d8-257b-4ca7-81c7-c66388ee1227
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1737MB
[2026-01-28 14:22:21] info: [auth:c0ce1k] Starting auth for POST /horses/batch-update
[2026-01-28 14:22:21] info: [auth:c0ce1k] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:c0ce1k] Token from header: true
[2026-01-28 14:22:21] info: [auth:c0ce1k] Authenticated user bea99b37-712c-45bf-8e0b-84c34ef1b0a2
[2026-01-28 14:22:21] info: [auth:lb0le7] Starting auth for POST /batch-update
[2026-01-28 14:22:21] info: [auth:lb0le7] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:lb0le7] Token from header: true
[2026-01-28 14:22:21] info: [auth:lb0le7] Authenticated user bea99b37-712c-45bf-8e0b-84c34ef1b0a2
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1740MB
[2026-01-28 14:22:21] info: [auth:99dob] Starting auth for POST /horses/batch-update
[2026-01-28 14:22:21] info: [auth:99dob] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:99dob] Token from header: true
[2026-01-28 14:22:21] info: [auth:99dob] Authenticated user 5ba8ddc7-4645-4784-987d-27ce78bad8a1
[2026-01-28 14:22:21] info: [auth:aw6f1x] Starting auth for POST /batch-update
[2026-01-28 14:22:21] info: [auth:aw6f1x] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:aw6f1x] Token from header: true
[2026-01-28 14:22:21] info: [auth:aw6f1x] Authenticated user 5ba8ddc7-4645-4784-987d-27ce78bad8a1
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1742MB
[2026-01-28 14:22:21] info: [auth:m9glqj] Starting auth for POST /horses/batch-update
[2026-01-28 14:22:21] info: [auth:m9glqj] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:m9glqj] Token from header: true
[2026-01-28 14:22:21] info: [auth:m9glqj] Authenticated user 71e08ca6-2c2a-4bf5-96a4-1cb55eafeace
[2026-01-28 14:22:21] info: [auth:onkj2h] Starting auth for POST /batch-update
[2026-01-28 14:22:21] info: [auth:onkj2h] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:onkj2h] Token from header: true
[2026-01-28 14:22:21] info: [auth:onkj2h] Authenticated user 71e08ca6-2c2a-4bf5-96a4-1cb55eafeace
[2026-01-28 14:22:21] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:22:21] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1745MB
[2026-01-28 14:22:21] info: [auth:9zpjwf] Starting auth for GET /horses
[2026-01-28 14:22:21] info: [auth:9zpjwf] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:9zpjwf] Token from header: true
[2026-01-28 14:22:21] info: [auth:9zpjwf] Authenticated user b03b99fd-ad66-454a-9b84-3f5c2d73caa3
[2026-01-28 14:22:21] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400
[2026-01-28 14:22:21] info: [GET] /api/horses?name[$ne]=null
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1745MB
[2026-01-28 14:22:21] info: [auth:ej0i6] Starting auth for GET /horses
[2026-01-28 14:22:21] info: [auth:ej0i6] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:ej0i6] Token from header: true
[2026-01-28 14:22:21] info: [auth:ej0i6] Authenticated user c08f3de9-3d2f-4d25-a76e-602ac1f3f07a
[2026-01-28 14:22:21] info: [GET] /api/horses?name[$ne]=null - 400
[2026-01-28 14:22:21] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1746MB
[2026-01-28 14:22:21] info: [auth:k2kstc] Starting auth for GET /horses
[2026-01-28 14:22:21] info: [auth:k2kstc] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:k2kstc] Token from header: true
[2026-01-28 14:22:21] info: [auth:k2kstc] Authenticated user 29b68a1a-d03c-4ae8-85e6-358180f0d478
[2026-01-28 14:22:21] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E - 400
[2026-01-28 14:22:21] info: [GET] /api/horses?name=Horse%00Admin
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1746MB
[2026-01-28 14:22:21] info: [auth:7zinde] Starting auth for GET /horses
[2026-01-28 14:22:21] info: [auth:7zinde] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:7zinde] Token from header: true
[2026-01-28 14:22:21] info: [auth:7zinde] Authenticated user fbf498d7-2a5b-444e-a66c-1cc4a7871130
[2026-01-28 14:22:21] info: [GET] /api/horses?name=Horse%00Admin - 400
[2026-01-28 14:22:21] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1747MB
[2026-01-28 14:22:21] info: [auth:uzzlo] Starting auth for GET /horses
[2026-01-28 14:22:21] info: [auth:uzzlo] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:uzzlo] Token from header: true
[2026-01-28 14:22:21] info: [auth:uzzlo] Authenticated user f2ea9640-5c13-4cc0-8100-9341b3b9252c
[2026-01-28 14:22:21] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 414
[2026-01-28 14:22:21] error: [PUT] /api/horses/147378 - ERROR
[2026-01-28 14:22:21] error: Error Unexpected token 'n', "name=HackedName" is not valid JSON
[2026-01-28 14:22:21] info: [PUT] /api/horses/147379
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1742MB
[2026-01-28 14:22:21] info: [auth:s429bl] Starting auth for PUT /horses/147379
[2026-01-28 14:22:21] info: [auth:s429bl] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:s429bl] Token from header: true
[2026-01-28 14:22:21] info: [auth:s429bl] Authenticated user b0a9fb90-f942-46b9-ac9d-0c8adf6de0ad
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user b0a9fb90-f942-46b9-ac9d-0c8adf6de0ad owns horse 147379
[2026-01-28 14:22:21] info: [PUT] /api/horses/147379 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147380
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1744MB
[2026-01-28 14:22:21] info: [auth:1pvdqv] Starting auth for PUT /horses/147380
[2026-01-28 14:22:21] info: [auth:1pvdqv] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:1pvdqv] Token from header: true
[2026-01-28 14:22:21] info: [auth:1pvdqv] Authenticated user d984e1e3-3c5e-4fdd-b755-8b9f621b11f9
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user d984e1e3-3c5e-4fdd-b755-8b9f621b11f9 owns horse 147380
[2026-01-28 14:22:21] info: [PUT] /api/horses/147380 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147381
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1745MB
[2026-01-28 14:22:21] info: [auth:tgrrgo] Starting auth for PUT /horses/147381
[2026-01-28 14:22:21] info: [auth:tgrrgo] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:tgrrgo] Token from header: true
[2026-01-28 14:22:21] info: [auth:tgrrgo] Authenticated user 0dafafe3-4ff8-4a91-81d5-4cac4dfa4de3
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 0dafafe3-4ff8-4a91-81d5-4cac4dfa4de3 owns horse 147381
[2026-01-28 14:22:21] info: [PUT] /api/horses/147381 - 415
[2026-01-28 14:22:21] info: [PUT] /api/horses/147382
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1747MB
[2026-01-28 14:22:21] info: [auth:8npoy] Starting auth for PUT /horses/147382
[2026-01-28 14:22:21] info: [auth:8npoy] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:8npoy] Token from header: true
[2026-01-28 14:22:21] info: [auth:8npoy] Authenticated user 3860cad8-596a-412f-9f8e-363891c3986a
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 3860cad8-596a-412f-9f8e-363891c3986a owns horse 147382
[2026-01-28 14:22:21] info: [PUT] /api/horses/147382 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147383
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1749MB
[2026-01-28 14:22:21] info: [auth:z8kgys] Starting auth for PUT /horses/147383
[2026-01-28 14:22:21] info: [auth:z8kgys] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:z8kgys] Token from header: true
[2026-01-28 14:22:21] info: [auth:z8kgys] Authenticated user a695ed27-966c-4bfe-a419-9a5ac38eeca1
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user a695ed27-966c-4bfe-a419-9a5ac38eeca1 owns horse 147383
[2026-01-28 14:22:21] info: [PUT] /api/horses/147383 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147384
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1751MB
[2026-01-28 14:22:21] info: [auth:rg103] Starting auth for PUT /horses/147384
[2026-01-28 14:22:21] info: [auth:rg103] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:rg103] Token from header: true
[2026-01-28 14:22:21] info: [auth:rg103] Authenticated user b3684ee8-e345-4182-b60b-2ab30fe4a0c1
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user b3684ee8-e345-4182-b60b-2ab30fe4a0c1 owns horse 147384
[2026-01-28 14:22:21] info: [PUT] /api/horses/147384 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147385
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1739MB
[2026-01-28 14:22:21] info: [auth:dnj3v] Starting auth for PUT /horses/147385
[2026-01-28 14:22:21] info: [auth:dnj3v] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:dnj3v] Token from header: true
[2026-01-28 14:22:21] info: [auth:dnj3v] Authenticated user bc144720-1dea-4668-8a26-6351ec4a6c4d
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user bc144720-1dea-4668-8a26-6351ec4a6c4d owns horse 147385
[2026-01-28 14:22:21] info: [PUT] /api/horses/147385 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147386
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:21] info: [auth:rwp8w9] Starting auth for PUT /horses/147386
[2026-01-28 14:22:21] info: [auth:rwp8w9] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:rwp8w9] Token from header: true
[2026-01-28 14:22:21] info: [auth:rwp8w9] Authenticated user a3f85609-c61e-4e28-8798-69da1489d8e2
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user a3f85609-c61e-4e28-8798-69da1489d8e2 owns horse 147386
[2026-01-28 14:22:21] info: [PUT] /api/horses/147386 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147387
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1745MB
[2026-01-28 14:22:21] info: [auth:6m4p0r] Starting auth for PUT /horses/147387
[2026-01-28 14:22:21] info: [auth:6m4p0r] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:6m4p0r] Token from header: true
[2026-01-28 14:22:21] info: [auth:6m4p0r] Authenticated user b1405c3d-b886-4c8d-86d8-a37ddc7318d2
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user b1405c3d-b886-4c8d-86d8-a37ddc7318d2 owns horse 147387
[2026-01-28 14:22:21] info: [PUT] /api/horses/147387 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147388
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1747MB
[2026-01-28 14:22:21] info: [auth:567dyh] Starting auth for PUT /horses/147388
[2026-01-28 14:22:21] info: [auth:567dyh] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:567dyh] Token from header: true
[2026-01-28 14:22:21] info: [auth:567dyh] Authenticated user 065d48ea-3222-4179-b5a2-a7c628dc43d6
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 065d48ea-3222-4179-b5a2-a7c628dc43d6 owns horse 147388
[2026-01-28 14:22:21] info: [PUT] /api/horses/147388 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147389
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1749MB
[2026-01-28 14:22:21] info: [auth:269bedy] Starting auth for PUT /horses/147389
[2026-01-28 14:22:21] info: [auth:269bedy] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:269bedy] Token from header: true
[2026-01-28 14:22:21] info: [auth:269bedy] Authenticated user 05645d76-25b4-4930-af00-1b08826f7b09
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 05645d76-25b4-4930-af00-1b08826f7b09 owns horse 147389
[2026-01-28 14:22:21] info: [PUT] /api/horses/147389 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147390
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1751MB
[2026-01-28 14:22:21] info: [auth:7dxt9] Starting auth for PUT /horses/147390
[2026-01-28 14:22:21] info: [auth:7dxt9] Token from cookie: false
[2026-01-28 14:22:21] info: [auth:7dxt9] Token from header: true
[2026-01-28 14:22:21] info: [auth:7dxt9] Authenticated user 766e8d41-8ef1-4809-8220-1cebe6261920
[2026-01-28 14:22:21] info: [ownership] Validated ownership: user 766e8d41-8ef1-4809-8220-1cebe6261920 owns horse 147390
[2026-01-28 14:22:21] info: [PUT] /api/horses/147390 - 400
[2026-01-28 14:22:21] info: [PUT] /api/horses/147391
[2026-01-28 14:22:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1753MB
[2026-01-28 14:22:21] info: [auth:zm5e2l] Starting auth for PUT /horses/147391
[2026-01-28 14:22:21] info: [auth:zm5e2l] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:zm5e2l] Token from header: true
[2026-01-28 14:22:22] info: [auth:zm5e2l] Authenticated user 8f5954af-3c30-407d-8b90-7833e4e3c9ab
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user 8f5954af-3c30-407d-8b90-7833e4e3c9ab owns horse 147391
[2026-01-28 14:22:22] info: [PUT] /api/horses/147391 - 400
[2026-01-28 14:22:22] info: [PUT] /api/horses/147392
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1741MB
[2026-01-28 14:22:22] info: [auth:lasaxr] Starting auth for PUT /horses/147392
[2026-01-28 14:22:22] info: [auth:lasaxr] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:lasaxr] Token from header: true
[2026-01-28 14:22:22] info: [auth:lasaxr] Authenticated user 83fb301d-5691-4b21-b834-bff5dd5877e2
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user 83fb301d-5691-4b21-b834-bff5dd5877e2 owns horse 147392
[2026-01-28 14:22:22] info: [PUT] /api/horses/147392 - 400
[2026-01-28 14:22:22] info: [PUT] /api/horses/147393
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1746MB
[2026-01-28 14:22:22] info: [auth:smahc] Starting auth for PUT /horses/147393
[2026-01-28 14:22:22] info: [auth:smahc] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:smahc] Token from header: true
[2026-01-28 14:22:22] info: [auth:smahc] Authenticated user 421a1306-4775-4bf7-bff2-bce261d7e44e
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user 421a1306-4775-4bf7-bff2-bce261d7e44e owns horse 147393
[2026-01-28 14:22:22] info: [PUT] /api/horses/147393 - 400
[2026-01-28 14:22:22] info: [PUT] /api/horses/147394
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1747MB
[2026-01-28 14:22:22] info: [auth:s8ogwnl] Starting auth for PUT /horses/147394
[2026-01-28 14:22:22] info: [auth:s8ogwnl] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:s8ogwnl] Token from header: true
[2026-01-28 14:22:22] info: [auth:s8ogwnl] Authenticated user e467b5b2-f84d-4ef9-962b-b8985ce8ae1a
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user e467b5b2-f84d-4ef9-962b-b8985ce8ae1a owns horse 147394
[2026-01-28 14:22:22] info: [PUT] /api/horses/147394 - 400
[2026-01-28 14:22:22] info: [PUT] /api/horses/147395
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1749MB
[2026-01-28 14:22:22] info: [auth:zeq78l] Starting auth for PUT /horses/147395
[2026-01-28 14:22:22] info: [auth:zeq78l] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:zeq78l] Token from header: true
[2026-01-28 14:22:22] info: [auth:zeq78l] Authenticated user f20bc922-34a4-4b32-8452-2b88f36e35dd
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user f20bc922-34a4-4b32-8452-2b88f36e35dd owns horse 147395
[2026-01-28 14:22:22] info: [PUT] /api/horses/147395 - 400
[2026-01-28 14:22:22] info: [GET] /api/horses/147396
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1750MB
[2026-01-28 14:22:22] info: [auth:enc16] Starting auth for GET /horses/147396
[2026-01-28 14:22:22] info: [auth:enc16] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:enc16] Token from header: true
[2026-01-28 14:22:22] info: [auth:enc16] Authenticated user 6eac00cd-0cd5-43e5-a0bf-4336e2233b00
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user 6eac00cd-0cd5-43e5-a0bf-4336e2233b00 owns horse 147396
[2026-01-28 14:22:22] info: [GET] /api/horses/147396 - 200
[2026-01-28 14:22:22] info: [GET] /api/horses
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1753MB
[2026-01-28 14:22:22] info: [auth:9wyfe] Starting auth for GET /horses
[2026-01-28 14:22:22] info: [auth:9wyfe] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:9wyfe] Token from header: true
[2026-01-28 14:22:22] info: [auth:9wyfe] Authenticated user 6d9c4e56-5992-4bf4-86f8-8966c2e26c0c
[2026-01-28 14:22:22] info: [GET] /api/horses - 400
[2026-01-28 14:22:22] info: [GET] /api/horses/147398
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 14:22:22] info: [auth:24zpik] Starting auth for GET /horses/147398
[2026-01-28 14:22:22] info: [auth:24zpik] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:24zpik] Token from header: true
[2026-01-28 14:22:22] info: [auth:24zpik] Authenticated user 4950e0af-6fa5-4025-8d79-c24689dfbccb
[2026-01-28 14:22:22] info: [GET] /api/horses/147398 - 406
[2026-01-28 14:22:22] info: [PUT] /api/horses/147399
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:22] info: [auth:8668e] Starting auth for PUT /horses/147399
[2026-01-28 14:22:22] info: [auth:8668e] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:8668e] Token from header: true
[2026-01-28 14:22:22] info: [auth:8668e] Authenticated user 915e11f7-7944-4636-b427-eb7127f0a409
[2026-01-28 14:22:22] info: [PUT] /api/horses/147399
[2026-01-28 14:22:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 14:22:22] info: [auth:czunf9] Starting auth for PUT /horses/147399
[2026-01-28 14:22:22] info: [auth:czunf9] Token from cookie: false
[2026-01-28 14:22:22] info: [auth:czunf9] Token from header: true
[2026-01-28 14:22:22] info: [auth:czunf9] Authenticated user 915e11f7-7944-4636-b427-eb7127f0a409
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user 915e11f7-7944-4636-b427-eb7127f0a409 owns horse 147399
[2026-01-28 14:22:22] info: [PUT] /api/horses/147399 - 400
[2026-01-28 14:22:22] info: [ownership] Validated ownership: user 915e11f7-7944-4636-b427-eb7127f0a409 owns horse 147399
[2026-01-28 14:22:22] info: [PUT] /api/horses/147399 - 400
PASS __tests__/integration/security/parameter-pollution.test.mjs
  Parameter Pollution Attack Integration Tests
    HTTP Parameter Pollution (HPP)
      ‚àö should reject duplicate id parameters in query string (101 ms)
      ‚àö should reject duplicate id parameters in different positions (32 ms)
      ‚àö should use first parameter value when duplicates present (40 ms)
      ‚àö should reject array-syntax parameters where not expected (42 ms)
      ‚àö should reject mixed type parameters (34 ms)
    JSON Parameter Pollution
      ‚àö should reject duplicate keys in JSON payload (37 ms)
      ‚àö should reject nested parameter pollution (34 ms)
      ‚àö should reject prototype pollution attempts (31 ms)
      ‚àö should reject constructor pollution attempts (34 ms)
      ‚àö should sanitize JSON keys with special characters (33 ms)
    Array Parameter Manipulation
      ‚àö should reject oversized arrays in batch operations (36 ms)
      ‚àö should reject mixed-type arrays (33 ms)
      ‚àö should reject negative indices in array parameters (32 ms)
      ‚àö should reject sparse arrays with undefined holes (32 ms)
      ‚àö should enforce maximum array nesting depth (33 ms)
    Query String Pollution
      ‚àö should reject SQL injection in query parameters (28 ms)
      ‚àö should reject NoSQL injection in query parameters (28 ms)
      ‚àö should reject encoded special characters in parameters (28 ms)
      ‚àö should reject null bytes in query strings (28 ms)
      ‚àö should enforce query string length limits (30 ms)
    Content-Type Manipulation
      ‚àö should reject mismatched Content-Type and body format (23 ms)
      ‚àö should reject Content-Type charset manipulation (33 ms)
      ‚àö should reject multipart/form-data without proper boundaries (32 ms)
      ‚àö should accept only allowed Content-Types (31 ms)
    Nested Object Pollution
      ‚àö should reject excessive nesting depth (32 ms)
      ‚àö should reject circular references in objects (33 ms)
      ‚àö should sanitize nested object keys (33 ms)
      ‚àö should reject objects with numeric string keys (34 ms)
    Type Coercion Attacks
      ‚àö should reject boolean as string (32 ms)
      ‚àö should reject object as number (33 ms)
      ‚àö should reject array as string (32 ms)
      ‚àö should reject numeric string with leading zeros (31 ms)
      ‚àö should reject scientific notation where integers expected (33 ms)
      ‚àö should reject Infinity and NaN values (31 ms)
    Mass Assignment Vulnerabilities
      ‚àö should reject attempts to modify protected fields (36 ms)
      ‚àö should reject attempts to set createdAt/updatedAt manually (36 ms)
      ‚àö should only allow whitelisted fields in updates (32 ms)
      ‚àö should reject attempts to add new fields (32 ms)
    Parameter Injection via Headers
      ‚àö should reject parameter injection via custom headers (36 ms)
      ‚àö should reject SQL injection in custom headers (29 ms)
      ‚àö should reject malicious values in Accept header (30 ms)
    Race Condition via Parameter Timing
      ‚àö should prevent race conditions in concurrent updates (58 ms)

[2026-01-28 14:22:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:22] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:22] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:22] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:23] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:23] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:23] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:23] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:23] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:23] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:23] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:23] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:23] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:23] info: [GET] /api/competition/disciplines
[2026-01-28 14:22:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1802MB
[2026-01-28 14:22:23] info: [auth:gh3ha] Starting auth for GET /competition/disciplines
[2026-01-28 14:22:23] info: [auth:gh3ha] Token from cookie: false
[2026-01-28 14:22:23] info: [auth:gh3ha] Token from header: true
[2026-01-28 14:22:23] info: [auth:gh3ha] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:23] info: [GET] /api/competition/disciplines - 200
[2026-01-28 14:22:23] info: [GET] /api/competition/eligibility/147400/Racing
[2026-01-28 14:22:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1806MB
[2026-01-28 14:22:23] info: [auth:7y8r] Starting auth for GET /competition/eligibility/147400/Racing
[2026-01-28 14:22:23] info: [auth:7y8r] Token from cookie: false
[2026-01-28 14:22:23] info: [auth:7y8r] Token from header: true
[2026-01-28 14:22:24] info: [auth:7y8r] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:h1k1tr] Starting auth for GET /eligibility/147400/Racing
[2026-01-28 14:22:24] info: [auth:h1k1tr] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:h1k1tr] Token from header: true
[2026-01-28 14:22:24] info: [auth:h1k1tr] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [ownership] Validated ownership: user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f owns horse 147400
[2026-01-28 14:22:24] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147400 in Racing
[2026-01-28 14:22:24] info: [competitionRoutes.GET /eligibility] Horse 147400 eligibility checked for Racing
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147400/Racing - 200
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147400/Gaited
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1811MB
[2026-01-28 14:22:24] info: [auth:vnipg] Starting auth for GET /competition/eligibility/147400/Gaited
[2026-01-28 14:22:24] info: [auth:vnipg] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:vnipg] Token from header: true
[2026-01-28 14:22:24] info: [auth:vnipg] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:qn0kp] Starting auth for GET /eligibility/147400/Gaited
[2026-01-28 14:22:24] info: [auth:qn0kp] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:qn0kp] Token from header: true
[2026-01-28 14:22:24] info: [auth:qn0kp] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [ownership] Validated ownership: user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f owns horse 147400
[2026-01-28 14:22:24] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147400 in Gaited
[2026-01-28 14:22:24] info: [competitionRoutes.GET /eligibility] Horse 147400 eligibility checked for Gaited
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147400/Gaited - 200
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147400/InvalidDiscipline
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1802MB
[2026-01-28 14:22:24] info: [auth:spfkca] Starting auth for GET /competition/eligibility/147400/InvalidDiscipline
[2026-01-28 14:22:24] info: [auth:spfkca] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:spfkca] Token from header: true
[2026-01-28 14:22:24] info: [auth:spfkca] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:eetnz] Starting auth for GET /eligibility/147400/InvalidDiscipline
[2026-01-28 14:22:24] info: [auth:eetnz] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:eetnz] Token from header: true
[2026-01-28 14:22:24] info: [auth:eetnz] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [ownership] Validated ownership: user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f owns horse 147400
[2026-01-28 14:22:24] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147400 in InvalidDiscipline
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147400/InvalidDiscipline - 400
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147400/Racing
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1805MB
[2026-01-28 14:22:24] info: [auth:mdqk4f] Starting auth for GET /competition/eligibility/147400/Racing
[2026-01-28 14:22:24] info: [auth:mdqk4f] Token from cookie: false
[2026-01-28 14:22:24] warn: [auth:mdqk4f] Access token is required for GET /competition/eligibility/147400/Racing from ::ffff:127.0.0.1
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147400/Racing - 401
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147401/Racing
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1575MB
[2026-01-28 14:22:24] info: [auth:ljgih] Starting auth for GET /competition/eligibility/147401/Racing
[2026-01-28 14:22:24] info: [auth:ljgih] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:ljgih] Token from header: true
[2026-01-28 14:22:24] info: [auth:ljgih] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:udglqf] Starting auth for GET /eligibility/147401/Racing
[2026-01-28 14:22:24] info: [auth:udglqf] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:udglqf] Token from header: true
[2026-01-28 14:22:24] info: [auth:udglqf] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] warn: [ownership] horse 147401 not found or not owned by user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [GET] /api/competition/eligibility/147401/Racing - 404
[2026-01-28 14:22:24] info: [POST] /api/competition/enter
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1579MB
[2026-01-28 14:22:24] info: [auth:ar5lxmr] Starting auth for POST /competition/enter
[2026-01-28 14:22:24] info: [auth:ar5lxmr] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:ar5lxmr] Token from header: true
[2026-01-28 14:22:24] info: [auth:ar5lxmr] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:ue3aeo] Starting auth for POST /enter
[2026-01-28 14:22:24] info: [auth:ue3aeo] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:ue3aeo] Token from header: true
[2026-01-28 14:22:24] info: [auth:ue3aeo] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [competitionRoutes.POST /enter] User 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f entering horse 147400 in show 8289
[2026-01-28 14:22:24] info: [ownership] Found owned horse 147400 for user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [competitionRoutes.POST /enter] Successfully entered horse 147400 in show 8289
[2026-01-28 14:22:24] info: [POST] /api/competition/enter - 201
[2026-01-28 14:22:24] info: [POST] /api/competition/enter
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1585MB
[2026-01-28 14:22:24] info: [auth:x9uoc] Starting auth for POST /competition/enter
[2026-01-28 14:22:24] info: [auth:x9uoc] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:x9uoc] Token from header: true
[2026-01-28 14:22:24] info: [auth:x9uoc] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:douow9] Starting auth for POST /enter
[2026-01-28 14:22:24] info: [auth:douow9] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:douow9] Token from header: true
[2026-01-28 14:22:24] info: [auth:douow9] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [competitionRoutes.POST /enter] User 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f entering horse 147400 in show 8289
[2026-01-28 14:22:24] info: [ownership] Found owned horse 147400 for user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [POST] /api/competition/enter - 400
[2026-01-28 14:22:24] info: [POST] /api/competition/enter
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1575MB
[2026-01-28 14:22:24] info: [auth:i5f8h6] Starting auth for POST /competition/enter
[2026-01-28 14:22:24] info: [auth:i5f8h6] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:i5f8h6] Token from header: true
[2026-01-28 14:22:24] info: [auth:i5f8h6] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:fj3bbr] Starting auth for POST /enter
[2026-01-28 14:22:24] info: [auth:fj3bbr] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:fj3bbr] Token from header: true
[2026-01-28 14:22:24] info: [auth:fj3bbr] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] warn: [competitionRoutes.POST /enter] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]
[2026-01-28 14:22:24] info: [POST] /api/competition/enter - 400
[2026-01-28 14:22:24] info: [POST] /api/competition/enter
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:22:24] info: [auth:7adxl5] Starting auth for POST /competition/enter
[2026-01-28 14:22:24] info: [auth:7adxl5] Token from cookie: false
[2026-01-28 14:22:24] warn: [auth:7adxl5] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 14:22:24] info: [POST] /api/competition/enter - 401
[2026-01-28 14:22:24] info: [POST] /api/competition/execute
[2026-01-28 14:22:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:22:24] info: [auth:et8bi] Starting auth for POST /competition/execute
[2026-01-28 14:22:24] info: [auth:et8bi] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:et8bi] Token from header: true
[2026-01-28 14:22:24] info: [auth:et8bi] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [auth:k23sw] Starting auth for POST /execute
[2026-01-28 14:22:24] info: [auth:k23sw] Token from cookie: false
[2026-01-28 14:22:24] info: [auth:k23sw] Token from header: true
[2026-01-28 14:22:24] info: [auth:k23sw] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:24] info: [competitionRoutes.POST /execute] User 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f executing competition for show 8289
[2026-01-28 14:22:24] info: [competitionRoutes.POST /execute] Executing competition with 1 entries
[2026-01-28 14:22:24] info: [enhancedCompetitionSimulation] Executing competition: API Test Racing Show_1769628143905_33585_66140 (Racing)
[2026-01-28 14:22:24] info: [calculateCompetitionScore] Horse API Test Horse: Base score for Racing: 205
[2026-01-28 14:22:24] info: [calculateCompetitionScore] Horse API Test Horse: Luck modifier: 2.1%, adjustment: 4.4
[2026-01-28 14:22:24] info: [calculateCompetitionScore] Horse API Test Horse: Final score: 209 (base: 205, trait: +0, luck: 4.4)
[2026-01-28 14:22:24] info: [enhancedCompetitionSimulation] Horse API Test Horse (ID: 147400) scored 209 in Racing
[2026-01-28 14:22:24] info: [resultModel.saveResult] Successfully updated placeholder result for horse 147400 in show 8289 with score 209
[2026-01-28 14:22:24] info: [horseXpModel.addXpToHorse] Added 30 XP to horse API Test Horse (ID: 147400). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:22:24] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to API Test Horse for 1st place
[2026-01-28 14:22:24] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.
[2026-01-28 14:22:24] info: [competitionRoutes.POST /execute] Competition executed successfully for show 8289
[2026-01-28 14:22:24] info: [POST] /api/competition/execute - 200
[2026-01-28 14:22:25] info: [POST] /api/competition/execute
[2026-01-28 14:22:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1577MB
[2026-01-28 14:22:25] info: [auth:ie4mha] Starting auth for POST /competition/execute
[2026-01-28 14:22:25] info: [auth:ie4mha] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:ie4mha] Token from header: true
[2026-01-28 14:22:25] info: [auth:ie4mha] Authenticated user 2a848853-15d6-40f4-8ca3-b53d66189b47
[2026-01-28 14:22:25] info: [auth:5cja3p] Starting auth for POST /execute
[2026-01-28 14:22:25] info: [auth:5cja3p] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:5cja3p] Token from header: true
[2026-01-28 14:22:25] info: [auth:5cja3p] Authenticated user 2a848853-15d6-40f4-8ca3-b53d66189b47
[2026-01-28 14:22:25] info: [competitionRoutes.POST /execute] User 2a848853-15d6-40f4-8ca3-b53d66189b47 executing competition for show 8289
[2026-01-28 14:22:25] info: [POST] /api/competition/execute - 403
[2026-01-28 14:22:25] info: [POST] /api/competition/execute
[2026-01-28 14:22:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1580MB
[2026-01-28 14:22:25] info: [auth:sbxof] Starting auth for POST /competition/execute
[2026-01-28 14:22:25] info: [auth:sbxof] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:sbxof] Token from header: true
[2026-01-28 14:22:25] info: [auth:sbxof] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] info: [auth:yy5wh] Starting auth for POST /execute
[2026-01-28 14:22:25] info: [auth:yy5wh] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:yy5wh] Token from header: true
[2026-01-28 14:22:25] info: [auth:yy5wh] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] info: [competitionRoutes.POST /execute] User 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f executing competition for show 99999
[2026-01-28 14:22:25] info: [POST] /api/competition/execute - 404
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition?metric=wins&limit=10
[2026-01-28 14:22:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1582MB
[2026-01-28 14:22:25] info: [auth:w7bl1c] Starting auth for GET /leaderboards/competition
[2026-01-28 14:22:25] info: [auth:w7bl1c] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:w7bl1c] Token from header: true
[2026-01-28 14:22:25] info: [auth:w7bl1c] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] info: [auth:db7dbs] Starting auth for GET /competition
[2026-01-28 14:22:25] info: [auth:db7dbs] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:db7dbs] Token from header: true
[2026-01-28 14:22:25] info: [auth:db7dbs] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins
[2026-01-28 14:22:25] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing
[2026-01-28 14:22:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1576MB
[2026-01-28 14:22:25] info: [auth:2y1bq] Starting auth for GET /leaderboards/competition
[2026-01-28 14:22:25] info: [auth:2y1bq] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:2y1bq] Token from header: true
[2026-01-28 14:22:25] info: [auth:2y1bq] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] info: [auth:ao6bos] Starting auth for GET /competition
[2026-01-28 14:22:25] info: [auth:ao6bos] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:ao6bos] Token from header: true
[2026-01-28 14:22:25] info: [auth:ao6bos] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=earnings
[2026-01-28 14:22:25] info: [leaderboardRoutes.GET /competition] Retrieved 2 leaderboard entries
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing - 200
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition?metric=invalid
[2026-01-28 14:22:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1584MB
[2026-01-28 14:22:25] info: [auth:d5r2s] Starting auth for GET /leaderboards/competition
[2026-01-28 14:22:25] info: [auth:d5r2s] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:d5r2s] Token from header: true
[2026-01-28 14:22:25] info: [auth:d5r2s] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] info: [auth:6yp8o8] Starting auth for GET /competition
[2026-01-28 14:22:25] info: [auth:6yp8o8] Token from cookie: false
[2026-01-28 14:22:25] info: [auth:6yp8o8] Token from header: true
[2026-01-28 14:22:25] info: [auth:6yp8o8] Authenticated user 7a2f6865-e2f5-4cb6-811e-c6a0ad01cd8f
[2026-01-28 14:22:25] warn: [leaderboardRoutes.GET /competition] Validation errors: [{"type":"field","value":"invalid","msg":"Metric must be one of: wins, earnings, placements, average_placement","path":"metric","location":"query"}]
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition?metric=invalid - 400
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition
[2026-01-28 14:22:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1576MB
[2026-01-28 14:22:25] info: [auth:ei8xuk] Starting auth for GET /leaderboards/competition
[2026-01-28 14:22:25] info: [auth:ei8xuk] Token from cookie: false
[2026-01-28 14:22:25] warn: [auth:ei8xuk] Access token is required for GET /leaderboards/competition from ::ffff:127.0.0.1
[2026-01-28 14:22:25] info: [GET] /api/leaderboards/competition - 401
PASS tests/integration/competitionAPIEndpoints.integration.test.mjs
  üöÄ INTEGRATION: Competition API Endpoints
    üéØ GET /api/competition/disciplines
      ‚àö should return all available disciplines (67 ms)
    üîç GET /api/competition/eligibility/:horseId/:discipline
      ‚àö should check horse eligibility for Racing discipline (57 ms)
      ‚àö should check horse eligibility for Gaited discipline (63 ms)
      ‚àö should reject invalid discipline (73 ms)
      ‚àö should reject unauthorized access (92 ms)
      ‚àö should reject access to horse not owned by user (492 ms)
    üìù POST /api/competition/enter
      ‚àö should successfully enter horse in competition (56 ms)
      ‚àö should reject duplicate entry (36 ms)
      ‚àö should reject invalid input (37 ms)
      ‚àö should reject unauthorized access (24 ms)
    üèÅ POST /api/competition/execute
      ‚àö should successfully execute competition (68 ms)
      ‚àö should reject execution by non-host user (318 ms)
      ‚àö should reject invalid show ID (32 ms)
    üèÜ GET /api/leaderboard/competition
      ‚àö should get competition leaderboard by wins (45 ms)
      ‚àö should get competition leaderboard by earnings (44 ms)
      ‚àö should reject invalid metric (34 ms)
      ‚àö should reject unauthorized access (24 ms)

[2026-01-28 14:22:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:25] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:25] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:25] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:26] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:22:26] info: [auth:9my7fa] Starting auth for GET /status
[2026-01-28 14:22:26] info: [auth:9my7fa] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:9my7fa] Token from header: true
[2026-01-28 14:22:26] info: [auth:9my7fa] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory status
[2026-01-28 14:22:26] info: [auth:ddkode] Starting auth for GET /status
[2026-01-28 14:22:26] info: [auth:ddkode] Token from cookie: false
[2026-01-28 14:22:26] warn: [auth:ddkode] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:22:26] info: [auth:r78bke] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:r78bke] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:r78bke] Token from header: true
[2026-01-28 14:22:26] info: [auth:r78bke] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:22:26] info: [auth:zl7xlv] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:zl7xlv] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:zl7xlv] Token from header: true
[2026-01-28 14:22:26] info: [auth:zl7xlv] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:22:26] info: [auth:7hcwt2] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:7hcwt2] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:7hcwt2] Token from header: true
[2026-01-28 14:22:26] info: [auth:7hcwt2] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory metrics for timeframe: 6h
[2026-01-28 14:22:26] info: [auth:t1g5a] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:t1g5a] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:t1g5a] Token from header: true
[2026-01-28 14:22:26] info: [auth:t1g5a] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory metrics for timeframe: 24h
[2026-01-28 14:22:26] info: [auth:7ormeo] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:7ormeo] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:7ormeo] Token from header: true
[2026-01-28 14:22:26] info: [auth:7ormeo] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory metrics for timeframe: 7d
[2026-01-28 14:22:26] info: [auth:z8rthh] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:z8rthh] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:z8rthh] Token from header: true
[2026-01-28 14:22:26] info: [auth:z8rthh] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:22:26] info: [auth:96ssdad] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:96ssdad] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:96ssdad] Token from header: true
[2026-01-28 14:22:26] info: [auth:96ssdad] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [auth:53y1nc] Starting auth for GET /resources
[2026-01-28 14:22:26] info: [auth:53y1nc] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:53y1nc] Token from header: true
[2026-01-28 14:22:26] info: [auth:53y1nc] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:22:26] info: [auth:pf6wxq] Starting auth for POST /gc
[2026-01-28 14:22:26] info: [auth:pf6wxq] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:pf6wxq] Token from header: true
[2026-01-28 14:22:26] info: [auth:pf6wxq] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 14:22:26] info: [auth:rny8dj] Starting auth for POST /gc
[2026-01-28 14:22:26] info: [auth:rny8dj] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:rny8dj] Token from header: true
[2026-01-28 14:22:26] info: [auth:rny8dj] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [auth:wg8bnv] Starting auth for POST /cleanup
[2026-01-28 14:22:26] info: [auth:wg8bnv] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:wg8bnv] Token from header: true
[2026-01-28 14:22:26] info: [auth:wg8bnv] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Resource cleanup requested for: all
[2026-01-28 14:22:26] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:22:26] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:22:26] info: [auth:96x0fw] Starting auth for POST /cleanup
[2026-01-28 14:22:26] info: [auth:96x0fw] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:96x0fw] Token from header: true
[2026-01-28 14:22:26] info: [auth:96x0fw] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Resource cleanup requested for: timers, intervals
[2026-01-28 14:22:26] warn: [MemoryManagement] Selective cleanup not yet implemented
[2026-01-28 14:22:26] info: [auth:f2yil6] Starting auth for POST /cleanup
[2026-01-28 14:22:26] info: [auth:f2yil6] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:f2yil6] Token from header: true
[2026-01-28 14:22:26] info: [auth:f2yil6] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [auth:b8g48] Starting auth for GET /alerts
[2026-01-28 14:22:26] info: [auth:b8g48] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:b8g48] Token from header: true
[2026-01-28 14:22:26] info: [auth:b8g48] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:22:26] info: [auth:77cose] Starting auth for GET /alerts
[2026-01-28 14:22:26] info: [auth:77cose] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:77cose] Token from header: true
[2026-01-28 14:22:26] info: [auth:77cose] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:22:26] info: [auth:8vrowa] Starting auth for GET /alerts
[2026-01-28 14:22:26] info: [auth:8vrowa] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:8vrowa] Token from header: true
[2026-01-28 14:22:26] info: [auth:8vrowa] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:22:26] info: [auth:g0pxlq] Starting auth for GET /alerts
[2026-01-28 14:22:26] info: [auth:g0pxlq] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:g0pxlq] Token from header: true
[2026-01-28 14:22:26] info: [auth:g0pxlq] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:22:26] info: [auth:5njcsg] Starting auth for GET /alerts
[2026-01-28 14:22:26] info: [auth:5njcsg] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:5njcsg] Token from header: true
[2026-01-28 14:22:26] info: [auth:5njcsg] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:22:26] info: [auth:rllmv] Starting auth for GET /alerts
[2026-01-28 14:22:26] info: [auth:rllmv] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:rllmv] Token from header: true
[2026-01-28 14:22:26] info: [auth:rllmv] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [auth:z12f9b] Starting auth for GET /alerts
[2026-01-28 14:22:26] info: [auth:z12f9b] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:z12f9b] Token from header: true
[2026-01-28 14:22:26] info: [auth:z12f9b] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [auth:n5cuy] Starting auth for GET /health
[2026-01-28 14:22:26] info: [auth:n5cuy] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:n5cuy] Token from header: true
[2026-01-28 14:22:26] info: [auth:n5cuy] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:22:26] info: [auth:0xxvn] Starting auth for GET /health
[2026-01-28 14:22:26] info: [auth:0xxvn] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:0xxvn] Token from header: true
[2026-01-28 14:22:26] info: [auth:0xxvn] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:22:26] info: [auth:caob8d] Starting auth for GET /health
[2026-01-28 14:22:26] info: [auth:caob8d] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:caob8d] Token from header: true
[2026-01-28 14:22:26] info: [auth:caob8d] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:22:26] info: [auth:2d9xdv] Starting auth for GET /status
[2026-01-28 14:22:26] info: [auth:2d9xdv] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:2d9xdv] Token from header: true
[2026-01-28 14:22:26] warn: [auth:2d9xdv] Invalid or expired token for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:22:26] info: [auth:j9msdt] Starting auth for GET /status
[2026-01-28 14:22:26] info: [auth:j9msdt] Token from cookie: false
[2026-01-28 14:22:26] warn: [auth:j9msdt] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:22:26] info: [auth:d684be] Starting auth for GET /metrics
[2026-01-28 14:22:26] info: [auth:d684be] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:d684be] Token from header: true
[2026-01-28 14:22:26] info: [auth:d684be] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:22:26] info: [auth:bxv5rg] Starting auth for GET /resources
[2026-01-28 14:22:26] info: [auth:bxv5rg] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:bxv5rg] Token from header: true
[2026-01-28 14:22:26] info: [auth:bxv5rg] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:22:26] info: [auth:0ckcsd] Starting auth for GET /health
[2026-01-28 14:22:26] info: [auth:0ckcsd] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:0ckcsd] Token from header: true
[2026-01-28 14:22:26] info: [auth:0ckcsd] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:22:26] info: [auth:bzg4j] Starting auth for GET /status
[2026-01-28 14:22:26] info: [auth:bzg4j] Token from cookie: false
[2026-01-28 14:22:26] info: [auth:bzg4j] Token from header: true
[2026-01-28 14:22:26] info: [auth:bzg4j] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:26] info: [MemoryManagement] Getting memory status
[2026-01-28 14:22:27] warn: [MemoryManager] Memory threshold alert: 1615MB used
[2026-01-28 14:22:28] warn: [MemoryManager] Memory threshold alert: 1616MB used
[2026-01-28 14:22:28] info: [auth:bnbbe] Starting auth for GET /metrics
[2026-01-28 14:22:28] info: [auth:bnbbe] Token from cookie: false
[2026-01-28 14:22:28] info: [auth:bnbbe] Token from header: true
[2026-01-28 14:22:28] info: [auth:bnbbe] Authenticated user 77fa5f90-28bb-441e-a429-316c01fa8674
[2026-01-28 14:22:28] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:22:28] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:22:28] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:22:28] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS __tests__/routes/memoryManagementRoutes.test.mjs
  Memory Management Routes
    GET /api/memory/status
      ‚àö retrieves memory status successfully (34 ms)
      ‚àö requires authentication (18 ms)
    GET /api/memory/metrics
      ‚àö retrieves memory metrics with default timeframe (23 ms)
      ‚àö accepts different timeframe parameters (72 ms)
      ‚àö includes GC data when requested (19 ms)
      ‚àö validates timeframe parameter (17 ms)
    GET /api/memory/resources
      ‚àö retrieves resource analytics successfully (23 ms)
    POST /api/memory/gc
      ‚àö triggers garbage collection when available
      ‚àö handles GC unavailability gracefully (26 ms)
      ‚àö validates request body (15 ms)
    POST /api/memory/cleanup
      ‚àö performs resource cleanup successfully (21 ms)
      ‚àö handles selective cleanup request (20 ms)
      ‚àö validates resource types parameter (14 ms)
    GET /api/memory/alerts
      ‚àö retrieves memory alerts successfully (19 ms)
      ‚àö filters alerts by severity (52 ms)
      ‚àö limits alert results (19 ms)
      ‚àö validates severity parameter (16 ms)
      ‚àö validates limit parameter (18 ms)
    GET /api/memory/health
      ‚àö retrieves system health assessment successfully (21 ms)
      ‚àö provides memory utilization status (18 ms)
      ‚àö provides resource efficiency metrics (19 ms)
    Error Handling
      ‚àö handles invalid authentication tokens (18 ms)
      ‚àö handles missing authorization header (13 ms)
    Performance Validation
      ‚àö memory metrics show realistic values (19 ms)
      ‚àö resource analytics show meaningful data (20 ms)
      ‚àö health assessment provides actionable insights (16 ms)
    Real-time Monitoring Integration
      ‚àö status endpoint reflects current monitoring state (19 ms)
      ‚àö metrics endpoint provides recent data (1521 ms)

[2026-01-28 14:22:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:28] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] info: [TokenRotation] Token rotation successful
[2026-01-28 14:22:29] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:22:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:29] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:22:29] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:22:29] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:22:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:30] info: [TokenRotation] Token rotation successful
[2026-01-28 14:22:30] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:22:30] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:22:30] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:22:30] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:22:30] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:22:30] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:22:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:30] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:22:30] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:22:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:30] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:22:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:30] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:22:30] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:22:30] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:22:30] warn: [TokenRotation] Skipping refresh token persistence in test env
[2026-01-28 14:22:30] info: [TokenRotation] Created new token pair
PASS __tests__/unit/token-rotation.test.mjs
  Token Rotation Service - Unit Tests
    generateTokenFamily()
      ‚àö should_create_unique_family_id (139 ms)
      ‚àö should_include_timestamp_in_family_id (81 ms)
    createTokenPair()
      ‚àö should_create_access_and_refresh_token_pair (85 ms)
      ‚àö should_create_refresh_token_with_family_id (87 ms)
      ‚àö should_store_refresh_token_in_database (85 ms)
      ‚àö should_set_correct_expiration_times (82 ms)
    validateRefreshToken()
      ‚àö should_validate_legitimate_refresh_token (83 ms)
      ‚àö should_reject_expired_refresh_token (87 ms)
      ‚àö should_reject_token_with_invalid_signature (76 ms)
      ‚àö should_reject_inactive_token_from_database (82 ms)
      ‚àö should_reject_malformed_token (74 ms)
    detectTokenReuse()
      ‚àö should_detect_reuse_of_invalidated_token (90 ms)
      ‚àö should_not_flag_first_use_as_reuse (80 ms)
      ‚àö should_identify_family_for_invalidation (90 ms)
    rotateRefreshToken()
      ‚àö should_create_new_token_and_invalidate_old (95 ms)
      ‚àö should_fail_rotation_for_invalid_token (75 ms)
      ‚àö should_fail_rotation_if_reuse_detected (95 ms)
      ‚àö should_handle_concurrent_rotation_attempts (155 ms)
    invalidateTokenFamily()
      ‚àö should_invalidate_all_tokens_in_family (105 ms)
      ‚àö should_handle_family_that_does_not_exist (77 ms)
      ‚àö should_log_invalidation_for_security_audit (83 ms)
    cleanupExpiredTokens()
      ‚àö should_remove_expired_tokens_from_database (88 ms)
      ‚àö should_remove_old_invalidated_tokens (80 ms)
      ‚àö should_return_cleanup_statistics (79 ms)
    Error Handling and Edge Cases
      ‚àö should_handle_database_connection_errors (78 ms)
      ‚àö should_handle_jwt_verification_errors_gracefully (74 ms)
      ‚àö should_validate_token_family_id_format (79 ms)

[2026-01-28 14:22:31] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:31] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:31] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:31] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:31] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:31] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:32] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:32] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:32] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:32] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:32] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:32] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:32] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:32] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:32] info: [GET] /api/grooms/73767/retirement/eligibility
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 14:22:32] info: [auth:q48ow9] Starting auth for GET /grooms/73767/retirement/eligibility
[2026-01-28 14:22:32] info: [auth:q48ow9] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:q48ow9] Token from header: true
[2026-01-28 14:22:32] info: [auth:q48ow9] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [ownership] Validated ownership: user f507142b-3de3-4272-8435-23048c85177d owns groom 73767
[2026-01-28 14:22:32] info: [GET] /api/grooms/73767/retirement/eligibility - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/retirement/statistics
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1681MB
[2026-01-28 14:22:32] info: [auth:s3yg5r] Starting auth for GET /grooms/retirement/statistics
[2026-01-28 14:22:32] info: [auth:s3yg5r] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:s3yg5r] Token from header: true
[2026-01-28 14:22:32] info: [auth:s3yg5r] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [auth:sjwbvj] Starting auth for GET /retirement/statistics
[2026-01-28 14:22:32] info: [auth:sjwbvj] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:sjwbvj] Token from header: true
[2026-01-28 14:22:32] info: [auth:sjwbvj] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [GET] /api/grooms/retirement/statistics - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/retirement/approaching
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1677MB
[2026-01-28 14:22:32] info: [auth:ijmom] Starting auth for GET /grooms/retirement/approaching
[2026-01-28 14:22:32] info: [auth:ijmom] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:ijmom] Token from header: true
[2026-01-28 14:22:32] info: [auth:ijmom] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [auth:c4xcmq] Starting auth for GET /retirement/approaching
[2026-01-28 14:22:32] info: [auth:c4xcmq] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:c4xcmq] Token from header: true
[2026-01-28 14:22:32] info: [auth:c4xcmq] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [GET] /api/grooms/retirement/approaching - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/73774/legacy/eligibility
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1685MB
[2026-01-28 14:22:32] info: [auth:fgeoxh] Starting auth for GET /grooms/73774/legacy/eligibility
[2026-01-28 14:22:32] info: [auth:fgeoxh] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:fgeoxh] Token from header: true
[2026-01-28 14:22:32] info: [auth:fgeoxh] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [ownership] Validated ownership: user f507142b-3de3-4272-8435-23048c85177d owns groom 73774
[2026-01-28 14:22:32] info: [GET] /api/grooms/73774/legacy/eligibility - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/legacy/history
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 14:22:32] info: [auth:n0c3ku] Starting auth for GET /grooms/legacy/history
[2026-01-28 14:22:32] info: [auth:n0c3ku] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:n0c3ku] Token from header: true
[2026-01-28 14:22:32] info: [auth:n0c3ku] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [auth:pa7yy] Starting auth for GET /legacy/history
[2026-01-28 14:22:32] info: [auth:pa7yy] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:pa7yy] Token from header: true
[2026-01-28 14:22:32] info: [auth:pa7yy] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [GET] /api/grooms/legacy/history - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/talents/definitions
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1683MB
[2026-01-28 14:22:32] info: [auth:8hbay] Starting auth for GET /grooms/talents/definitions
[2026-01-28 14:22:32] info: [auth:8hbay] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:8hbay] Token from header: true
[2026-01-28 14:22:32] info: [auth:8hbay] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [GET] /api/grooms/talents/definitions - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/73779/talents
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1687MB
[2026-01-28 14:22:32] info: [auth:k0prn] Starting auth for GET /grooms/73779/talents
[2026-01-28 14:22:32] info: [auth:k0prn] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:k0prn] Token from header: true
[2026-01-28 14:22:32] info: [auth:k0prn] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [ownership] Validated ownership: user f507142b-3de3-4272-8435-23048c85177d owns groom 73779
[2026-01-28 14:22:32] info: [GET] /api/grooms/73779/talents - 200
[2026-01-28 14:22:32] info: [POST] /api/grooms/73781/talents/validate
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1677MB
[2026-01-28 14:22:32] info: [auth:0wot8] Starting auth for POST /grooms/73781/talents/validate
[2026-01-28 14:22:32] info: [auth:0wot8] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:0wot8] Token from header: true
[2026-01-28 14:22:32] info: [auth:0wot8] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [ownership] Validated ownership: user f507142b-3de3-4272-8435-23048c85177d owns groom 73781
[2026-01-28 14:22:32] info: [POST] /api/grooms/73781/talents/validate - 200
[2026-01-28 14:22:32] info: [POST] /api/grooms/73783/talents/select
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1683MB
[2026-01-28 14:22:32] info: [auth:55mh69] Starting auth for POST /grooms/73783/talents/select
[2026-01-28 14:22:32] info: [auth:55mh69] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:55mh69] Token from header: true
[2026-01-28 14:22:32] info: [auth:55mh69] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [ownership] Validated ownership: user f507142b-3de3-4272-8435-23048c85177d owns groom 73783
[2026-01-28 14:22:32] info: Groom 73783 selected talent gentle_hands for tier1
[2026-01-28 14:22:32] info: [POST] /api/grooms/73783/talents/select - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/73785/retirement/eligibility
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1686MB
[2026-01-28 14:22:32] info: [auth:pnbhe] Starting auth for GET /grooms/73785/retirement/eligibility
[2026-01-28 14:22:32] info: [auth:pnbhe] Token from cookie: false
[2026-01-28 14:22:32] warn: [auth:pnbhe] Access token is required for GET /grooms/73785/retirement/eligibility from ::ffff:127.0.0.1
[2026-01-28 14:22:32] info: [GET] /api/grooms/73785/retirement/eligibility - 401
[2026-01-28 14:22:32] info: [GET] /api/grooms/retirement/statistics
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1685MB
[2026-01-28 14:22:32] info: [auth:6l4dwc] Starting auth for GET /grooms/retirement/statistics
[2026-01-28 14:22:32] info: [auth:6l4dwc] Token from cookie: false
[2026-01-28 14:22:32] warn: [auth:6l4dwc] Access token is required for GET /grooms/retirement/statistics from ::ffff:127.0.0.1
[2026-01-28 14:22:32] info: [GET] /api/grooms/retirement/statistics - 401
[2026-01-28 14:22:32] info: [GET] /api/grooms/73785/talents
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1684MB
[2026-01-28 14:22:32] info: [auth:hdagwd] Starting auth for GET /grooms/73785/talents
[2026-01-28 14:22:32] info: [auth:hdagwd] Token from cookie: false
[2026-01-28 14:22:32] warn: [auth:hdagwd] Access token is required for GET /grooms/73785/talents from ::ffff:127.0.0.1
[2026-01-28 14:22:32] info: [GET] /api/grooms/73785/talents - 401
[2026-01-28 14:22:32] info: [GET] /api/grooms/talents/definitions
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1685MB
[2026-01-28 14:22:32] info: [auth:62svo] Starting auth for GET /grooms/talents/definitions
[2026-01-28 14:22:32] info: [auth:62svo] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:62svo] Token from header: true
[2026-01-28 14:22:32] info: [auth:62svo] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] info: [GET] /api/grooms/talents/definitions - 200
[2026-01-28 14:22:32] info: [GET] /api/grooms/invalid/retirement/eligibility
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1688MB
[2026-01-28 14:22:32] info: [auth:6m558] Starting auth for GET /grooms/invalid/retirement/eligibility
[2026-01-28 14:22:32] info: [auth:6m558] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:6m558] Token from header: true
[2026-01-28 14:22:32] info: [auth:6m558] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be an integer","path":"id","location":"params"}]
[2026-01-28 14:22:32] info: [GET] /api/grooms/invalid/retirement/eligibility - 400
[2026-01-28 14:22:32] info: [POST] /api/grooms/73791/talents/select
[2026-01-28 14:22:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1690MB
[2026-01-28 14:22:32] info: [auth:29xtot] Starting auth for POST /grooms/73791/talents/select
[2026-01-28 14:22:32] info: [auth:29xtot] Token from cookie: false
[2026-01-28 14:22:32] info: [auth:29xtot] Token from header: true
[2026-01-28 14:22:32] info: [auth:29xtot] Authenticated user f507142b-3de3-4272-8435-23048c85177d
[2026-01-28 14:22:32] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid_tier","msg":"Invalid tier","path":"tier","location":"body"}]
[2026-01-28 14:22:32] info: [POST] /api/grooms/73791/talents/select - 400
PASS tests/routes/groomRetirementRoutes.test.mjs
  Groom Retirement Routes
    Retirement Endpoints
      ‚àö GET /api/grooms/:id/retirement/eligibility should check eligibility (78 ms)
      ‚àö GET /api/grooms/retirement/statistics should return user stats (115 ms)
      ‚àö GET /api/grooms/retirement/approaching should return approaching retirement grooms (51 ms)
    Legacy Endpoints
      ‚àö GET /api/grooms/:id/legacy/eligibility should check legacy eligibility (46 ms)
      ‚àö GET /api/grooms/legacy/history should return legacy history (48 ms)
    Talent Endpoints
      ‚àö GET /api/grooms/talents/definitions should return talent definitions (41 ms)
      ‚àö GET /api/grooms/:id/talents should return groom talent selections (39 ms)
      ‚àö POST /api/grooms/:id/talents/validate should validate talent selection (50 ms)
      ‚àö POST /api/grooms/:id/talents/select should select talent (44 ms)
    Authentication
      ‚àö should require authentication for protected endpoints (78 ms)
      ‚àö should require authentication for talent definitions (40 ms)
    Validation
      ‚àö should validate groom ID parameter (37 ms)
      ‚àö should validate talent selection data (39 ms)

[2026-01-28 14:22:33] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:33] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:33] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:33] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:33] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:33] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:34] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:34] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:34] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:34] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:34] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:34] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:34] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:34] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1734MB
[2026-01-28 14:22:34] info: [auth:zt6dv] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:zt6dv] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:zt6dv] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [PUT] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1745MB
[2026-01-28 14:22:34] info: [auth:nvwsln] Starting auth for PUT /profile
[2026-01-28 14:22:34] info: [auth:nvwsln] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:nvwsln] Access token is required for PUT /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [PUT] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [DELETE] /api/users/account
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1741MB
[2026-01-28 14:22:34] info: [auth:itck4j] Starting auth for DELETE /users/account
[2026-01-28 14:22:34] info: [auth:itck4j] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:itck4j] Access token is required for DELETE /users/account from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [DELETE] /api/users/account - 401
[2026-01-28 14:22:34] info: [GET] /api/horses
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1741MB
[2026-01-28 14:22:34] info: [auth:ye7foi] Starting auth for GET /horses
[2026-01-28 14:22:34] info: [auth:ye7foi] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:ye7foi] Access token is required for GET /horses from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/horses - 401
[2026-01-28 14:22:34] info: [POST] /api/horses
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1741MB
[2026-01-28 14:22:34] info: [auth:v6ebwp] Starting auth for POST /horses
[2026-01-28 14:22:34] info: [auth:v6ebwp] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:v6ebwp] Access token is required for POST /horses from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [POST] /api/horses - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1741MB
[2026-01-28 14:22:34] info: [auth:1vv9d5] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:1vv9d5] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:1vv9d5] Token from header: true
[2026-01-28 14:22:34] warn: [auth:1vv9d5] Verify failed: invalid signature
[2026-01-28 14:22:34] warn: [auth:1vv9d5] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1737MB
[2026-01-28 14:22:34] info: [auth:t1bmxr] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:t1bmxr] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:t1bmxr] Token from header: true
[2026-01-28 14:22:34] warn: [auth:t1bmxr] Verify failed: invalid algorithm
[2026-01-28 14:22:34] warn: [auth:t1bmxr] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1748MB
[2026-01-28 14:22:34] info: [auth:i94web] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:i94web] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:i94web] Token from header: true
[2026-01-28 14:22:34] warn: [auth:i94web] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:34] info: [auth:dicdyq] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:dicdyq] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:dicdyq] Token from header: true
[2026-01-28 14:22:34] warn: [auth:dicdyq] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1739MB
[2026-01-28 14:22:34] info: [auth:538gy] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:538gy] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:538gy] Token from header: true
[2026-01-28 14:22:34] warn: [auth:538gy] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1737MB
[2026-01-28 14:22:34] info: [auth:msuea2] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:msuea2] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:msuea2] Token from header: true
[2026-01-28 14:22:34] warn: [auth:msuea2] Token expired (precheck)
[2026-01-28 14:22:34] warn: [auth:msuea2] Token expired for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1748MB
[2026-01-28 14:22:34] info: [auth:fd16wk] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:fd16wk] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:fd16wk] Token from header: true
[2026-01-28 14:22:34] warn: [auth:fd16wk] Session too old
[2026-01-28 14:22:34] warn: [auth:fd16wk] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:34] info: [auth:wvks1c] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:wvks1c] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:wvks1c] Token from header: true
[2026-01-28 14:22:34] info: [auth:wvks1c] Authenticated user 6133efe8-801e-41f0-9f03-eb29d80d024f
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1740MB
[2026-01-28 14:22:34] info: [auth:it6fq8] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:it6fq8] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:it6fq8] Token from header: true
[2026-01-28 14:22:34] info: [auth:it6fq8] Authenticated user 62e67fce-c095-4e48-aeff-c02220df866d
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1737MB
[2026-01-28 14:22:34] info: [auth:10ze9s] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:10ze9s] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:10ze9s] Token from header: true
[2026-01-28 14:22:34] info: [auth:10ze9s] Authenticated user 62e67fce-c095-4e48-aeff-c02220df866d
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1748MB
[2026-01-28 14:22:34] info: [auth:60homi] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:60homi] Token from cookie: true
[2026-01-28 14:22:34] info: [auth:60homi] Authenticated user fb5749a6-3984-4c34-8bcd-f5440cba6fb1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:34] info: [auth:52w2vk] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:52w2vk] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:52w2vk] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1739MB
[2026-01-28 14:22:34] info: [auth:ul6k1g] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:ul6k1g] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:ul6k1g] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1749MB
[2026-01-28 14:22:34] info: [auth:3hmjtj] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:3hmjtj] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:3hmjtj] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1744MB
[2026-01-28 14:22:34] info: [auth:qtd298] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:qtd298] Token from cookie: false
[2026-01-28 14:22:34] warn: [auth:qtd298] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1740MB
[2026-01-28 14:22:34] info: [auth:pcnb2l] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:pcnb2l] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:pcnb2l] Token from header: true
[2026-01-28 14:22:34] info: [auth:pcnb2l] Authenticated user b75a0e89-47e8-44d2-b714-e17f180051ca
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1751MB
[2026-01-28 14:22:34] info: [auth:m37ivx] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:m37ivx] Token from cookie: true
[2026-01-28 14:22:34] info: [auth:m37ivx] Authenticated user 75936d65-5033-4fd6-a5d6-63e1437bbae8
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1745MB
[2026-01-28 14:22:34] info: [auth:8sl20n] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:8sl20n] Token from cookie: true
[2026-01-28 14:22:34] info: [auth:8sl20n] Authenticated user 75936d65-5033-4fd6-a5d6-63e1437bbae8
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1740MB
[2026-01-28 14:22:34] info: [auth:mvsuhj] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:mvsuhj] Token from cookie: true
[2026-01-28 14:22:34] info: [auth:mvsuhj] Authenticated user 7375b4d2-53eb-425b-b62f-6c8bc2e85279
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/users/1e24a176-d902-4db2-82a5-142da80e36b4
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1751MB
[2026-01-28 14:22:34] info: [auth:pbd4d] Starting auth for GET /users/1e24a176-d902-4db2-82a5-142da80e36b4
[2026-01-28 14:22:34] info: [auth:pbd4d] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:pbd4d] Token from header: true
[2026-01-28 14:22:34] info: [auth:pbd4d] Authenticated user 2a91d086-4709-4fbd-8433-77c64eb76cd4
[2026-01-28 14:22:34] info: [auth:3jx5v] Starting auth for GET /1e24a176-d902-4db2-82a5-142da80e36b4
[2026-01-28 14:22:34] info: [auth:3jx5v] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:3jx5v] Token from header: true
[2026-01-28 14:22:34] info: [auth:3jx5v] Authenticated user 2a91d086-4709-4fbd-8433-77c64eb76cd4
[2026-01-28 14:22:34] warn: [userRoutes] Self-access violation: user 2a91d086-4709-4fbd-8433-77c64eb76cd4 attempted to access user 1e24a176-d902-4db2-82a5-142da80e36b4
[2026-01-28 14:22:34] info: [GET] /api/users/1e24a176-d902-4db2-82a5-142da80e36b4 - 403
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1741MB
[2026-01-28 14:22:34] info: [auth:mh0x9] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:mh0x9] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:mh0x9] Token from header: true
[2026-01-28 14:22:34] info: [auth:mh0x9] Authenticated user 2307f9a3-f941-4e8d-a13c-4a3a1d4263fb
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1752MB
[2026-01-28 14:22:34] info: [auth:8dnmmk] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:8dnmmk] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:8dnmmk] Token from header: true
[2026-01-28 14:22:34] info: [auth:8dnmmk] Authenticated user 65b2ef4a-496d-4eca-93b5-374be06e6635
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1746MB
[2026-01-28 14:22:34] info: [auth:k7ij26] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:k7ij26] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:k7ij26] Token from header: true
[2026-01-28 14:22:34] info: [auth:k7ij26] Authenticated user 65b2ef4a-496d-4eca-93b5-374be06e6635
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 200
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1743MB
[2026-01-28 14:22:34] info: [auth:k9ngop] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:k9ngop] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:k9ngop] Token from header: true
[2026-01-28 14:22:34] warn: [auth:k9ngop] Verify failed: invalid signature
[2026-01-28 14:22:34] warn: [auth:k9ngop] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1740MB
[2026-01-28 14:22:34] info: [auth:x6u28] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:x6u28] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:x6u28] Token from header: true
[2026-01-28 14:22:34] warn: [auth:x6u28] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1751MB
[2026-01-28 14:22:34] info: [auth:h7ribf] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:h7ribf] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:h7ribf] Token from header: true
[2026-01-28 14:22:34] info: [auth:h7ribf] Authenticated user 1' OR '1'='1
[2026-01-28 14:22:34] error: [authController.getProfile] Error retrieving profile: User not found
[2026-01-28 14:22:34] error: [GET] /api/auth/profile - ERROR
[2026-01-28 14:22:34] error: Error User not found
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 404
[2026-01-28 14:22:34] info: [GET] /api/auth/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1749MB
[2026-01-28 14:22:34] info: [auth:iygq8] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:iygq8] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:iygq8] Token from header: true
[2026-01-28 14:22:34] info: [auth:iygq8] Authenticated user undefined
[2026-01-28 14:22:34] error: [authController.getProfile] Error retrieving profile: Authentication error, user not found in request
[2026-01-28 14:22:34] error: [GET] /api/auth/profile - ERROR
[2026-01-28 14:22:34] error: Error Authentication error, user not found in request
[2026-01-28 14:22:34] info: [GET] /api/auth/profile - 401
[2026-01-28 14:22:34] info: [GET] /api/users/profile
[2026-01-28 14:22:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1748MB
[2026-01-28 14:22:34] info: [auth:i1sb6a] Starting auth for GET /users/profile
[2026-01-28 14:22:34] info: [auth:i1sb6a] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:i1sb6a] Token from header: true
[2026-01-28 14:22:34] info: [auth:i1sb6a] Authenticated user not-a-number
[2026-01-28 14:22:34] info: [auth:7ybxd] Starting auth for GET /profile
[2026-01-28 14:22:34] info: [auth:7ybxd] Token from cookie: false
[2026-01-28 14:22:34] info: [auth:7ybxd] Token from header: true
[2026-01-28 14:22:34] info: [auth:7ybxd] Authenticated user not-a-number
[2026-01-28 14:22:34] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"profile","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:22:34] info: [GET] /api/users/profile - 400
PASS __tests__/integration/security/auth-bypass-attempts.test.mjs
  Authentication Bypass Attempts Integration Tests
    Direct Endpoint Access Without Authentication
      ‚àö should reject GET /api/users/profile without token (86 ms)
      ‚àö should reject PUT /api/users/profile without token (34 ms)
      ‚àö should reject DELETE /api/users/account without token (26 ms)
      ‚àö should reject GET /api/horses without token (24 ms)
      ‚àö should reject POST /api/horses without token (28 ms)
    Forged JWT Tokens
      ‚àö should reject token with wrong signature (22 ms)
      ‚àö should reject token signed with different algorithm (26 ms)
      ‚àö should reject token with modified payload (22 ms)
      ‚àö should reject token with algorithm none (23 ms)
      ‚àö should reject completely malformed token (19 ms)
    Expired Token Usage
      ‚àö should reject JWT token past expiration time (33 ms)
      ‚àö should reject token older than 7 days (CWE-613) (25 ms)
      ‚àö should accept token exactly 7 days old (27 ms)
    Token Replay Attacks
      ‚àö should allow same token for multiple valid requests (expected behavior) (42 ms)
      ‚àö should accept token from both cookie and header (cookie preferred) (29 ms)
    Authorization Header Manipulation
      ‚àö should reject token without Bearer prefix (19 ms)
      ‚àö should reject token with wrong scheme (20 ms)
      ‚àö should reject empty Authorization header (21 ms)
      ‚àö should reject Authorization header with only Bearer (17 ms)
      ‚àö should reject multiple Authorization headers (24 ms)
    Cookie Theft Simulation
      ‚àö should reject stolen cookie with different IP (if IP binding enabled) (41 ms)
      ‚àö should reject cookie with HttpOnly flag missing (client-side) (25 ms)
    Multi-User Session Conflicts
      ‚àö should prevent user A from accessing user B resources with valid token (37 ms)
      ‚àö should allow user to access their own resources only (25 ms)
      ‚àö should prevent concurrent logins from invalidating each other (stateless tokens) (50 ms)
    Edge Cases and Attack Vectors
      ‚àö should reject token with null bytes in payload (21 ms)
      ‚àö should reject extremely long token (DoS prevention) (22 ms)
      ‚àö should reject token with SQL injection in payload (30 ms)
      ‚àö should handle token with missing userId gracefully (29 ms)
      ‚àö should reject token with non-numeric userId (34 ms)

[2026-01-28 14:22:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:35] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:35] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:36] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:36] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:36] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:36] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:36] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:36] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:36] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:36] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:36] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:36] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1796MB
[2026-01-28 14:22:36] info: [auth:p0nkmj] Starting auth for GET /horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [auth:p0nkmj] Token from cookie: false
[2026-01-28 14:22:36] info: [auth:p0nkmj] Token from header: true
[2026-01-28 14:22:36] info: [auth:p0nkmj] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [trainingController.getTrainableHorses] Getting trainable horses for user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 14:22:36] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137 - 200
[2026-01-28 14:22:36] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1799MB
[2026-01-28 14:22:36] info: [auth:97wict] Starting auth for GET /horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [auth:97wict] Token from cookie: false
[2026-01-28 14:22:36] info: [auth:97wict] Token from header: true
[2026-01-28 14:22:36] info: [auth:97wict] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137 - 200
[2026-01-28 14:22:36] info: [POST] /api/training/train
[2026-01-28 14:22:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1800MB
[2026-01-28 14:22:36] info: [auth:x61qyl] Starting auth for POST /training/train
[2026-01-28 14:22:36] info: [auth:x61qyl] Token from cookie: false
[2026-01-28 14:22:36] info: [auth:x61qyl] Token from header: true
[2026-01-28 14:22:36] info: [auth:x61qyl] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [ownership] Found owned horse 147402 for user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [trainingController.trainRouteHandler] Training request for horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingController.trainHorse] Attempting to train horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147402
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 is eligible to train in Racing
[2026-01-28 14:22:36] info: [horseModel.getHorseById] Successfully found horse: TestHorse_1769628156546_kxr0g6 (ID: 147402)
[2026-01-28 14:22:36] info: [trainingController.trainHorse] Horse 147402 has traits: 
[2026-01-28 14:22:36] info: [trainingModel.logTrainingSession] Logging training session for horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9020
[2026-01-28 14:22:36] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147402 by +5
[2026-01-28 14:22:36] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147402 by +5
[2026-01-28 14:22:36] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147402: 0 -> 5
[2026-01-28 14:22:36] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147402
[2026-01-28 14:22:36] info: [xpLogModel.logXpEvent] Logging XP event: User 5318fba6-211b-4c37-850b-fb855a76e137, Amount: 5, Reason: Trained horse TestHorse_1769628156546_kxr0g6 in Racing
[2026-01-28 14:22:36] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4460, User 5318fba6-211b-4c37-850b-fb855a76e137, Amount: 5
[2026-01-28 14:22:36] info: [trainingController.trainHorse] Awarded 5 XP to user 5318fba6-211b-4c37-850b-fb855a76e137 for training
[2026-01-28 14:22:36] info: [trainingController.trainHorse] Successfully trained horse 147402 in Racing (Log ID: 9020, Score +5)
[2026-01-28 14:22:36] info: [POST] /api/training/train - 200
[2026-01-28 14:22:36] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1803MB
[2026-01-28 14:22:36] info: [auth:z2cwjo] Starting auth for GET /horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [auth:z2cwjo] Token from cookie: false
[2026-01-28 14:22:36] info: [auth:z2cwjo] Token from header: true
[2026-01-28 14:22:36] info: [auth:z2cwjo] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [trainingController.getTrainableHorses] Getting trainable horses for user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 14:22:36] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137 - 200
[2026-01-28 14:22:36] info: [GET] /api/training/status/147402/Racing
[2026-01-28 14:22:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1805MB
[2026-01-28 14:22:36] info: [auth:g6l1xf] Starting auth for GET /training/status/147402/Racing
[2026-01-28 14:22:36] info: [auth:g6l1xf] Token from cookie: false
[2026-01-28 14:22:36] info: [auth:g6l1xf] Token from header: true
[2026-01-28 14:22:36] info: [auth:g6l1xf] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [ownership] Validated ownership: user 5318fba6-211b-4c37-850b-fb855a76e137 owns horse 147402
[2026-01-28 14:22:36] info: [trainingRoutes.getStatus] User 5318fba6-211b-4c37-850b-fb855a76e137 getting training status for horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Racing
[2026-01-28 14:22:36] info: [trainingModel.getLastTrainingDate] Last training date for horse 147402 in Racing: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [GET] /api/training/status/147402/Racing - 200
[2026-01-28 14:22:36] info: [GET] /api/training/status/147402
[2026-01-28 14:22:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1799MB
[2026-01-28 14:22:36] info: [auth:0lbiwy] Starting auth for GET /training/status/147402
[2026-01-28 14:22:36] info: [auth:0lbiwy] Token from cookie: false
[2026-01-28 14:22:36] info: [auth:0lbiwy] Token from header: true
[2026-01-28 14:22:36] info: [auth:0lbiwy] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:36] info: [ownership] Validated ownership: user 5318fba6-211b-4c37-850b-fb855a76e137 owns horse 147402
[2026-01-28 14:22:36] info: [trainingRoutes.getStatusAll] User 5318fba6-211b-4c37-850b-fb855a76e137 getting all training statuses for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Western Pleasure
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Western Pleasure
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Reining
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Reining
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Cutting
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Cutting
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Barrel Racing
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Barrel Racing
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Roping
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Roping
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Team Penning
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Team Penning
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Rodeo
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Rodeo
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Hunter
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Hunter
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Saddleseat
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Saddleseat
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Endurance
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Endurance
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Eventing
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Eventing
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Dressage
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Dressage
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Show Jumping
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Show Jumping
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Vaulting
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Vaulting
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Polo
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Polo
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Cross Country
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Cross Country
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Combined Driving
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Combined Driving
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Fine Harness
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Fine Harness
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Gaited
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Gaited
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Gymkhana
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Gymkhana
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Steeplechase
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Steeplechase
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147402 in Harness Racing
[2026-01-28 14:22:36] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in Harness Racing
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [horseModel.getHorseById] Successfully found horse: TestHorse_1769628156546_kxr0g6 (ID: 147402)
[2026-01-28 14:22:36] info: [trainingController.canTrain] Horse 147402 lacks required trait for Gaited training
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Western Pleasure
[2026-01-28 14:22:36] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:36] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Roping
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Saddleseat
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Dressage
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Polo
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Combined Driving
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Gymkhana
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Gaited
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Western Pleasure
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Roping
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Saddleseat
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Dressage
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Polo
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Combined Driving
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Reining
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Cutting
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Gymkhana
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Rodeo
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Gaited
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Hunter
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Barrel Racing
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Team Penning
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Endurance
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Eventing
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Reining
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Cutting
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Show Jumping
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Vaulting
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Fine Harness
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Steeplechase
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Rodeo
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Harness Racing
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Hunter
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Barrel Racing
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Team Penning
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Endurance
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Eventing
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Show Jumping
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Vaulting
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Fine Harness
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Steeplechase
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Harness Racing
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147402 in Cross Country
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingModel.getLastTrainingDate] No training records found for horse 147402 in Cross Country
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [GET] /api/training/status/147402 - 200
[2026-01-28 14:22:37] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1806MB
[2026-01-28 14:22:37] info: [auth:fsklgm] Starting auth for GET /horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] info: [auth:fsklgm] Token from cookie: false
[2026-01-28 14:22:37] info: [auth:fsklgm] Token from header: true
[2026-01-28 14:22:37] info: [auth:fsklgm] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] info: [GET] /api/horses/trainable/5318fba6-211b-4c37-850b-fb855a76e137 - 200
[2026-01-28 14:22:37] info: [POST] /api/training/train
[2026-01-28 14:22:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1806MB
[2026-01-28 14:22:37] info: [auth:8waoea] Starting auth for POST /training/train
[2026-01-28 14:22:37] info: [auth:8waoea] Token from cookie: false
[2026-01-28 14:22:37] info: [auth:8waoea] Token from header: true
[2026-01-28 14:22:37] info: [auth:8waoea] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] info: [POST] /api/training/train - 403
[2026-01-28 14:22:37] info: [POST] /api/training/train
[2026-01-28 14:22:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1808MB
[2026-01-28 14:22:37] info: [auth:p0jg7v] Starting auth for POST /training/train
[2026-01-28 14:22:37] info: [auth:p0jg7v] Token from cookie: false
[2026-01-28 14:22:37] info: [auth:p0jg7v] Token from header: true
[2026-01-28 14:22:37] info: [auth:p0jg7v] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] warn: [ownership] horse 99999 not found or not owned by user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] info: [POST] /api/training/train - 404
[2026-01-28 14:22:37] info: [POST] /api/training/train
[2026-01-28 14:22:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1809MB
[2026-01-28 14:22:37] info: [auth:wive5q] Starting auth for POST /training/train
[2026-01-28 14:22:37] info: [auth:wive5q] Token from cookie: false
[2026-01-28 14:22:37] info: [auth:wive5q] Token from header: true
[2026-01-28 14:22:37] info: [auth:wive5q] Authenticated user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] info: [ownership] Found owned horse 147402 for user 5318fba6-211b-4c37-850b-fb855a76e137
[2026-01-28 14:22:37] info: [trainingController.trainRouteHandler] Training request for horse 147402 in InvalidDiscipline
[2026-01-28 14:22:37] info: [trainingController.trainHorse] Attempting to train horse 147402 in InvalidDiscipline
[2026-01-28 14:22:37] info: [trainingController.canTrain] Checking training eligibility for horse 147402 in InvalidDiscipline
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Getting age for horse 147402
[2026-01-28 14:22:37] info: [trainingModel.getHorseAge] Horse 147402 is 4 years old
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147402 across all disciplines
[2026-01-28 14:22:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147402: Wed Jan 28 2026 14:22:36 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:22:37] info: [trainingController.canTrain] Horse 147402 still in cooldown for any training (7 days remaining)
[2026-01-28 14:22:37] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:22:37] info: [POST] /api/training/train - 400
PASS tests/training-updated.test.mjs
  üèãÔ∏è INTEGRATION: Training System Updated - User Model Integration
    Age Requirement Tests
      ‚àö should get trainable horses for authenticated user (53 ms)
      ‚àö should block training for horse under 3 years old (97 ms)
      ‚àö should allow training for horse 3+ years old (31 ms)
    Training Status Tests
      ‚àö should get training status for a specific horse and discipline (45 ms)
      ‚àö should get all training status for a horse (398 ms)
    Authenticated API Access Tests
      ‚àö should require authentication to get trainable horses (24 ms)
      ‚àö should require authentication for training requests (27 ms)
    Error Handling Tests
      ‚àö should handle invalid horse ID gracefully (32 ms)
      ‚àö should handle invalid discipline gracefully (36 ms)

[2026-01-28 14:22:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:37] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:37] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:37] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:38] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:38] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:38] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:38] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:38] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:38] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:38] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:38] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:38] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:38] info: [GET] /api/horses/147403/environmental-analysis
[2026-01-28 14:22:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1858MB
[2026-01-28 14:22:38] info: [auth:k0p8av] Starting auth for GET /horses/147403/environmental-analysis
[2026-01-28 14:22:38] info: [auth:k0p8av] Token from cookie: false
[2026-01-28 14:22:38] info: [auth:k0p8av] Token from header: true
[2026-01-28 14:22:38] info: [auth:k0p8av] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [auth:q4jbi] Starting auth for GET /horses/147403/environmental-analysis
[2026-01-28 14:22:38] info: [auth:q4jbi] Token from cookie: false
[2026-01-28 14:22:38] info: [auth:q4jbi] Token from header: true
[2026-01-28 14:22:38] info: [auth:q4jbi] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147403
[2026-01-28 14:22:38] info: Environmental analysis generated for horse 147403 by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [GET] /api/horses/147403/environmental-analysis - 200
[2026-01-28 14:22:38] info: [GET] /api/horses/147403/environmental-forecast?days=30
[2026-01-28 14:22:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1866MB
[2026-01-28 14:22:38] info: [auth:3doiwd] Starting auth for GET /horses/147403/environmental-forecast
[2026-01-28 14:22:38] info: [auth:3doiwd] Token from cookie: false
[2026-01-28 14:22:38] info: [auth:3doiwd] Token from header: true
[2026-01-28 14:22:38] info: [auth:3doiwd] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [auth:n9j0pd] Starting auth for GET /horses/147403/environmental-forecast
[2026-01-28 14:22:38] info: [auth:n9j0pd] Token from cookie: false
[2026-01-28 14:22:38] info: [auth:n9j0pd] Token from header: true
[2026-01-28 14:22:38] info: [auth:n9j0pd] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147403
[2026-01-28 14:22:38] info: Environmental forecast generated for horse 147403 (30 days) by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [GET] /api/horses/147403/environmental-forecast?days=30 - 200
[2026-01-28 14:22:38] info: [POST] /api/horses/147403/evaluate-trait-opportunity
[2026-01-28 14:22:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1865MB
[2026-01-28 14:22:38] info: [auth:vn948o] Starting auth for POST /horses/147403/evaluate-trait-opportunity
[2026-01-28 14:22:38] info: [auth:vn948o] Token from cookie: false
[2026-01-28 14:22:38] info: [auth:vn948o] Token from header: true
[2026-01-28 14:22:38] info: [auth:vn948o] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [auth:z81kww] Starting auth for POST /horses/147403/evaluate-trait-opportunity
[2026-01-28 14:22:38] info: [auth:z81kww] Token from cookie: false
[2026-01-28 14:22:38] info: [auth:z81kww] Token from header: true
[2026-01-28 14:22:38] info: [auth:z81kww] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147403
[2026-01-28 14:22:38] info: Trait opportunity evaluated for horse 147403 (confident in early_socialization) by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:38] info: [POST] /api/horses/147403/evaluate-trait-opportunity - 200
[2026-01-28 14:22:38] info: [GET] /api/horses/147403/environmental-analysis
[2026-01-28 14:22:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1861MB
[2026-01-28 14:22:38] info: [auth:sbfpt6] Starting auth for GET /horses/147403/environmental-analysis
[2026-01-28 14:22:38] info: [auth:sbfpt6] Token from cookie: false
[2026-01-28 14:22:38] warn: [auth:sbfpt6] Access token is required for GET /horses/147403/environmental-analysis from ::ffff:127.0.0.1
[2026-01-28 14:22:38] info: [GET] /api/horses/147403/environmental-analysis - 401
[2026-01-28 14:22:39] info: [GET] /api/horses/147405/environmental-analysis
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1861MB
[2026-01-28 14:22:39] info: [auth:4tarz] Starting auth for GET /horses/147405/environmental-analysis
[2026-01-28 14:22:39] info: [auth:4tarz] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:4tarz] Token from header: true
[2026-01-28 14:22:39] info: [auth:4tarz] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:etzr6] Starting auth for GET /horses/147405/environmental-analysis
[2026-01-28 14:22:39] info: [auth:etzr6] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:etzr6] Token from header: true
[2026-01-28 14:22:39] info: [auth:etzr6] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] warn: [ownership] horse 147405 not found or not owned by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147405/environmental-analysis - 404
[2026-01-28 14:22:39] info: [GET] /api/horses/147404/trait-interactions
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1869MB
[2026-01-28 14:22:39] info: [auth:hlz98] Starting auth for GET /horses/147404/trait-interactions
[2026-01-28 14:22:39] info: [auth:hlz98] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:hlz98] Token from header: true
[2026-01-28 14:22:39] info: [auth:hlz98] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:9xturf] Starting auth for GET /horses/147404/trait-interactions
[2026-01-28 14:22:39] info: [auth:9xturf] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:9xturf] Token from header: true
[2026-01-28 14:22:39] info: [auth:9xturf] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147404
[2026-01-28 14:22:39] info: Trait interactions analyzed for horse 147404 by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147404/trait-interactions - 200
[2026-01-28 14:22:39] info: [GET] /api/horses/147404/trait-matrix
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1869MB
[2026-01-28 14:22:39] info: [auth:r16bii] Starting auth for GET /horses/147404/trait-matrix
[2026-01-28 14:22:39] info: [auth:r16bii] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:r16bii] Token from header: true
[2026-01-28 14:22:39] info: [auth:r16bii] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:mrmjhc] Starting auth for GET /horses/147404/trait-matrix
[2026-01-28 14:22:39] info: [auth:mrmjhc] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:mrmjhc] Token from header: true
[2026-01-28 14:22:39] info: [auth:mrmjhc] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147404
[2026-01-28 14:22:39] info: Trait interaction matrix generated for horse 147404 by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147404/trait-matrix - 200
[2026-01-28 14:22:39] info: [GET] /api/horses/147404/trait-stability
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1867MB
[2026-01-28 14:22:39] info: [auth:5j2zag] Starting auth for GET /horses/147404/trait-stability
[2026-01-28 14:22:39] info: [auth:5j2zag] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:5j2zag] Token from header: true
[2026-01-28 14:22:39] info: [auth:5j2zag] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:5kfurk] Starting auth for GET /horses/147404/trait-stability
[2026-01-28 14:22:39] info: [auth:5kfurk] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:5kfurk] Token from header: true
[2026-01-28 14:22:39] info: [auth:5kfurk] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147404
[2026-01-28 14:22:39] info: Trait stability analyzed for horse 147404 by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147404/trait-stability - 200
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/developmental-windows
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1860MB
[2026-01-28 14:22:39] info: [auth:zc3kqb] Starting auth for GET /horses/147403/developmental-windows
[2026-01-28 14:22:39] info: [auth:zc3kqb] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:zc3kqb] Token from header: true
[2026-01-28 14:22:39] info: [auth:zc3kqb] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:fmm4hh] Starting auth for GET /horses/147403/developmental-windows
[2026-01-28 14:22:39] info: [auth:fmm4hh] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:fmm4hh] Token from header: true
[2026-01-28 14:22:39] info: [auth:fmm4hh] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147403
[2026-01-28 14:22:39] info: Developmental windows identified for horse 147403 by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/developmental-windows - 200
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/developmental-forecast?days=60
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1871MB
[2026-01-28 14:22:39] info: [auth:6iouc9] Starting auth for GET /horses/147403/developmental-forecast
[2026-01-28 14:22:39] info: [auth:6iouc9] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:6iouc9] Token from header: true
[2026-01-28 14:22:39] info: [auth:6iouc9] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:wc7xg] Starting auth for GET /horses/147403/developmental-forecast
[2026-01-28 14:22:39] info: [auth:wc7xg] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:wc7xg] Token from header: true
[2026-01-28 14:22:39] info: [auth:wc7xg] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147403
[2026-01-28 14:22:39] info: Developmental forecast generated for horse 147403 (60 days) by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/developmental-forecast?days=60 - 200
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/critical-period-analysis
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1868MB
[2026-01-28 14:22:39] info: [auth:vlgpdv] Starting auth for GET /horses/147403/critical-period-analysis
[2026-01-28 14:22:39] info: [auth:vlgpdv] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:vlgpdv] Token from header: true
[2026-01-28 14:22:39] info: [auth:vlgpdv] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:r594kq] Starting auth for GET /horses/147403/critical-period-analysis
[2026-01-28 14:22:39] info: [auth:r594kq] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:r594kq] Token from header: true
[2026-01-28 14:22:39] info: [auth:r594kq] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147403
[2026-01-28 14:22:39] info: Critical period analysis generated for horse 147403 by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/critical-period-analysis - 200
[2026-01-28 14:22:39] info: [POST] /api/horses/147403/coordinate-development
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1869MB
[2026-01-28 14:22:39] info: [auth:ckyykp] Starting auth for POST /horses/147403/coordinate-development
[2026-01-28 14:22:39] info: [auth:ckyykp] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:ckyykp] Token from header: true
[2026-01-28 14:22:39] info: [auth:ckyykp] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:tbbpg] Starting auth for POST /horses/147403/coordinate-development
[2026-01-28 14:22:39] info: [auth:tbbpg] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:tbbpg] Token from header: true
[2026-01-28 14:22:39] info: [auth:tbbpg] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [ownership] Validated ownership: user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7 owns horse 147403
[2026-01-28 14:22:39] info: Development coordination generated for horse 147403 by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [POST] /api/horses/147403/coordinate-development - 200
[2026-01-28 14:22:39] info: [POST] /api/horses/147403/evaluate-trait-opportunity
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1865MB
[2026-01-28 14:22:39] info: [auth:eizp0f] Starting auth for POST /horses/147403/evaluate-trait-opportunity
[2026-01-28 14:22:39] info: [auth:eizp0f] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:eizp0f] Token from header: true
[2026-01-28 14:22:39] info: [auth:eizp0f] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:em9bn] Starting auth for POST /horses/147403/evaluate-trait-opportunity
[2026-01-28 14:22:39] info: [auth:em9bn] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:em9bn] Token from header: true
[2026-01-28 14:22:39] info: [auth:em9bn] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [POST] /api/horses/147403/evaluate-trait-opportunity - 400
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/developmental-forecast?days=-5
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1871MB
[2026-01-28 14:22:39] info: [auth:yb4s7q] Starting auth for GET /horses/147403/developmental-forecast
[2026-01-28 14:22:39] info: [auth:yb4s7q] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:yb4s7q] Token from header: true
[2026-01-28 14:22:39] info: [auth:yb4s7q] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:ri8dkp] Starting auth for GET /horses/147403/developmental-forecast
[2026-01-28 14:22:39] info: [auth:ri8dkp] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:ri8dkp] Token from header: true
[2026-01-28 14:22:39] info: [auth:ri8dkp] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/147403/developmental-forecast?days=-5 - 400
[2026-01-28 14:22:39] info: [GET] /api/horses/99999/environmental-analysis
[2026-01-28 14:22:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1862MB
[2026-01-28 14:22:39] info: [auth:5td4w] Starting auth for GET /horses/99999/environmental-analysis
[2026-01-28 14:22:39] info: [auth:5td4w] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:5td4w] Token from header: true
[2026-01-28 14:22:39] info: [auth:5td4w] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [auth:g6w6v] Starting auth for GET /horses/99999/environmental-analysis
[2026-01-28 14:22:39] info: [auth:g6w6v] Token from cookie: false
[2026-01-28 14:22:39] info: [auth:g6w6v] Token from header: true
[2026-01-28 14:22:39] info: [auth:g6w6v] Authenticated user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] warn: [ownership] horse 99999 not found or not owned by user b4d16a67-d87a-4fcb-bccf-74a15c4fc0d7
[2026-01-28 14:22:39] info: [GET] /api/horses/99999/environmental-analysis - 404
PASS tests/routes/advancedEpigeneticRoutes.test.mjs
  Advanced Epigenetic API Routes
    Environmental Trigger Endpoints
      ‚àö GET /api/horses/:id/environmental-analysis should return environmental trigger analysis (191 ms)
      ‚àö GET /api/horses/:id/environmental-forecast should return environmental forecast (51 ms)
      ‚àö POST /api/horses/:id/evaluate-trait-opportunity should evaluate trait development opportunity (53 ms)
      ‚àö should require authentication for environmental endpoints (22 ms)
      ‚àö should validate horse ownership for environmental endpoints (56 ms)
    Trait Interaction Endpoints
      ‚àö GET /api/horses/:id/trait-interactions should return trait interaction analysis (48 ms)
      ‚àö GET /api/horses/:id/trait-matrix should return complete interaction matrix (49 ms)
      ‚àö GET /api/horses/:id/trait-stability should return interaction stability analysis (38 ms)
    Developmental Window Endpoints
      ‚àö GET /api/horses/:id/developmental-windows should return active and upcoming windows (44 ms)
      ‚àö GET /api/horses/:id/developmental-forecast should return developmental forecast (43 ms)
      ‚àö GET /api/horses/:id/critical-period-analysis should return critical period sensitivity (49 ms)
      ‚àö POST /api/horses/:id/coordinate-development should coordinate multi-window development (46 ms)
    Input Validation
      ‚àö should validate trait opportunity evaluation input (39 ms)
      ‚àö should validate forecast days parameter (34 ms)
      ‚àö should handle non-existent horse IDs (36 ms)

[2026-01-28 14:22:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:39] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:39] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:39] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:40] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:40] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:40] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:40] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:40] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:40] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:40] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:40] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:40] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:40] info: [POST] /api/personality-evolution/groom/73794/evolve
[2026-01-28 14:22:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1926MB
[2026-01-28 14:22:40] info: [auth:n01w8] Starting auth for POST /personality-evolution/groom/73794/evolve
[2026-01-28 14:22:40] info: [auth:n01w8] Token from cookie: false
[2026-01-28 14:22:40] info: [auth:n01w8] Token from header: true
[2026-01-28 14:22:40] info: [auth:n01w8] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:40] info: [auth:etfo7] Starting auth for POST /groom/73794/evolve
[2026-01-28 14:22:40] info: [auth:etfo7] Token from cookie: false
[2026-01-28 14:22:40] info: [auth:etfo7] Token from header: true
[2026-01-28 14:22:40] info: [auth:etfo7] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:40] info: [ownership] Validated ownership: user ff30dbfd-4baf-4e11-bffd-c2ddb2443036 owns groom 73794
[2026-01-28 14:22:40] info: [personalityEvolutionController.evolveGroomPersonalityController] Processing groom evolution for ID: 73794
[2026-01-28 14:22:40] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73794
[2026-01-28 14:22:40] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73794
[2026-01-28 14:22:40] info: [POST] /api/personality-evolution/groom/73794/evolve - 200
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/groom/invalid/evolve
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1924MB
[2026-01-28 14:22:41] info: [auth:ainxr9] Starting auth for POST /personality-evolution/groom/invalid/evolve
[2026-01-28 14:22:41] info: [auth:ainxr9] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:ainxr9] Token from header: true
[2026-01-28 14:22:41] info: [auth:ainxr9] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:tm3zvf] Starting auth for POST /groom/invalid/evolve
[2026-01-28 14:22:41] info: [auth:tm3zvf] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:tm3zvf] Token from header: true
[2026-01-28 14:22:41] info: [auth:tm3zvf] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be a positive integer","path":"groomId","location":"params"}]
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/groom/invalid/evolve - 400
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/groom/73794/evolve
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1928MB
[2026-01-28 14:22:41] info: [auth:p89au] Starting auth for POST /personality-evolution/groom/73794/evolve
[2026-01-28 14:22:41] info: [auth:p89au] Token from cookie: false
[2026-01-28 14:22:41] warn: [auth:p89au] Access token is required for POST /personality-evolution/groom/73794/evolve from ::ffff:127.0.0.1
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/groom/73794/evolve - 401
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/horse/147406/evolve
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1927MB
[2026-01-28 14:22:41] info: [auth:hiz2c4] Starting auth for POST /personality-evolution/horse/147406/evolve
[2026-01-28 14:22:41] info: [auth:hiz2c4] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:hiz2c4] Token from header: true
[2026-01-28 14:22:41] info: [auth:hiz2c4] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:kqsysk] Starting auth for POST /horse/147406/evolve
[2026-01-28 14:22:41] info: [auth:kqsysk] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:kqsysk] Token from header: true
[2026-01-28 14:22:41] info: [auth:kqsysk] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [ownership] Validated ownership: user ff30dbfd-4baf-4e11-bffd-c2ddb2443036 owns horse 147406
[2026-01-28 14:22:41] info: [personalityEvolutionController.evolveHorseTemperamentController] Processing horse evolution for ID: 147406
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147406
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 147406
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/horse/147406/evolve - 200
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/horse/invalid/evolve
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1919MB
[2026-01-28 14:22:41] info: [auth:dcl8od] Starting auth for POST /personality-evolution/horse/invalid/evolve
[2026-01-28 14:22:41] info: [auth:dcl8od] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:dcl8od] Token from header: true
[2026-01-28 14:22:41] info: [auth:dcl8od] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:0v83d9] Starting auth for POST /horse/invalid/evolve
[2026-01-28 14:22:41] info: [auth:0v83d9] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:0v83d9] Token from header: true
[2026-01-28 14:22:41] info: [auth:0v83d9] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/horse/invalid/evolve - 400
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/triggers
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1923MB
[2026-01-28 14:22:41] info: [auth:ff5asp] Starting auth for GET /personality-evolution/groom/73794/triggers
[2026-01-28 14:22:41] info: [auth:ff5asp] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:ff5asp] Token from header: true
[2026-01-28 14:22:41] info: [auth:ff5asp] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:ys79b] Starting auth for GET /groom/73794/triggers
[2026-01-28 14:22:41] info: [auth:ys79b] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:ys79b] Token from header: true
[2026-01-28 14:22:41] info: [auth:ys79b] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for groom ID: 73794
[2026-01-28 14:22:41] info: [ownership] Found owned groom 73794 for user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 73794
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/triggers - 200
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/horse/147406/triggers
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1929MB
[2026-01-28 14:22:41] info: [auth:eg4sm] Starting auth for GET /personality-evolution/horse/147406/triggers
[2026-01-28 14:22:41] info: [auth:eg4sm] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:eg4sm] Token from header: true
[2026-01-28 14:22:41] info: [auth:eg4sm] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:1g18j] Starting auth for GET /horse/147406/triggers
[2026-01-28 14:22:41] info: [auth:1g18j] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:1g18j] Token from header: true
[2026-01-28 14:22:41] info: [auth:1g18j] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for horse ID: 147406
[2026-01-28 14:22:41] info: [ownership] Found owned horse 147406 for user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for horse 147406
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/horse/147406/triggers - 200
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/invalid/73794/triggers
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1920MB
[2026-01-28 14:22:41] info: [auth:7sgd0m] Starting auth for GET /personality-evolution/invalid/73794/triggers
[2026-01-28 14:22:41] info: [auth:7sgd0m] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:7sgd0m] Token from header: true
[2026-01-28 14:22:41] info: [auth:7sgd0m] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:7u2w9s] Starting auth for GET /invalid/73794/triggers
[2026-01-28 14:22:41] info: [auth:7u2w9s] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:7u2w9s] Token from header: true
[2026-01-28 14:22:41] info: [auth:7u2w9s] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"params"}]
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/invalid/73794/triggers - 400
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/stability
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1924MB
[2026-01-28 14:22:41] info: [auth:7z0xi8] Starting auth for GET /personality-evolution/groom/73794/stability
[2026-01-28 14:22:41] info: [auth:7z0xi8] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:7z0xi8] Token from header: true
[2026-01-28 14:22:41] info: [auth:7z0xi8] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:vampd] Starting auth for GET /groom/73794/stability
[2026-01-28 14:22:41] info: [auth:vampd] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:vampd] Token from header: true
[2026-01-28 14:22:41] info: [auth:vampd] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for groom ID: 73794
[2026-01-28 14:22:41] info: [ownership] Found owned groom 73794 for user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for groom 73794
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/stability - 200
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/horse/147406/stability
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1930MB
[2026-01-28 14:22:41] info: [auth:lbsar2] Starting auth for GET /personality-evolution/horse/147406/stability
[2026-01-28 14:22:41] info: [auth:lbsar2] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:lbsar2] Token from header: true
[2026-01-28 14:22:41] info: [auth:lbsar2] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:2k1zc8] Starting auth for GET /horse/147406/stability
[2026-01-28 14:22:41] info: [auth:2k1zc8] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:2k1zc8] Token from header: true
[2026-01-28 14:22:41] info: [auth:2k1zc8] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for horse ID: 147406
[2026-01-28 14:22:41] info: [ownership] Found owned horse 147406 for user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 147406
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/horse/147406/stability - 200
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/predict
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1921MB
[2026-01-28 14:22:41] info: [auth:u63369] Starting auth for GET /personality-evolution/groom/73794/predict
[2026-01-28 14:22:41] info: [auth:u63369] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:u63369] Token from header: true
[2026-01-28 14:22:41] info: [auth:u63369] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:wwr4] Starting auth for GET /groom/73794/predict
[2026-01-28 14:22:41] info: [auth:wwr4] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:wwr4] Token from header: true
[2026-01-28 14:22:41] info: [auth:wwr4] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for groom ID: 73794 over 30 days
[2026-01-28 14:22:41] info: [ownership] Found owned groom 73794 for user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 73794 over 30 days
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/predict - 200
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/horse/147406/predict?timeframeDays=60
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1927MB
[2026-01-28 14:22:41] info: [auth:ranyhi] Starting auth for GET /personality-evolution/horse/147406/predict
[2026-01-28 14:22:41] info: [auth:ranyhi] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:ranyhi] Token from header: true
[2026-01-28 14:22:41] info: [auth:ranyhi] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:c1ypzj] Starting auth for GET /horse/147406/predict
[2026-01-28 14:22:41] info: [auth:c1ypzj] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:c1ypzj] Token from header: true
[2026-01-28 14:22:41] info: [auth:c1ypzj] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for horse ID: 147406 over 60 days
[2026-01-28 14:22:41] info: [ownership] Found owned horse 147406 for user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for horse 147406 over 60 days
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/horse/147406/predict?timeframeDays=60 - 200
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/predict?timeframeDays=500
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1932MB
[2026-01-28 14:22:41] info: [auth:t2cmn] Starting auth for GET /personality-evolution/groom/73794/predict
[2026-01-28 14:22:41] info: [auth:t2cmn] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:t2cmn] Token from header: true
[2026-01-28 14:22:41] info: [auth:t2cmn] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:xtuue5] Starting auth for GET /groom/73794/predict
[2026-01-28 14:22:41] info: [auth:xtuue5] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:xtuue5] Token from header: true
[2026-01-28 14:22:41] info: [auth:xtuue5] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"500","msg":"Timeframe must be between 1 and 365 days","path":"timeframeDays","location":"query"}]
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/predict?timeframeDays=500 - 400
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/history
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1922MB
[2026-01-28 14:22:41] info: [auth:ldanx] Starting auth for GET /personality-evolution/groom/73794/history
[2026-01-28 14:22:41] info: [auth:ldanx] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:ldanx] Token from header: true
[2026-01-28 14:22:41] info: [auth:ldanx] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:cdn8y] Starting auth for GET /groom/73794/history
[2026-01-28 14:22:41] info: [auth:cdn8y] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:cdn8y] Token from header: true
[2026-01-28 14:22:41] info: [auth:cdn8y] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.getPersonalityEvolutionHistoryController] Getting evolution history for groom ID: 73794
[2026-01-28 14:22:41] info: [ownership] Found owned groom 73794 for user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 73794
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/groom/73794/history - 200
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/apply-effects
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1929MB
[2026-01-28 14:22:41] info: [auth:7irejf] Starting auth for POST /personality-evolution/apply-effects
[2026-01-28 14:22:41] info: [auth:7irejf] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:7irejf] Token from header: true
[2026-01-28 14:22:41] info: [auth:7irejf] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:5p4ss5] Starting auth for POST /apply-effects
[2026-01-28 14:22:41] info: [auth:5p4ss5] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:5p4ss5] Token from header: true
[2026-01-28 14:22:41] info: [auth:5p4ss5] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.applyPersonalityEvolutionEffectsController] Applying evolution effects for groom ID: 73794
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73794
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/apply-effects - 200
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/apply-effects
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1934MB
[2026-01-28 14:22:41] info: [auth:5xoyos] Starting auth for POST /personality-evolution/apply-effects
[2026-01-28 14:22:41] info: [auth:5xoyos] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:5xoyos] Token from header: true
[2026-01-28 14:22:41] info: [auth:5xoyos] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:oj2u8o] Starting auth for POST /apply-effects
[2026-01-28 14:22:41] info: [auth:oj2u8o] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:oj2u8o] Token from header: true
[2026-01-28 14:22:41] info: [auth:oj2u8o] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"body"},{"type":"field","msg":"Invalid evolution type","path":"evolutionType","location":"body"}]
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/apply-effects - 400
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/batch-evolve
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1924MB
[2026-01-28 14:22:41] info: [auth:ff2n9a] Starting auth for POST /personality-evolution/batch-evolve
[2026-01-28 14:22:41] info: [auth:ff2n9a] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:ff2n9a] Token from header: true
[2026-01-28 14:22:41] info: [auth:ff2n9a] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:6tslid] Starting auth for POST /batch-evolve
[2026-01-28 14:22:41] info: [auth:6tslid] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:6tslid] Token from header: true
[2026-01-28 14:22:41] info: [auth:6tslid] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [personalityEvolutionController.batchEvolvePersonalitiesController] Processing batch evolution for 2 entities
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73794
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73794
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147406
[2026-01-28 14:22:41] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 147406
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/batch-evolve - 200
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/batch-evolve
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1934MB
[2026-01-28 14:22:41] info: [auth:39xskd] Starting auth for POST /personality-evolution/batch-evolve
[2026-01-28 14:22:41] info: [auth:39xskd] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:39xskd] Token from header: true
[2026-01-28 14:22:41] info: [auth:39xskd] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:wd7d2v] Starting auth for POST /batch-evolve
[2026-01-28 14:22:41] info: [auth:wd7d2v] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:wd7d2v] Token from header: true
[2026-01-28 14:22:41] info: [auth:wd7d2v] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":[],"msg":"Entities must be an array with 1-50 items","path":"entities","location":"body"}]
[2026-01-28 14:22:41] info: [POST] /api/personality-evolution/batch-evolve - 400
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/config
[2026-01-28 14:22:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1924MB
[2026-01-28 14:22:41] info: [auth:u365h] Starting auth for GET /personality-evolution/config
[2026-01-28 14:22:41] info: [auth:u365h] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:u365h] Token from header: true
[2026-01-28 14:22:41] info: [auth:u365h] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [auth:l9his8] Starting auth for GET /config
[2026-01-28 14:22:41] info: [auth:l9his8] Token from cookie: false
[2026-01-28 14:22:41] info: [auth:l9his8] Token from header: true
[2026-01-28 14:22:41] info: [auth:l9his8] Authenticated user ff30dbfd-4baf-4e11-bffd-c2ddb2443036
[2026-01-28 14:22:41] info: [GET] /api/personality-evolution/config - 200
PASS tests/controllers/personalityEvolutionController.test.mjs
  Personality Evolution Controller API
    POST /api/personality-evolution/groom/:groomId/evolve
      ‚àö should evolve groom personality successfully (61 ms)
      ‚àö should return 400 for invalid groom ID (33 ms)
      ‚àö should return 401 without authentication (22 ms)
    POST /api/personality-evolution/horse/:horseId/evolve
      ‚àö should evolve horse temperament successfully (43 ms)
      ‚àö should return 400 for invalid horse ID (34 ms)
    GET /api/personality-evolution/:entityType/:entityId/triggers
      ‚àö should get evolution triggers for groom (37 ms)
      ‚àö should get evolution triggers for horse (37 ms)
      ‚àö should return 400 for invalid entity type (36 ms)
    GET /api/personality-evolution/:entityType/:entityId/stability
      ‚àö should analyze personality stability for groom (39 ms)
      ‚àö should analyze personality stability for horse (36 ms)
    GET /api/personality-evolution/:entityType/:entityId/predict
      ‚àö should predict personality evolution with default timeframe (35 ms)
      ‚àö should predict personality evolution with custom timeframe (34 ms)
      ‚àö should return 400 for invalid timeframe (30 ms)
    GET /api/personality-evolution/:entityType/:entityId/history
      ‚àö should get personality evolution history (36 ms)
    POST /api/personality-evolution/apply-effects
      ‚àö should apply personality evolution effects successfully (40 ms)
      ‚àö should return 400 for missing required fields (32 ms)
    POST /api/personality-evolution/batch-evolve
      ‚àö should process batch evolution successfully (50 ms)
      ‚àö should return 400 for empty entities array (29 ms)
    GET /api/personality-evolution/config
      ‚àö should get system configuration successfully (35 ms)

[2026-01-28 14:22:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:41] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:41] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:41] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:43] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:43] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:43] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:43] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:43] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:43] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:43] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:43] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:43] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:43] info: [GET] /api/horses
[2026-01-28 14:22:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1755MB
[2026-01-28 14:22:43] info: [auth:af5q22] Starting auth for GET /horses
[2026-01-28 14:22:43] info: [auth:af5q22] Token from cookie: false
[2026-01-28 14:22:43] info: [auth:af5q22] Token from header: true
[2026-01-28 14:22:43] info: [auth:af5q22] Authenticated user test-user-uuid-123
[2026-01-28 14:22:43] info: [GET] /api/horses - 200
PASS __tests__/integration/horse-rate-limiting.test.mjs
  Horse routes rate limiting
    ‚àö should apply query rate limiter to GET /api/horses (93 ms)

[2026-01-28 14:22:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:44] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:44] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:44] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:44] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:44] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:44] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:44] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:44] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:44] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:44] info: [GET] /api/grooms/enhanced/interactions/73795/147407
[2026-01-28 14:22:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1813MB
[2026-01-28 14:22:44] info: [auth:mtgr29] Starting auth for GET /grooms/enhanced/interactions/73795/147407
[2026-01-28 14:22:44] info: [auth:mtgr29] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:mtgr29] Token from header: true
[2026-01-28 14:22:44] info: [auth:mtgr29] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [auth:d797mj] Starting auth for GET /interactions/73795/147407
[2026-01-28 14:22:44] info: [auth:d797mj] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:d797mj] Token from header: true
[2026-01-28 14:22:44] info: [auth:d797mj] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [ownership] Validated ownership: user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e owns groom 73795
[2026-01-28 14:22:44] info: [ownership] Validated ownership: user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e owns horse 147407
[2026-01-28 14:22:44] info: [enhancedGroomController] Getting enhanced interactions for groom 73795 and horse 147407
[2026-01-28 14:22:44] info: [GET] /api/grooms/enhanced/interactions/73795/147407 - 200
[2026-01-28 14:22:44] info: [GET] /api/grooms/enhanced/interactions/99999/147407
[2026-01-28 14:22:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1813MB
[2026-01-28 14:22:44] info: [auth:iwpd19] Starting auth for GET /grooms/enhanced/interactions/99999/147407
[2026-01-28 14:22:44] info: [auth:iwpd19] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:iwpd19] Token from header: true
[2026-01-28 14:22:44] info: [auth:iwpd19] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [auth:nrjtou] Starting auth for GET /interactions/99999/147407
[2026-01-28 14:22:44] info: [auth:nrjtou] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:nrjtou] Token from header: true
[2026-01-28 14:22:44] info: [auth:nrjtou] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] warn: [ownership] groom 99999 not found or not owned by user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [GET] /api/grooms/enhanced/interactions/99999/147407 - 404
[2026-01-28 14:22:44] info: [GET] /api/grooms/enhanced/interactions/73795/99999
[2026-01-28 14:22:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1820MB
[2026-01-28 14:22:44] info: [auth:9u2fej] Starting auth for GET /grooms/enhanced/interactions/73795/99999
[2026-01-28 14:22:44] info: [auth:9u2fej] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:9u2fej] Token from header: true
[2026-01-28 14:22:44] info: [auth:9u2fej] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [auth:olc9rk] Starting auth for GET /interactions/73795/99999
[2026-01-28 14:22:44] info: [auth:olc9rk] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:olc9rk] Token from header: true
[2026-01-28 14:22:44] info: [auth:olc9rk] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [ownership] Validated ownership: user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e owns groom 73795
[2026-01-28 14:22:44] warn: [ownership] horse 99999 not found or not owned by user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [GET] /api/grooms/enhanced/interactions/73795/99999 - 404
[2026-01-28 14:22:44] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:22:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1814MB
[2026-01-28 14:22:44] info: [auth:dlebp] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:22:44] info: [auth:dlebp] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:dlebp] Token from header: true
[2026-01-28 14:22:44] info: [auth:dlebp] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [auth:1rpzve] Starting auth for POST /interact
[2026-01-28 14:22:44] info: [auth:1rpzve] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:1rpzve] Token from header: true
[2026-01-28 14:22:44] info: [auth:1rpzve] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [enhancedGroomController] Performing enhanced daily_care interaction
[2026-01-28 14:22:44] info: [ownership] Found owned groom 73795 for user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [enhancedGroomInteractions] Calculated effects: +5 bonding, -2 stress, quality: fair
[2026-01-28 14:22:44] info: [enhancedGroomController] Enhanced interaction completed: +5 bonding, -2 stress
[2026-01-28 14:22:44] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 14:22:44] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:22:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1814MB
[2026-01-28 14:22:44] info: [auth:a2r3t] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:22:44] info: [auth:a2r3t] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:a2r3t] Token from header: true
[2026-01-28 14:22:44] info: [auth:a2r3t] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [auth:mp26v] Starting auth for POST /interact
[2026-01-28 14:22:44] info: [auth:mp26v] Token from cookie: false
[2026-01-28 14:22:44] info: [auth:mp26v] Token from header: true
[2026-01-28 14:22:44] info: [auth:mp26v] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [enhancedGroomController] Performing enhanced enrichment interaction
[2026-01-28 14:22:44] info: [ownership] Found owned groom 73795 for user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:44] info: [enhancedGroomInteractions] Calculated effects: +7 bonding, -6 stress, quality: good
[2026-01-28 14:22:44] info: [enhancedGroomController] Enhanced interaction completed: +7 bonding, -6 stress
[2026-01-28 14:22:44] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 14:22:44] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:22:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1825MB
[2026-01-28 14:22:45] info: [auth:ssybcg] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:22:45] info: [auth:ssybcg] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:ssybcg] Token from header: true
[2026-01-28 14:22:45] info: [auth:ssybcg] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [auth:tmz65n] Starting auth for POST /interact
[2026-01-28 14:22:45] info: [auth:tmz65n] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:tmz65n] Token from header: true
[2026-01-28 14:22:45] info: [auth:tmz65n] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [enhancedGroomController] Performing enhanced bonding_time interaction
[2026-01-28 14:22:45] info: [ownership] Found owned groom 73795 for user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [enhancedGroomInteractions] Calculated effects: +18 bonding, -8 stress, quality: exceptional
[2026-01-28 14:22:45] info: [enhancedGroomController] Enhanced interaction completed: +18 bonding, -8 stress
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1820MB
[2026-01-28 14:22:45] info: [auth:qt2nwq] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:22:45] info: [auth:qt2nwq] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:qt2nwq] Token from header: true
[2026-01-28 14:22:45] info: [auth:qt2nwq] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [auth:wcrv8] Starting auth for POST /interact
[2026-01-28 14:22:45] info: [auth:wcrv8] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:wcrv8] Token from header: true
[2026-01-28 14:22:45] info: [auth:wcrv8] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [enhancedGroomController] Performing enhanced bonding_time interaction
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1816MB
[2026-01-28 14:22:45] info: [auth:69o4] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:22:45] info: [auth:69o4] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:69o4] Token from header: true
[2026-01-28 14:22:45] info: [auth:69o4] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [auth:rgnjmp] Starting auth for POST /interact
[2026-01-28 14:22:45] info: [auth:rgnjmp] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:rgnjmp] Token from header: true
[2026-01-28 14:22:45] info: [auth:rgnjmp] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","msg":"Invalid value","path":"interactionType","location":"body"},{"type":"field","msg":"Interaction type must be a non-empty string (max 50 characters)","path":"interactionType","location":"body"},{"type":"field","msg":"Invalid value","path":"variation","location":"body"},{"type":"field","msg":"Variation must be a non-empty string (max 100 characters)","path":"variation","location":"body"},{"type":"field","msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1823MB
[2026-01-28 14:22:45] info: [auth:sz30vf] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:22:45] info: [auth:sz30vf] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:sz30vf] Token from header: true
[2026-01-28 14:22:45] info: [auth:sz30vf] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [auth:ebzhr] Starting auth for POST /interact
[2026-01-28 14:22:45] info: [auth:ebzhr] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:ebzhr] Token from header: true
[2026-01-28 14:22:45] info: [auth:ebzhr] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [enhancedGroomController] Performing enhanced invalid_type interaction
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1818MB
[2026-01-28 14:22:45] info: [auth:6pi891] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:22:45] info: [auth:6pi891] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:6pi891] Token from header: true
[2026-01-28 14:22:45] info: [auth:6pi891] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [auth:oq5laj] Starting auth for POST /interact
[2026-01-28 14:22:45] info: [auth:oq5laj] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:oq5laj] Token from header: true
[2026-01-28 14:22:45] info: [auth:oq5laj] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","value":200,"msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]
[2026-01-28 14:22:45] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/relationship/73795/147407
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1824MB
[2026-01-28 14:22:45] info: [auth:s2clpr] Starting auth for GET /grooms/enhanced/relationship/73795/147407
[2026-01-28 14:22:45] info: [auth:s2clpr] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:s2clpr] Token from header: true
[2026-01-28 14:22:45] info: [auth:s2clpr] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [auth:yd34a] Starting auth for GET /relationship/73795/147407
[2026-01-28 14:22:45] info: [auth:yd34a] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:yd34a] Token from header: true
[2026-01-28 14:22:45] info: [auth:yd34a] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [ownership] Validated ownership: user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e owns groom 73795
[2026-01-28 14:22:45] info: [ownership] Validated ownership: user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e owns horse 147407
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/relationship/73795/147407 - 200
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/types
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1821MB
[2026-01-28 14:22:45] info: [auth:mx7u0t] Starting auth for GET /grooms/enhanced/interactions/types
[2026-01-28 14:22:45] info: [auth:mx7u0t] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:mx7u0t] Token from header: true
[2026-01-28 14:22:45] info: [auth:mx7u0t] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [auth:z6q3un] Starting auth for GET /interactions/types
[2026-01-28 14:22:45] info: [auth:z6q3un] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:z6q3un] Token from header: true
[2026-01-28 14:22:45] info: [auth:z6q3un] Authenticated user 3df31bf8-2cbb-41fb-bd53-8e5436366a8e
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/types - 200
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/73795/147407
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1816MB
[2026-01-28 14:22:45] info: [auth:e4uxsf] Starting auth for GET /grooms/enhanced/interactions/73795/147407
[2026-01-28 14:22:45] info: [auth:e4uxsf] Token from cookie: false
[2026-01-28 14:22:45] warn: [auth:e4uxsf] Access token is required for GET /grooms/enhanced/interactions/73795/147407 from ::ffff:127.0.0.1
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/73795/147407 - 401
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interact
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1815MB
[2026-01-28 14:22:45] info: [auth:elp9oa] Starting auth for GET /grooms/enhanced/interact
[2026-01-28 14:22:45] info: [auth:elp9oa] Token from cookie: false
[2026-01-28 14:22:45] warn: [auth:elp9oa] Access token is required for GET /grooms/enhanced/interact from ::ffff:127.0.0.1
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interact - 401
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/relationship/73795/147407
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1815MB
[2026-01-28 14:22:45] info: [auth:ezo2qt] Starting auth for GET /grooms/enhanced/relationship/73795/147407
[2026-01-28 14:22:45] info: [auth:ezo2qt] Token from cookie: false
[2026-01-28 14:22:45] warn: [auth:ezo2qt] Access token is required for GET /grooms/enhanced/relationship/73795/147407 from ::ffff:127.0.0.1
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/relationship/73795/147407 - 401
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/types
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1816MB
[2026-01-28 14:22:45] info: [auth:y86dxd] Starting auth for GET /grooms/enhanced/interactions/types
[2026-01-28 14:22:45] info: [auth:y86dxd] Token from cookie: false
[2026-01-28 14:22:45] warn: [auth:y86dxd] Access token is required for GET /grooms/enhanced/interactions/types from ::ffff:127.0.0.1
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/types - 401
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/73795/147407
[2026-01-28 14:22:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1817MB
[2026-01-28 14:22:45] info: [auth:n5txe6] Starting auth for GET /grooms/enhanced/interactions/73795/147407
[2026-01-28 14:22:45] info: [auth:n5txe6] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:n5txe6] Token from header: true
[2026-01-28 14:22:45] info: [auth:n5txe6] Authenticated user 44064701-a229-4d90-9423-090952de7a86
[2026-01-28 14:22:45] info: [auth:djgmg8j] Starting auth for GET /interactions/73795/147407
[2026-01-28 14:22:45] info: [auth:djgmg8j] Token from cookie: false
[2026-01-28 14:22:45] info: [auth:djgmg8j] Token from header: true
[2026-01-28 14:22:45] info: [auth:djgmg8j] Authenticated user 44064701-a229-4d90-9423-090952de7a86
[2026-01-28 14:22:45] warn: [ownership] groom 73795 not found or not owned by user 44064701-a229-4d90-9423-090952de7a86
[2026-01-28 14:22:45] info: [GET] /api/grooms/enhanced/interactions/73795/147407 - 404
PASS tests/integration/enhancedGroomInteractions.test.mjs
  Enhanced Groom Interactions Integration Tests
    1. Get Available Enhanced Interactions
      ‚àö should get available interactions for groom-horse pair (116 ms)
      ‚àö should return 404 for non-existent groom (37 ms)
      ‚àö should return 404 for non-existent horse (38 ms)
    2. Perform Enhanced Interactions
      ‚àö should perform a basic enhanced interaction (63 ms)
      ‚àö should perform enrichment interaction with higher effects (64 ms)
      ‚àö should prevent multiple interactions per day (89 ms)
      ‚àö should validate required fields (33 ms)
      ‚àö should validate interaction type (39 ms)
      ‚àö should validate duration bounds (39 ms)
    3. Relationship Details
      ‚àö should get detailed relationship information (46 ms)
    4. Information Endpoints
      ‚àö should get interaction types (37 ms)
    5. Authentication and Authorization
      ‚àö should require authentication for all endpoints (89 ms)
      ‚àö should prevent access to other users' grooms and horses (42 ms)

[2026-01-28 14:22:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:45] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:45] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:45] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:46] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:46] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:46] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:46] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:46] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:46] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:46] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:46] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:46] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/147410
[2026-01-28 14:22:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1871MB
[2026-01-28 14:22:46] info: [auth:nzhkbd] Starting auth for POST /traits/discover/147410
[2026-01-28 14:22:46] info: [auth:nzhkbd] Token from cookie: false
[2026-01-28 14:22:46] info: [auth:nzhkbd] Token from header: true
[2026-01-28 14:22:46] info: [auth:nzhkbd] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:46] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147410
[2026-01-28 14:22:46] info: [traitController.discoverTraits] Triggering trait discovery for horse 147410
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147410
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 147410
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 147410: athletic, intelligent, bold
[2026-01-28 14:22:46] info: [traitController.discoverTraits] Discovered 3 traits for horse 147410 (High Bond Foal)
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/147410 - 200
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/147411
[2026-01-28 14:22:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1881MB
[2026-01-28 14:22:46] info: [auth:lajuq6] Starting auth for POST /traits/discover/147411
[2026-01-28 14:22:46] info: [auth:lajuq6] Token from cookie: false
[2026-01-28 14:22:46] info: [auth:lajuq6] Token from header: true
[2026-01-28 14:22:46] info: [auth:lajuq6] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:46] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147411
[2026-01-28 14:22:46] info: [traitController.discoverTraits] Triggering trait discovery for horse 147411
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147411
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 147411
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 147411
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/147411 - 200
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/147412
[2026-01-28 14:22:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1884MB
[2026-01-28 14:22:46] info: [auth:kgxh0g] Starting auth for POST /traits/discover/147412
[2026-01-28 14:22:46] info: [auth:kgxh0g] Token from cookie: false
[2026-01-28 14:22:46] info: [auth:kgxh0g] Token from header: true
[2026-01-28 14:22:46] info: [auth:kgxh0g] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:46] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147412
[2026-01-28 14:22:46] info: [traitController.discoverTraits] Triggering trait discovery for horse 147412
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147412
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147412
[2026-01-28 14:22:46] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147412
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/147412 - 200
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/99999
[2026-01-28 14:22:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1872MB
[2026-01-28 14:22:46] info: [auth:l6lvxr] Starting auth for POST /traits/discover/99999
[2026-01-28 14:22:46] info: [auth:l6lvxr] Token from cookie: false
[2026-01-28 14:22:46] info: [auth:l6lvxr] Token from header: true
[2026-01-28 14:22:46] info: [auth:l6lvxr] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:46] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/99999 - 404
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/invalid
[2026-01-28 14:22:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1873MB
[2026-01-28 14:22:46] info: [auth:bamwta] Starting auth for POST /traits/discover/invalid
[2026-01-28 14:22:46] info: [auth:bamwta] Token from cookie: false
[2026-01-28 14:22:46] info: [auth:bamwta] Token from header: true
[2026-01-28 14:22:46] info: [auth:bamwta] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:46] warn: [traitRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]
[2026-01-28 14:22:46] info: [POST] /api/traits/discover/invalid - 400
[2026-01-28 14:22:46] info: [GET] /api/traits/progress/147410
[2026-01-28 14:22:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1873MB
[2026-01-28 14:22:46] info: [auth:n7w7it] Starting auth for GET /traits/progress/147410
[2026-01-28 14:22:46] info: [auth:n7w7it] Token from cookie: false
[2026-01-28 14:22:46] info: [auth:n7w7it] Token from header: true
[2026-01-28 14:22:46] info: [auth:n7w7it] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:46] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147410
[2026-01-28 14:22:46] info: [traitRoutes] GET /progress/147410 - Getting discovery progress
[2026-01-28 14:22:46] info: [GET] /api/traits/progress/147410 - 200
[2026-01-28 14:22:46] info: [GET] /api/traits/progress/99999
[2026-01-28 14:22:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1880MB
[2026-01-28 14:22:46] info: [auth:cayq] Starting auth for GET /traits/progress/99999
[2026-01-28 14:22:46] info: [auth:cayq] Token from cookie: false
[2026-01-28 14:22:46] info: [auth:cayq] Token from header: true
[2026-01-28 14:22:46] info: [auth:cayq] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:22:47] info: [GET] /api/traits/progress/99999 - 404
[2026-01-28 14:22:47] info: [POST] /api/traits/batch-discover
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1882MB
[2026-01-28 14:22:47] info: [auth:xl30ow] Starting auth for POST /traits/batch-discover
[2026-01-28 14:22:47] info: [auth:xl30ow] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:xl30ow] Token from header: true
[2026-01-28 14:22:47] info: [auth:xl30ow] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [traitController.batchDiscoverTraits] Processing batch discovery for 2 horses
[2026-01-28 14:22:47] info: [ownership] Found owned horse 147410 for user test-trait-discovery-user
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147410
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 147410
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 147410: resilient, calm
[2026-01-28 14:22:47] info: [ownership] Found owned horse 147411 for user test-trait-discovery-user
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147411
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 147411
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 147411
[2026-01-28 14:22:47] info: [POST] /api/traits/batch-discover - 200
[2026-01-28 14:22:47] info: [POST] /api/traits/batch-discover
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1878MB
[2026-01-28 14:22:47] info: [auth:jwugtp] Starting auth for POST /traits/batch-discover
[2026-01-28 14:22:47] info: [auth:jwugtp] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:jwugtp] Token from header: true
[2026-01-28 14:22:47] info: [auth:jwugtp] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [traitController.batchDiscoverTraits] Processing batch discovery for 3 horses
[2026-01-28 14:22:47] info: [ownership] Found owned horse 147410 for user test-trait-discovery-user
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147410
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147410
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147410
[2026-01-28 14:22:47] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:22:47] info: [ownership] Found owned horse 147412 for user test-trait-discovery-user
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147412
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147412
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147412
[2026-01-28 14:22:47] info: [POST] /api/traits/batch-discover - 200
[2026-01-28 14:22:47] info: [POST] /api/traits/batch-discover
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1886MB
[2026-01-28 14:22:47] info: [auth:0keg29] Starting auth for POST /traits/batch-discover
[2026-01-28 14:22:47] info: [auth:0keg29] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:0keg29] Token from header: true
[2026-01-28 14:22:47] info: [auth:0keg29] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] warn: [traitRoutes] Validation errors: [{"type":"field","value":[],"msg":"horseIds must be an array with 1-10 elements","path":"horseIds","location":"body"}]
[2026-01-28 14:22:47] info: [POST] /api/traits/batch-discover - 400
[2026-01-28 14:22:47] info: [GET] /api/traits/conditions
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1886MB
[2026-01-28 14:22:47] info: [auth:4t217p] Starting auth for GET /traits/conditions
[2026-01-28 14:22:47] info: [auth:4t217p] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:4t217p] Token from header: true
[2026-01-28 14:22:47] info: [auth:4t217p] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [traitRoutes] GET /conditions - Getting discovery conditions
[2026-01-28 14:22:47] info: [GET] /api/traits/conditions - 200
[2026-01-28 14:22:47] info: [POST] /api/traits/check-conditions/147410
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1877MB
[2026-01-28 14:22:47] info: [auth:26z16q] Starting auth for POST /traits/check-conditions/147410
[2026-01-28 14:22:47] info: [auth:26z16q] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:26z16q] Token from header: true
[2026-01-28 14:22:47] info: [auth:26z16q] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147410
[2026-01-28 14:22:47] info: [traitRoutes] POST /check-conditions/147410 - Checking conditions without discovery
[2026-01-28 14:22:47] info: [POST] /api/traits/check-conditions/147410 - 200
[2026-01-28 14:22:47] info: [POST] /api/traits/check-conditions/99999
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1888MB
[2026-01-28 14:22:47] info: [auth:hwko0h] Starting auth for POST /traits/check-conditions/99999
[2026-01-28 14:22:47] info: [auth:hwko0h] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:hwko0h] Token from header: true
[2026-01-28 14:22:47] info: [auth:hwko0h] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:22:47] info: [POST] /api/traits/check-conditions/99999 - 404
[2026-01-28 14:22:47] info: [GET] /api/traits/progress/147413
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1876MB
[2026-01-28 14:22:47] info: [auth:aa8i3] Starting auth for GET /traits/progress/147413
[2026-01-28 14:22:47] info: [auth:aa8i3] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:aa8i3] Token from header: true
[2026-01-28 14:22:47] info: [auth:aa8i3] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147413
[2026-01-28 14:22:47] info: [traitRoutes] GET /progress/147413 - Getting discovery progress
[2026-01-28 14:22:47] info: [GET] /api/traits/progress/147413 - 200
[2026-01-28 14:22:47] info: [POST] /api/traits/check-conditions/147413
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1881MB
[2026-01-28 14:22:47] info: [auth:vxq8y] Starting auth for POST /traits/check-conditions/147413
[2026-01-28 14:22:47] info: [auth:vxq8y] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:vxq8y] Token from header: true
[2026-01-28 14:22:47] info: [auth:vxq8y] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147413
[2026-01-28 14:22:47] info: [traitRoutes] POST /check-conditions/147413 - Checking conditions without discovery
[2026-01-28 14:22:47] info: [POST] /api/traits/check-conditions/147413 - 200
[2026-01-28 14:22:47] info: [POST] /api/traits/discover/147413
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1884MB
[2026-01-28 14:22:47] info: [auth:m21ww] Starting auth for POST /traits/discover/147413
[2026-01-28 14:22:47] info: [auth:m21ww] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:m21ww] Token from header: true
[2026-01-28 14:22:47] info: [auth:m21ww] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147413
[2026-01-28 14:22:47] info: [traitController.discoverTraits] Triggering trait discovery for horse 147413
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147413
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 147413
[2026-01-28 14:22:47] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 147413: resilient, bold, athletic
[2026-01-28 14:22:47] info: [traitController.discoverTraits] Discovered 3 traits for horse 147413 (Fresh Workflow Foal)
[2026-01-28 14:22:47] info: [POST] /api/traits/discover/147413 - 200
[2026-01-28 14:22:47] info: [GET] /api/traits/progress/147413
[2026-01-28 14:22:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1889MB
[2026-01-28 14:22:47] info: [auth:jjthc] Starting auth for GET /traits/progress/147413
[2026-01-28 14:22:47] info: [auth:jjthc] Token from cookie: false
[2026-01-28 14:22:47] info: [auth:jjthc] Token from header: true
[2026-01-28 14:22:47] info: [auth:jjthc] Authenticated user test-trait-discovery-user
[2026-01-28 14:22:47] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147413
[2026-01-28 14:22:47] info: [traitRoutes] GET /progress/147413 - Getting discovery progress
[2026-01-28 14:22:47] info: [GET] /api/traits/progress/147413 - 200
PASS tests/traitDiscoveryIntegration.test.mjs
  Trait Discovery API Integration Tests
    POST /api/traits/discover/:foalId
      ‚àö should discover traits for foal with high bonding (67 ms)
      ‚àö should handle foal with no discoverable traits (36 ms)
      ‚àö should allow trait discovery for adult horses (33 ms)
      ‚àö should return 404 for non-existent foal (29 ms)
      ‚àö should return 400 for invalid foal ID (26 ms)
    GET /api/traits/progress/:foalId
      ‚àö should return discovery progress for foal (42 ms)
      ‚àö should return 404 for non-existent foal (27 ms)
    POST /api/traits/batch-discover
      ‚àö should process multiple foals in batch (63 ms)
      ‚àö should handle mixed valid and invalid foals (43 ms)
      ‚àö should return 400 for invalid request body (26 ms)
    GET /api/traits/conditions
      ‚àö should return all discovery conditions (40 ms)
    POST /api/traits/check-conditions/:foalId
      ‚àö should check conditions without triggering discovery (36 ms)
      ‚àö should return 404 for non-existent foal (27 ms)
    Real-time trait discovery workflow
      ‚àö should demonstrate complete trait discovery workflow (152 ms)

[2026-01-28 14:22:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:47] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:47] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:47] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:48] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:48] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:48] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:48] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:48] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:48] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:48] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:48] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:48] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:48] info: [groomPerformanceService] Updated metrics for groom 73796
[2026-01-28 14:22:48] info: [groomPerformanceService] Recorded performance for groom 73796: grooming
[2026-01-28 14:22:48] info: [groomPerformanceService] Updated metrics for groom 73796
[2026-01-28 14:22:48] info: [groomPerformanceService] Recorded performance for groom 73796: training
[2026-01-28 14:22:48] info: [groomPerformanceService] Updated metrics for groom 73796
[2026-01-28 14:22:48] info: [groomPerformanceService] Recorded performance for groom 73796: training
[2026-01-28 14:22:48] info: [groomPerformanceService] Updated metrics for groom 73796
[2026-01-28 14:22:48] info: [groomPerformanceService] Recorded performance for groom 73796: training
[2026-01-28 14:22:48] info: [POST] /api/groom-performance/record
[2026-01-28 14:22:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1936MB
[2026-01-28 14:22:48] info: [auth:7cshz8] Starting auth for POST /groom-performance/record
[2026-01-28 14:22:48] info: [auth:7cshz8] Token from cookie: false
[2026-01-28 14:22:48] info: [auth:7cshz8] Token from header: true
[2026-01-28 14:22:48] info: [auth:7cshz8] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [auth:ssux4c] Starting auth for POST /record
[2026-01-28 14:22:48] info: [auth:ssux4c] Token from cookie: false
[2026-01-28 14:22:48] info: [auth:ssux4c] Token from header: true
[2026-01-28 14:22:48] info: [auth:ssux4c] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [groomPerformanceController] Recording performance for groom 73796
[2026-01-28 14:22:48] info: [ownership] Found owned groom 73796 for user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [ownership] Found owned horse 147414 for user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [groomPerformanceService] Updated metrics for groom 73796
[2026-01-28 14:22:48] info: [groomPerformanceService] Recorded performance for groom 73796: enrichment
[2026-01-28 14:22:48] info: [POST] /api/groom-performance/record - 201
[2026-01-28 14:22:48] info: [GET] /api/groom-performance/groom/73796
[2026-01-28 14:22:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1934MB
[2026-01-28 14:22:48] info: [auth:7h1ebpr] Starting auth for GET /groom-performance/groom/73796
[2026-01-28 14:22:48] info: [auth:7h1ebpr] Token from cookie: false
[2026-01-28 14:22:48] info: [auth:7h1ebpr] Token from header: true
[2026-01-28 14:22:48] info: [auth:7h1ebpr] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [auth:132hw] Starting auth for GET /groom/73796
[2026-01-28 14:22:48] info: [auth:132hw] Token from cookie: false
[2026-01-28 14:22:48] info: [auth:132hw] Token from header: true
[2026-01-28 14:22:48] info: [auth:132hw] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [ownership] Validated ownership: user 1ef35216-4b09-4d4e-a9b8-234b63185974 owns groom 73796
[2026-01-28 14:22:48] info: [groomPerformanceController] Getting performance for groom 73796
[2026-01-28 14:22:48] info: [GET] /api/groom-performance/groom/73796 - 200
[2026-01-28 14:22:48] info: [GET] /api/groom-performance/top?limit=5
[2026-01-28 14:22:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1944MB
[2026-01-28 14:22:48] info: [auth:aoa36q] Starting auth for GET /groom-performance/top
[2026-01-28 14:22:48] info: [auth:aoa36q] Token from cookie: false
[2026-01-28 14:22:48] info: [auth:aoa36q] Token from header: true
[2026-01-28 14:22:48] info: [auth:aoa36q] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [auth:j20z7] Starting auth for GET /top
[2026-01-28 14:22:48] info: [auth:j20z7] Token from cookie: false
[2026-01-28 14:22:48] info: [auth:j20z7] Token from header: true
[2026-01-28 14:22:48] info: [auth:j20z7] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [groomPerformanceController] Getting top performers for user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [GET] /api/groom-performance/top?limit=5 - 200
[2026-01-28 14:22:48] info: [GET] /api/groom-performance/config
[2026-01-28 14:22:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1939MB
[2026-01-28 14:22:48] info: [auth:92mgo] Starting auth for GET /groom-performance/config
[2026-01-28 14:22:48] info: [auth:92mgo] Token from cookie: false
[2026-01-28 14:22:48] info: [auth:92mgo] Token from header: true
[2026-01-28 14:22:48] info: [auth:92mgo] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:48] info: [auth:vsywai] Starting auth for GET /config
[2026-01-28 14:22:49] info: [auth:vsywai] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:vsywai] Token from header: true
[2026-01-28 14:22:49] info: [auth:vsywai] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [groomPerformanceController] Getting performance config for user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/config - 200
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/analytics/73796?days=30
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1934MB
[2026-01-28 14:22:49] info: [auth:hdk78k] Starting auth for GET /groom-performance/analytics/73796
[2026-01-28 14:22:49] info: [auth:hdk78k] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:hdk78k] Token from header: true
[2026-01-28 14:22:49] info: [auth:hdk78k] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [auth:4a5364] Starting auth for GET /analytics/73796
[2026-01-28 14:22:49] info: [auth:4a5364] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:4a5364] Token from header: true
[2026-01-28 14:22:49] info: [auth:4a5364] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [ownership] Validated ownership: user 1ef35216-4b09-4d4e-a9b8-234b63185974 owns groom 73796
[2026-01-28 14:22:49] info: [groomPerformanceController] Getting analytics for groom 73796, last 30 days
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/analytics/73796?days=30 - 200
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/groom/73797
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1945MB
[2026-01-28 14:22:49] info: [auth:zvcauv] Starting auth for GET /groom-performance/groom/73797
[2026-01-28 14:22:49] info: [auth:zvcauv] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:zvcauv] Token from header: true
[2026-01-28 14:22:49] info: [auth:zvcauv] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [auth:upugm] Starting auth for GET /groom/73797
[2026-01-28 14:22:49] info: [auth:upugm] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:upugm] Token from header: true
[2026-01-28 14:22:49] info: [auth:upugm] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] warn: [ownership] groom 73797 not found or not owned by user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/groom/73797 - 404
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1939MB
[2026-01-28 14:22:49] info: [auth:krphq] Starting auth for POST /groom-performance/record
[2026-01-28 14:22:49] info: [auth:krphq] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:krphq] Token from header: true
[2026-01-28 14:22:49] info: [auth:krphq] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [auth:cvyzsw] Starting auth for POST /record
[2026-01-28 14:22:49] info: [auth:cvyzsw] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:cvyzsw] Token from header: true
[2026-01-28 14:22:49] info: [auth:cvyzsw] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] warn: [Validation] Input validation failed
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record - 400
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1945MB
[2026-01-28 14:22:49] info: [auth:hpcdxk] Starting auth for POST /groom-performance/record
[2026-01-28 14:22:49] info: [auth:hpcdxk] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:hpcdxk] Token from header: true
[2026-01-28 14:22:49] info: [auth:hpcdxk] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [auth:w2bd7g] Starting auth for POST /record
[2026-01-28 14:22:49] info: [auth:w2bd7g] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:w2bd7g] Token from header: true
[2026-01-28 14:22:49] info: [auth:w2bd7g] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] warn: [Validation] Input validation failed
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record - 400
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1938MB
[2026-01-28 14:22:49] info: [auth:39otwo] Starting auth for POST /groom-performance/record
[2026-01-28 14:22:49] info: [auth:39otwo] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:39otwo] Token from header: true
[2026-01-28 14:22:49] info: [auth:39otwo] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] info: [auth:aubhl7] Starting auth for POST /record
[2026-01-28 14:22:49] info: [auth:aubhl7] Token from cookie: false
[2026-01-28 14:22:49] info: [auth:aubhl7] Token from header: true
[2026-01-28 14:22:49] info: [auth:aubhl7] Authenticated user 1ef35216-4b09-4d4e-a9b8-234b63185974
[2026-01-28 14:22:49] warn: [Validation] Input validation failed
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record - 400
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1948MB
[2026-01-28 14:22:49] info: [auth:tqpb9o] Starting auth for POST /groom-performance/record
[2026-01-28 14:22:49] info: [auth:tqpb9o] Token from cookie: false
[2026-01-28 14:22:49] warn: [auth:tqpb9o] Access token is required for POST /groom-performance/record from ::ffff:127.0.0.1
[2026-01-28 14:22:49] info: [POST] /api/groom-performance/record - 401
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/groom/73796
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1947MB
[2026-01-28 14:22:49] info: [auth:55s2wp] Starting auth for GET /groom-performance/groom/73796
[2026-01-28 14:22:49] info: [auth:55s2wp] Token from cookie: false
[2026-01-28 14:22:49] warn: [auth:55s2wp] Access token is required for GET /groom-performance/groom/73796 from ::ffff:127.0.0.1
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/groom/73796 - 401
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/top
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1947MB
[2026-01-28 14:22:49] info: [auth:me8v76] Starting auth for GET /groom-performance/top
[2026-01-28 14:22:49] info: [auth:me8v76] Token from cookie: false
[2026-01-28 14:22:49] warn: [auth:me8v76] Access token is required for GET /groom-performance/top from ::ffff:127.0.0.1
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/top - 401
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/config
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1946MB
[2026-01-28 14:22:49] info: [auth:kqv02f] Starting auth for GET /groom-performance/config
[2026-01-28 14:22:49] info: [auth:kqv02f] Token from cookie: false
[2026-01-28 14:22:49] warn: [auth:kqv02f] Access token is required for GET /groom-performance/config from ::ffff:127.0.0.1
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/config - 401
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/analytics/73796
[2026-01-28 14:22:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1945MB
[2026-01-28 14:22:49] info: [auth:xp24x] Starting auth for GET /groom-performance/analytics/73796
[2026-01-28 14:22:49] info: [auth:xp24x] Token from cookie: false
[2026-01-28 14:22:49] warn: [auth:xp24x] Access token is required for GET /groom-performance/analytics/73796 from ::ffff:127.0.0.1
[2026-01-28 14:22:49] info: [GET] /api/groom-performance/analytics/73796 - 401
PASS tests/integration/groomPerformanceSystem.test.mjs
  Groom Performance System
    Performance Recording
      ‚àö should record groom performance successfully (14 ms)
      ‚àö should update groom metrics after recording performance (25 ms)
    API Endpoints
      ‚àö should record performance via API (69 ms)
      ‚àö should get groom performance summary (52 ms)
      ‚àö should get top performing grooms (37 ms)
      ‚àö should get performance configuration (33 ms)
      ‚àö should get groom analytics (45 ms)
      ‚àö should validate groom ownership (54 ms)
      ‚àö should validate input parameters (105 ms)
    Service Functions
      ‚àö should calculate performance summary correctly (6 ms)
      ‚àö should get top performing grooms correctly (3 ms)
    Authentication
      ‚àö should require authentication for POST /api/groom-performance/record (27 ms)
      ‚àö should require authentication for GET /api/groom-performance/groom/:groomId (23 ms)
      ‚àö should require authentication for GET /api/groom-performance/top (25 ms)
      ‚àö should require authentication for GET /api/groom-performance/config (24 ms)
      ‚àö should require authentication for GET /api/groom-performance/analytics/:groomId (23 ms)

[2026-01-28 14:22:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:49] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:49] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:49] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:50] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:50] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:50] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:50] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:50] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:50] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:50] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:50] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:50] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:50] info: [GET] /api/horses/147416
[2026-01-28 14:22:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1999MB
[2026-01-28 14:22:50] info: [auth:60q5bv] Starting auth for GET /horses/147416
[2026-01-28 14:22:50] info: [auth:60q5bv] Token from cookie: false
[2026-01-28 14:22:50] info: [auth:60q5bv] Token from header: true
[2026-01-28 14:22:50] info: [auth:60q5bv] Authenticated user 8bdfa049-44fd-4cb1-bc24-5cc7966992ee
[2026-01-28 14:22:50] warn: [ownership] horse 147416 not found or not owned by user 8bdfa049-44fd-4cb1-bc24-5cc7966992ee
[2026-01-28 14:22:50] info: [GET] /api/horses/147416 - 404
[2026-01-28 14:22:50] info: [GET] /api/horses/147417
[2026-01-28 14:22:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1996MB
[2026-01-28 14:22:50] info: [auth:rrbtli] Starting auth for GET /horses/147417
[2026-01-28 14:22:50] info: [auth:rrbtli] Token from cookie: false
[2026-01-28 14:22:50] info: [auth:rrbtli] Token from header: true
[2026-01-28 14:22:50] info: [auth:rrbtli] Authenticated user f6cee52b-b2e2-48ff-a2ad-3144e50c528f
[2026-01-28 14:22:50] info: [ownership] Validated ownership: user f6cee52b-b2e2-48ff-a2ad-3144e50c528f owns horse 147417
[2026-01-28 14:22:50] info: [GET] /api/horses/147417 - 200
[2026-01-28 14:22:50] info: [PUT] /api/horses/147420
[2026-01-28 14:22:50] warn: [MemoryMonitoring] Memory threshold exceeded: 2004MB
[2026-01-28 14:22:50] info: [auth:2fkq1e] Starting auth for PUT /horses/147420
[2026-01-28 14:22:50] info: [auth:2fkq1e] Token from cookie: false
[2026-01-28 14:22:50] info: [auth:2fkq1e] Token from header: true
[2026-01-28 14:22:50] info: [auth:2fkq1e] Authenticated user e8d151ad-a862-45a2-9136-f773d6a68a07
[2026-01-28 14:22:50] warn: [ownership] horse 147420 not found or not owned by user e8d151ad-a862-45a2-9136-f773d6a68a07
[2026-01-28 14:22:50] info: [PUT] /api/horses/147420 - 404
[2026-01-28 14:22:50] info: [PUT] /api/horses/147421
[2026-01-28 14:22:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1996MB
[2026-01-28 14:22:50] info: [auth:lhchv9] Starting auth for PUT /horses/147421
[2026-01-28 14:22:50] info: [auth:lhchv9] Token from cookie: false
[2026-01-28 14:22:50] info: [auth:lhchv9] Token from header: true
[2026-01-28 14:22:50] info: [auth:lhchv9] Authenticated user 1ebe7ea4-dd69-4e74-bf90-394223279771
[2026-01-28 14:22:50] info: [ownership] Validated ownership: user 1ebe7ea4-dd69-4e74-bf90-394223279771 owns horse 147421
[2026-01-28 14:22:50] info: [horseRoutes] User 1ebe7ea4-dd69-4e74-bf90-394223279771 updated horse: Updated Horse Name (ID: 147421)
[2026-01-28 14:22:50] info: [PUT] /api/horses/147421 - 200
[2026-01-28 14:22:50] info: [DELETE] /api/horses/147424
[2026-01-28 14:22:50] warn: [MemoryMonitoring] Memory threshold exceeded: 2005MB
[2026-01-28 14:22:50] info: [auth:glb9k] Starting auth for DELETE /horses/147424
[2026-01-28 14:22:50] info: [auth:glb9k] Token from cookie: false
[2026-01-28 14:22:50] info: [auth:glb9k] Token from header: true
[2026-01-28 14:22:50] info: [auth:glb9k] Authenticated user 6bd72ffb-314d-4dce-a1af-a5061fb92a22
[2026-01-28 14:22:50] warn: [ownership] horse 147424 not found or not owned by user 6bd72ffb-314d-4dce-a1af-a5061fb92a22
[2026-01-28 14:22:50] info: [DELETE] /api/horses/147424 - 404
[2026-01-28 14:22:50] info: [DELETE] /api/horses/147423
[2026-01-28 14:22:50] warn: [MemoryMonitoring] Memory threshold exceeded: 2005MB
[2026-01-28 14:22:50] info: [auth:34its] Starting auth for DELETE /horses/147423
[2026-01-28 14:22:50] info: [auth:34its] Token from cookie: false
[2026-01-28 14:22:50] info: [auth:34its] Token from header: true
[2026-01-28 14:22:50] info: [auth:34its] Authenticated user 6bd72ffb-314d-4dce-a1af-a5061fb92a22
[2026-01-28 14:22:51] info: [ownership] Validated ownership: user 6bd72ffb-314d-4dce-a1af-a5061fb92a22 owns horse 147423
[2026-01-28 14:22:51] info: [horseRoutes] User 6bd72ffb-314d-4dce-a1af-a5061fb92a22 deleted horse ID: 147423
[2026-01-28 14:22:51] info: [DELETE] /api/horses/147423 - 200
[2026-01-28 14:22:51] info: [GET] /api/grooms/73809/profile
[2026-01-28 14:22:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1997MB
[2026-01-28 14:22:51] info: [auth:lvxf9uo] Starting auth for GET /grooms/73809/profile
[2026-01-28 14:22:51] info: [auth:lvxf9uo] Token from cookie: false
[2026-01-28 14:22:51] info: [auth:lvxf9uo] Token from header: true
[2026-01-28 14:22:51] info: [auth:lvxf9uo] Authenticated user b745cdeb-cb5a-41d7-8f2f-0b6b73adc1ad
[2026-01-28 14:22:51] warn: [ownership] groom 73809 not found or not owned by user b745cdeb-cb5a-41d7-8f2f-0b6b73adc1ad
[2026-01-28 14:22:51] info: [GET] /api/grooms/73809/profile - 404
[2026-01-28 14:22:51] info: [GET] /api/grooms/73810/profile
[2026-01-28 14:22:51] warn: [MemoryMonitoring] Memory threshold exceeded: 2003MB
[2026-01-28 14:22:51] info: [auth:o3ilac] Starting auth for GET /grooms/73810/profile
[2026-01-28 14:22:51] info: [auth:o3ilac] Token from cookie: false
[2026-01-28 14:22:51] info: [auth:o3ilac] Token from header: true
[2026-01-28 14:22:51] info: [auth:o3ilac] Authenticated user dd6b4e16-5483-46df-986c-157c7a8e5947
[2026-01-28 14:22:51] info: [ownership] Validated ownership: user dd6b4e16-5483-46df-986c-157c7a8e5947 owns groom 73810
[2026-01-28 14:22:51] info: [groomController.getGroomProfile] Retrieved profile for groom 73810
[2026-01-28 14:22:51] info: [GET] /api/grooms/73810/profile - 200
[2026-01-28 14:22:51] info: [GET] /api/horses/abc
[2026-01-28 14:22:51] warn: [MemoryMonitoring] Memory threshold exceeded: 2007MB
[2026-01-28 14:22:51] info: [auth:xdnla] Starting auth for GET /horses/abc
[2026-01-28 14:22:51] info: [auth:xdnla] Token from cookie: false
[2026-01-28 14:22:51] info: [auth:xdnla] Token from header: true
[2026-01-28 14:22:51] info: [auth:xdnla] Authenticated user a40b1238-cb7f-4559-b875-1ba69dbddbb0
[2026-01-28 14:22:51] info: [GET] /api/horses/abc - 400
[2026-01-28 14:22:51] info: [GET] /api/horses/999999
[2026-01-28 14:22:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1998MB
[2026-01-28 14:22:51] info: [auth:ris9ei] Starting auth for GET /horses/999999
[2026-01-28 14:22:51] info: [auth:ris9ei] Token from cookie: false
[2026-01-28 14:22:51] info: [auth:ris9ei] Token from header: true
[2026-01-28 14:22:51] info: [auth:ris9ei] Authenticated user f3fc0a8a-afd1-474c-aba2-15940c355d21
[2026-01-28 14:22:51] warn: [ownership] horse 999999 not found or not owned by user f3fc0a8a-afd1-474c-aba2-15940c355d21
[2026-01-28 14:22:51] info: [GET] /api/horses/999999 - 404
[2026-01-28 14:22:51] info: [GET] /api/horses/147432
[2026-01-28 14:22:51] warn: [MemoryMonitoring] Memory threshold exceeded: 2000MB
[2026-01-28 14:22:51] info: [auth:sknjuv] Starting auth for GET /horses/147432
[2026-01-28 14:22:51] info: [auth:sknjuv] Token from cookie: false
[2026-01-28 14:22:51] info: [auth:sknjuv] Token from header: true
[2026-01-28 14:22:51] info: [auth:sknjuv] Authenticated user f3fc0a8a-afd1-474c-aba2-15940c355d21
[2026-01-28 14:22:51] warn: [ownership] horse 147432 not found or not owned by user f3fc0a8a-afd1-474c-aba2-15940c355d21
[2026-01-28 14:22:51] info: [GET] /api/horses/147432 - 404
PASS __tests__/integration/security/ownership-violations.test.mjs
  Ownership Violation Attempts Integration Tests
    Cross-user horse access
      ‚àö denies access to an unowned horse (165 ms)
      ‚àö allows owners to fetch their own horse (55 ms)
      ‚àö blocks cross-user updates and preserves data integrity (61 ms)
      ‚àö allows owners to update their horse with a valid payload (61 ms)
      ‚àö blocks cross-user deletes and allows owner deletes (80 ms)
    Groom ownership
      ‚àö denies access to an unowned groom profile (50 ms)
      ‚àö allows owners to view their groom profile (50 ms)
    Parameter validation and enumeration safety
      ‚àö rejects invalid horse identifiers (47 ms)
      ‚àö returns the same 404 for missing and unowned horses (73 ms)

[2026-01-28 14:22:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:52] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:52] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:52] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:52] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:52] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:52] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:52] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:52] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:52] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2053MB
[2026-01-28 14:22:52] info: [auth:yf6z96] Starting auth for GET /competition/disciplines
[2026-01-28 14:22:52] info: [auth:yf6z96] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:yf6z96] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:22:52] info: [GET] /api/competition/show/1/results
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2056MB
[2026-01-28 14:22:52] info: [auth:lyz5cve] Starting auth for GET /competition/show/1/results
[2026-01-28 14:22:52] info: [auth:lyz5cve] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:lyz5cve] Access token is required for GET /competition/show/1/results from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/show/1/results - 401
[2026-01-28 14:22:52] info: [GET] /api/competition/horse/1/results
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2056MB
[2026-01-28 14:22:52] info: [auth:k9nmhc] Starting auth for GET /competition/horse/1/results
[2026-01-28 14:22:52] info: [auth:k9nmhc] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:k9nmhc] Token from header: true
[2026-01-28 14:22:52] info: [auth:k9nmhc] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] info: [auth:md4ich] Starting auth for GET /horse/1/results
[2026-01-28 14:22:52] info: [auth:md4ich] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:md4ich] Token from header: true
[2026-01-28 14:22:52] info: [auth:md4ich] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] warn: [ownership] horse 1 not found or not owned by user test-user-uuid-123
[2026-01-28 14:22:52] info: [GET] /api/competition/horse/1/results - 404
[2026-01-28 14:22:52] info: [GET] /api/competition/eligibility/1/showjumping
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2058MB
[2026-01-28 14:22:52] info: [auth:4qwe1k] Starting auth for GET /competition/eligibility/1/showjumping
[2026-01-28 14:22:52] info: [auth:4qwe1k] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:4qwe1k] Token from header: true
[2026-01-28 14:22:52] info: [auth:4qwe1k] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] info: [auth:jpc5u] Starting auth for GET /eligibility/1/showjumping
[2026-01-28 14:22:52] info: [auth:jpc5u] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:jpc5u] Token from header: true
[2026-01-28 14:22:52] info: [auth:jpc5u] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] warn: [ownership] horse 1 not found or not owned by user test-user-uuid-123
[2026-01-28 14:22:52] info: [GET] /api/competition/eligibility/1/showjumping - 404
[2026-01-28 14:22:52] info: [POST] /api/competition/enter-show
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2062MB
[2026-01-28 14:22:52] info: [auth:xj1eje] Starting auth for POST /competition/enter-show
[2026-01-28 14:22:52] info: [auth:xj1eje] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:xj1eje] Token from header: true
[2026-01-28 14:22:52] info: [auth:xj1eje] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] info: [POST] /api/competition/enter-show - 403
[2026-01-28 14:22:52] info: [POST] /api/competition/enter
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2063MB
[2026-01-28 14:22:52] info: [auth:dvkn2] Starting auth for POST /competition/enter
[2026-01-28 14:22:52] info: [auth:dvkn2] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:dvkn2] Token from header: true
[2026-01-28 14:22:52] info: [auth:dvkn2] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] info: [POST] /api/competition/enter - 403
[2026-01-28 14:22:52] info: [POST] /api/competition/execute
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2065MB
[2026-01-28 14:22:52] info: [auth:5tu0z] Starting auth for POST /competition/execute
[2026-01-28 14:22:52] info: [auth:5tu0z] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:5tu0z] Token from header: true
[2026-01-28 14:22:52] info: [auth:5tu0z] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] info: [POST] /api/competition/execute - 403
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2053MB
[2026-01-28 14:22:52] info: [auth:qwaqt] Starting auth for GET /competition/disciplines
[2026-01-28 14:22:52] info: [auth:qwaqt] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:qwaqt] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:22:52] info: [POST] /api/competition/enter
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2054MB
[2026-01-28 14:22:52] info: [auth:5wfi89] Starting auth for POST /competition/enter
[2026-01-28 14:22:52] info: [auth:5wfi89] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:5wfi89] Token from header: true
[2026-01-28 14:22:52] info: [auth:5wfi89] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] info: [POST] /api/competition/enter - 403
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2055MB
[2026-01-28 14:22:52] info: [auth:ettdx] Starting auth for GET /competition/disciplines
[2026-01-28 14:22:52] info: [auth:ettdx] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:ettdx] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:22:52] info: [GET] /api/competition/horse/1/results
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2054MB
[2026-01-28 14:22:52] info: [auth:hl8hp9] Starting auth for GET /competition/horse/1/results
[2026-01-28 14:22:52] info: [auth:hl8hp9] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:hl8hp9] Access token is required for GET /competition/horse/1/results from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/horse/1/results - 401
[2026-01-28 14:22:52] info: [POST] /api/competition/enter
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2055MB
[2026-01-28 14:22:52] info: [auth:q296mx] Starting auth for POST /competition/enter
[2026-01-28 14:22:52] info: [auth:q296mx] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:q296mx] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [POST] /api/competition/enter - 401
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2054MB
[2026-01-28 14:22:52] info: [auth:oi21ow6] Starting auth for GET /competition/disciplines
[2026-01-28 14:22:52] info: [auth:oi21ow6] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:oi21ow6] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2054MB
[2026-01-28 14:22:52] info: [auth:7tmsn] Starting auth for GET /competition/disciplines
[2026-01-28 14:22:52] info: [auth:7tmsn] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:7tmsn] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2055MB
[2026-01-28 14:22:52] info: [auth:s6lpl7] Starting auth for GET /competition/disciplines
[2026-01-28 14:22:52] info: [auth:s6lpl7] Token from cookie: false
[2026-01-28 14:22:52] warn: [auth:s6lpl7] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:22:52] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:22:52] info: [GET] /api/competition/horse/999/results
[2026-01-28 14:22:52] warn: [MemoryMonitoring] Memory threshold exceeded: 2055MB
[2026-01-28 14:22:52] info: [auth:j2iklg] Starting auth for GET /competition/horse/999/results
[2026-01-28 14:22:52] info: [auth:j2iklg] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:j2iklg] Token from header: true
[2026-01-28 14:22:52] info: [auth:j2iklg] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] info: [auth:gwom2d] Starting auth for GET /horse/999/results
[2026-01-28 14:22:52] info: [auth:gwom2d] Token from cookie: false
[2026-01-28 14:22:52] info: [auth:gwom2d] Token from header: true
[2026-01-28 14:22:52] info: [auth:gwom2d] Authenticated user test-user-uuid-123
[2026-01-28 14:22:52] warn: [ownership] horse 999 not found or not owned by user test-user-uuid-123
[2026-01-28 14:22:53] info: [GET] /api/competition/horse/999/results - 404
[2026-01-28 14:22:53] info: [POST] /api/competition/execute
[2026-01-28 14:22:53] warn: [MemoryMonitoring] Memory threshold exceeded: 2060MB
[2026-01-28 14:22:53] info: [auth:287qo] Starting auth for POST /competition/execute
[2026-01-28 14:22:53] info: [auth:287qo] Token from cookie: false
[2026-01-28 14:22:53] info: [auth:287qo] Token from header: true
[2026-01-28 14:22:53] info: [auth:287qo] Authenticated user test-user-uuid-123
[2026-01-28 14:22:53] info: [POST] /api/competition/execute - 403
[2026-01-28 14:22:53] info: [POST] /api/competition/enter
[2026-01-28 14:22:53] warn: [MemoryMonitoring] Memory threshold exceeded: 2063MB
[2026-01-28 14:22:53] info: [auth:ma286jo] Starting auth for POST /competition/enter
[2026-01-28 14:22:53] info: [auth:ma286jo] Token from cookie: false
[2026-01-28 14:22:53] info: [auth:ma286jo] Token from header: true
[2026-01-28 14:22:53] info: [auth:ma286jo] Authenticated user test-user-uuid-123
[2026-01-28 14:22:53] info: [POST] /api/competition/enter - 403
[2026-01-28 14:22:53] info: [POST] /api/competition/enter
[2026-01-28 14:22:53] warn: [MemoryMonitoring] Memory threshold exceeded: 2064MB
[2026-01-28 14:22:53] info: [auth:no09ng] Starting auth for POST /competition/enter
[2026-01-28 14:22:53] info: [auth:no09ng] Token from cookie: false
[2026-01-28 14:22:53] info: [auth:no09ng] Token from header: true
[2026-01-28 14:22:53] info: [auth:no09ng] Authenticated user test-user-uuid-123
[2026-01-28 14:22:53] info: [POST] /api/competition/enter - 403
PASS __tests__/integration/competition-rate-limiting.test.mjs
  Competition Routes Rate Limiting Integration Tests
    Query Rate Limiting (GET endpoints)
      ‚àö should apply queryRateLimiter to GET /api/competition/disciplines (37 ms)
      ‚àö should apply queryRateLimiter to GET /api/competition/show/:showId/results (23 ms)
      ‚àö should apply queryRateLimiter to GET /api/competition/horse/:horseId/results (83 ms)
      ‚àö should apply queryRateLimiter to GET /api/competition/eligibility/:horseId/:discipline (31 ms)
    Mutation Rate Limiting (POST endpoints)
      ‚àö should apply mutationRateLimiter to POST /api/competition/enter-show (36 ms)
      ‚àö should apply mutationRateLimiter to POST /api/competition/enter (29 ms)
      ‚àö should apply mutationRateLimiter to POST /api/competition/execute (25 ms)
    Rate Limit Enforcement
      ‚àö should enforce different limits for query vs mutation operations (50 ms)
    Public vs Authenticated Endpoints
      ‚àö should rate limit public endpoints without requiring auth (25 ms)
      ‚àö should require auth for horse-specific endpoints (22 ms)
      ‚àö should require auth for competition entry endpoints (22 ms)
    Rate Limit Headers
      ‚àö should include all standard rate limit headers (23 ms)
      ‚àö should decrement remaining count with each request (43 ms)
    Security Integration
      ‚àö should validate horse ownership before allowing results access (31 ms)
      ‚àö should rate limit competition execution for show hosts only (27 ms)
    Input Validation with Rate Limiting
      ‚àö should rate limit invalid competition entry requests (26 ms)
      ‚àö should rate limit requests with missing required fields (26 ms)

[2026-01-28 14:22:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:54] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:54] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:54] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:54] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:54] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:54] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:54] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:54] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 147433
[2026-01-28 14:22:54] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 147433
[2026-01-28 14:22:54] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 147433
[2026-01-28 14:22:54] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')
[2026-01-28 14:22:54] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 73816
[2026-01-28 14:22:54] info: [groomRareTraitPerks] Assigned perk: Phoenix Whisperer to groom 73816
[2026-01-28 14:22:54] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 73816
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/definitions
[2026-01-28 14:22:54] warn: [MemoryMonitoring] Memory threshold exceeded: 2121MB
[2026-01-28 14:22:54] info: [auth:swanex] Starting auth for GET /ultra-rare-traits/definitions
[2026-01-28 14:22:54] info: [auth:swanex] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:swanex] Token from header: true
[2026-01-28 14:22:54] info: [auth:swanex] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/definitions - 200
[2026-01-28 14:22:54] info: [POST] /api/ultra-rare-traits/evaluate/147433
[2026-01-28 14:22:54] warn: [MemoryMonitoring] Memory threshold exceeded: 2112MB
[2026-01-28 14:22:54] info: [auth:qye565] Starting auth for POST /ultra-rare-traits/evaluate/147433
[2026-01-28 14:22:54] info: [auth:qye565] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:qye565] Token from header: true
[2026-01-28 14:22:54] info: [auth:qye565] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [auth:4mc637] Starting auth for POST /evaluate/147433
[2026-01-28 14:22:54] info: [auth:4mc637] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:4mc637] Token from header: true
[2026-01-28 14:22:54] info: [auth:4mc637] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 147433
[2026-01-28 14:22:54] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 147433
[2026-01-28 14:22:54] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 147433
[2026-01-28 14:22:54] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 147433
[2026-01-28 14:22:54] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')
[2026-01-28 14:22:54] info: [POST] /api/ultra-rare-traits/evaluate/147433 - 200
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/horse/147433
[2026-01-28 14:22:54] warn: [MemoryMonitoring] Memory threshold exceeded: 2124MB
[2026-01-28 14:22:54] info: [auth:62cg4] Starting auth for GET /ultra-rare-traits/horse/147433
[2026-01-28 14:22:54] info: [auth:62cg4] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:62cg4] Token from header: true
[2026-01-28 14:22:54] info: [auth:62cg4] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [auth:1gcv51f] Starting auth for GET /horse/147433
[2026-01-28 14:22:54] info: [auth:1gcv51f] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:1gcv51f] Token from header: true
[2026-01-28 14:22:54] info: [auth:1gcv51f] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 147433
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/horse/147433 - 200
[2026-01-28 14:22:54] info: [POST] /api/ultra-rare-traits/groom/73816/assign-perks
[2026-01-28 14:22:54] warn: [MemoryMonitoring] Memory threshold exceeded: 2118MB
[2026-01-28 14:22:54] info: [auth:ua8mqu] Starting auth for POST /ultra-rare-traits/groom/73816/assign-perks
[2026-01-28 14:22:54] info: [auth:ua8mqu] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:ua8mqu] Token from header: true
[2026-01-28 14:22:54] info: [auth:ua8mqu] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [auth:moct4] Starting auth for POST /groom/73816/assign-perks
[2026-01-28 14:22:54] info: [auth:moct4] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:moct4] Token from header: true
[2026-01-28 14:22:54] info: [auth:moct4] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [ownership] Validated ownership: user test-ultra-rare-user owns groom 73816
[2026-01-28 14:22:54] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 73816
[2026-01-28 14:22:54] info: [POST] /api/ultra-rare-traits/groom/73816/assign-perks - 200
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/horse/147433
[2026-01-28 14:22:54] warn: [MemoryMonitoring] Memory threshold exceeded: 2113MB
[2026-01-28 14:22:54] info: [auth:r1wmr] Starting auth for GET /ultra-rare-traits/horse/147433
[2026-01-28 14:22:54] info: [auth:r1wmr] Token from cookie: false
[2026-01-28 14:22:54] warn: [auth:r1wmr] Access token is required for GET /ultra-rare-traits/horse/147433 from ::ffff:127.0.0.1
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/horse/147433 - 401
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/horse/147434
[2026-01-28 14:22:54] warn: [MemoryMonitoring] Memory threshold exceeded: 2114MB
[2026-01-28 14:22:54] info: [auth:2hfmyr] Starting auth for GET /ultra-rare-traits/horse/147434
[2026-01-28 14:22:54] info: [auth:2hfmyr] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:2hfmyr] Token from header: true
[2026-01-28 14:22:54] info: [auth:2hfmyr] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] info: [auth:mkskz8] Starting auth for GET /horse/147434
[2026-01-28 14:22:54] info: [auth:mkskz8] Token from cookie: false
[2026-01-28 14:22:54] info: [auth:mkskz8] Token from header: true
[2026-01-28 14:22:54] info: [auth:mkskz8] Authenticated user test-ultra-rare-user
[2026-01-28 14:22:54] warn: [ownership] horse 147434 not found or not owned by user test-ultra-rare-user
[2026-01-28 14:22:54] info: [GET] /api/ultra-rare-traits/horse/147434 - 404
PASS tests/ultraRareTraits.test.mjs
  Ultra-Rare & Exotic Traits System
    Trait Definitions System
      ‚àö should retrieve all ultra-rare trait definitions (2 ms)
      ‚àö should retrieve all exotic trait definitions (1 ms)
      ‚àö should get specific trait definition by name (1 ms)
    Trigger Evaluation Engine
      ‚àö should evaluate ultra-rare trait triggers with proper conditions (15 ms)
      ‚àö should evaluate exotic trait unlocks with complex conditions (8 ms)
    Groom Perk System
      ‚àö should assign rare trait booster perks to eligible grooms (5 ms)
      ‚àö should apply rare trait booster effects to probability calculations (3 ms)
    Mechanical Effects Integration
      ‚àö should apply ultra-rare stress effects correctly (1 ms)
      ‚àö should apply ultra-rare competition effects correctly (1 ms)
      ‚àö should check ultra-rare abilities correctly
    API Endpoints
      ‚àö GET /api/ultra-rare-traits/definitions should return all trait definitions (43 ms)
      ‚àö POST /api/ultra-rare-traits/evaluate/:horseId should evaluate traits for owned horse (69 ms)
      ‚àö GET /api/ultra-rare-traits/horse/:horseId should return horse ultra-rare traits (43 ms)
      ‚àö POST /api/ultra-rare-traits/groom/:groomId/assign-perks should assign perks to owned groom (40 ms)
      ‚àö should reject unauthorized access to horse traits (25 ms)
      ‚àö should reject access to non-owned horse (54 ms)

[2026-01-28 14:22:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:55] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:55] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:55] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:55] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:55] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:55] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:55] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:56] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:56] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:56] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:56] info: [EmailVerification] Created verification token
[2026-01-28 14:22:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:22:56] info: [authController.register] Verification email sent
[2026-01-28 14:22:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:56] info: [EmailVerification] Created verification token
[2026-01-28 14:22:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:22:56] info: [authController.register] Verification email sent
[2026-01-28 14:22:57] info: [TokenRotation] Created new token pair
[2026-01-28 14:22:57] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
PASS tests/auth-simple.test.mjs
  üîê INTEGRATION: Authentication Controller Simple - Core Auth Workflow Testing
    ‚àö should register a new user (405 ms)
    ‚àö should login with valid credentials (615 ms)

[2026-01-28 14:22:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:58] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:58] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:58] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:58] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:58] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:58] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:58] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:58] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:58] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1980MB
[2026-01-28 14:22:58] info: [auth:ns7jdc] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:22:58] info: [auth:ns7jdc] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:ns7jdc] Token from header: true
[2026-01-28 14:22:58] info: [auth:ns7jdc] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1983MB
[2026-01-28 14:22:58] info: [auth:ng3xof] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 14:22:58] info: [auth:ng3xof] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:ng3xof] Token from header: true
[2026-01-28 14:22:58] info: [auth:ng3xof] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/activity - 404
[2026-01-28 14:22:58] info: [GET] /api/user/dashboard/test-user-uuid-123
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1984MB
[2026-01-28 14:22:58] info: [auth:5octq3] Starting auth for GET /user/dashboard/test-user-uuid-123
[2026-01-28 14:22:58] info: [auth:5octq3] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:5octq3] Token from header: true
[2026-01-28 14:22:58] info: [auth:5octq3] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/dashboard/test-user-uuid-123 from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/dashboard/test-user-uuid-123 - 404
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1986MB
[2026-01-28 14:22:58] info: [auth:51y0yo] Starting auth for GET /user/test-user-uuid-123
[2026-01-28 14:22:58] info: [auth:51y0yo] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:51y0yo] Token from header: true
[2026-01-28 14:22:58] info: [auth:51y0yo] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/test-user-uuid-123 from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123 - 404
[2026-01-28 14:22:58] info: [PUT] /api/user/test-user-uuid-123
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1988MB
[2026-01-28 14:22:58] info: [auth:vxajow] Starting auth for PUT /user/test-user-uuid-123
[2026-01-28 14:22:58] info: [auth:vxajow] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:vxajow] Token from header: true
[2026-01-28 14:22:58] info: [auth:vxajow] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] info: [PUT] /api/user/test-user-uuid-123 - 403
[2026-01-28 14:22:58] info: [POST] /api/user/test-user-uuid-123/add-xp
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1990MB
[2026-01-28 14:22:58] info: [auth:ddaar] Starting auth for POST /user/test-user-uuid-123/add-xp
[2026-01-28 14:22:58] info: [auth:ddaar] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:ddaar] Token from header: true
[2026-01-28 14:22:58] info: [auth:ddaar] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] info: [POST] /api/user/test-user-uuid-123/add-xp - 403
[2026-01-28 14:22:58] info: [DELETE] /api/user/test-user-uuid-123
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1991MB
[2026-01-28 14:22:58] info: [auth:jhhht] Starting auth for DELETE /user/test-user-uuid-123
[2026-01-28 14:22:58] info: [auth:jhhht] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:jhhht] Token from header: true
[2026-01-28 14:22:58] info: [auth:jhhht] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] info: [DELETE] /api/user/test-user-uuid-123 - 403
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1992MB
[2026-01-28 14:22:58] info: [auth:cfgwgj] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:22:58] info: [auth:cfgwgj] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:cfgwgj] Token from header: true
[2026-01-28 14:22:58] info: [auth:cfgwgj] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 14:22:58] info: [PUT] /api/user/test-user-uuid-123
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1993MB
[2026-01-28 14:22:58] info: [auth:q79vom] Starting auth for PUT /user/test-user-uuid-123
[2026-01-28 14:22:58] info: [auth:q79vom] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:q79vom] Token from header: true
[2026-01-28 14:22:58] info: [auth:q79vom] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] info: [PUT] /api/user/test-user-uuid-123 - 403
[2026-01-28 14:22:58] info: [GET] /api/user/other-user-uuid-456/progress
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1994MB
[2026-01-28 14:22:58] info: [auth:33yw9w] Starting auth for GET /user/other-user-uuid-456/progress
[2026-01-28 14:22:58] info: [auth:33yw9w] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:33yw9w] Token from header: true
[2026-01-28 14:22:58] info: [auth:33yw9w] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/other-user-uuid-456/progress from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/other-user-uuid-456/progress - 404
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1982MB
[2026-01-28 14:22:58] info: [auth:ehxb8q] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:22:58] info: [auth:ehxb8q] Token from cookie: false
[2026-01-28 14:22:58] warn: [auth:ehxb8q] Access token is required for GET /user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress - 401
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1983MB
[2026-01-28 14:22:58] info: [auth:r38ufeo] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:22:58] info: [auth:r38ufeo] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:r38ufeo] Token from header: true
[2026-01-28 14:22:58] info: [auth:r38ufeo] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1986MB
[2026-01-28 14:22:58] info: [auth:x683na] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 14:22:58] info: [auth:x683na] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:x683na] Token from header: true
[2026-01-28 14:22:58] info: [auth:x683na] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/activity - 404
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 14:22:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1986MB
[2026-01-28 14:22:58] info: [auth:0bkaxx] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 14:22:58] info: [auth:0bkaxx] Token from cookie: false
[2026-01-28 14:22:58] info: [auth:0bkaxx] Token from header: true
[2026-01-28 14:22:58] info: [auth:0bkaxx] Authenticated user test-user-uuid-123
[2026-01-28 14:22:58] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 14:22:58] info: [GET] /api/user/test-user-uuid-123/activity - 404
PASS __tests__/integration/user-rate-limiting.test.mjs
  User Routes Rate Limiting Integration Tests
    Query Rate Limiting (GET endpoints)
      ‚àö should apply queryRateLimiter to GET /api/user/:id/progress (46 ms)
      ‚àö should apply queryRateLimiter to GET /api/user/:id/activity (26 ms)
      ‚àö should apply queryRateLimiter to GET /api/user/dashboard/:userId (26 ms)
      ‚àö should apply queryRateLimiter to GET /api/user/:id (27 ms)
    Mutation Rate Limiting (PUT/POST/DELETE endpoints)
      ‚àö should apply mutationRateLimiter to PUT /api/user/:id (37 ms)
      ‚àö should apply mutationRateLimiter to POST /api/user/:id/add-xp (26 ms)
      ‚àö should apply mutationRateLimiter to DELETE /api/user/:id (25 ms)
    Rate Limit Enforcement
      ‚àö should enforce different limits for query vs mutation operations (54 ms)
    Security Integration
      ‚àö should enforce ownership validation before rate limiting (26 ms)
      ‚àö should require authentication for all user endpoints (23 ms)
    Rate Limit Headers
      ‚àö should include all standard rate limit headers (28 ms)
      ‚àö should decrement remaining count with each request (50 ms)

[2026-01-28 14:22:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:22:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:22:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:22:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:22:59] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:22:59] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:22:59] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:22:59] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:22:59] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:22:59] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:22:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:22:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:22:59] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:23:00] info: [GET] /api/flags/health
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2040MB
[2026-01-28 14:23:00] info: [auth:n4ycvx] Starting auth for GET /flags/health
[2026-01-28 14:23:00] info: [auth:n4ycvx] Token from cookie: false
[2026-01-28 14:23:00] info: [auth:n4ycvx] Token from header: true
[2026-01-28 14:23:00] info: [auth:n4ycvx] Authenticated user test-user-epigenetic-1769628179961
[2026-01-28 14:23:00] info: [GET] /api/flags/health - 200
[2026-01-28 14:23:00] info: [POST] /api/flags/evaluate
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2047MB
[2026-01-28 14:23:00] info: [auth:jelhgo] Starting auth for POST /flags/evaluate
[2026-01-28 14:23:00] info: [auth:jelhgo] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:jelhgo] Access token is required for POST /flags/evaluate from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [POST] /api/flags/evaluate - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/flags
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2047MB
[2026-01-28 14:23:00] info: [auth:n02nk0p] Starting auth for GET /flags/horses/123/flags
[2026-01-28 14:23:00] info: [auth:n02nk0p] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:n02nk0p] Access token is required for GET /flags/horses/123/flags from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/flags - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/definitions
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2047MB
[2026-01-28 14:23:00] info: [auth:7qptdw] Starting auth for GET /flags/definitions
[2026-01-28 14:23:00] info: [auth:7qptdw] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:7qptdw] Access token is required for GET /flags/definitions from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [GET] /api/flags/definitions - 401
[2026-01-28 14:23:00] info: [POST] /api/flags/batch-evaluate
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2048MB
[2026-01-28 14:23:00] info: [auth:ks86ns] Starting auth for POST /flags/batch-evaluate
[2026-01-28 14:23:00] info: [auth:ks86ns] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:ks86ns] Access token is required for POST /flags/batch-evaluate from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [POST] /api/flags/batch-evaluate - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/care-patterns
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2047MB
[2026-01-28 14:23:00] info: [auth:rbnqzp] Starting auth for GET /flags/horses/123/care-patterns
[2026-01-28 14:23:00] info: [auth:rbnqzp] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:rbnqzp] Access token is required for GET /flags/horses/123/care-patterns from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/care-patterns - 401
[2026-01-28 14:23:00] info: [POST] /api/flags/evaluate
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2047MB
[2026-01-28 14:23:00] info: [auth:am4jcbb] Starting auth for POST /flags/evaluate
[2026-01-28 14:23:00] info: [auth:am4jcbb] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:am4jcbb] Access token is required for POST /flags/evaluate from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [POST] /api/flags/evaluate - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/flags
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2046MB
[2026-01-28 14:23:00] info: [auth:q82i7a] Starting auth for GET /flags/horses/123/flags
[2026-01-28 14:23:00] info: [auth:q82i7a] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:q82i7a] Access token is required for GET /flags/horses/123/flags from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/flags - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/definitions
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2045MB
[2026-01-28 14:23:00] info: [auth:al0gr9] Starting auth for GET /flags/definitions
[2026-01-28 14:23:00] info: [auth:al0gr9] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:al0gr9] Access token is required for GET /flags/definitions from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [GET] /api/flags/definitions - 401
[2026-01-28 14:23:00] info: [POST] /api/flags/batch-evaluate
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2044MB
[2026-01-28 14:23:00] info: [auth:ccvwjp] Starting auth for POST /flags/batch-evaluate
[2026-01-28 14:23:00] info: [auth:ccvwjp] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:ccvwjp] Access token is required for POST /flags/batch-evaluate from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [POST] /api/flags/batch-evaluate - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/care-patterns
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2043MB
[2026-01-28 14:23:00] info: [auth:pyseld] Starting auth for GET /flags/horses/123/care-patterns
[2026-01-28 14:23:00] info: [auth:pyseld] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:pyseld] Access token is required for GET /flags/horses/123/care-patterns from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [GET] /api/flags/horses/123/care-patterns - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/health
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2042MB
[2026-01-28 14:23:00] info: [auth:99f0ea] Starting auth for GET /flags/health
[2026-01-28 14:23:00] info: [auth:99f0ea] Token from cookie: false
[2026-01-28 14:23:00] warn: [auth:99f0ea] Access token is required for GET /flags/health from ::ffff:127.0.0.1
[2026-01-28 14:23:00] info: [GET] /api/flags/health - 401
[2026-01-28 14:23:00] info: [GET] /api/flags/health
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2043MB
[2026-01-28 14:23:00] info: [auth:kfxgf] Starting auth for GET /flags/health
[2026-01-28 14:23:00] info: [auth:kfxgf] Token from cookie: false
[2026-01-28 14:23:00] info: [auth:kfxgf] Token from header: true
[2026-01-28 14:23:00] info: [auth:kfxgf] Authenticated user test-user-epigenetic-1769628180360
[2026-01-28 14:23:00] info: [GET] /api/flags/health - 200
[2026-01-28 14:23:00] info: [GET] /api/flags/health
[2026-01-28 14:23:00] warn: [MemoryMonitoring] Memory threshold exceeded: 2045MB
[2026-01-28 14:23:00] info: [auth:wgc4fi] Starting auth for GET /flags/health
[2026-01-28 14:23:00] info: [auth:wgc4fi] Token from cookie: false
[2026-01-28 14:23:00] info: [auth:wgc4fi] Token from header: true
[2026-01-28 14:23:00] info: [auth:wgc4fi] Authenticated user test-user-epigenetic-1769628180389
[2026-01-28 14:23:00] info: [GET] /api/flags/health - 200
PASS tests/integration/epigeneticFlagRoutes.test.mjs
  Epigenetic Flag Routes Integration Tests
    Health Check
      ‚àö should return system health status (107 ms)
    Authentication Requirements
      ‚àö should require authentication for flag evaluation (37 ms)
      ‚àö should require authentication for horse flags (31 ms)
      ‚àö should require authentication for flag definitions (27 ms)
      ‚àö should require authentication for batch evaluation (30 ms)
      ‚àö should require authentication for care patterns (28 ms)
    Route Structure
      ‚àö should have all required endpoints mounted (138 ms)
    System Integration
      ‚àö should have epigenetic flag routes mounted in main app (30 ms)
      ‚àö should handle CORS and security headers (32 ms)

[2026-01-28 14:23:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:01] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:23:01] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:23:01] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:01] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:23:01] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:23:01] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:23:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:23:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:23:01] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:23:01] info: [GET] /api/admin/cron/status
[2026-01-28 14:23:01] warn: [MemoryMonitoring] Memory threshold exceeded: 2102MB
[2026-01-28 14:23:01] info: [auth:o15ea9] Starting auth for GET /cron/status
[2026-01-28 14:23:01] info: [auth:o15ea9] Token from cookie: false
[2026-01-28 14:23:01] info: [auth:o15ea9] Token from header: true
[2026-01-28 14:23:01] info: [auth:o15ea9] Authenticated user admin-user-uuid-456
[2026-01-28 14:23:01] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /cron/status
[2026-01-28 14:23:01] info: [adminRoutes] GET /api/admin/cron/status
[2026-01-28 14:23:01] info: [GET] /api/admin/cron/status - 200
[2026-01-28 14:23:01] info: [POST] /api/admin/traits/evaluate
[2026-01-28 14:23:01] warn: [MemoryMonitoring] Memory threshold exceeded: 2097MB
[2026-01-28 14:23:01] info: [auth:425iopr] Starting auth for POST /traits/evaluate
[2026-01-28 14:23:01] info: [auth:425iopr] Token from cookie: false
[2026-01-28 14:23:01] info: [auth:425iopr] Token from header: true
[2026-01-28 14:23:01] info: [auth:425iopr] Authenticated user admin-user-uuid-456
[2026-01-28 14:23:01] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /traits/evaluate
[2026-01-28 14:23:01] info: [adminRoutes] POST /api/admin/traits/evaluate - Manual trait evaluation triggered
[2026-01-28 14:23:01] info: [POST] /api/admin/traits/evaluate - 200
[2026-01-28 14:23:01] info: [GET] /api/admin/foals/development
[2026-01-28 14:23:01] warn: [MemoryMonitoring] Memory threshold exceeded: 2101MB
[2026-01-28 14:23:01] info: [auth:18drc] Starting auth for GET /foals/development
[2026-01-28 14:23:01] info: [auth:18drc] Token from cookie: false
[2026-01-28 14:23:01] info: [auth:18drc] Token from header: true
[2026-01-28 14:23:01] info: [auth:18drc] Authenticated user admin-user-uuid-456
[2026-01-28 14:23:01] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /foals/development
[2026-01-28 14:23:01] info: [adminRoutes] GET /api/admin/foals/development
[2026-01-28 14:23:01] info: [GET] /api/admin/foals/development - 200
[2026-01-28 14:23:01] info: [GET] /api/admin/traits/definitions
[2026-01-28 14:23:01] warn: [MemoryMonitoring] Memory threshold exceeded: 2104MB
[2026-01-28 14:23:01] info: [auth:s1e9jm] Starting auth for GET /traits/definitions
[2026-01-28 14:23:01] info: [auth:s1e9jm] Token from cookie: false
[2026-01-28 14:23:01] info: [auth:s1e9jm] Token from header: true
[2026-01-28 14:23:01] info: [auth:s1e9jm] Authenticated user admin-user-uuid-456
[2026-01-28 14:23:01] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /traits/definitions
[2026-01-28 14:23:01] info: [adminRoutes] GET /api/admin/traits/definitions
[2026-01-28 14:23:01] info: [GET] /api/admin/traits/definitions - 200
[2026-01-28 14:23:01] info: [POST] /api/admin/cron/start
[2026-01-28 14:23:01] warn: [MemoryMonitoring] Memory threshold exceeded: 2099MB
[2026-01-28 14:23:01] info: [auth:ejeat8] Starting auth for POST /cron/start
[2026-01-28 14:23:01] info: [auth:ejeat8] Token from cookie: false
[2026-01-28 14:23:01] info: [auth:ejeat8] Token from header: true
[2026-01-28 14:23:01] info: [auth:ejeat8] Authenticated user admin-user-uuid-456
[2026-01-28 14:23:01] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /cron/start
[2026-01-28 14:23:01] info: [adminRoutes] POST /api/admin/cron/start
[2026-01-28 14:23:01] info: [POST] /api/admin/cron/start - 200
[2026-01-28 14:23:01] info: [POST] /api/admin/cron/stop
[2026-01-28 14:23:01] warn: [MemoryMonitoring] Memory threshold exceeded: 2103MB
[2026-01-28 14:23:01] info: [auth:wktou] Starting auth for POST /cron/stop
[2026-01-28 14:23:01] info: [auth:wktou] Token from cookie: false
[2026-01-28 14:23:01] info: [auth:wktou] Token from header: true
[2026-01-28 14:23:01] info: [auth:wktou] Authenticated user admin-user-uuid-456
[2026-01-28 14:23:01] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /cron/stop
[2026-01-28 14:23:01] info: [adminRoutes] POST /api/admin/cron/stop
[2026-01-28 14:23:01] info: [POST] /api/admin/cron/stop - 200
PASS tests/cronJobsIntegration.test.mjs
  ‚è∞ INTEGRATION: Cron Jobs System - Automated Trait Evaluation & Admin API
    Daily Trait Evaluation
      ‚àö should evaluate traits for foals with good bonding and low stress (3 ms)
      ‚àö should evaluate traits for foals with poor bonding and high stress (8 ms)
      ‚àö should not evaluate foals that have completed development (1 ms)
      ‚àö should handle foals without development records (1 ms)
      ‚àö should not reveal duplicate traits (1 ms)
      ‚àö should handle multiple foals in single evaluation (1 ms)
    Admin API Endpoints
      ‚àö should get cron job status (46 ms)
      ‚àö should manually trigger trait evaluation (33 ms)
      ‚àö should get foals in development (28 ms)
      ‚àö should get trait definitions (39 ms)
      ‚àö should start and stop cron job service (61 ms)
    Error Handling
      ‚àö should handle database errors gracefully (1 ms)
      ‚àö should handle missing epigeneticModifiers field (1 ms)

[2026-01-28 14:23:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:02] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:23:02] info: [RateLimit:test] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:rl] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:fallback] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:circuit-log] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:under-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:exceed-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:user-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:ip-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:bypass-test] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:env-override] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:error-handling] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:02] info: [RateLimit:custom-handler] Redis not connected - using in-memory rate limiting (per-process)
  console.error
    ValidationError: The hit count for ip:127.0.0.1 was incremented more than once for a single request. See https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/ for more information.
        at Object.singleCount (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:214:13)
        at Object.wrappedValidations.<computed> [as singleCount] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:715:26
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5 {
      code: 'ERR_ERL_DOUBLE_COUNT',
      help: 'https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/'
    }

      at Object.wrappedValidations.<computed> [as singleCount] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at node_modules/express-rate-limit/dist/index.mjs:715:26
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 14:23:02] info: [RateLimit:retry-after] Redis not connected - using in-memory rate limiting (per-process)
  console.error
    ValidationError: The hit count for ip:127.0.0.1 was incremented more than once for a single request. See https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/ for more information.
        at Object.singleCount (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:214:13)
        at Object.wrappedValidations.<computed> [as singleCount] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:715:26
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5 {
      code: 'ERR_ERL_DOUBLE_COUNT',
      help: 'https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/'
    }

      at Object.wrappedValidations.<computed> [as singleCount] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at node_modules/express-rate-limit/dist/index.mjs:715:26
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 14:23:03] info: [RateLimit:distributed] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:multi-process] Redis not connected - using in-memory rate limiting (per-process)
PASS __tests__/integration/rate-limit-circuit-breaker.test.mjs
  Rate Limiting Circuit Breaker Integration Tests
    Rate Limiter Initialization
      ‚àö should create rate limiter successfully (7 ms)
      ‚àö should validate configuration parameters (8 ms)
      ‚àö should use default configuration when not provided (2 ms)
    Circuit Breaker Fallback Behavior
      ‚àö should fall back to in-memory rate limiting when circuit is open (61 ms)
      ‚àö should log circuit open state when falling back (2 ms)
    Rate Limiting with Circuit Breaker
      ‚àö should allow requests under the limit (183 ms)
      ‚àö should configure rate limiter with blocking capability (3 ms)
      ‚àö should use user ID for authenticated rate limiting (59 ms)
      ‚àö should fall back to IP for unauthenticated requests (63 ms)
    Test Environment Bypasses
      ‚àö should bypass rate limiting with test header (77 ms)
      ‚àö should respect test environment overrides (3 ms)
    Health Status Monitoring
      ‚àö should report rate limiting health status (2 ms)
      ‚àö should include circuit breaker metrics when available (1 ms)
      ‚àö should report degraded status when Redis unavailable (1 ms)
    Circuit State Detection
      ‚àö should detect when Redis connection is available (1 ms)
      ‚àö should return false when circuit breaker is open (1 ms)
    Error Handling and Recovery
      ‚àö should handle Redis connection errors gracefully (3 ms)
      ‚àö should recover when Redis becomes available (1 ms)
    Rate Limiter Custom Handler
      ‚àö should return proper error response when limit exceeded (126 ms)
      ‚àö should include retry-after information in response (125 ms)
    Distributed Rate Limiting
      ‚àö should use Redis store for distributed rate limiting when available (3 ms)
      ‚àö should synchronize rate limits across multiple processes (183 ms)

[2026-01-28 14:23:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:03] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:03] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:23:04] info: [TokenRotation] Created new token pair
[2026-01-28 14:23:04] info: [EmailVerification] Created verification token
[2026-01-28 14:23:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:23:04] info: [authController.register] Verification email sent
[2026-01-28 14:23:04] info: [auth:52epcf] Starting auth for GET /api/horses/trainable/d705efd2-0922-4af8-9aa5-f3049c269341
[2026-01-28 14:23:04] info: [auth:52epcf] Token from cookie: false
[2026-01-28 14:23:04] info: [auth:52epcf] Token from header: true
[2026-01-28 14:23:04] info: [auth:52epcf] Authenticated user d705efd2-0922-4af8-9aa5-f3049c269341
[2026-01-28 14:23:04] info: [auth:7i7dp] Starting auth for GET /api/horses/trainable/d705efd2-0922-4af8-9aa5-f3049c269341
[2026-01-28 14:23:04] info: [auth:7i7dp] Token from cookie: false
[2026-01-28 14:23:04] info: [auth:7i7dp] Token from header: true
[2026-01-28 14:23:04] info: [auth:7i7dp] Authenticated user d705efd2-0922-4af8-9aa5-f3049c269341
[2026-01-28 14:23:04] info: [auth:n907xr] Starting auth for POST /api/training/train
[2026-01-28 14:23:04] info: [auth:n907xr] Token from cookie: false
[2026-01-28 14:23:04] info: [auth:n907xr] Token from header: true
[2026-01-28 14:23:04] info: [auth:n907xr] Authenticated user d705efd2-0922-4af8-9aa5-f3049c269341
[2026-01-28 14:23:04] info: [auth:k5kf9k] Starting auth for POST /api/training/train
[2026-01-28 14:23:04] info: [auth:k5kf9k] Token from cookie: false
[2026-01-28 14:23:04] info: [auth:k5kf9k] Token from header: true
[2026-01-28 14:23:04] info: [auth:k5kf9k] Authenticated user d705efd2-0922-4af8-9aa5-f3049c269341
[2026-01-28 14:23:04] info: [auth:ndh9na] Starting auth for GET /api/horses/trainable/d705efd2-0922-4af8-9aa5-f3049c269341
[2026-01-28 14:23:04] info: [auth:ndh9na] Token from cookie: false
[2026-01-28 14:23:04] warn: [auth:ndh9na] Access token is required for GET /api/horses/trainable/d705efd2-0922-4af8-9aa5-f3049c269341 from ::ffff:127.0.0.1
PASS tests/training-complete.test.mjs
  üèãÔ∏è INTEGRATION: Training System Complete - End-to-End Workflow
    Authentication and Setup
      ‚àö should have created test user and horses (2 ms)
    Trainable Horses
      ‚àö should get trainable horses for authenticated user (22 ms)
    Training Functionality
      ‚àö should successfully train an adult horse (37 ms)
      ‚àö should reject training for young horse (18 ms)
    Authentication Protection
      ‚àö should reject unauthenticated requests (16 ms)

[2026-01-28 14:23:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:05] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:23:05] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:23:05] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:05] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:23:05] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:23:05] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:23:05] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:23:05] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:23:05] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:23:05] info: [POST] /api/horses/foals
[2026-01-28 14:23:05] warn: [MemoryMonitoring] Memory threshold exceeded: 2207MB
[2026-01-28 14:23:05] info: [auth:q99fz] Starting auth for POST /horses/foals
[2026-01-28 14:23:05] info: [auth:q99fz] Token from cookie: false
[2026-01-28 14:23:05] warn: [auth:q99fz] Access token is required for POST /horses/foals from ::ffff:127.0.0.1
[2026-01-28 14:23:05] info: [POST] /api/horses/foals - 401
PASS tests/foalCreationIntegration.test.mjs
  üê¥ INTEGRATION: Foal Creation Integration - API Endpoint Validation
    ‚àö should accept valid foal creation data structure (48 ms)

[2026-01-28 14:23:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 210
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.5%, adjustment: -15.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 194 (base: 210, trait: +0, luck: -15.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 210
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 12.6
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 223 (base: 210, trait: +0, luck: 12.6)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 210
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.4%, adjustment: 13.4
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 223 (base: 210, trait: +0, luck: 13.4)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 210
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.0%, adjustment: -16.8
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 193 (base: 210, trait: +0, luck: -16.8)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.1%, adjustment: -6.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -6.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -14.9
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 285 (base: 300, trait: +0, luck: -14.9)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.0%, adjustment: -3.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 297 (base: 300, trait: +0, luck: -3.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.0%, adjustment: -24.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 276 (base: 300, trait: +0, luck: -24.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.9%, adjustment: 17.6
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 17.6)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.6%, adjustment: 16.9
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 317 (base: 300, trait: +0, luck: 16.9)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.4%, adjustment: 22.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 322 (base: 300, trait: +0, luck: 22.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.4%, adjustment: -1.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 299 (base: 300, trait: +0, luck: -1.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 12.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 12.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.2%, adjustment: 3.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 304 (base: 300, trait: +0, luck: 3.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.2%, adjustment: 3.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 304 (base: 300, trait: +0, luck: 3.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.6%, adjustment: -7.9
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 292 (base: 300, trait: +0, luck: -7.9)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.4%, adjustment: 19.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 19.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.3%, adjustment: 9.9
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 9.9)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.8%, adjustment: 23.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 323 (base: 300, trait: +0, luck: 23.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.8%, adjustment: -14.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -14.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.2%, adjustment: 18.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 18.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.7%, adjustment: -5.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -5.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 15.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 15.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.5%, adjustment: -4.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -4.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.4%, adjustment: 1.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 1.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.4%, adjustment: -7.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 293 (base: 300, trait: +0, luck: -7.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.1%, adjustment: -9.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -9.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.3%, adjustment: 0.8
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 0.8)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.6%, adjustment: -25.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 274 (base: 300, trait: +0, luck: -25.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.2%, adjustment: 12.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 313 (base: 300, trait: +0, luck: 12.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.8%, adjustment: 8.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 8.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.9%, adjustment: 14.6
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 14.6)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.5%, adjustment: 22.6
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 323 (base: 300, trait: +0, luck: 22.6)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.4%, adjustment: -1.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 299 (base: 300, trait: +0, luck: -1.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.8%, adjustment: 26.4
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 326 (base: 300, trait: +0, luck: 26.4)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.2%, adjustment: -6.6
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 293 (base: 300, trait: +0, luck: -6.6)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.6%, adjustment: 22.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 323 (base: 300, trait: +0, luck: 22.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.5%, adjustment: -10.4
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 290 (base: 300, trait: +0, luck: -10.4)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.0%, adjustment: -11.9
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.9)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 15.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 15.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.8%, adjustment: -11.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -11.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.0%, adjustment: -8.9
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -8.9)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.0%, adjustment: -0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 300 (base: 300, trait: +0, luck: -0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.2%, adjustment: -15.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -15.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -10.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -10.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -10.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -10.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -11.8
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.8)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.8%, adjustment: -20.4
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 280 (base: 300, trait: +0, luck: -20.4)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.1%, adjustment: -18.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -18.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.4%, adjustment: 1.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 1.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.7%, adjustment: -2.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 298 (base: 300, trait: +0, luck: -2.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.9%, adjustment: 26.6
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 26.6)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.4%, adjustment: 10.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 10.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.1%, adjustment: -6.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -6.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 80
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -6.8
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 73 (base: 80, trait: +0, luck: -6.8)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.2%, adjustment: -9.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 121 (base: 130, trait: +0, luck: -9.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.5%, adjustment: -2.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 128 (base: 130, trait: +0, luck: -2.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.7%, adjustment: 6.1
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 6.1)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.9%, adjustment: -7.6
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 122 (base: 130, trait: +0, luck: -7.6)
[2026-01-28 14:23:06] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 14:23:06] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 14:23:06] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 14:23:06] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 14:23:06] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 14:23:06] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 14:23:06] warn: [calculateCompetitionScore] Unknown event type: Unknown Event, using default calculation
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Unknown Event: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.8%, adjustment: 6.8
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 187 (base: 180, trait: +0, luck: 6.8)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.9%, adjustment: -16.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 180, trait: +0, luck: -16.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:06] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -27.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -27.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 27.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 27.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:23:07] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
PASS tests/competitionScore.test.mjs
  üèÜ UNIT: Competition Score Calculation - Scoring Algorithm Validation
    calculateCompetitionScore
      ‚àö should calculate correct base score for Racing discipline (7 ms)
      ‚àö should calculate correct base score for Show Jumping discipline (5 ms)
      ‚àö should calculate correct base score for Dressage discipline (3 ms)
      ‚àö should calculate correct base score for Cross Country discipline (9 ms)
      ‚àö should apply +5 trait bonus for matching discipline affinity (6 ms)
      ‚àö should NOT apply trait bonus for non-matching discipline (3 ms)
      ‚àö should apply ¬±9% random luck modifier (141 ms)
      ‚àö should handle missing stats by defaulting to 0 (3 ms)
      ‚àö should handle missing epigeneticModifiers gracefully (6 ms)
      ‚àö should handle null epigeneticModifiers.positive gracefully (7 ms)
      ‚àö should throw error for invalid horse input (11 ms)
      ‚àö should throw error for invalid event type (4 ms)
      ‚àö should handle unknown event types with default calculation (4 ms)
      ‚àö should return rounded integer scores (3 ms)
    Trait Match Logic - 20 Competition Simulation Tests
      ‚àö should demonstrate trait advantage in Show Jumping competitions (discipline_affinity_show_jumping) (130 ms)
      ‚àö should demonstrate trait advantage in Racing competitions (discipline_affinity_racing) (123 ms)
      ‚àö should demonstrate trait advantage in Dressage competitions (discipline_affinity_dressage) (122 ms)
      ‚àö should demonstrate trait advantage in Cross Country competitions (discipline_affinity_cross_country) (122 ms)
      ‚àö should show no advantage when trait does not match discipline (105 ms)
      ‚àö should handle horse missing epigeneticModifiers without throwing error (161 ms)
    Deterministic Tests with Controlled Randomness
      ‚àö should apply exact +5 bonus with controlled randomness (11 ms)
      ‚àö should handle minimum luck modifier (0) (3 ms)
      ‚àö should handle maximum luck modifier (1) (3 ms)
      ‚àö should demonstrate consistent trait advantage with controlled randomness (60 ms)
      ‚àö should verify trait bonus is applied correctly across all disciplines (26 ms)
      ‚àö should verify no bonus when trait does not match discipline (8 ms)
    getDisciplineStatWeights
      ‚àö should return correct weights for Racing (1 ms)
      ‚àö should return correct weights for Show Jumping (1 ms)
      ‚àö should return default weights for unknown discipline (1 ms)
    validateHorseForCompetition
      ‚àö should return true for valid horse with required stats (1 ms)
      ‚àö should return false for invalid horse input (1 ms)
      ‚àö should return true if horse has at least one required stat (1 ms)
      ‚àö should return false if horse has no valid stats

[2026-01-28 14:23:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147459 and mare 147460
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147470 and mare 147467
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147473 and mare 147474
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147477 and mare 147474
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147475 and mare 147476
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147480 and mare 147482
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147483 and mare 147481
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:07] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147485 and mare 147482
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147489 and mare 147493
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147489 and mare 147493
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147489 and mare 147490
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147489 and mare 147490
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147489 and mare 147488
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147489 and mare 147488
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147489 and mare 147491
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147489 and mare 147491
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147492 and mare 147493
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147492 and mare 147493
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147492 and mare 147490
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147492 and mare 147490
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147492 and mare 147488
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147492 and mare 147488
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147492 and mare 147491
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147492 and mare 147491
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147487 and mare 147493
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147487 and mare 147493
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147487 and mare 147490
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147487 and mare 147490
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147487 and mare 147488
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147487 and mare 147488
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147487 and mare 147491
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147487 and mare 147491
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147495 and mare 147494
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147495 and mare 147494
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147503 and mare 147504
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147505 and mare 147501
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147502 and mare 147501
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147508 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147508 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147508 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147508 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147508 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147510 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147508 and mare 147513
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147508 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147508 and mare 147513
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147512 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147510 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147508 and mare 147514
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147508 and mare 147514
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147512 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147512 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147512 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147512 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147508 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147512 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147510 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147512 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147512 and mare 147513
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147512 and mare 147513
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147512 and mare 147514
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147512 and mare 147514
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147510 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147510 and mare 147509
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147510 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147510 and mare 147511
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147510 and mare 147513
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147510 and mare 147513
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 147510 and mare 147514
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147510 and mare 147514
[2026-01-28 14:23:08] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
PASS tests/unit/geneticDiversityTracking.test.mjs
  üß¨ Genetic Diversity Tracking System
    üî¨ Advanced Genetic Diversity Algorithms
      ‚àö should calculate comprehensive genetic diversity metrics (258 ms)
      ‚àö should calculate effective population size (47 ms)
      ‚àö should identify genetic founders and their contributions (60 ms)
    üîç Enhanced Inbreeding Analysis
      ‚àö should calculate detailed inbreeding coefficients (33 ms)
      ‚àö should detect inbreeding in population (36 ms)
    üìä Population Genetic Health Tracking
      ‚àö should track population genetic health metrics (75 ms)
      ‚àö should analyze genetic trends over time (68 ms)
    üéØ Optimal Breeding Recommendations
      ‚àö should generate optimal breeding recommendations (172 ms)
      ‚àö should assess breeding pair compatibility (38 ms)
    üìà Genetic Diversity Tracking Over Time
      ‚àö should track genetic diversity changes over time (99 ms)
      ‚àö should generate comprehensive genetic diversity report (245 ms)

[2026-01-28 14:23:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:09] info: [auth:80kul] Starting auth for GET /health
[2026-01-28 14:23:09] info: [auth:80kul] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:80kul] Token from header: true
[2026-01-28 14:23:09] info: [auth:80kul] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:09] info: [auth:esn0dm] Starting auth for GET /health
[2026-01-28 14:23:09] info: [auth:esn0dm] Token from cookie: false
[2026-01-28 14:23:09] warn: [auth:esn0dm] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:23:09] info: [auth:xis91k] Starting auth for GET /metrics
[2026-01-28 14:23:09] info: [auth:xis91k] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:xis91k] Token from header: true
[2026-01-28 14:23:09] info: [auth:xis91k] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:23:09] info: [auth:sh6nfv] Starting auth for GET /metrics
[2026-01-28 14:23:09] info: [auth:sh6nfv] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:sh6nfv] Token from header: true
[2026-01-28 14:23:09] info: [auth:sh6nfv] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:23:09] info: [auth:ysd0fu] Starting auth for GET /validation
[2026-01-28 14:23:09] info: [auth:ysd0fu] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:ysd0fu] Token from header: true
[2026-01-28 14:23:09] info: [auth:ysd0fu] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Validating OpenAPI specification
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:09] info: [auth:ztwed6] Starting auth for POST /generate
[2026-01-28 14:23:09] info: [auth:ztwed6] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:ztwed6] Token from header: true
[2026-01-28 14:23:09] info: [auth:ztwed6] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:09] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 14:23:09] info: [auth:2if6ij] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:2if6ij] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:2if6ij] Token from header: true
[2026-01-28 14:23:09] info: [auth:2if6ij] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: POST /api/horses
[2026-01-28 14:23:09] info: [auth:jceii] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:jceii] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:jceii] Token from header: true
[2026-01-28 14:23:09] info: [auth:jceii] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [auth:v818g] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:v818g] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:v818g] Token from header: true
[2026-01-28 14:23:09] info: [auth:v818g] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: GET /api/test-get
[2026-01-28 14:23:09] info: [auth:a9zxzo] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:a9zxzo] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:a9zxzo] Token from header: true
[2026-01-28 14:23:09] info: [auth:a9zxzo] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: POST /api/test-post
[2026-01-28 14:23:09] info: [auth:sngzvj] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:sngzvj] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:sngzvj] Token from header: true
[2026-01-28 14:23:09] info: [auth:sngzvj] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: PUT /api/test-put
[2026-01-28 14:23:09] info: [auth:wm3edi] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:wm3edi] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:wm3edi] Token from header: true
[2026-01-28 14:23:09] info: [auth:wm3edi] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: DELETE /api/test-delete
[2026-01-28 14:23:09] info: [auth:5kburd] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:5kburd] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:5kburd] Token from header: true
[2026-01-28 14:23:09] info: [auth:5kburd] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: PATCH /api/test-patch
[2026-01-28 14:23:09] info: [auth:xpz3u6] Starting auth for POST /schemas
[2026-01-28 14:23:09] info: [auth:xpz3u6] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:xpz3u6] Token from header: true
[2026-01-28 14:23:09] info: [auth:xpz3u6] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering schema: Horse
[2026-01-28 14:23:09] info: [auth:kzu09n] Starting auth for POST /schemas
[2026-01-28 14:23:09] info: [auth:kzu09n] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:kzu09n] Token from header: true
[2026-01-28 14:23:09] info: [auth:kzu09n] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [auth:ckis4] Starting auth for GET /coverage
[2026-01-28 14:23:09] info: [auth:ckis4] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:ckis4] Token from header: true
[2026-01-28 14:23:09] info: [auth:ckis4] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation coverage analysis
[2026-01-28 14:23:09] info: [auth:6mx09] Starting auth for GET /analytics
[2026-01-28 14:23:09] info: [auth:6mx09] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:6mx09] Token from header: true
[2026-01-28 14:23:09] info: [auth:6mx09] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:09] info: [auth:simxtr] Starting auth for GET /analytics
[2026-01-28 14:23:09] info: [auth:simxtr] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:simxtr] Token from header: true
[2026-01-28 14:23:09] info: [auth:simxtr] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 1d
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:09] info: [auth:67o2lo] Starting auth for GET /analytics
[2026-01-28 14:23:09] info: [auth:67o2lo] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:67o2lo] Token from header: true
[2026-01-28 14:23:09] info: [auth:67o2lo] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 7d
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:09] info: [auth:y52mx] Starting auth for GET /analytics
[2026-01-28 14:23:09] info: [auth:y52mx] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:y52mx] Token from header: true
[2026-01-28 14:23:09] info: [auth:y52mx] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:09] info: [auth:9ovt5n] Starting auth for GET /analytics
[2026-01-28 14:23:09] info: [auth:9ovt5n] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:9ovt5n] Token from header: true
[2026-01-28 14:23:09] info: [auth:9ovt5n] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [auth:rl6z9v] Starting auth for GET /health
[2026-01-28 14:23:09] info: [auth:rl6z9v] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:rl6z9v] Token from header: true
[2026-01-28 14:23:09] warn: [auth:rl6z9v] Invalid or expired token for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:23:09] info: [auth:yfsgap] Starting auth for GET /health
[2026-01-28 14:23:09] info: [auth:yfsgap] Token from cookie: false
[2026-01-28 14:23:09] warn: [auth:yfsgap] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:23:09] info: [auth:q2gj1] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:q2gj1] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:q2gj1] Token from header: true
[2026-01-28 14:23:09] info: [auth:q2gj1] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: GET /api/users
[2026-01-28 14:23:09] info: [auth:qrdqyt] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:qrdqyt] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:qrdqyt] Token from header: true
[2026-01-28 14:23:09] info: [auth:qrdqyt] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: POST /api/users
[2026-01-28 14:23:09] info: [auth:d310w9] Starting auth for POST /endpoints
[2026-01-28 14:23:09] info: [auth:d310w9] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:d310w9] Token from header: true
[2026-01-28 14:23:09] info: [auth:d310w9] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering endpoint: GET /api/horses
[2026-01-28 14:23:09] info: [auth:qusf2] Starting auth for GET /metrics
[2026-01-28 14:23:09] info: [auth:qusf2] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:qusf2] Token from header: true
[2026-01-28 14:23:09] info: [auth:qusf2] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:23:09] info: [auth:j3re7q] Starting auth for POST /schemas
[2026-01-28 14:23:09] info: [auth:j3re7q] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:j3re7q] Token from header: true
[2026-01-28 14:23:09] info: [auth:j3re7q] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering schema: User
[2026-01-28 14:23:09] info: [auth:akt4v] Starting auth for POST /schemas
[2026-01-28 14:23:09] info: [auth:akt4v] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:akt4v] Token from header: true
[2026-01-28 14:23:09] info: [auth:akt4v] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Registering schema: Horse
[2026-01-28 14:23:09] info: [auth:cfyj06] Starting auth for POST /generate
[2026-01-28 14:23:09] info: [auth:cfyj06] Token from cookie: false
[2026-01-28 14:23:09] info: [auth:cfyj06] Token from header: true
[2026-01-28 14:23:09] info: [auth:cfyj06] Authenticated user 3487046d-07ea-4edd-afb3-884a77fbb62c
[2026-01-28 14:23:09] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 14:23:09] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:09] info: [ApiDocService] Documentation generated for 0 endpoints
PASS __tests__/routes/documentationRoutes.test.mjs
  Documentation Routes
    GET /api/docs/health
      ‚àö retrieves documentation health successfully (42 ms)
      ‚àö requires authentication (15 ms)
    GET /api/docs/metrics
      ‚àö retrieves documentation metrics successfully (25 ms)
      ‚àö provides meaningful analytics data (23 ms)
    GET /api/docs/validation
      ‚àö validates OpenAPI specification successfully (24 ms)
    POST /api/docs/generate
      ‚àö generates documentation successfully (32 ms)
    POST /api/docs/endpoints
      ‚àö registers endpoint successfully (33 ms)
      ‚àö validates endpoint data (16 ms)
      ‚àö accepts valid HTTP methods (86 ms)
    POST /api/docs/schemas
      ‚àö registers schema successfully (20 ms)
      ‚àö validates schema data (15 ms)
    GET /api/docs/coverage
      ‚àö retrieves coverage analysis successfully (26 ms)
    GET /api/docs/analytics
      ‚àö retrieves analytics with default timeframe (27 ms)
      ‚àö accepts different timeframe parameters (74 ms)
      ‚àö validates timeframe parameter (18 ms)
    Error Handling
      ‚àö handles invalid authentication tokens (15 ms)
      ‚àö handles missing authorization header (17 ms)
    Integration with Documentation Service
      ‚àö endpoints registration reflects in metrics (69 ms)
      ‚àö schema registration reflects in generation (59 ms)

[2026-01-28 14:23:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:09] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:09] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:09] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:10] info: [auth:fl73an] Starting auth for GET /metrics
[2026-01-28 14:23:10] info: [auth:fl73an] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:fl73an] Token from header: true
[2026-01-28 14:23:10] info: [auth:fl73an] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:w3guyi] Starting auth for GET /metrics
[2026-01-28 14:23:10] info: [auth:w3guyi] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:w3guyi] Token from header: true
[2026-01-28 14:23:10] info: [auth:w3guyi] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:s2nkz9] Starting auth for GET /metrics
[2026-01-28 14:23:10] info: [auth:s2nkz9] Token from cookie: false
[2026-01-28 14:23:10] warn: [auth:s2nkz9] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:23:10] info: [auth:jaf7ks] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:jaf7ks] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:jaf7ks] Token from header: true
[2026-01-28 14:23:10] info: [auth:jaf7ks] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:hcswmm] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:hcswmm] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:hcswmm] Token from header: true
[2026-01-28 14:23:10] info: [auth:hcswmm] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Getting performance metrics for timeframe: 24h
[2026-01-28 14:23:10] info: [auth:r5whu] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:r5whu] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:r5whu] Token from header: true
[2026-01-28 14:23:10] info: [auth:r5whu] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:433nev] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:433nev] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:433nev] Token from header: true
[2026-01-28 14:23:10] info: [auth:433nev] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Getting performance metrics for timeframe: 1h
[2026-01-28 14:23:10] info: [auth:c7vtr] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:c7vtr] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:c7vtr] Token from header: true
[2026-01-28 14:23:10] info: [auth:c7vtr] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:gfz1ct] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:gfz1ct] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:gfz1ct] Token from header: true
[2026-01-28 14:23:10] info: [auth:gfz1ct] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Getting performance metrics for timeframe: 24h
[2026-01-28 14:23:10] info: [auth:r2dv6] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:r2dv6] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:r2dv6] Token from header: true
[2026-01-28 14:23:10] info: [auth:r2dv6] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:ey921f] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:ey921f] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:ey921f] Token from header: true
[2026-01-28 14:23:10] info: [auth:ey921f] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Getting performance metrics for timeframe: 7d
[2026-01-28 14:23:10] info: [auth:p8qfcq] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:p8qfcq] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:p8qfcq] Token from header: true
[2026-01-28 14:23:10] info: [auth:p8qfcq] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:hjpozg] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:hjpozg] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:hjpozg] Token from header: true
[2026-01-28 14:23:10] info: [auth:hjpozg] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Getting performance metrics for timeframe: 30d
[2026-01-28 14:23:10] info: [auth:lfrc29] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:lfrc29] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:lfrc29] Token from header: true
[2026-01-28 14:23:10] info: [auth:lfrc29] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:tuvobn] Starting auth for GET /performance
[2026-01-28 14:23:10] info: [auth:tuvobn] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:tuvobn] Token from header: true
[2026-01-28 14:23:10] info: [auth:tuvobn] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:dn8ie8j] Starting auth for GET /compression-stats
[2026-01-28 14:23:10] info: [auth:dn8ie8j] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:dn8ie8j] Token from header: true
[2026-01-28 14:23:10] info: [auth:dn8ie8j] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:g3kd2r] Starting auth for GET /compression-stats
[2026-01-28 14:23:10] info: [auth:g3kd2r] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:g3kd2r] Token from header: true
[2026-01-28 14:23:10] info: [auth:g3kd2r] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Getting compression statistics
[2026-01-28 14:23:10] info: [auth:b8tp7g] Starting auth for GET /cache-analytics
[2026-01-28 14:23:10] info: [auth:b8tp7g] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:b8tp7g] Token from header: true
[2026-01-28 14:23:10] info: [auth:b8tp7g] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:q66tl2] Starting auth for GET /cache-analytics
[2026-01-28 14:23:10] info: [auth:q66tl2] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:q66tl2] Token from header: true
[2026-01-28 14:23:10] info: [auth:q66tl2] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Getting cache analytics
[2026-01-28 14:23:10] info: [auth:op0p4k] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:op0p4k] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:op0p4k] Token from header: true
[2026-01-28 14:23:10] info: [auth:op0p4k] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:91l2i] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:91l2i] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:91l2i] Token from header: true
[2026-01-28 14:23:10] info: [auth:91l2i] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 14:23:10] info: [auth:6lba8x] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:6lba8x] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:6lba8x] Token from header: true
[2026-01-28 14:23:10] info: [auth:6lba8x] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:90kbub] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:90kbub] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:90kbub] Token from header: true
[2026-01-28 14:23:10] info: [auth:90kbub] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:egogz] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:egogz] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:egogz] Token from header: true
[2026-01-28 14:23:10] info: [auth:egogz] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:qegddxo] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:qegddxo] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:qegddxo] Token from header: true
[2026-01-28 14:23:10] info: [auth:qegddxo] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 14:23:10] info: [auth:24zro] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:24zro] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:24zro] Token from header: true
[2026-01-28 14:23:10] info: [auth:24zro] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:gryzfb] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:gryzfb] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:gryzfb] Token from header: true
[2026-01-28 14:23:10] info: [auth:gryzfb] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing compression with algorithm: brotli
[2026-01-28 14:23:10] info: [auth:mpu949] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:mpu949] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:mpu949] Token from header: true
[2026-01-28 14:23:10] info: [auth:mpu949] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:rpnimp] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:rpnimp] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:rpnimp] Token from header: true
[2026-01-28 14:23:10] info: [auth:rpnimp] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing compression with algorithm: deflate
[2026-01-28 14:23:10] info: [auth:op421f] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:op421f] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:op421f] Token from header: true
[2026-01-28 14:23:10] info: [auth:op421f] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:ca7oe] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:ca7oe] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:ca7oe] Token from header: true
[2026-01-28 14:23:10] info: [auth:ca7oe] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing offset pagination with 100 items
[2026-01-28 14:23:10] info: [auth:fawp6q] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:fawp6q] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:fawp6q] Token from header: true
[2026-01-28 14:23:10] info: [auth:fawp6q] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:or3fmt] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:or3fmt] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:or3fmt] Token from header: true
[2026-01-28 14:23:10] info: [auth:or3fmt] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing cursor pagination with 100 items
[2026-01-28 14:23:10] info: [auth:co0eps] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:co0eps] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:co0eps] Token from header: true
[2026-01-28 14:23:10] info: [auth:co0eps] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:j1jrc] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:j1jrc] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:j1jrc] Token from header: true
[2026-01-28 14:23:10] info: [auth:j1jrc] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:rywld3] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:rywld3] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:rywld3] Token from header: true
[2026-01-28 14:23:10] info: [auth:rywld3] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:acdm6] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:acdm6] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:acdm6] Token from header: true
[2026-01-28 14:23:10] info: [auth:acdm6] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:64xt68] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:64xt68] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:64xt68] Token from header: true
[2026-01-28 14:23:10] info: [auth:64xt68] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:0e5p1y] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:0e5p1y] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:0e5p1y] Token from header: true
[2026-01-28 14:23:10] info: [auth:0e5p1y] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:bbele9] Starting auth for GET /recommendations
[2026-01-28 14:23:10] info: [auth:bbele9] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:bbele9] Token from header: true
[2026-01-28 14:23:10] info: [auth:bbele9] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:nez40v] Starting auth for GET /recommendations
[2026-01-28 14:23:10] info: [auth:nez40v] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:nez40v] Token from header: true
[2026-01-28 14:23:10] info: [auth:nez40v] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Generating optimization recommendations
[2026-01-28 14:23:10] info: [auth:5vt1blb] Starting auth for GET /metrics
[2026-01-28 14:23:10] info: [auth:5vt1blb] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:5vt1blb] Token from header: true
[2026-01-28 14:23:10] warn: [auth:5vt1blb] Invalid or expired token for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:23:10] info: [auth:4k4muy] Starting auth for GET /metrics
[2026-01-28 14:23:10] info: [auth:4k4muy] Token from cookie: false
[2026-01-28 14:23:10] warn: [auth:4k4muy] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:23:10] info: [auth:49fkfl] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:49fkfl] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:49fkfl] Token from header: true
[2026-01-28 14:23:10] info: [auth:49fkfl] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:z2xks3] Starting auth for POST /test-compression
[2026-01-28 14:23:10] info: [auth:z2xks3] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:z2xks3] Token from header: true
[2026-01-28 14:23:10] info: [auth:z2xks3] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 14:23:10] info: [auth:5uq6qq] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:5uq6qq] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:5uq6qq] Token from header: true
[2026-01-28 14:23:10] info: [auth:5uq6qq] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [auth:kp2psf] Starting auth for POST /test-pagination
[2026-01-28 14:23:10] info: [auth:kp2psf] Token from cookie: false
[2026-01-28 14:23:10] info: [auth:kp2psf] Token from header: true
[2026-01-28 14:23:10] info: [auth:kp2psf] Authenticated user c9bab4ed-ca81-44bb-823c-16d09a39621e
[2026-01-28 14:23:10] info: [ApiOptimization] Testing offset pagination with 1000 items
PASS __tests__/routes/apiOptimizationRoutes.test.mjs
  API Optimization Routes
    GET /api/optimization/metrics
      ‚àö retrieves optimization metrics successfully (37 ms)
      ‚àö requires authentication (17 ms)
    GET /api/optimization/performance
      ‚àö retrieves performance analytics with default timeframe (28 ms)
      ‚àö accepts different timeframe parameters (100 ms)
      ‚àö validates timeframe parameter (23 ms)
    GET /api/optimization/compression-stats
      ‚àö retrieves compression statistics successfully (27 ms)
    GET /api/optimization/cache-analytics
      ‚àö retrieves cache analytics successfully (28 ms)
    POST /api/optimization/test-compression
      ‚àö tests compression on sample data successfully (34 ms)
      ‚àö validates required data parameter (23 ms)
      ‚àö accepts different compression algorithms (67 ms)
    POST /api/optimization/test-pagination
      ‚àö tests offset pagination successfully (21 ms)
      ‚àö tests cursor pagination successfully (23 ms)
      ‚àö validates pagination parameters (65 ms)
    GET /api/optimization/recommendations
      ‚àö generates optimization recommendations successfully (27 ms)
    Error Handling
      ‚àö handles invalid authentication tokens (15 ms)
      ‚àö handles missing authorization header (16 ms)
    Performance Validation
      ‚àö compression test shows meaningful results (26 ms)
      ‚àö pagination test shows performance metrics (22 ms)

[2026-01-28 14:23:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:11] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/developmentalWindowSystem.test.mjs
  Developmental Window System
    identifyDevelopmentalWindows
      ‚àö should identify active developmental windows for newborn foal (6 ms)
      ‚àö should identify multiple active windows for appropriate ages (3 ms)
      ‚àö should show closed windows for older foals (3 ms)
    calculateWindowSensitivity
      ‚àö should calculate high sensitivity for critical periods (7 ms)
      ‚àö should calculate reduced sensitivity outside critical periods (3 ms)
      ‚àö should apply environmental modifiers correctly (4 ms)
    evaluateTraitDevelopmentOpportunity
      ‚àö should evaluate trait development opportunities during active windows (5 ms)
      ‚àö should show higher opportunities for window-aligned traits (7 ms)
      ‚àö should provide appropriate recommendations (4 ms)
    trackDevelopmentalMilestones
      ‚àö should track developmental milestones with interactions (10 ms)
      ‚àö should show progression over time (6 ms)
    assessWindowClosure
      ‚àö should assess window closure effects (5 ms)
      ‚àö should show open status for active windows (3 ms)
      ‚àö should identify compensatory mechanisms for closed windows (3 ms)
    coordinateMultiWindowDevelopment
      ‚àö should coordinate development across multiple windows (4 ms)
      ‚àö should identify window conflicts and resolutions (2 ms)
    analyzeCriticalPeriodSensitivity
      ‚àö should analyze critical period sensitivity comprehensively (12 ms)
      ‚àö should identify age-appropriate risk factors (13 ms)
    generateDevelopmentalForecast
      ‚àö should generate comprehensive developmental forecast (4 ms)
      ‚àö should project trait development accurately (4 ms)
      ‚àö should provide actionable recommendations (4 ms)

[2026-01-28 14:23:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:11] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:11] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:11] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:13] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:13] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:23:13] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/competition.test.mjs
  üèÜ UNIT: Competition Trait Match Fairness - Statistical Validation
    ‚àö should demonstrate trait match fairness for Show Jumping competition (727 ms)
    ‚àö should demonstrate trait match fairness for Racing competition (158 ms)
    ‚àö should demonstrate trait match fairness for Dressage competition (154 ms)
    ‚àö should demonstrate trait match fairness for Cross Country competition (155 ms)
    ‚àö should verify trait advantage is consistent across multiple test runs (272 ms)

[2026-01-28 14:23:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:13] warn: [Session] Session expired due to inactivity
[2026-01-28 14:23:13] warn: [Session] Session expired due to inactivity
[2026-01-28 14:23:13] error: [Session] Error tracking session activity: Database connection error
[2026-01-28 14:23:13] warn: [Session] Too many concurrent sessions
[2026-01-28 14:23:13] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 14:23:13] warn: [Session] Too many concurrent sessions
[2026-01-28 14:23:13] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 14:23:13] warn: [Session] Too many concurrent sessions
[2026-01-28 14:23:13] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 14:23:14] error: [Session] Error enforcing concurrent sessions: Database query failed
[2026-01-28 14:23:14] error: [Session] Error fetching active sessions: Database connection lost
[2026-01-28 14:23:14] info: [Session] Session revoked by user
[2026-01-28 14:23:14] error: [Session] Error revoking session: Database connection failed
PASS __tests__/middleware/sessionManagement.test.mjs
  Session Management Middleware
    trackSessionActivity()
      ‚àö should skip tracking for unauthenticated requests (10 ms)
      ‚àö should skip tracking when no user ID (1 ms)
      ‚àö should skip tracking when no refresh token cookie (50 ms)
      Active session tracking
        ‚àö should update lastActivityAt for valid session (15 ms)
        ‚àö should allow session within timeout window (14 minutes) (10 ms)
        ‚àö should expire session after 15 minutes of inactivity (17 ms)
        ‚àö should clear cookies when session expires (10 ms)
        ‚àö should use createdAt if lastActivityAt is null (10 ms)
        ‚àö should handle database errors gracefully (6 ms)
        ‚àö should catch and log Prisma errors during activity tracking (8 ms)
      Custom timeout configuration
        ‚àö should respect custom SESSION_TIMEOUT_MS (12 ms)
    enforceConcurrentSessions()
      ‚àö should skip enforcement for unauthenticated requests (2 ms)
      ‚àö should allow user with 1 session (7 ms)
      ‚àö should allow user with exactly MAX_CONCURRENT_SESSIONS (5) (9 ms)
      ‚àö should delete oldest session when limit exceeded (6 sessions) (108 ms)
      ‚àö should delete multiple oldest sessions when far over limit (10 sessions) (170 ms)
      ‚àö should keep most recent sessions (131 ms)
      ‚àö should handle database errors gracefully (3 ms)
      ‚àö should catch and log Prisma errors during session enforcement (8 ms)
      Custom limit configuration
        ‚àö should respect custom MAX_CONCURRENT_SESSIONS (84 ms)
    addSessionSecurityHeaders()
      ‚àö should add cache control headers (2 ms)
      ‚àö should add pragma header (2 ms)
      ‚àö should add expires header (1 ms)
      ‚àö should call next() to continue middleware chain (1 ms)
    getActiveSessions()
      ‚àö should return 401 for unauthenticated requests (1 ms)
      ‚àö should return empty array for user with no sessions (5 ms)
      ‚àö should return all active sessions for user (7 ms)
      ‚àö should NOT expose token values in response (11 ms)
      ‚àö should handle database errors (2 ms)
    revokeSession()
      ‚àö should return 401 for unauthenticated requests (1 ms)
      ‚àö should return 400 when sessionId missing (3 ms)
      ‚àö should successfully revoke own session (8 ms)
      ‚àö should return 404 when session not found (5 ms)
      ‚àö should NOT allow revoking another user's session (7 ms)
      ‚àö should handle database errors (7 ms)

[2026-01-28 14:23:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:14] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:15] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:15] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:23:15] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:23:15] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:23:15] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:23:15] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:23:15] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
PASS __tests__/integration/security/rate-limit-enforcement.test.mjs
  Rate Limit Enforcement Integration Tests
    ‚àö should pass a dummy test with app (3 ms)

[2026-01-28 14:23:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:15] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:15] warn: [ResourceManagement] Slow request detected: GET /test-slow took 12ms
[2026-01-28 14:23:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2162MB
[2026-01-28 14:23:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2168MB
[2026-01-28 14:23:15] warn: [DatabaseMonitoring] High query count: 15 queries in 2ms for GET /test-many-queries
[2026-01-28 14:23:16] warn: [ResourceManagement] Request timeout: GET /test-timeout
[2026-01-28 14:23:16] warn: [MemoryMonitoring] Memory threshold exceeded: 2168MB
[2026-01-28 14:23:16] warn: [MemoryMonitoring] Memory threshold exceeded: 2175MB
[2026-01-28 14:23:16] warn: [ResourceManagement] Slow request detected: GET /test-thresholds took 7ms
[2026-01-28 14:23:16] warn: [ResourceManagement] High memory usage: GET /test-thresholds used 1MB
PASS __tests__/middleware/resourceManagement.test.mjs
  Resource Management Middleware
    Resource Management Middleware
      ‚àö adds resource tracking helpers to request (22 ms)
      ‚àö tracks and cleans up timers automatically (16 ms)
      ‚àö adds performance headers to response (20 ms)
      ‚àö handles request errors gracefully (121 ms)
      ‚àö tracks memory usage per request (10 ms)
      ‚àö warns about slow requests (21 ms)
    Memory Monitoring Middleware
      ‚àö adds memory headers to response (18 ms)
      ‚àö handles memory threshold checking (12 ms)
      ‚àö triggers GC when enabled and threshold exceeded (1 ms)
    Database Connection Middleware
      ‚àö tracks database queries (15 ms)
      ‚àö warns about high query counts (12 ms)
      ‚àö restores original methods after request (113 ms)
    Request Timeout Middleware
      ‚àö handles normal requests without timeout (14 ms)
      ‚àö times out slow requests (115 ms)
      ‚àö tracks timeout timer as resource (10 ms)
      ‚àö cleans up timeout timer on completion (14 ms)
    Middleware Integration
      ‚àö multiple middleware work together correctly (12 ms)
      ‚àö handles errors across middleware stack (16 ms)
    Configuration Options
      ‚àö respects disabled tracking options (10 ms)
      ‚àö uses custom thresholds correctly (17 ms)

[2026-01-28 14:23:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Applied influences from 2 flags to trait weights
[2026-01-28 14:23:16] warn: [epigeneticFlagInfluence] Unknown flag: unknown_flag
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:23:16] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 4 flags
PASS tests/unit/epigeneticFlagInfluence.test.mjs
  Epigenetic Flag Influence System
    applyFlagInfluencesToTraitWeights
      ‚àö should return unchanged weights for no flags (3 ms)
      ‚àö should apply brave flag influences correctly (3 ms)
      ‚àö should apply fearful flag influences correctly (3 ms)
      ‚àö should stack multiple flag influences (8 ms)
      ‚àö should handle unknown flags gracefully (2 ms)
      ‚àö should clamp values to 0-1 range (2 ms)
    calculateBehaviorModifiers
      ‚àö should return empty object for no flags (1 ms)
      ‚àö should calculate modifiers for single flag (2 ms)
      ‚àö should aggregate modifiers from multiple flags (2 ms)
      ‚àö should stack same modifier types (2 ms)
    applyFlagInfluencesToCompetition
      ‚àö should return unchanged score for no flags (1 ms)
      ‚àö should apply competition bonus correctly (2 ms)
      ‚àö should apply competition penalty correctly (2 ms)
      ‚àö should apply stress modifiers correctly (6 ms)
      ‚àö should not allow negative scores (2 ms)
    applyFlagInfluencesToTraining
      ‚àö should return unchanged efficiency for no flags (1 ms)
      ‚àö should apply training efficiency modifier (2 ms)
      ‚àö should apply bonding modifiers to training (1 ms)
      ‚àö should clamp efficiency to 0-1 range (2 ms)
    applyFlagInfluencesToBonding
      ‚àö should return unchanged bonding for no flags (1 ms)
      ‚àö should apply bonding rate modifier (2 ms)
      ‚àö should apply bonding resistance penalty (1 ms)
    getFlagInfluenceSummary
      ‚àö should return empty summary for no flags (1 ms)
      ‚àö should generate complete summary for multiple flags (1 ms)
      ‚àö should aggregate trait influences correctly (1 ms)
      ‚àö should count flag types correctly (2 ms)

[2026-01-28 14:23:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:16] error: [ApiDocService] Failed to load specification: OpenAPI specification file not found
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:16] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:16] info: [ApiDocService] Documentation generated for 0 endpoints
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:16] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:16] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 14:23:16] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 14:23:16] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:16] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:16] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:23:16] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:23:16] warn: [ApiDocService] OpenAPI specification validation found 2 issues
[2026-01-28 14:23:16] info: [ApiDocService] OpenAPI specification validation passed
PASS __tests__/services/apiDocumentation.test.mjs
  API Documentation Service
    Specification Loading and Saving
      ‚àö loads OpenAPI specification correctly (8 ms)
      ‚àö saves OpenAPI specification correctly (5 ms)
      ‚àö throws error when specification file not found (12 ms)
    Endpoint Registration
      ‚àö registers endpoint correctly (4 ms)
      ‚àö registers multiple endpoints correctly (2 ms)
      ‚àö handles endpoint registration with minimal options (2 ms)
    Schema Registration
      ‚àö registers schema correctly (2 ms)
      ‚àö registers multiple schemas correctly (2 ms)
    Documentation Generation
      ‚àö generates documentation with registered endpoints (6 ms)
      ‚àö generates documentation with registered schemas (10 ms)
      ‚àö adds generation metadata to specification (5 ms)
    Specification Validation
      ‚àö validates correct specification (3 ms)
      ‚àö detects missing responses (3 ms)
      ‚àö detects missing summaries (4 ms)
      ‚àö detects missing tags (3 ms)
    Metrics and Analytics
      ‚àö calculates metrics correctly (8 ms)
      ‚àö generates health report correctly (11 ms)
      ‚àö provides recommendations based on metrics (7 ms)
    Example Generation
      ‚àö generates string examples correctly (1 ms)
      ‚àö generates email format examples (2 ms)
      ‚àö generates UUID format examples (2 ms)
      ‚àö generates object examples correctly (2 ms)
      ‚àö generates array examples correctly (2 ms)
    Helper Functions
      ‚àö registerEndpoint helper function works (2 ms)
      ‚àö registerSchema helper function works (2 ms)
      ‚àö getDocumentationMetrics helper function works (2 ms)
      ‚àö getDocumentationHealth helper function works (4 ms)

[2026-01-28 14:23:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:23:17.200Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:23:17.214Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 5 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":5,"expired":5,"invalidated":0,"timestamp":"2026-01-28T19:23:17.236Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 2 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":2,"expired":2,"invalidated":0,"timestamp":"2026-01-28T19:23:17.251Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 3 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":3,"expired":3,"invalidated":0,"timestamp":"2026-01-28T19:23:17.270Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:23:17.285Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:23:17.298Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:23:17.309Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] error: [TokenRotation] Error cleaning up tokens: Database connection failed
[2026-01-28 14:23:17] error: [cronJobService] Token cleanup error: Database connection failed
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2026-01-28T19:23:17.322Z","error":"Database connection failed"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:23:17] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:23:17.358Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 10 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":10,"expired":10,"invalidated":0,"timestamp":"2026-01-28T19:23:17.384Z"}
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:23:17.430Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:23:17.447Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:23:17.459Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:23:17] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:23:17] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:23:17] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:23:17] info: [cronJobService] Token cleanup completed. Removed 100 expired/invalidated tokens
[2026-01-28 14:23:17] info: [cronJobService] Manual token cleanup completed: {"removed":100,"expired":100,"invalidated":0,"timestamp":"2026-01-28T19:23:17.675Z"}
[2026-01-28 14:23:17] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:23:17] info: [cronJobService] All cron jobs stopped
PASS __tests__/services/cronJobService.test.mjs
  Cron Job Service
    initializeCronJobs()
      ‚àö should initialize weekly salary job (18 ms)
      ‚àö should initialize token cleanup job (11 ms)
      ‚àö should start all jobs after initialization (9 ms)
      ‚àö should initialize exactly 2 cron jobs (6 ms)
      ‚àö should use UTC timezone for all jobs (9 ms)
    stopCronJobs()
      ‚àö should stop all running jobs (7 ms)
      ‚àö should handle stopping when no jobs initialized (5 ms)
      ‚àö should clear all job references (11 ms)
    getCronJobStatus()
      ‚àö should return status for all initialized jobs (7 ms)
      ‚àö should return empty status when no jobs initialized (4 ms)
      ‚àö should include running and scheduled flags (11 ms)
    triggerTokenCleanup() - Manual Execution
      ‚àö should remove expired tokens (67 ms)
      ‚àö should NOT remove valid tokens (14 ms)
      ‚àö should remove multiple expired tokens (20 ms)
      ‚àö should remove expired tokens for all users (14 ms)
      ‚àö should remove only expired tokens from mixed set (22 ms)
      ‚àö should return timestamp of cleanup (11 ms)
      ‚àö should handle cleanup when no expired tokens exist (13 ms)
      ‚àö should handle tokens expiring at exact current time (11 ms)
      ‚àö should include error message on failure (13 ms)
    Token Cleanup Scheduling
      ‚àö should schedule daily cleanup at 3 AM UTC (9 ms)
      ‚àö should execute token cleanup callback when triggered (15 ms)
    Edge Cases
      ‚àö should handle tokens with null expiresAt (should not crash) (11 ms)
      ‚àö should handle concurrent cleanup executions (74 ms)
      ‚àö should handle very old expired tokens (15 ms)
      ‚àö should handle tokens expiring in the future (12 ms)
    Performance
      ‚àö should efficiently remove large number of expired tokens (215 ms)

[2026-01-28 14:23:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:18] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:23:18] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:23:18] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:18] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:18] info: [UserDocService] Built search index with 111 terms
[2026-01-28 14:23:18] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching documentation for: "horse training"
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching documentation for: "nonexistentterm12345"
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: strategy-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting table of contents
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: non-existent
[2026-01-28 14:23:18] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting sections for document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting sections for document: non-existent
[2026-01-28 14:23:18] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching in document "feature-guide" for: "training"
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching in document "feature-guide" for: "horse"
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching in document "non-existent" for: "test"
[2026-01-28 14:23:18] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:23:18] info: [UserDocRoutes] Refreshing documentation cache
[2026-01-28 14:23:18] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:18] info: [UserDocService] Built search index with 111 terms
[2026-01-28 14:23:18] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching documentation for: "training"
[2026-01-28 14:23:18] info: [UserDocRoutes] Searching documentation for: "competition"
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: strategy-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:23:18] info: [UserDocRoutes] Getting document: feature-guide
PASS __tests__/routes/userDocumentationRoutes.test.mjs
  User Documentation Routes
    GET /api/user-docs
      ‚àö retrieves all documentation successfully (40 ms)
      ‚àö includes table of contents in response (13 ms)
    GET /api/user-docs/search
      ‚àö searches documentation successfully (20 ms)
      ‚àö validates search query parameter (11 ms)
      ‚àö respects search parameters (15 ms)
      ‚àö handles empty search results (15 ms)
    GET /api/user-docs/analytics
      ‚àö retrieves analytics successfully (47 ms)
    GET /api/user-docs/toc
      ‚àö retrieves table of contents successfully (16 ms)
    GET /api/user-docs/:docName
      ‚àö retrieves specific document successfully (14 ms)
      ‚àö returns 404 for non-existent document (17 ms)
      ‚àö serves markdown format correctly (12 ms)
      ‚àö serves text format correctly (12 ms)
      ‚àö tracks view analytics (37 ms)
    GET /api/user-docs/:docName/sections
      ‚àö retrieves document sections successfully (13 ms)
      ‚àö returns 404 for non-existent document sections (16 ms)
    GET /api/user-docs/:docName/search
      ‚àö searches within specific document successfully (11 ms)
      ‚àö validates search query for document search (10 ms)
      ‚àö highlights search terms in document search (13 ms)
      ‚àö returns 404 for document search on non-existent document (11 ms)
    POST /api/user-docs/refresh
      ‚àö refreshes documentation cache successfully (20 ms)
    GET /api/user-docs/health
      ‚àö returns system health status (10 ms)
    Error Handling
      ‚àö handles invalid route gracefully (10 ms)
      ‚àö handles malformed search parameters (12 ms)
    Integration with Documentation Service
      ‚àö search analytics are tracked across API calls (43 ms)
      ‚àö view analytics are tracked across API calls (43 ms)
      ‚àö document content is consistent across different endpoints (25 ms)

[2026-01-28 14:23:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:18] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/foalAuthRoutes.test.mjs
  Foal routes auth enforcement
    ‚àö rejects unauthenticated access to foal development (26 ms)
    ‚àö rejects unauthenticated access to foal enrichment (20 ms)
    ‚àö rejects unauthenticated access to foal activity (16 ms)
    ‚àö rejects unauthenticated access to advance-day (10 ms)
    ‚àö rate limits foal activity endpoints (40 ms)
    ‚àö rate limits foal enrichment endpoints (37 ms)
    ‚àö rejects access to foal development when not owned (10 ms)

[2026-01-28 14:23:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:19] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:19] info: [trainingController.canTrain] Checking training eligibility for horse 147520 in Dressage
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Getting age for horse 147520
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Horse 147520 is 4 years old
[2026-01-28 14:23:19] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147520 across all disciplines
[2026-01-28 14:23:19] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147520
[2026-01-28 14:23:19] info: [trainingController.canTrain] Horse 147520 is eligible to train in Dressage
[2026-01-28 14:23:19] info: [trainingController.canTrain] Checking training eligibility for horse 147522 in Dressage
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Getting age for horse 147522
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Horse 147522 is 2 years old
[2026-01-28 14:23:19] info: [trainingController.canTrain] Horse 147522 is too young (2 years old)
[2026-01-28 14:23:19] info: [trainingController.canTrain] Checking training eligibility for horse 147523 in Dressage
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Getting age for horse 147523
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Horse 147523 is 4 years old
[2026-01-28 14:23:19] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147523 across all disciplines
[2026-01-28 14:23:19] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147523: Sun Jan 25 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:19] info: [trainingController.canTrain] Horse 147523 still in cooldown for any training (4 days remaining)
[2026-01-28 14:23:19] info: [trainingController.canTrain] Checking training eligibility for horse 147524 in Dressage
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Getting age for horse 147524
[2026-01-28 14:23:19] info: [trainingModel.getHorseAge] Horse 147524 is 4 years old
[2026-01-28 14:23:19] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147524 across all disciplines
[2026-01-28 14:23:19] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147524: Tue Jan 20 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:19] info: [trainingController.canTrain] Horse 147524 is eligible to train in Dressage
[2026-01-28 14:23:19] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:23:20] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:23:20] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer
[2026-01-28 14:23:20] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:23:20] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147525 in Dressage
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147525
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147525 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147525 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147525: Wed Jan 21 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147525 is eligible to train in Dressage
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Attempting to train horse 147520 in Racing
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147520 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147520
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147520 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147520 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147520
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147520 is eligible to train in Racing
[2026-01-28 14:23:20] info: [horseModel.getHorseById] Successfully found horse: Eligible Horse (ID: 147520)
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Horse 147520 has traits: 
[2026-01-28 14:23:20] info: [trainingModel.logTrainingSession] Logging training session for horse 147520 in Racing
[2026-01-28 14:23:20] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9024
[2026-01-28 14:23:20] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147520 by +5
[2026-01-28 14:23:20] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147520 by +5
[2026-01-28 14:23:20] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147520: 0 -> 5
[2026-01-28 14:23:20] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147520
[2026-01-28 14:23:20] info: [xpLogModel.logXpEvent] Logging XP event: User 8f4713c9-dee4-4cc2-87f4-702daac30553, Amount: 5, Reason: Trained horse Eligible Horse in Racing
[2026-01-28 14:23:20] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4461, User 8f4713c9-dee4-4cc2-87f4-702daac30553, Amount: 5
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Awarded 5 XP to user 8f4713c9-dee4-4cc2-87f4-702daac30553 for training
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Successfully trained horse 147520 in Racing (Log ID: 9024, Score +5)
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Attempting to train horse 147522 in Racing
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147522 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147522
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147522 is 2 years old
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147522 is too young (2 years old)
[2026-01-28 14:23:20] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Attempting to train horse 147523 in Racing
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147523 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147523
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147523 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147523 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147523: Sun Jan 25 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147523 still in cooldown for any training (4 days remaining)
[2026-01-28 14:23:20] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Attempting to train horse 147520 in Dressage
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147520 in Dressage
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147520
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147520 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147520 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147520
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147520 is eligible to train in Dressage
[2026-01-28 14:23:20] info: [horseModel.getHorseById] Successfully found horse: Eligible Horse (ID: 147520)
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Horse 147520 has traits: 
[2026-01-28 14:23:20] info: [trainingModel.logTrainingSession] Logging training session for horse 147520 in Dressage
[2026-01-28 14:23:20] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9025
[2026-01-28 14:23:20] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147520 by +5
[2026-01-28 14:23:20] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147520 by +5
[2026-01-28 14:23:20] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147520: 0 -> 5
[2026-01-28 14:23:20] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147520
[2026-01-28 14:23:20] info: [xpLogModel.logXpEvent] Logging XP event: User 8f4713c9-dee4-4cc2-87f4-702daac30553, Amount: 5, Reason: Trained horse Eligible Horse in Dressage
[2026-01-28 14:23:20] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4462, User 8f4713c9-dee4-4cc2-87f4-702daac30553, Amount: 5
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Awarded 5 XP to user 8f4713c9-dee4-4cc2-87f4-702daac30553 for training
[2026-01-28 14:23:20] info: [trainingController.trainHorse] Successfully trained horse 147520 in Dressage (Log ID: 9025, Score +5)
[2026-01-28 14:23:20] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147520 in Racing
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147520 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147520
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147520 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147520 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147520
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147520 is eligible to train in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147520
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147520 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147520 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] No training records found for horse 147520 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147520 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147520
[2026-01-28 14:23:20] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147523 in Dressage
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147523 in Dressage
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147523
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147523 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147523 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147523: Sun Jan 25 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147523 still in cooldown for any training (4 days remaining)
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147523
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147523 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147523 in Dressage
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] No training records found for horse 147523 in Dressage
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147523 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147523: Sun Jan 25 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147526 in Racing
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147526 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147526
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147526 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147526 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147526: Tue Jan 20 2026 14:23:20 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147526 is eligible to train in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147526
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147526 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147526 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] Last training date for horse 147526 in Racing: Tue Jan 20 2026 14:23:20 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147526 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147526: Tue Jan 20 2026 14:23:20 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147522 in Racing
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147522 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147522
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147522 is 2 years old
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147522 is too young (2 years old)
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147522
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147522 is 2 years old
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147522 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getLastTrainingDate] No training records found for horse 147522 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147522 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147522
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147523 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147523
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147523 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147523 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147523: Sun Jan 25 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147523 still in cooldown for any training (4 days remaining)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147523 in Show Jumping
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147523
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147523 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147523 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147523: Sun Jan 25 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147523 still in cooldown for any training (4 days remaining)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Checking training eligibility for horse 147527 in Racing
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Getting age for horse 147527
[2026-01-28 14:23:20] info: [trainingModel.getHorseAge] Horse 147527 is 4 years old
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147527 across all disciplines
[2026-01-28 14:23:20] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147527: Wed Jan 21 2026 14:23:19 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:23:20] info: [trainingController.canTrain] Horse 147527 is eligible to train in Racing
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Getting trainable horses for user 8f4713c9-dee4-4cc2-87f4-702daac30553
[2026-01-28 14:23:20] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 8f4713c9-dee4-4cc2-87f4-702daac30553
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Getting trainable horses for user b254836f-0005-46fd-8498-c76e44f5e0ab
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] User b254836f-0005-46fd-8498-c76e44f5e0ab has no horses
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Getting trainable horses for user aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee
[2026-01-28 14:23:20] warn: [trainingController.getTrainableHorses] User aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee not found
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Getting trainable horses for user 8f4713c9-dee4-4cc2-87f4-702daac30553
[2026-01-28 14:23:20] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 8f4713c9-dee4-4cc2-87f4-702daac30553
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Getting trainable horses for user 8f4713c9-dee4-4cc2-87f4-702daac30553
[2026-01-28 14:23:20] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 14:23:20] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 8f4713c9-dee4-4cc2-87f4-702daac30553
[2026-01-28 14:23:20] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required
[2026-01-28 14:23:20] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required
PASS tests/trainingController.test.mjs
  üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic
    canTrain
      ‚àö should return eligible true for horse that meets all requirements (15 ms)
      ‚àö should return eligible false for horse under 3 years old (7 ms)
      ‚àö should return eligible false for horse with recent training in any discipline (13 ms)
      ‚àö should return eligible true for horse with old training (8+ days ago) (25 ms)
      ‚àö should return eligible false for non-existent horse (11 ms)
      ‚àö should throw error for invalid horse ID (6 ms)
      ‚àö should throw error for missing discipline (4 ms)
      ‚àö should throw error for missing horse ID (4 ms)
      ‚àö should handle database errors gracefully (2 ms)
      ‚àö should calculate cooldown correctly for edge case (exactly 7 days) (18 ms)
    trainHorse
      ‚àö should successfully train eligible horse (39 ms)
      ‚àö should reject training for ineligible horse (under age) (8 ms)
      ‚àö should reject training for horse in cooldown (10 ms)
      ‚àö should handle training log errors gracefully (5 ms)
      ‚àö should award +5 XP after successful training (36 ms)
      ‚àö should handle XP system errors gracefully without breaking training (2 ms)
    getTrainingStatus
      ‚àö should return complete status for eligible horse with no training history (19 ms)
      ‚àö should return complete status for horse in active cooldown (20 ms)
      ‚àö should return complete status for horse with expired cooldown (29 ms)
      ‚àö should return status for ineligible horse (under age) (16 ms)
      ‚àö should handle database errors gracefully (4 ms)
    Integration scenarios
      ‚àö should handle different disciplines with global cooldown (15 ms)
      ‚àö should handle edge case of exactly 7 days cooldown (21 ms)
      ‚àö should handle complete training workflow (2 ms)
    getTrainableHorses
      ‚àö should return trainable horses for user with eligible horses (10 ms)
      ‚àö should return empty array for player with no horses (13 ms)
      ‚àö should return empty array for non-existent player (6 ms)
      ‚àö should filter out horses under 3 years old (13 ms)
      ‚àö should exclude horses with recent training (global cooldown) (8 ms)
      ‚àö should handle database errors gracefully for individual horses (2 ms)
      ‚àö should throw error for missing player ID (4 ms)
      ‚àö should handle player model errors (2 ms)
    trainRouteHandler
      ‚àö should handle successful training workflow - placeholder for integration testing (2 ms)
      ‚àö should handle validation errors - placeholder for integration testing (1 ms)
      ‚àö should handle missing data gracefully - placeholder for integration testing (2 ms)
      ‚àö should handle server errors gracefully - placeholder for integration testing (2 ms)
      ‚àö should handle trait effects in training - placeholder for integration testing (1 ms)

[2026-01-28 14:23:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:20] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:20] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:20] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomHiringWorkflow.test.mjs
  Groom Hiring Workflow Tests
    1. Required Field Validation
      ‚àö should validate name is required (76 ms)
      ‚àö should validate speciality is required (13 ms)
      ‚àö should validate skill_level is required (10 ms)
      ‚àö should validate personality is required (14 ms)
      ‚àö should validate all required fields at once (8 ms)
    2. Field Value Validation
      ‚àö should validate speciality against defined values (9 ms)
      ‚àö should validate skill_level against defined values (9 ms)
      ‚àö should validate personality against defined values (9 ms)
      ‚àö should accept all valid speciality values (50 ms)
      ‚àö should accept all valid skill_level values (37 ms)
      ‚àö should accept all valid personality values (39 ms)
    3. Optional Field Handling
      ‚àö should use default experience value when not provided (14 ms)
      ‚àö should calculate session rate based on skill level when not provided (20 ms)
      ‚àö should use provided session rate when specified (14 ms)
      ‚àö should store bio when provided (15 ms)
      ‚àö should store availability when provided (14 ms)
    4. User Account Hiring Limits
      ‚àö should enforce maximum groom limit per user (72 ms)
      ‚àö should validate user has sufficient funds for hiring (16 ms)
      ‚àö should allow wealthy users to hire expensive grooms (13 ms)
    5. Error Handling & Edge Cases
      ‚àö should handle empty strings for required fields (10 ms)
      ‚àö should handle extremely long names (8 ms)
      ‚àö should handle negative experience values (8 ms)
      ‚àö should handle negative session rates (11 ms)
      ‚àö should handle missing user ID (10 ms)
    6. System Integration
      ‚àö should retrieve groom definitions with all required data (10 ms)

[2026-01-28 14:23:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:21] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:21] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:21] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStreakData.test.mjs
  Foal Task Log and Streak Data
    Task Log JSON Storage
      ‚àö should initialize with null task log (75 ms)
      ‚àö should store task log as JSON object (23 ms)
      ‚àö should handle empty task log object (16 ms)
      ‚àö should update existing task counts (17 ms)
      ‚àö should handle complex task log with all foal tasks (16 ms)
    Consecutive Days Foal Care Tracking
      ‚àö should initialize with zero consecutive days (14 ms)
      ‚àö should track consecutive days of care (14 ms)
      ‚àö should handle streak increments (16 ms)
      ‚àö should handle streak resets (15 ms)
      ‚àö should support high streak counts (15 ms)
    Last Care Date Tracking
      ‚àö should initialize with null last groomed date (11 ms)
      ‚àö should store last care date timestamp (14 ms)
      ‚àö should update last care date on subsequent care (15 ms)
      ‚àö should handle current timestamp updates (18 ms)
    Combined Task Log and Streak Data
      ‚àö should update all foal care fields together (15 ms)
      ‚àö should simulate realistic foal development progression (18 ms)
      ‚àö should handle streak reset with task log preservation (15 ms)
    Data Integrity and Edge Cases
      ‚àö should handle null values gracefully (16 ms)
      ‚àö should handle negative consecutive days (should not occur in practice) (13 ms)
      ‚àö should handle very large task counts (14 ms)
      ‚àö should preserve data types correctly (13 ms)

[2026-01-28 14:23:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:22] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:22] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:22] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/environmentalTriggerSystem.test.mjs
  Environmental Trigger System
    detectEnvironmentalTriggers
      ‚àö should detect environmental triggers from interaction patterns (57 ms)
      ‚àö should handle horses with no environmental exposure (3 ms)
      ‚àö should detect multiple environmental trigger types (5 ms)
    calculateTriggerThresholds
      ‚àö should calculate age-appropriate trigger thresholds (5 ms)
      ‚àö should apply stress-based threshold modifications (4 ms)
    evaluateTraitExpressionProbability
      ‚àö should calculate trait expression probability based on environmental exposure (12 ms)
      ‚àö should handle trait expression for different trait types (10 ms)
    processSeasonalTriggers
      ‚àö should process seasonal environmental triggers (3 ms)
      ‚àö should handle different seasonal variations (4 ms)
    analyzeStressEnvironmentTriggers
      ‚àö should analyze stress-based environmental triggers (6 ms)
    trackCumulativeExposure
      ‚àö should track cumulative environmental exposure over time (7 ms)
    assessCriticalPeriodSensitivity
      ‚àö should assess critical period environmental sensitivity (3 ms)
      ‚àö should show reduced sensitivity for older horses (2 ms)
    generateEnvironmentalReport
      ‚àö should generate comprehensive environmental analysis report (136 ms)

[2026-01-28 14:23:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:22] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:22] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:22] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:22] info: [facilityManagementService.getUserFacilities] Getting facilities for user 9c7c81a0-866e-45c2-b390-44b0364fd456
[2026-01-28 14:23:22] info: [facilityManagementService.getUserFacilities] Getting facilities for user 951965bc-b4c2-42f0-a104-0ec9df07cc7d
[2026-01-28 14:23:22] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 3
[2026-01-28 14:23:22] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for invalid_upgrade upgrade from 1 to 2
[2026-01-28 14:23:22] error: [facilityManagementService.calculateUpgradeCost] Error: Invalid upgrade type: invalid_upgrade
[2026-01-28 14:23:22] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 5 to 3
[2026-01-28 14:23:22] error: [facilityManagementService.calculateUpgradeCost] Error: Target level must be higher than current level
[2026-01-28 14:23:22] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 1 to 2
[2026-01-28 14:23:22] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 14:23:22] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 3 to 4
[2026-01-28 14:23:22] info: [facilityManagementService.purchaseFacilityUpgrade] User 4b54ba62-ce68-4dca-a750-eed3f5e2f1bd purchasing automated_care upgrade to level 2
[2026-01-28 14:23:22] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.purchaseFacilityUpgrade] User 2f68bea5-f322-4bae-8570-1339f1d2478d purchasing competition_hosting upgrade to level 3
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 3
[2026-01-28 14:23:23] info: [facilityManagementService.purchaseFacilityUpgrade] User c8f4b4ff-4c65-4f1e-b131-99a179d99414 purchasing ventilation upgrade to level 2
[2026-01-28 14:23:23] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 9866
[2026-01-28 14:23:23] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 9868
[2026-01-28 14:23:23] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 97c0d5ef-f32f-49e5-9531-babd06d58717
[2026-01-28 14:23:23] info: [facilityManagementService.getUserFacilities] Getting facilities for user 97c0d5ef-f32f-49e5-9531-babd06d58717
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 44d80b4c-4d1a-4ada-8c16-60022fe51de2
[2026-01-28 14:23:23] info: [facilityManagementService.getUserFacilities] Getting facilities for user 44d80b4c-4d1a-4ada-8c16-60022fe51de2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:23:23] info: [facilityManagementService.calculateMaintenanceCosts] Calculating maintenance for facility 9874
[2026-01-28 14:23:23] info: [facilityManagementService.purchaseFacilityUpgrade] User 0bfed905-c8d2-4760-b4b0-e87f3dbde1b6 purchasing stable_management upgrade to level 2
[2026-01-28 14:23:23] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 14:23:23] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9875
[2026-01-28 14:23:23] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 9878
[2026-01-28 14:23:23] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9878
[2026-01-28 14:23:23] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 9880
[2026-01-28 14:23:23] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9880
PASS tests/unit/facilityManagementSystem.test.mjs
  üè¢ Facility Management System
    üèóÔ∏è Facility Types and Configuration
      ‚àö should return available facility types with specifications (77 ms)
      ‚àö should include different facility categories (14 ms)
    üë§ User Facility Management
      ‚àö should retrieve user facilities with current status (22 ms)
      ‚àö should calculate environmental mitigation for facilities (15 ms)
    üí∞ Upgrade Cost Calculation
      ‚àö should calculate upgrade costs accurately (13 ms)
      ‚àö should handle invalid upgrade parameters (20 ms)
      ‚àö should calculate progressive cost increases (12 ms)
    üõí Facility Upgrade Purchase
      ‚àö should successfully purchase valid upgrades (27 ms)
      ‚àö should reject upgrades with insufficient funds (15 ms)
      ‚àö should reject invalid facility ownership (14 ms)
    üåø Environmental Mitigation
      ‚àö should calculate environmental mitigation effects (10 ms)
      ‚àö should provide better mitigation for higher-level facilities (12 ms)
    üìä Facility Effectiveness Assessment
      ‚àö should assess facility effectiveness comprehensively (13 ms)
      ‚àö should provide upgrade-specific effectiveness ratings (13 ms)
    üí° Facility Recommendations
      ‚àö should generate actionable facility recommendations (47 ms)
      ‚àö should prioritize recommendations based on cost-benefit analysis (35 ms)
    üîß Maintenance and Operations
      ‚àö should calculate maintenance costs accurately (13 ms)
      ‚àö should track facility upgrade history (24 ms)
    üìà Return on Investment Analysis
      ‚àö should calculate facility ROI accurately (16 ms)
      ‚àö should provide benefit breakdown by category (14 ms)

[2026-01-28 14:23:23] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:23] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:23] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:23] info: [envValidator] Test environment validation complete. Success: true
PASS seed/horseSeed.test.mjs
  Horse Seed Integration Tests
    checkHorseExists - Real Database Operations
      ‚àö should return true if horse exists in database (30 ms)
      ‚àö should return false if horse does not exist in database (3 ms)
      ‚àö should handle database errors gracefully (3 ms)
    findOrCreateBreed - Real Database Operations
      ‚àö should return existing breed if found in database (6 ms)
      ‚àö should create new breed if not found in database (11 ms)
      ‚àö should return null for undefined breed name (1 ms)
      ‚àö should handle database errors gracefully (3 ms)
    ensureReferencedRecordsExist - Real Database Operations
      ‚àö should create users and stables if they do not exist in database (18 ms)
      ‚àö should update existing users and stables if they already exist (13 ms)
      ‚àö should handle database constraints gracefully (8 ms)
    seedHorses - Real Database Operations
      ‚àö should log a warning and return an empty array if no users are provided (6 ms)
      ‚àö should create breeds and horses for the provided user in database (31 ms)
      ‚àö should handle database constraints and validation errors gracefully (18 ms)
      ‚àö should handle edge cases and maintain data integrity (26 ms)
    Complete Horse Seeding Integration Test
      ‚àö should execute complete seeding workflow with real database operations (23 ms)
      ‚àö should maintain database integrity throughout complete seeding process (21 ms)

[2026-01-28 14:23:23] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:23] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:23] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:23] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:24] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:23:24] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:23:24] info: Flag insecure triggered for horse Test Foal Week 1769628204126: Frequent groom changes with declining bond or neglect
[2026-01-28 14:23:24] info: Flag aloof triggered for horse Test Foal Week 1769628204126: Generic negative flag evaluation
[2026-01-28 14:23:24] info: Flag skittish triggered for horse Test Foal Week 1769628204126: Generic negative flag evaluation
[2026-01-28 14:23:24] info: Assigned 3 new flags to horse Test Foal Week 1769628204126: insecure, aloof, skittish
[2026-01-28 14:23:24] info: Starting weekly flag evaluation process
[2026-01-28 14:23:24] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:23:24] info: Flag aloof triggered for horse Test Foal Month 1769628204127: Generic negative flag evaluation
[2026-01-28 14:23:24] info: Flag skittish triggered for horse Test Foal Month 1769628204127: Generic negative flag evaluation
[2026-01-28 14:23:24] info: Assigned 2 new flags to horse Test Foal Month 1769628204127: aloof, skittish
[2026-01-28 14:23:24] info: Flag aloof triggered for horse Test Horse 2yo 1769628204127: Generic negative flag evaluation
[2026-01-28 14:23:24] info: Flag skittish triggered for horse Test Horse 2yo 1769628204127: Generic negative flag evaluation
[2026-01-28 14:23:24] info: Assigned 2 new flags to horse Test Horse 2yo 1769628204127: aloof, skittish
[2026-01-28 14:23:24] info: Weekly flag evaluation completed: 4 flags assigned to 3 horses
[2026-01-28 14:23:24] info: Starting weekly flag evaluation process
[2026-01-28 14:23:24] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:23:24] info: Weekly flag evaluation completed: 0 flags assigned to 3 horses
PASS tests/services/weeklyFlagEvaluationService.test.mjs
  Weekly Flag Evaluation Service
    getEligibleHorsesForFlagEvaluation
      ‚àö should return only horses under 3 years old (11 ms)
      ‚àö should include horses with existing flags (7 ms)
    processHorseForFlagEvaluation
      ‚àö should evaluate horse for new flags based on care patterns (27 ms)
      ‚àö should respect maximum 5 flags per horse limit (16 ms)
    evaluateWeeklyFlags
      ‚àö should process all eligible horses and return summary (39 ms)
      ‚àö should handle horses with no groom interactions gracefully (28 ms)

[2026-01-28 14:23:24] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:24] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:24] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:24] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:24] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:24] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:23:24] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:23:24] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
PASS __tests__/unit/auth-rate-limiter.test.mjs
  Authentication Rate Limiter (Unit)
    Rate Limiter Configuration
      ‚àö should_create_rate_limiter_with_default_config (4 ms)
      ‚àö should_create_rate_limiter_with_custom_config (2 ms)
      ‚àö should_validate_configuration_parameters (3 ms)
    Request Tracking
      ‚àö should_track_requests_by_ip_address (3 ms)
      ‚àö should_allow_requests_within_limit (2 ms)
      ‚àö should_block_requests_exceeding_limit (7 ms)
    Rate Limit Headers
      ‚àö should_set_ratelimit_headers_on_every_request (2 ms)
      ‚àö should_update_remaining_count_with_each_request (3 ms)
      ‚àö should_calculate_accurate_reset_timestamp (2 ms)
    Time Window Reset
      ‚àö should_reset_count_after_time_window (2 ms)
      ‚àö should_maintain_separate_windows_for_different_ips (3 ms)
    Success Reset Mechanism
      ‚àö should_reset_count_on_successful_authentication (2 ms)
      ‚àö should_provide_method_to_reset_specific_ip (6 ms)
    Error Handling
      ‚àö should_handle_missing_ip_address (2 ms)
      ‚àö should_handle_concurrent_requests_atomically (2 ms)
      ‚àö should_not_crash_on_invalid_configuration (2 ms)
    Memory Management
      ‚àö should_clean_up_expired_entries (3 ms)
      ‚àö should_have_configurable_cleanup_interval (3 ms)
      ‚àö should_limit_maximum_storage_size (2 ms)
    Integration with Express
      ‚àö should_work_as_express_middleware (3 ms)
      ‚àö should_call_next_when_within_limit (3 ms)
      ‚àö should_not_call_next_when_rate_limited (5 ms)
    Response Format
      ‚àö should_send_consistent_429_response_format (2 ms)
      ‚àö should_include_retry_after_in_seconds (2 ms)

[2026-01-28 14:23:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:25] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:25] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:25] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73850
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73850
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 73851
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 73850
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147568
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 147568
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147569
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 147568
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 73850 over 30 days
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 73850
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 73850
[2026-01-28 14:23:25] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 147568
PASS tests/services/personalityEvolutionSystem.test.mjs
  Personality Evolution System
    Groom Personality Evolution
      ‚àö should evolve groom personality based on interaction patterns (43 ms)
      ‚àö should not evolve personality with insufficient interaction data (19 ms)
      ‚àö should calculate personality evolution triggers accurately (6 ms)
    Horse Temperament Evolution
      ‚àö should evolve horse temperament based on care history (31 ms)
      ‚àö should maintain temperament stability with mixed care patterns (27 ms)
      ‚àö should analyze personality stability accurately (5 ms)
    Personality Evolution Prediction
      ‚àö should predict future personality evolution accurately (3 ms)
      ‚àö should get personality evolution history (2 ms)
      ‚àö should apply personality evolution effects correctly (2 ms)
    Cross-Species Personality Influence
      ‚àö should detect personality convergence between groom and horse (44 ms)

[2026-01-28 14:23:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:25] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:25] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:25] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:26] info: Created legacy prot√©g√© Young Apprentice (ID: 73860) from mentor Retired Master Groom 1769628206081 (ID: 73859)
[2026-01-28 14:23:26] info: Inherited perk: Patience Mastery
[2026-01-28 14:23:26] error: Error generating legacy prot√©g√© for mentor 73862: Mentor groom 73862 is not eligible for legacy creation: insufficient_level
[2026-01-28 14:23:26] info: Created legacy prot√©g√© History Test Apprentice (ID: 73866) from mentor Retired Master Groom 1769628206173 (ID: 73865)
[2026-01-28 14:23:26] info: Inherited perk: Patience Mastery
PASS tests/services/groomLegacyService.test.mjs
  Groom Legacy Service
    Legacy Eligibility
      ‚àö should identify eligible retired groom (197 ms)
      ‚àö should reject non-retired groom (34 ms)
      ‚àö should reject low-level retired groom (21 ms)
      ‚àö should reject groom with existing legacy (30 ms)
    Prot√©g√© Generation
      ‚àö should generate prot√©g√© with inherited perks (32 ms)
      ‚àö should reject generation for ineligible mentor (26 ms)
    Legacy Perks
      ‚àö should get available perks for personality type (20 ms)
      ‚àö should handle unknown personality type (14 ms)
    Legacy History
      ‚àö should track user legacy history (31 ms)

[2026-01-28 14:23:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147571). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147571). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147571). New XP: 60, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 147571). New XP: 87, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 147571). New XP: 112, Stat points gained: 1, Available: 1
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 150 XP to horse XP Test Horse (ID: 147571). New XP: 150, Stat points gained: 1, Available: 1
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 200 XP to horse XP Test Horse (ID: 147571). New XP: 200, Stat points gained: 2, Available: 2
[2026-01-28 14:23:26] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 147571). New speed: 76, Remaining points: 1
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 50 XP to horse XP Test Horse (ID: 147571). New XP: 50, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147571). New XP: 80, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 147571). New XP: 105, Stat points gained: 1, Available: 1
[2026-01-28 14:23:26] info: [horseXpModel.getHorseXpHistory] Retrieved 3 XP events for horse 147571
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147571). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 147571). New XP: 57, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 147571). New XP: 87, Stat points gained: 0, Available: 0
[2026-01-28 14:23:26] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 147571). New XP: 112, Stat points gained: 1, Available: 1
[2026-01-28 14:23:26] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 147571). New speed: 77, Remaining points: 0
[2026-01-28 14:23:26] info: [horseXpModel.getHorseXpHistory] Retrieved 4 XP events for horse 147571
PASS tests/horseXpIntegration.test.mjs
  üêé INTEGRATION: Horse XP System - Core Functionality Integration
    Competition Integration
      ‚àö should award horse XP when horse places in competition (30 ms)
      ‚àö should award stat points when horse reaches 100 XP (41 ms)
    Horse XP Model Integration
      ‚àö should get horse XP status directly from model (14 ms)
      ‚àö should allocate stat points directly via model (20 ms)
      ‚àö should get horse XP history directly from model (27 ms)
    Complete Workflow Integration
      ‚àö should complete full horse XP workflow: competition ‚Üí XP ‚Üí stat allocation (41 ms)

[2026-01-28 14:23:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:26] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseAgingSystem.test.mjs
  Horse Aging System
    Age Calculation
      ‚àö should calculate age correctly from dateOfBirth (65 ms)
      ‚àö should handle leap years correctly (14 ms)
      ‚àö should handle timezone differences (7 ms)
    Horse Age Updates
      ‚àö should update horse age when birthday occurs (34 ms)
      ‚àö should not update age when no birthday occurs (14 ms)
      ‚àö should handle horses with incorrect stored age (18 ms)
    Milestone Detection
      ‚àö should detect age 1 milestone and trigger trait evaluation (19 ms)
      ‚àö should not trigger milestone for non-milestone ages (5 ms)
      ‚àö should detect retirement milestone at age 21 (6 ms)
    Batch Processing
      ‚àö should process multiple horses with birthdays (111 ms)
    Integration with Existing Systems
      ‚àö should maintain compatibility with training age requirements (24 ms)
      ‚àö should handle retirement at age 21 (12 ms)

[2026-01-28 14:23:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:27] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:27] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:27] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStorage.test.mjs
  Foal Task Log Storage
    Task Log JSON Storage
      ‚àö should initialize with null task log (76 ms)
      ‚àö should store task log as JSON object (20 ms)
      ‚àö should handle empty task log object (17 ms)
      ‚àö should update existing task counts (22 ms)
      ‚àö should handle complex task log with all foal tasks (15 ms)
    Last Care Date Tracking
      ‚àö should initialize with null last groomed date (13 ms)
      ‚àö should store last care date timestamp (13 ms)
      ‚àö should update last care date on subsequent care (18 ms)
      ‚àö should handle current timestamp updates (13 ms)
    Combined Task Log and Care Date
      ‚àö should update task log and last care date together (15 ms)
      ‚àö should simulate realistic foal development progression (18 ms)
    Data Integrity and Edge Cases
      ‚àö should handle null values gracefully (17 ms)
      ‚àö should handle very large task counts (15 ms)
      ‚àö should preserve data types correctly (14 ms)

[2026-01-28 14:23:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:28] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseAgingIntegration.test.mjs
  Horse Aging Integration
    Complete Aging Workflow
      ‚àö should process foal birthday with trait milestone evaluation (105 ms)
      ‚àö should handle multiple horses with different milestone scenarios (109 ms)
      ‚àö should handle foal with minimal task history (26 ms)
      ‚àö should handle foal with no task history (23 ms)
    Error Handling
      ‚àö should handle database errors gracefully (20 ms)

[2026-01-28 14:23:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:28] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStreakIntegration.test.mjs
  Foal Task Log and Streak Data Integration
    Real-World Foal Development Scenarios
      ‚àö should handle week 1 of foal care with enrichment tasks (102 ms)
      ‚àö should handle streak break and recovery (28 ms)
      ‚àö should achieve burnout immunity after 7 consecutive days (35 ms)
    Task Log and Trait Evaluation Integration
      ‚àö should support trait point calculation from stored task log (20 ms)
      ‚àö should track task progression over time (26 ms)
    Grace Period and Streak Maintenance
      ‚àö should maintain streak within 2-day grace period (23 ms)
      ‚àö should break streak beyond grace period (23 ms)
    Care Summary Statistics
      ‚àö should provide comprehensive care statistics (16 ms)
    Data Persistence and Integrity
      ‚àö should maintain data integrity across multiple updates (42 ms)

[2026-01-28 14:23:29] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:29] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:29] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:29] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 10
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 10)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: coat_check, count: 3
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: presentationBoosted (total: 15)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 10
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: calm (total: 50)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 4
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: presentationBoosted (total: 35)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 6
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: showCalm (total: 50)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 12
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: bonded (total: 60)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: resilient (total: 60)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 8
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: confident (total: 40)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 5
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: crowdReady (total: 25)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 65)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 35, total: 45, chance: 45%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: presentationBoosted (rolled: 30.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 50, total: 60, chance: 60%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 50, total: 60, chance: 60%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 60, total: 70, chance: 60%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 60, total: 70, chance: 60%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 65, total: 75, chance: 60%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 25, total: 35, chance: 35%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 30.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["presentationBoosted","calm","showCalm","bonded","resilient","confident","crowdReady"]
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 3
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 3)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 1
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: calm (total: 5)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 5, total: 5, chance: 5%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 7.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 7.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 7.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 8
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 8)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 10
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: confident (total: 50)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 6
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: crowdReady (total: 30)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 80)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 80, total: 90, chance: 60%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 40.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 30, total: 40, chance: 40%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 40.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 4
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: calm (total: 20)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 20, total: 20, chance: 20%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 10.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 6
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: bonded (total: 30)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: resilient (total: 30)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 4
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: confident (total: 20)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 15.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 30, total: 30, chance: 30%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 15.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 30, total: 30, chance: 30%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 15.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 20, total: 20, chance: 20%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 15.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 2
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 10)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 6
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 30)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 20.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: showCalm (rolled: 20.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 40, chance: 40%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 20.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 40, chance: 40%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 20.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 30, total: 30, chance: 30%
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 20.00)
[2026-01-28 14:23:29] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
PASS tests/traitMilestoneIntegration.test.mjs
  Trait Milestone Integration
    Age 1 Milestone Evaluation
      ‚àö should evaluate traits from comprehensive foal development history (113 ms)
      ‚àö should handle minimal development with no streak bonus (27 ms)
      ‚àö should handle specialized development paths (22 ms)
      ‚àö should integrate with real database persistence (30 ms)
      ‚àö should handle edge case of no task history (16 ms)
    Milestone Timing and Business Rules
      ‚àö should demonstrate age 1 milestone evaluation timing (28 ms)
      ‚àö should support trait development progression tracking (44 ms)

[2026-01-28 14:23:29] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:29] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:29] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:29] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:30] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:23:30] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
PASS __tests__/unit/security/rate-limit-keys.test.mjs
  Rate Limit Key Generation Unit Tests
    IP-Based Key Generation
      ‚àö should generate key based on IP address (2 ms)
      ‚àö should handle IPv4 addresses (1 ms)
      ‚àö should handle IPv6 addresses (1 ms)
      ‚àö should handle localhost IPv4 (1 ms)
      ‚àö should handle localhost IPv6 (1 ms)
      ‚àö should handle IP from X-Forwarded-For header (1 ms)
      ‚àö should handle IP from X-Real-IP header (6 ms)
    User-Based Key Generation
      ‚àö should generate key based on user ID when authenticated (1 ms)
      ‚àö should handle authenticated user with IP fallback (1 ms)
      ‚àö should handle unauthenticated user (null) (2 ms)
      ‚àö should handle unauthenticated user (undefined) (1 ms)
      ‚àö should handle user with string ID (1 ms)
      ‚àö should handle user with numeric ID
    Route-Based Key Generation
      ‚àö should generate different keys for different routes
      ‚àö should handle parameterized routes (1 ms)
      ‚àö should handle query parameters (1 ms)
      ‚àö should handle nested routes (1 ms)
      ‚àö should handle trailing slashes (1 ms)
      ‚àö should handle root path (1 ms)
    Combined Key Generation
      ‚àö should generate unique keys for user+route combination (1 ms)
      ‚àö should generate unique keys for IP+route combination (1 ms)
      ‚àö should generate unique keys for user+IP+route combination (1 ms)
      ‚àö should generate different keys for same user on different IPs
      ‚àö should generate different keys for different users on same IP (1 ms)
    Key Consistency
      ‚àö should generate consistent keys for same request parameters (1 ms)
      ‚àö should generate consistent keys across requests (1 ms)
      ‚àö should not be affected by request method (1 ms)
      ‚àö should not be affected by request headers (except proxy headers) (1 ms)
      ‚àö should not be affected by request body (1 ms)
    Key Security
      ‚àö should not expose sensitive user information in key (1 ms)
      ‚àö should handle SQL injection attempts in user ID (4 ms)
      ‚àö should handle special characters in IP
      ‚àö should handle null bytes in path (1 ms)
      ‚àö should handle extremely long user IDs (1 ms)
      ‚àö should handle extremely long IPs (IPv6) (1 ms)
    Key Storage Format
      ‚àö should generate Redis-compatible keys (1 ms)
      ‚àö should use colon as delimiter (1 ms)
      ‚àö should handle paths with slashes in keys (1 ms)
    Edge Cases
      ‚àö should handle missing IP address
      ‚àö should handle missing path
      ‚àö should handle empty string IP (1 ms)
      ‚àö should handle empty string path (1 ms)
      ‚àö should handle object as IP (edge case) (1 ms)
      ‚àö should handle array as path (edge case) (1 ms)

[2026-01-28 14:23:30] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:30] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:30] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:30] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:30] info: Groom 73873 selected talent gentle_hands for tier1
[2026-01-28 14:23:30] info: Groom 73875 selected talent gentle_hands for tier1
[2026-01-28 14:23:30] info: Groom 73876 selected talent gentle_hands for tier1
[2026-01-28 14:23:30] info: Groom 73876 selected talent stress_whisperer for tier2
[2026-01-28 14:23:30] info: Groom 73876 selected talent master_bonding for tier3
[2026-01-28 14:23:30] error: Error selecting talent for groom 73877: Invalid talent selection: invalid_talent
[2026-01-28 14:23:30] error: Error selecting talent for groom 73879: Invalid talent selection: insufficient_level
[2026-01-28 14:23:30] info: Groom 73880 selected talent gentle_hands for tier1
[2026-01-28 14:23:30] info: Groom 73881 selected talent gentle_hands for tier1
[2026-01-28 14:23:30] info: Groom 73881 selected talent stress_whisperer for tier2
[2026-01-28 14:23:30] info: Groom 73883 selected talent gentle_hands for tier1
PASS tests/services/groomTalentService.test.mjs
  Groom Talent Service
    Talent Tree Definitions
      ‚àö should return complete talent tree definitions (82 ms)
      ‚àö should have consistent talent requirements (12 ms)
    Talent Selection Validation
      ‚àö should validate valid talent selection (13 ms)
      ‚àö should reject selection for insufficient level (16 ms)
      ‚àö should reject invalid talent for personality (11 ms)
      ‚àö should reject selection if tier already selected (17 ms)
      ‚àö should require prerequisite tiers (10 ms)
    Talent Selection
      ‚àö should successfully select tier 1 talent (12 ms)
      ‚àö should successfully select multiple tiers in sequence (22 ms)
      ‚àö should reject invalid talent selection (15 ms)
      ‚àö should reject selection for insufficient level (15 ms)
    Talent Effects
      ‚àö should apply talent effects to groom interactions (15 ms)
      ‚àö should handle multiple talent effects (19 ms)
      ‚àö should handle groom with no talent selections (14 ms)
    Talent Retrieval
      ‚àö should get groom talent selections (12 ms)
      ‚àö should return null for groom with no selections (8 ms)

[2026-01-28 14:23:30] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:30] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:30] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:30] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/traitInteractionMatrix.test.mjs
  Trait Interaction Matrix
    analyzeTraitInteractions
      ‚àö should analyze trait interactions for synergistic traits (14 ms)
      ‚àö should analyze trait interactions for conflicting traits (6 ms)
      ‚àö should handle horses with minimal traits (5 ms)
    calculateTraitSynergies
      ‚àö should calculate synergies for compatible traits (6 ms)
      ‚àö should calculate amplification effects correctly (7 ms)
      ‚àö should categorize synergies by type (4 ms)
    identifyTraitConflicts
      ‚àö should identify conflicts between opposing traits (8 ms)
      ‚àö should calculate suppression effects (5 ms)
      ‚àö should handle horses with no conflicts (4 ms)
    evaluateTraitDominance
      ‚àö should evaluate trait dominance hierarchy (5 ms)
      ‚àö should identify primary and secondary traits correctly (4 ms)
    processComplexInteractions
      ‚àö should process complex multi-trait interactions (5 ms)
      ‚àö should identify emergent properties from trait combinations (9 ms)
      ‚àö should calculate complexity scores appropriately (6 ms)
    assessInteractionStability
      ‚àö should assess stability of trait interactions (5 ms)
      ‚àö should identify volatility risks in conflicting traits (4 ms)
    modelTemporalInteractions
      ‚àö should model trait interactions over time (6 ms)
      ‚àö should project future interaction changes (4 ms)
    generateInteractionMatrix
      ‚àö should generate comprehensive interaction matrix (11 ms)
      ‚àö should create matrix visualization data (8 ms)

[2026-01-28 14:23:31] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:31] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:31] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:31] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: -0.5%, adjustment: -0.8
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Final score: 169 (base: 165, trait: +5, luck: -0.8)
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: 3.0%, adjustment: 3.4
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 118 (base: 115, trait: +0, luck: 3.4)
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: 1.3%, adjustment: 2.2
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Star: Final score: 172 (base: 165, trait: +5, luck: 2.2)
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: -2.6%, adjustment: -3.0
[2026-01-28 14:23:31] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 112 (base: 115, trait: +0, luck: -3.0)
[2026-01-28 14:23:31] info: [resultModel.saveResult] Successfully created new result for horse 147623 in show 8290 with score 85.5
[2026-01-28 14:23:31] info: [resultModel.saveResult] Successfully created new result for horse 147623 in show 8290 with score 90
[2026-01-28 14:23:31] info: [resultModel.saveResult] Successfully created new result for horse 147624 in show 8290 with score 85
[2026-01-28 14:23:31] info: [resultModel.getResultsByShow] Found 3 results for show 8290
[2026-01-28 14:23:31] info: [resultModel.saveResult] Successfully created new result for horse 147623 in show 8290 with score 88
[2026-01-28 14:23:31] info: [resultModel.getResultsByShow] Found 0 results for show 99999
[2026-01-28 14:23:31] info: [resultModel.saveResult] Successfully created new result for horse 147623 in show 8290 with score 92
[2026-01-28 14:23:31] info: [resultModel.saveResult] Successfully created new result for horse 147624 in show 8290 with score 88
[2026-01-28 14:23:31] info: [resultModel.saveResult] Successfully created new result for horse 147625 in show 8290 with score 84
PASS tests/competitionController-business-logic.test.mjs
  üèÜ INTEGRATION: Competition Controller Business Logic - Real Competition Workflow
    Competition Scoring Business Logic
      ‚àö CALCULATES realistic competition scores based on horse stats (9 ms)
      ‚àö APPLIES trait bonuses correctly in competition scoring (7 ms)
    Competition Result Persistence
      ‚àö PERSISTS competition results in database correctly (13 ms)
      ‚àö RETRIEVES competition results by show correctly (19 ms)
      ‚àö MAINTAINS database integrity with proper relationships (13 ms)
    Error Handling and Edge Cases
      ‚àö HANDLES invalid result data gracefully (3 ms)
      ‚àö HANDLES non-existent show ID gracefully (4 ms)
      ‚àö MAINTAINS data consistency during concurrent operations (70 ms)

[2026-01-28 14:23:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:32] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:32] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:32] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/horseTemperamentAnalysis.test.mjs
  Horse Temperament Analysis
    analyzeHorseTemperament
      ‚àö should analyze temperament for nervous horse with interaction history (13 ms)
      ‚àö should analyze temperament for confident horse (7 ms)
      ‚àö should analyze temperament for horse with no interaction history (8 ms)
    classifyTemperamentFromFlags
      ‚àö should classify temperament from positive flags (1 ms)
      ‚àö should classify temperament from negative flags
      ‚àö should handle mixed flags appropriately (1 ms)
      ‚àö should handle empty flags array (1 ms)
    analyzeBehavioralTrends
      ‚àö should analyze behavioral trends over time (11 ms)
    identifyStressResponsePatterns
      ‚àö should identify stress response patterns (5 ms)
    analyzeBondingPreferences
      ‚àö should analyze bonding preferences (3 ms)
    detectTemperamentChanges
      ‚àö should detect temperament changes over time (4 ms)

[2026-01-28 14:23:33] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:33] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:33] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:33] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:33] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
[2026-01-28 14:23:33] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
[2026-01-28 14:23:33] warn: [API Key] Invalid or missing API key
[2026-01-28 14:23:33] warn: [API Key] Invalid or missing API key
[2026-01-28 14:23:33] warn: [API Key] Invalid or missing API key
[2026-01-28 14:23:33] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 14:23:33] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 14:23:33] warn: CORS blocked request from origin: https://evil.com
[2026-01-28 14:23:33] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 14:23:33] warn: [CORS] Request with no origin detected - API key validation required
  console.error
    TypeError: Cannot read properties of undefined (reading 'get')
        at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
        at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5
        at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\middleware\security.test.mjs:447:7)

    [0m [90m 445 |[39m
     [90m 446 |[39m       [90m// First request should succeed[39m
    [31m[1m>[22m[39m[90m 447 |[39m       [36mawait[39m testLimiter(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 448 |[39m       expect(next)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 449 |[39m
     [90m 450 |[39m       [90m// Reset mocks[39m[0m

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5
      at Object.<anonymous> (__tests__/middleware/security.test.mjs:447:7)

[2026-01-28 14:23:33] warn: Rate limit exceeded for IP: 192.168.1.100
PASS __tests__/middleware/security.test.mjs
  Security Middleware
    enforceHttps()
      Development environment
        ‚àö should allow HTTP requests in development (7 ms)
      Production environment
        ‚àö should allow HTTPS requests (req.secure) (3 ms)
        ‚àö should allow HTTPS requests (x-forwarded-proto header) (12 ms)
        ‚àö should allow HTTPS requests (x-forwarded-ssl header) (2 ms)
        ‚àö should redirect HTTP to HTTPS with 301 status (5 ms)
        ‚àö should preserve query parameters in redirect (3 ms)
    addSecurityHeaders()
      ‚àö should add HSTS header in production (2 ms)
      ‚àö should NOT add HSTS header in development (1 ms)
      ‚àö should add X-Frame-Options header (2 ms)
      ‚àö should add X-Content-Type-Options header (10 ms)
      ‚àö should add X-XSS-Protection header (2 ms)
      ‚àö should add Referrer-Policy header (1 ms)
      ‚àö should add Permissions-Policy header (2 ms)
      ‚àö should add all 6 security headers in production (2 ms)
    validateApiKey()
      Requests WITH origin header
        ‚àö should skip API key validation for browser requests (2 ms)
        ‚àö should skip validation even if X-API-Key is missing (1 ms)
      Requests WITHOUT origin header (mobile/API clients)
        ‚àö should accept valid API key (2 ms)
        ‚àö should reject missing API key (3 ms)
        ‚àö should reject invalid API key (7 ms)
        ‚àö should be case-sensitive for API key (3 ms)
      Missing API_KEY environment variable
        ‚àö should allow requests without API key (backward compatibility) (3 ms)
        ‚àö should log warning when API_KEY not configured (3 ms)
    CORS Configuration
      ‚àö should have credentials enabled (1 ms)
      ‚àö should allow standard HTTP methods (2 ms)
      ‚àö should allow required headers (1 ms)
      corsOptions.origin()
        ‚àö should allow localhost:3000 (2 ms)
        ‚àö should allow localhost:3001 (1 ms)
        ‚àö should allow 127.0.0.1:3000 (2 ms)
        ‚àö should allow additional origins from environment (1 ms)
        ‚àö should block unknown origins (6 ms)
        ‚àö should allow requests with no origin (mobile apps) (2 ms)
        ‚àö should allow requests with null origin (3 ms)
    createRateLimiter()
      ‚àö should create a rate limiter with custom window and max (4 ms)
      ‚àö should create rate limiter with default values (1 ms)
      ‚àö should return rate limiter middleware (2 ms)
    Rate Limiter Instances
      ‚àö should export apiLimiter (2 ms)
      ‚àö should trigger rate limit handler when limit exceeded (13 ms)
    createSecurityMiddleware()
      ‚àö should return an array of middleware functions (3 ms)
      ‚àö should include all required middleware in correct order (2 ms)

[2026-01-28 14:23:33] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:33] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:33] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:33] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147630 and mare 147631, 3 generations
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147633 and mare 147634, 2 generations
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 3 horses across 2 generations
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 999 and mare 998, 3 generations
[2026-01-28 14:23:33] warn: [advancedLineageAnalysisService.generateLineageTree] Missing parent horses
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 3 generations
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 1 and mare 2
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations
[2026-01-28 14:23:33] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 147635 and mare 147636
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147635 and mare 147636, 3 generations
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 147637 and mare 147638
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 147637 and mare 147638
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 147639 and mare 147640
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 147639 and mare 147640
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:23:34] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
PASS tests/unit/advancedLineageAnalysis.test.mjs
  üå≥ Advanced Lineage Analysis System
    üå≤ Lineage Tree Generation
      ‚àö should generate hierarchical tree structure from lineage data (90 ms)
      ‚àö should include parent-child relationships in tree nodes (38 ms)
      ‚àö should handle missing lineage data gracefully (8 ms)
    üß¨ Genetic Diversity Metrics
      ‚àö should calculate comprehensive genetic diversity metrics (4 ms)
      ‚àö should identify genetic bottlenecks in lineage (1 ms)
      ‚àö should calculate inbreeding coefficient accurately (11 ms)
    üèÜ Performance Analysis
      ‚àö should analyze performance trends across generations (4 ms)
      ‚àö should identify top performing ancestors (3 ms)
    üìä Visualization Data Generation
      ‚àö should create visualization-ready data structure (26 ms)
    üéØ Breeding Recommendations
      ‚àö should generate comprehensive breeding recommendations (28 ms)
      ‚àö should identify breeding risks and mitigation strategies (31 ms)

[2026-01-28 14:23:34] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:34] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:34] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:34] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/carePatternAnalyzerEnhanced.test.mjs
  Enhanced Care Pattern Analyzer
    calculateAdvancedConsistencyScore
      ‚àö should calculate weighted consistency score with multiple factors (24 ms)
      ‚àö should detect inconsistent care patterns (10 ms)
    detectCareQualityTrends
      ‚àö should detect improving care quality trends (8 ms)
      ‚àö should detect declining care quality trends (9 ms)
    analyzeGroomEffectiveness
      ‚àö should analyze individual groom effectiveness (5 ms)
      ‚àö should identify most and least effective grooms (3 ms)
    calculateCareRiskScore
      ‚àö should calculate comprehensive care risk assessment (4 ms)
      ‚àö should identify specific risk factors (3 ms)
    Enhanced Care Pattern Integration
      ‚àö should integrate all enhanced features for comprehensive analysis (9 ms)

[2026-01-28 14:23:34] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:34] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:34] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:34] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.7%, adjustment: 6.1
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 6.1)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.0%, adjustment: -8.1
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +5, luck: -8.1)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.4%, adjustment: -0.6
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -0.6)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 6.1
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +5, luck: 6.1)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.8%, adjustment: 4.9
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 4.9)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -8.9
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 171 (base: 175, trait: +5, luck: -8.9)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.8%, adjustment: 1.5
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 176 (base: 175, trait: +0, luck: 1.5)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.3%, adjustment: 9.6
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 190 (base: 175, trait: +5, luck: 9.6)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.0%, adjustment: -14.0
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 161 (base: 175, trait: +0, luck: -14.0)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.9%, adjustment: -15.1
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 155 (base: 165, trait: +5, luck: -15.1)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -14.1
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 151 (base: 165, trait: +0, luck: -14.1)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.1%, adjustment: -10.0
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 155 (base: 160, trait: +5, luck: -10.0)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 9.6
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 170 (base: 160, trait: +0, luck: 9.6)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.7%, adjustment: 12.7
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 160, trait: +5, luck: 12.7)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.4%, adjustment: 3.8
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 160, trait: +0, luck: 3.8)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.3%, adjustment: -5.8
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 169 (base: 175, trait: +0, luck: -5.8)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.1%, adjustment: 1.8
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 175, trait: +0, luck: 1.8)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.2%, adjustment: -10.8
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 175, trait: +0, luck: -10.8)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.8%, adjustment: -13.6
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 161 (base: 175, trait: +0, luck: -13.6)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.6%, adjustment: -8.0
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 167 (base: 175, trait: +0, luck: -8.0)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.8%, adjustment: 8.5
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 175, trait: +0, luck: 8.5)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.1
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 172 (base: 175, trait: +0, luck: -3.1)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.3%, adjustment: -4.0
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 171 (base: 175, trait: +0, luck: -4.0)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.3%, adjustment: -14.6
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 160 (base: 175, trait: +0, luck: -14.6)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.5%, adjustment: -11.4
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 175, trait: +0, luck: -11.4)
[2026-01-28 14:23:34] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.3%, adjustment: 0.5
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 175 (base: 175, trait: +0, luck: 0.5)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.4%, adjustment: -6.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 169 (base: 175, trait: +0, luck: -6.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.2%, adjustment: -2.2
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 173 (base: 175, trait: +0, luck: -2.2)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.5%, adjustment: -6.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 169 (base: 175, trait: +0, luck: -6.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.2%, adjustment: -9.2
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 166 (base: 175, trait: +0, luck: -9.2)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.0%, adjustment: 14.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 189 (base: 175, trait: +0, luck: 14.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -8.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 166 (base: 175, trait: +0, luck: -8.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.3%, adjustment: 11.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 175, trait: +0, luck: 11.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.4%, adjustment: 2.4
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 175, trait: +0, luck: 2.4)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.5%, adjustment: -11.3
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 175, trait: +0, luck: -11.3)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 5.2
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 5.2)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -11.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 119 (base: 130, trait: +0, luck: -11.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.5%, adjustment: -4.7
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +5, luck: -4.7)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.0%, adjustment: 10.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 146 (base: 130, trait: +5, luck: 10.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.1%, adjustment: -11.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +5, luck: -11.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.7%, adjustment: 0.9
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +5, luck: 0.9)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.7%, adjustment: -6.4
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +5, luck: -6.4)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 5.3
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 5.3)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.8%, adjustment: -7.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +5, luck: -7.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.4%, adjustment: 10.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 145 (base: 130, trait: +5, luck: 10.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.7%, adjustment: -6.3
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +5, luck: -6.3)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.6%, adjustment: 0.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +5, luck: 0.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.2%, adjustment: -4.4
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +5, luck: -4.4)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.4%, adjustment: 5.7
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 5.7)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 8.1
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 143 (base: 130, trait: +5, luck: 8.1)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.7%, adjustment: -3.6
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -3.6)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.5%, adjustment: -7.4
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 128 (base: 130, trait: +5, luck: -7.4)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.5%, adjustment: -0.6
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -0.6)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.4%, adjustment: -4.5
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +5, luck: -4.5)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.3%, adjustment: 5.6
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 5.6)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.1%, adjustment: -2.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +5, luck: -2.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.8%, adjustment: -6.2
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -6.2)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.2%, adjustment: 3.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +5, luck: 3.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.5%, adjustment: -3.2
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +0, luck: -3.2)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.1%, adjustment: -0.1
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +5, luck: -0.1)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.4%, adjustment: -5.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -5.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.7%, adjustment: 7.6
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 143 (base: 130, trait: +5, luck: 7.6)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.4%, adjustment: -4.4
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -4.4)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 5.3
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 5.3)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.1%, adjustment: 5.4
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 5.4)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.2%, adjustment: -1.6
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -1.6)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.3%, adjustment: -10.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 119 (base: 130, trait: +0, luck: -10.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 4.2
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +5, luck: 4.2)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.1
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +0, luck: 0.1)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.5%, adjustment: 0.7
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +5, luck: 0.7)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.9%, adjustment: 5.1
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 5.1)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 2.5
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +5, luck: 2.5)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.2%, adjustment: -6.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 123 (base: 130, trait: +0, luck: -6.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.4%, adjustment: 4.6
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 4.6)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.2%, adjustment: 10.7
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +0, luck: 10.7)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.6%, adjustment: -10.2
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -10.2)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 4.7
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 4.7)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.0%, adjustment: 4.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +5, luck: 4.0)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.0%, adjustment: 2.5
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +0, luck: 2.5)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.5%, adjustment: -4.7
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +5, luck: -4.7)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 5.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 5.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 5.4
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 5.4)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.3%, adjustment: -4.3
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -4.3)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.3%, adjustment: -1.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -1.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.5%, adjustment: 9.8
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +0, luck: 9.8)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.5%, adjustment: 7.5
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 142 (base: 130, trait: +5, luck: 7.5)
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.5%, adjustment: 2.0
[2026-01-28 14:23:35] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +0, luck: 2.0)
PASS tests/enhancedCompetitionIntegration.test.mjs
  üèÜ INTEGRATION: Enhanced Competition Integration - Trait Scoring Validation
    Basic Integration Tests
      ‚àö should successfully import and use calculateCompetitionScore function (12 ms)
      ‚àö should apply trait bonuses correctly for each discipline (49 ms)
      ‚àö should not apply trait bonus when trait does not match discipline (54 ms)
      ‚àö should handle horses with missing epigeneticModifiers (6 ms)
      ‚àö should provide consistent scoring results with variance (40 ms)
      ‚àö should demonstrate that trait integration is working (121 ms)

[2026-01-28 14:23:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:35] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:35] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:35] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 5 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] warn: [UserDocService] Documentation directory not found
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 0 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:23:35] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:23:35] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:23:35] info: [UserDocService] Documentation system initialized successfully
PASS __tests__/services/userDocumentation.test.mjs
  User Documentation Service
    Documentation Loading
      ‚àö loads all documentation files correctly (14 ms)
      ‚àö extracts document metadata correctly (8 ms)
      ‚àö extracts sections correctly (12 ms)
      ‚àö builds search index correctly (7 ms)
    Document Retrieval
      ‚àö retrieves existing document correctly (7 ms)
      ‚àö returns null for non-existent document (7 ms)
      ‚àö tracks view analytics correctly (11 ms)
      ‚àö gets all documents correctly (9 ms)
    Search Functionality
      ‚àö searches documentation content successfully (8 ms)
      ‚àö handles single word searches (7 ms)
      ‚àö returns empty results for non-matching search (7 ms)
      ‚àö tracks search analytics (10 ms)
      ‚àö finds matching sections in search results (7 ms)
      ‚àö respects search options (7 ms)
    Analytics and Reporting
      ‚àö generates analytics correctly (8 ms)
      ‚àö tracks popular documents correctly (11 ms)
      ‚àö limits search query history (7 ms)
    Table of Contents
      ‚àö generates table of contents correctly (7 ms)
      ‚àö creates proper anchors for sections (7 ms)
    Content Parsing
      ‚àö counts words correctly (7 ms)
      ‚àö extracts searchable words correctly (10 ms)
      ‚àö normalizes search queries correctly (7 ms)
      ‚àö identifies stop words correctly (6 ms)
    System Management
      ‚àö refreshes documentation successfully (15 ms)
      ‚àö handles refresh errors gracefully (10 ms)
    Helper Functions
      ‚àö getDocument helper function works (7 ms)
      ‚àö searchDocumentation helper function works (7 ms)
      ‚àö getAllDocuments helper function works (10 ms)
      ‚àö getDocumentationAnalytics helper function works (8 ms)
      ‚àö getTableOfContents helper function works (6 ms)

[2026-01-28 14:23:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:35] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:35] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:35] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/trainingAnalyticsService.test.mjs
  Training Analytics Service
    Training Session Log
      ‚àö should provide complete training session history (66 ms)
      ‚àö should order training history by date (most recent first) (10 ms)
    Training Frequency Analysis
      ‚àö should track training frequency and recent activity (11 ms)
      ‚àö should calculate sessions per discipline correctly (11 ms)
    Discipline Training Balance
      ‚àö should show training distribution across disciplines (8 ms)
      ‚àö should calculate training percentages correctly (8 ms)
    Error Handling
      ‚àö should handle non-existent horse gracefully (7 ms)
      ‚àö should handle horse with no training history (26 ms)

[2026-01-28 14:23:36] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:36] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:36] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:36] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Simulating breeding outcomes
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Simulating breeding outcomes
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Simulating breeding outcomes
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Simulating breeding outcomes
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating multi-generational predictions
[2026-01-28 14:23:36] info: Calculating multi-generational predictions
[2026-01-28 14:23:36] info: Calculating genetic diversity impact
[2026-01-28 14:23:36] info: Calculating genetic diversity impact
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
[2026-01-28 14:23:36] info: Calculating enhanced genetic probabilities
PASS tests/unit/enhancedGeneticProbabilityCalculator.test.mjs
  üß¨ Enhanced Genetic Probability Calculator
    üéØ Enhanced Trait Inheritance Probability Calculator
      ‚àö should calculate detailed trait inheritance probabilities (14 ms)
      ‚àö should calculate stat inheritance probabilities (2 ms)
      ‚àö should handle edge cases with minimal genetic data (1 ms)
    ü§ù Genetic Compatibility Scoring System
      ‚àö should calculate genetic compatibility score (2 ms)
      ‚àö should identify trait conflicts (2 ms)
      ‚àö should calculate stat compatibility (1 ms)
    üé≤ Breeding Outcome Simulation
      ‚àö should simulate multiple breeding outcomes (128 ms)
      ‚àö should provide confidence intervals (62 ms)
      ‚àö should handle deterministic simulation with seed (30 ms)
    üå≥ Multi-Generational Prediction Engine
      ‚àö should calculate multi-generational predictions (3 ms)
      ‚àö should weight recent generations more heavily (2 ms)
    üåà Genetic Diversity Impact Calculator
      ‚àö should calculate genetic diversity impact (3 ms)
      ‚àö should detect inbreeding risks (5 ms)
    ‚ö° Trait Interaction Modeling
      ‚àö should calculate trait interactions (1 ms)
      ‚àö should identify athletic + intelligent synergy
    üí° Breeding Recommendation Engine
      ‚àö should generate breeding recommendations (2 ms)
      ‚àö should provide specific optimization suggestions (3 ms)
    üèÜ Performance Prediction Algorithm
      ‚àö should predict offspring performance (4 ms)
      ‚àö should identify performance strengths and weaknesses (2 ms)

[2026-01-28 14:23:36] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:36] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:36] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:36] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:37] info: Flag brave triggered for horse Test Foal 6mo 1769628217033: Consistent care with good stress management and task diversity
[2026-01-28 14:23:37] info: Flag confident triggered for horse Test Foal 6mo 1769628217033: Strong bond growth with diverse, high-quality experiences
[2026-01-28 14:23:37] info: Flag resilient triggered for horse Test Foal 6mo 1769628217033: Generic positive flag evaluation
[2026-01-28 14:23:37] error: Error evaluating triggers for flag fearful: Cannot read properties of undefined (reading 'length')
[2026-01-28 14:23:37] error: Error evaluating triggers for flag insecure: Cannot read properties of undefined (reading 'neglectRatio')
PASS tests/services/flagAssignmentEngineEnhanced.test.mjs
  Enhanced Flag Assignment Engine
    evaluatePersonalityModifiedTriggers
      ‚àö should apply calm groom personality modifiers correctly (9 ms)
      ‚àö should apply energetic groom personality modifiers correctly (5 ms)
    calculateFlagAssignmentScore
      ‚àö should calculate comprehensive flag assignment scores (6 ms)
      ‚àö should apply age-based sensitivity modifiers (7 ms)
    analyzeTemporalPatterns
      ‚àö should analyze temporal patterns in care quality (10 ms)
      ‚àö should identify critical periods for flag assignment (3 ms)
    Advanced Flag Assignment Integration
      ‚àö should integrate all enhancement features for comprehensive evaluation (53 ms)

[2026-01-28 14:23:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:37] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:37] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:37] info: [envValidator] Test environment validation complete. Success: true
PASS tests/simple-db.test.mjs
  Simple Database Test
    ‚àö should connect to database (155 ms)
    ‚àö should create a simple user (15 ms)

[2026-01-28 14:23:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:37] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:37] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:37] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/performanceAnalyticsService.test.mjs
  Performance Analytics Service
    Personal Performance Metrics
      ‚àö should calculate overall win rate correctly (9 ms)
      ‚àö should calculate win rate by discipline (7 ms)
      ‚àö should track placement trends over time (5 ms)
      ‚àö should calculate performance consistency score (5 ms)
    Historical Performance Tracking
      ‚àö should provide complete competition history (6 ms)
      ‚àö should track total earnings by discipline (5 ms)
      ‚àö should track performance improvement over time (11 ms)
    Discipline Analysis
      ‚àö should identify strongest disciplines (5 ms)
      ‚àö should identify weakest disciplines (5 ms)
    Error Handling
      ‚àö should handle non-existent horse gracefully (5 ms)
      ‚àö should handle horse with no competition history (23 ms)

[2026-01-28 14:23:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:38] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:38] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:38] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/groomPersonalityTraits.test.mjs
  Groom Personality Trait System
    getGroomPersonalityTraits
      ‚àö should return detailed personality traits for calm groom (6 ms)
      ‚àö should return detailed personality traits for energetic groom (4 ms)
      ‚àö should return detailed personality traits for methodical groom (4 ms)
    calculatePersonalityModifiers
      ‚àö should calculate modifiers for calm groom with nervous horse (6 ms)
      ‚àö should calculate modifiers for energetic groom with confident horse (4 ms)
      ‚àö should calculate modifiers for energetic groom with nervous horse (4 ms)
      ‚àö should calculate modifiers for methodical groom with any horse (4 ms)
    analyzePersonalityCompatibility
      ‚àö should analyze compatibility between groom and horse personalities (8 ms)
      ‚àö should identify poor compatibility combinations (4 ms)
    updatePersonalityTraits
      ‚àö should update personality traits based on interaction outcomes (14 ms)
    getPersonalityTraitDefinitions
      ‚àö should return comprehensive trait definitions (3 ms)

[2026-01-28 14:23:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:38] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:38] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:38] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:38] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 14:23:38] warn: CORS blocked request from origin: http://malicious-site.com
[2026-01-28 14:23:38] warn: Rate limit exceeded for IP: ::ffff:127.0.0.1
[2026-01-28 14:23:39] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 14:23:39] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
PASS tests/middleware/security.test.mjs
  Security Middleware
    CORS Configuration
      ‚àö should allow requests from localhost:3000 (4 ms)
      ‚àö should allow requests from localhost:3001 (1 ms)
      ‚àö should allow requests with no origin (2 ms)
      ‚àö should block requests from unauthorized origins (2 ms)
      ‚àö should allow origins from environment variable (2 ms)
    Rate Limiter
      ‚àö should create rate limiter with default values (2 ms)
      ‚àö should create rate limiter with custom values (2 ms)
      ‚àö should limit requests when threshold is exceeded (45 ms)
    Helmet Configuration
      ‚àö should have proper CSP directives (1 ms)
      ‚àö should have HSTS configuration (1 ms)
      ‚àö should disable crossOriginEmbedderPolicy for API compatibility (1 ms)
    Security Middleware Factory
      ‚àö should create security middleware array (3 ms)
      ‚àö should apply security headers through helmet (23 ms)

[2026-01-28 14:23:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:39] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:39] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:39] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 4
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: bonded (total: 20)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: resilient (total: 20)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: calm (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 20, total: 20, chance: 20%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 20, total: 20, chance: 20%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 20, chance: 20%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 20, chance: 20%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 20
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: bonded (total: 100)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: resilient (total: 100)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 15
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 75 points for trait: confident (total: 75)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 100, total: 100, chance: 60%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 50.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 100, total: 100, chance: 60%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 50.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 75, total: 75, chance: 60%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 50.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 90.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 90.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 5, chance: 5%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 90.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] No valid task log provided
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 1
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: crowdReady (total: 5)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 4.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 5, total: 5, chance: 5%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 4.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident","crowdReady"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: calm (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 5
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 25)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: crowdReady (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 40)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 6
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: calm (total: 30)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 4
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 30)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: presentationBoosted (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 50, chance: 50%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 50, chance: 50%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 40, total: 50, chance: 50%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 15, total: 25, chance: 25%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 30.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 30, total: 40, chance: 40%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 30, total: 40, chance: 40%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 10, total: 20, chance: 20%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: presentationBoosted (rolled: 30.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm","showCalm"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: -5
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: -5)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 50
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: bonded (total: 250)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: resilient (total: 250)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 30
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 150 points for trait: confident (total: 150)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 250, total: 250, chance: 60%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 70.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 250, total: 250, chance: 60%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 70.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 150, total: 150, chance: 60%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 70.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 12.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 12.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 12.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 20.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 20.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 20.00)
[2026-01-28 14:23:39] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
PASS tests/traitMilestoneEvaluation.test.mjs
  Trait Milestone Evaluation
    evaluateEpigeneticTagsFromFoalTasks
      ‚àö should evaluate traits from task log without streak bonus (24 ms)
      ‚àö should apply streak bonus when consecutive days >= 7 (12 ms)
      ‚àö should cap trait probability at 60% (15 ms)
      ‚àö should not assign traits when random chance is too high (15 ms)
      ‚àö should handle empty task log (3 ms)
      ‚àö should handle null task log (3 ms)
      ‚àö should handle tasks not in influence map (8 ms)
      ‚àö should handle multiple tasks influencing same trait (13 ms)
      ‚àö should return unique traits only (17 ms)
      ‚àö should handle comprehensive foal development scenario (28 ms)
      ‚àö should handle edge case with zero task counts (9 ms)
      ‚àö should handle negative streak values (9 ms)
      ‚àö should handle very high task counts with capping (14 ms)
      ‚àö should demonstrate probability distribution (35 ms)

[2026-01-28 14:23:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:39] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:39] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:39] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:39] warn: [ownership] Missing user for horse ownership check
[2026-01-28 14:23:39] warn: [ownership] Missing user for horse ownership check
[2026-01-28 14:23:39] warn: [ownership] Invalid horse ID: invalid
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns horse 1
[2026-01-28 14:23:39] warn: [ownership] horse 1 not found or not owned by user user-123
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns foal 1
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns groom 1
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns groom-assignment 1
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns breeding 1
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns competition-entry 1
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns training-session 1
[2026-01-28 14:23:39] error: [ownership] Unexpected error: Database connection error
[2026-01-28 14:23:39] info: [ownership] Found owned horse 1 for user user-123
[2026-01-28 14:23:39] info: [ownership] Batch validation: user user-123 owns 2/2 horses
[2026-01-28 14:23:39] warn: [ownership] horse 1 not found or not owned by user user-123
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns horse 1
[2026-01-28 14:23:39] info: [ownership] Validated ownership: user user-123 owns horse 1
PASS __tests__/middleware/ownership.test.mjs
  Ownership Middleware
    requireOwnership()
      Authentication validation
        ‚àö should return 401 if user is not authenticated (16 ms)
        ‚àö should return 401 if user.id is missing (5 ms)
      Resource ID validation
        ‚àö should return 400 if resource ID is not a number (3 ms)
      Ownership validation - Horse
        ‚àö should allow access to owned horse (8 ms)
        ‚àö should return 404 if horse does not exist (3 ms)
      Ownership validation - Other resource types
        ‚àö should validate foal ownership (2 ms)
        ‚àö should validate groom ownership (3 ms)
        ‚àö should validate groom-assignment ownership (2 ms)
        ‚àö should validate breeding ownership (maps to horse) (3 ms)
        ‚àö should validate competition-entry ownership (maps to competitionResult) (3 ms)
        ‚àö should validate training-session ownership (maps to trainingLog) (6 ms)
      Error handling
        ‚àö should handle database errors gracefully (4 ms)
    findOwnedResource()
      ‚àö should return owned horse (2 ms)
    validateBatchOwnership()
      ‚àö should return all owned horses (2 ms)
    Security tests
      ‚àö should prevent ownership disclosure (CWE-639) (2 ms)
      ‚àö should prevent TOCTOU vulnerabilities by using atomic single query (3 ms)
      ‚àö should validate user ID from token, not from request params (2 ms)

[2026-01-28 14:23:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:40] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:40] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:40] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:40] warn: [Validation] Input validation failed
[2026-01-28 14:23:40] warn: [Validation] Input validation failed
[2026-01-28 14:23:40] warn: [Validation] Input validation failed
PASS __tests__/middleware/validationErrorHandler.test.mjs
  Validation Error Handler
    handleValidationErrors()
      ‚àö should call next() when no validation errors (12 ms)
      ‚àö should return 400 when validation errors exist (4 ms)
      ‚àö should handle single validation error (2 ms)
      ‚àö should handle nested field validation errors (2 ms)
    sanitizeRequestData() - XSS Prevention
      No validation errors
        ‚àö should sanitize body data and remove extra fields (3 ms)
        ‚àö should sanitize query parameters (3 ms)
        ‚àö should sanitize route parameters (7 ms)
        ‚àö should handle multiple request sources simultaneously (2 ms)
        ‚àö should preserve validated data with special characters (2 ms)
        ‚àö should handle empty validated data (2 ms)
        ‚àö should handle optional fields (2 ms)
      With validation errors
        ‚àö should NOT modify request data when validation failed (2 ms)
        ‚àö should still call next() to allow handleValidationErrors to run (2 ms)
      XSS Attack Scenarios
        ‚àö should prevent <script> injection (3 ms)
        ‚àö should prevent event handler injection (1 ms)
        ‚àö should prevent iframe injection (5 ms)
        ‚àö should prevent SVG XSS (2 ms)
      Parameter Pollution Prevention (CWE-20)
        ‚àö should prevent array parameter pollution (2 ms)
        ‚àö should prevent object parameter pollution (2 ms)
        ‚àö should prevent duplicate parameter names (2 ms)

[2026-01-28 14:23:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:40] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:40] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:40] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/flagEffectIntegration.test.mjs
  Flag Effect Integration
    calculateFlagEffects
      ‚àö should calculate cumulative effects for positive flags (4 ms)
      ‚àö should calculate cumulative effects for negative flags (1 ms)
      ‚àö should handle conflicting flags appropriately (1 ms)
      ‚àö should return neutral effects for horses with no flags (1 ms)
    applyFlagEffectsToCompetition
      ‚àö should apply positive flag effects to competition performance (2 ms)
      ‚àö should apply negative flag effects to competition performance (8 ms)
      ‚àö should handle discipline-specific flag effects (1 ms)
    applyFlagEffectsToTraining
      ‚àö should apply flag effects to training effectiveness (1 ms)
      ‚àö should reduce training effectiveness for negative flags (1 ms)
    applyFlagEffectsToBreeding
      ‚àö should apply flag effects to breeding trait probabilities (1 ms)
      ‚àö should handle breeding between horses with conflicting flags (1 ms)
    resolveFlagConflicts
      ‚àö should identify and resolve flag conflicts
      ‚àö should handle no conflicts gracefully

[2026-01-28 14:23:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:41] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:41] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:41] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse invalid has trait 'trait'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse -1 has trait 'trait'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse 0 has trait 'trait'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse null has trait 'trait'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse 1 has trait ''
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse 1 has trait 'null'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse 1 has trait 'undefined'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse 1 has trait '123'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:23:41] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse invalid
[2026-01-28 14:23:41] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse -1
[2026-01-28 14:23:41] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 0
[2026-01-28 14:23:41] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse invalid
[2026-01-28 14:23:41] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse -1
[2026-01-28 14:23:41] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 0
[2026-01-28 14:23:41] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse invalid
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse -1
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse 0
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait '' to category 'positive' for horse 1
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait 'null' to category 'positive' for horse 1
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait '123' to category 'positive' for horse 1
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait 'trait' to category 'invalid' for horse 1
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Invalid category 'invalid'. Must be one of: positive, negative
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait 'trait' to category 'hidden' for horse 1
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Invalid category 'hidden'. Must be one of: positive, negative
[2026-01-28 14:23:41] info: [horseModel.addTrait] Adding trait 'trait' to category '' for horse 1
[2026-01-28 14:23:41] error: [horseModel.addTrait] Error adding trait: Invalid category ''. Must be one of: positive, negative
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found
[2026-01-28 14:23:41] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999
[2026-01-28 14:23:41] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found
[2026-01-28 14:23:41] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999
[2026-01-28 14:23:41] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found
[2026-01-28 14:23:41] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'
[2026-01-28 14:23:41] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found
[2026-01-28 14:23:41] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999
[2026-01-28 14:23:41] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found
[2026-01-28 14:23:41] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999
[2026-01-28 14:23:41] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found
PASS tests/horseModelTask7.test.mjs
  üê¥ UNIT: Horse Model Task 7 - Instance-Style Helper Methods Validation
    API Validation Tests (without database)
      ‚àö should validate hasTrait function signature (3 ms)
      ‚àö should validate getPositiveTraitsArray function signature (1 ms)
      ‚àö should validate getNegativeTraitsArray function signature (1 ms)
      ‚àö should validate addTrait function signature (1 ms)
      ‚àö should validate createHorse still works with epigenetic_modifiers (1 ms)
    Input Validation Tests
      ‚àö should reject invalid horse IDs in hasTrait (17 ms)
      ‚àö should reject invalid trait names in hasTrait (6 ms)
      ‚àö should reject invalid horse IDs in getPositiveTraitsArray (5 ms)
      ‚àö should reject invalid horse IDs in getNegativeTraitsArray (5 ms)
      ‚àö should reject invalid inputs in addTrait (16 ms)
    Function Behavior Tests
      ‚àö should handle non-existent horse IDs gracefully (161 ms)
      ‚àö should validate that functions return correct types (14 ms)
    Integration with Existing System
      ‚àö should verify epigenetic_modifiers default structure is supported (2 ms)
      ‚àö should verify trait categories are properly defined
    TASK 7 Requirements Verification
      ‚àö should verify all requested helper methods exist
      ‚àö should verify method signatures match requirements (1 ms)
      ‚àö should verify epigenetic_modifiers field structure (1 ms)

[2026-01-28 14:23:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:41] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:41] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:41] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:23:41] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 2 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 3 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] warn: [MemoryManager] Potential memory leak detected: 2MB per sample
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] warn: [MemoryManager] Memory threshold alert: 90MB used
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:23:41] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:23:41] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:23:41] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:23:41] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
(node:66140) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:66140) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGTERM listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:66140) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:66140) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:66140) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 unhandledRejection listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
PASS __tests__/services/memoryResourceManagement.test.mjs
  Memory and Resource Management System
    Memory Manager Initialization
      ‚àö creates memory manager with default options (8 ms)
      ‚àö creates memory manager with custom options (15 ms)
      ‚àö returns singleton instance (5 ms)
    Memory Monitoring
      ‚àö starts and stops monitoring correctly (6 ms)
      ‚àö collects memory metrics correctly (10 ms)
      ‚àö stores memory metrics history (5 ms)
      ‚àö limits memory metrics history to 1000 entries (14 ms)
    Resource Tracking
      ‚àö tracks and untracks timers correctly (9 ms)
      ‚àö tracks and untracks intervals correctly (6 ms)
      ‚àö tracks event listeners correctly (5 ms)
      ‚àö gets resource counts correctly (5 ms)
    Resource Cleanup
      ‚àö cleans up all tracked resources (9 ms)
      ‚àö handles cleanup errors gracefully (6 ms)
    Memory Leak Detection
      ‚àö calculates memory trend correctly (4 ms)
      ‚àö detects memory leaks with consistent growth (5 ms)
    Memory Threshold Monitoring
      ‚àö triggers alert when memory threshold exceeded (9 ms)
      ‚àö does not trigger alert when memory is below threshold (4 ms)
    Garbage Collection
      ‚àö optimizes garbage collection when available (5 ms)
      ‚àö handles GC unavailability gracefully (5 ms)
    Comprehensive Report Generation
      ‚àö generates complete memory and resource report (8 ms)
    Helper Functions
      ‚àö trackResource helper function works correctly (5 ms)
      ‚àö untrackResource helper function works correctly (5 ms)
      ‚àö getMemoryReport helper function works correctly (4 ms)
      ‚àö initializeMemoryManagement starts monitoring (11 ms)
    Event Handling
      ‚àö emits monitoring events correctly (6 ms)
      ‚àö emits metrics collection events (5 ms)

[2026-01-28 14:23:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:42] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:42] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:42] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:42] info: [auth:g2yalo] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:g2yalo] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:g2yalo] Authenticated user 6126
[2026-01-28 14:23:42] info: [auth:uq5thv] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:uq5thv] Token from cookie: false
[2026-01-28 14:23:42] info: [auth:uq5thv] Token from header: true
[2026-01-28 14:23:42] info: [auth:uq5thv] Authenticated user 8138
[2026-01-28 14:23:42] info: [auth:8dln9j] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:8dln9j] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:8dln9j] Authenticated user 1
[2026-01-28 14:23:42] info: [auth:m8555c] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:m8555c] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:m8555c] Authenticated user 8709
[2026-01-28 14:23:42] info: [auth:5ea9b] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:5ea9b] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:5ea9b] Token expired (precheck)
[2026-01-28 14:23:42] warn: [auth:5ea9b] Token expired for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:c3a13d] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:c3a13d] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:c3a13d] Session too old
[2026-01-28 14:23:42] warn: [auth:c3a13d] Session expired. Please login again. for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:nkddg] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:nkddg] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:nkddg] Authenticated user 2000
[2026-01-28 14:23:42] info: [auth:yuky5d] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:yuky5d] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:yuky5d] Session too old
[2026-01-28 14:23:42] warn: [auth:yuky5d] Session expired. Please login again. for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:te3sy] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:te3sy] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:te3sy] Token decode failed: Unexpected token 'ÔøΩ', "ÔøΩ{⁄ñ'" is not valid JSON
[2026-01-28 14:23:42] warn: [auth:te3sy] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:c5cyy] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:c5cyy] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:c5cyy] Verify failed: invalid signature
[2026-01-28 14:23:42] warn: [auth:c5cyy] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:naeu5] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:naeu5] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:naeu5] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:r03yu] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:r03yu] Token from cookie: false
[2026-01-28 14:23:42] warn: [auth:r03yu] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:ymycwgr] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:ymycwgr] Token from cookie: false
[2026-01-28 14:23:42] warn: [auth:ymycwgr] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:d53hjg] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:d53hjg] Token from cookie: false
[2026-01-28 14:23:42] warn: [auth:d53hjg] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:gl9ou] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:gl9ou] Token from cookie: false
[2026-01-28 14:23:42] warn: [auth:gl9ou] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:0zyurq] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:0zyurq] Token from cookie: false
[2026-01-28 14:23:42] warn: [auth:0zyurq] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:kt0m8] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:kt0m8] Token from cookie: false
[2026-01-28 14:23:42] warn: [auth:kt0m8] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:8051lc] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:8051lc] Token from cookie: false
[2026-01-28 14:23:42] warn: [auth:8051lc] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:zolcit] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:zolcit] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:zolcit] Authenticated user 12345
[2026-01-28 14:23:42] info: [auth:m26r8n] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:m26r8n] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:m26r8n] Authenticated user 99999
[2026-01-28 14:23:42] info: [auth:016tnb] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:016tnb] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:016tnb] Authenticated user 4776
[2026-01-28 14:23:42] info: [auth:dpdsas] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:dpdsas] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:dpdsas] Authenticated user 1518
[2026-01-28 14:23:42] info: [auth:m3205] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:m3205] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:m3205] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:23:42] info: [auth:wc1f53] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:wc1f53] Token from cookie: true
[2026-01-28 14:23:42] info: [auth:wc1f53] Authenticated user undefined
[2026-01-28 14:23:42] info: [auth:qgcshk] Starting auth for GET /api/test
[2026-01-28 14:23:42] info: [auth:qgcshk] Token from cookie: true
[2026-01-28 14:23:42] warn: [auth:qgcshk] Invalid or expired token for GET /api/test from 127.0.0.1
PASS __tests__/unit/security/token-validation.test.mjs
  Token Validation Unit Tests
    Valid Token Scenarios
      ‚àö should authenticate with valid token in cookie (10 ms)
      ‚àö should authenticate with valid token in Authorization header (12 ms)
      ‚àö should prefer cookie token over Authorization header (5 ms)
      ‚àö should accept token with additional custom payload (5 ms)
    Expired Token Scenarios
      ‚àö should reject expired token (5 ms)
      ‚àö should reject token older than 7 days (CWE-613) (10 ms)
      ‚àö should accept token exactly 7 days old (4 ms)
      ‚àö should reject token slightly over 7 days old (6 ms)
    Malformed Token Scenarios
      ‚àö should reject malformed token (4 ms)
      ‚àö should reject token with invalid signature (6 ms)
      ‚àö should reject completely invalid token string (7 ms)
      ‚àö should reject empty token string (3 ms)
      ‚àö should reject null token (3 ms)
      ‚àö should reject undefined token (4 ms)
    Missing Token Scenarios
      ‚àö should return 401 when no token in cookie or header (3 ms)
      ‚àö should return 401 when Authorization header has no Bearer token (3 ms)
      ‚àö should return 401 when Authorization header has wrong scheme (7 ms)
      ‚àö should return 401 when Authorization header has no space (3 ms)
    Token Payload Validation
      ‚àö should extract userId from token payload (5 ms)
      ‚àö should handle legacy id field mapping (5 ms)
      ‚àö should include iat (issued at) timestamp in user object (5 ms)
      ‚àö should include exp (expiration) timestamp in user object (5 ms)
    Security Edge Cases
      ‚àö should reject token with modified payload (7 ms)
      ‚àö should reject token without userId field (5 ms)
      ‚àö should reject token signed with algorithm none (3 ms)

[2026-01-28 14:23:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:42] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:42] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:42] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-10-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-01T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-02T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-03T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-04T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-05T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-06T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-07T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-08T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-09T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-10T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-11T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-12T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-13T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-14T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-29T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-30T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-01T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-02T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-03T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-04T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-05T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-06T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-07T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-08T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-09T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-10T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-11T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-12T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-13T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-14T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-16T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-17T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-18T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-19T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-20T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-21T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-22T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-23T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-24T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-25T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-26T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-27T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-28T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-29T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-30T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-01T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-02T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-03T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-04T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-05T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-06T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-07T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-08T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-09T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-10T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-11T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-12T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-13T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-14T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-29T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-30T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-16T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-17T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-18T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-19T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-20T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-21T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z
[2026-01-28 14:23:42] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
PASS tests/unit/environmentalFactorEngine.test.mjs
  üå§Ô∏è Environmental Factor Engine
    üå°Ô∏è Weather System
      ‚àö should calculate current weather conditions (7 ms)
      ‚àö should generate realistic weather patterns for different seasons (89 ms)
      ‚àö should account for location factors in weather calculation (3 ms)
    üçÇ Seasonal Cycles
      ‚àö should calculate seasonal factors for horse development (6 ms)
      ‚àö should provide seasonal transition effects (1 ms)
    ‚ö° Environmental Triggers
      ‚àö should calculate environmental triggers for trait expression (3 ms)
      ‚àö should identify stress triggers based on weather conditions (1 ms)
      ‚àö should account for horse traits in trigger calculation (1 ms)
    üéØ Environmental Impact Calculation
      ‚àö should calculate environmental impact on horse development (4 ms)
      ‚àö should provide different impacts for different environmental conditions (1 ms)
    üîÆ Weather Forecasting
      ‚àö should generate weather forecast for planning (13 ms)
      ‚àö should provide seasonal forecast trends (28 ms)
    üìä Comfort Zone Analysis
      ‚àö should calculate horse comfort zone based on traits and preferences (1 ms)
      ‚àö should adjust comfort zone based on horse traits (1 ms)
    ‚ö†Ô∏è Environmental Stress Assessment
      ‚àö should assess environmental stress levels (3 ms)
      ‚àö should provide stress mitigation recommendations (1 ms)

[2026-01-28 14:23:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:42] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:42] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:42] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/utils/cookieConfig.test.mjs
  Cookie Configuration Module
    Access Token Cookie Options
      ‚àö should have correct security properties in development (8 ms)
      ‚àö should have correct security properties in production (5 ms)
      ‚àö should use custom domain when COOKIE_DOMAIN is set (4 ms)
      ‚àö should have httpOnly true (XSS protection) (4 ms)
      ‚àö should have sameSite strict (CSRF protection) (4 ms)
      ‚àö should have maxAge matching access token expiry (15 minutes) (10 ms)
      ‚àö should have path set to root (3 ms)
    Refresh Token Cookie Options
      ‚àö should have correct security properties (4 ms)
      ‚àö should have maxAge matching refresh token expiry (7 days) (5 ms)
      ‚àö should have path scoped to refresh endpoint (least privilege) (4 ms)
    CSRF Token Cookie Options
      ‚àö should have httpOnly false (client must read for X-CSRF-Token header) (4 ms)
      ‚àö should have correct security properties (3 ms)
      ‚àö should have maxAge matching access token (session-tied) (3 ms)
    Clear Cookie Options
      ‚àö should match access token options (except maxAge) (3 ms)
      ‚àö should match refresh token options (except maxAge) (4 ms)
      ‚àö should have same path as original cookie (required for proper deletion) (4 ms)
      ‚àö should have same domain as original cookie (required for proper deletion) (5 ms)
    Environment-Specific Behavior
      ‚àö should have secure: false in development (4 ms)
      ‚àö should have secure: false in test (9 ms)
      ‚àö should have secure: true in production (5 ms)
    Cookie Configuration Summary
      ‚àö should return configuration summary (5 ms)
      ‚àö should show production environment correctly (4 ms)
      ‚àö should show custom domain when set (4 ms)
      ‚àö should show same-domain when COOKIE_DOMAIN not set (4 ms)
    Security Compliance
      ‚àö should have all security flags enabled in production (4 ms)
      ‚àö should prevent JavaScript access to auth tokens (XSS mitigation) (4 ms)
      ‚àö should require HTTPS in production (MitM mitigation) (4 ms)
      ‚àö should prevent cross-site requests (CSRF mitigation) (4 ms)
    Exports
      ‚àö should export all required constants (5 ms)

[2026-01-28 14:23:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 14:23:43] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:23:43] info: [FeatureFlag] All runtime overrides cleared
PASS __tests__/unit/featureFlagService.test.mjs
  Feature Flag Service
    isFeatureEnabled
      ‚àö should return false for undefined flags (4 ms)
      ‚àö should return true for flags set to "true" in environment (74 ms)
      ‚àö should return false for flags set to "false" in environment (2 ms)
      ‚àö should handle case-insensitive boolean strings (2 ms)
      ‚àö should use default value from FLAG_DEFINITIONS (2 ms)
      ‚àö should respect environment override over defaults (2 ms)
    Percentage-based rollout
      ‚àö should consistently hash same user to same bucket (4 ms)
      ‚àö should return false when percentage is 0 (4 ms)
      ‚àö should return true when percentage is 100 (3 ms)
    getFeatureVariant
      ‚àö should return string value from environment (7 ms)
      ‚àö should return default value for undefined flags (2 ms)
      ‚àö should return default when value is not a string (2 ms)
    getAllFlags
      ‚àö should return all defined flags (3 ms)
      ‚àö should evaluate flags with provided context (2 ms)
    getEvaluationStats
      ‚àö should track flag evaluations (2 ms)
      ‚àö should calculate enabled rate correctly (3 ms)
    overrideFlag
      ‚àö should allow runtime flag override (3 ms)
    clearOverrides
      ‚àö should clear all runtime overrides (4 ms)
    Error Handling
      ‚àö should return false on evaluation error (6 ms)

[2026-01-28 14:23:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:43] info: [envValidator] Test environment validation complete. Success: true
PASS tests/schema-field-test.test.mjs
  Schema Field Test
    ‚àö should create horse with consecutiveDaysFoalCare field (86 ms)

[2026-01-28 14:23:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:44] warn: [Validation] Input validation failed
PASS __tests__/unit/security/validation-error-handler.test.mjs
  validationErrorHandler
    ‚àö passes through when no errors (3 ms)
    ‚àö returns 400 on validation errors (3 ms)
    ‚àö sanitizes request body by keeping only validated fields (1 ms)

[2026-01-28 14:23:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: strict
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for strict: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task feeding
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task grooming
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:23:44] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:23:44] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: invalid_personality
[2026-01-28 14:23:44] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for invalid_personality: none
PASS tests/groomSystemLogic.test.mjs
  üßÆ UNIT: Groom System Logic - Pure Business Logic Validation
    calculateGroomInteractionEffects
      ‚àö should calculate basic interaction effects (8 ms)
      ‚àö should apply foal care specialty bonuses correctly (6 ms)
      ‚àö should apply skill level modifiers correctly (10 ms)
      ‚àö should apply personality modifiers correctly (5 ms)
      ‚àö should apply experience bonuses correctly (5 ms)
      ‚àö should scale cost with duration and session rate (9 ms)
      ‚àö should handle different interaction types (8 ms)
      ‚àö should handle edge cases gracefully (8 ms)
    System Constants
      ‚àö should have all required groom specialties (6 ms)
      ‚àö should have all required skill levels (2 ms)
      ‚àö should have all required personality traits (2 ms)
      ‚àö should have valid default groom profiles (3 ms)
    Modifier Calculations
      ‚àö should combine modifiers correctly (3 ms)
      ‚àö should handle invalid modifiers gracefully (2 ms)

[2026-01-28 14:23:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 6 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 7 at age 730
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 8 at age 730
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 9 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 10 at age 730
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 11 at age 1095
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 12 at age 500
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 13 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 14 at age 730
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 15 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 16 at age 730
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 17 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 18 at age 1095
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 19 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 20 at age 730
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 21 at age 1095
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:44] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
PASS tests/utils/milestoneTraitEvaluator.comprehensive.test.mjs
  üèá COMPREHENSIVE: Milestone Trait Evaluator System
    Milestone Eligibility Validation
      ‚àö should validate 1-year milestone eligibility (3 ms)
      ‚àö should validate 2-year milestone eligibility (1 ms)
      ‚àö should validate 3-year milestone eligibility (1 ms)
      ‚àö should handle horses too young for milestones (1 ms)
      ‚àö should handle horses too old for milestones (1 ms)
    Trait Milestone Evaluation
      ‚àö should evaluate traits for 1-year milestone (11 ms)
      ‚àö should evaluate traits for 2-year milestone (4 ms)
      ‚àö should evaluate traits with moderate care history (4 ms)
    Task Log Processing and Trait Scoring
      ‚àö should process extensive task history for trait evaluation (8 ms)
      ‚àö should handle minimal task history (3 ms)
      ‚àö should handle empty task history (3 ms)
    Milestone Age Validation and Edge Cases
      ‚àö should handle non-milestone ages correctly (3 ms)
      ‚àö should handle already evaluated milestones (2 ms)
      ‚àö should handle horses with existing traits (3 ms)
    Error Handling and Edge Cases
      ‚àö should handle missing task_log property (5 ms)
      ‚àö should handle null task_log (6 ms)
      ‚àö should handle invalid horse data gracefully (3 ms)
      ‚àö should handle horses with malformed epigenetic modifiers (3 ms)
    Trait Application and Epigenetic Logic
      ‚àö should apply traits appropriately for different milestone ages (7 ms)
      ‚àö should maintain consistency in trait evaluation (14 ms)

[2026-01-28 14:23:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:44] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/utils/validateEnvironment.test.mjs
  validateEnvironment()
    Required variables validation
      ‚àö should pass with all required variables present (4 ms)
      ‚àö should fail when DATABASE_URL is missing (2 ms)
      ‚àö should fail when JWT_SECRET is missing (1 ms)
      ‚àö should fail when NODE_ENV is missing (2 ms)
      ‚àö should fail when PORT is missing (1 ms)
    Minimum length validation
      ‚àö should fail when DATABASE_URL is too short (<20 chars) (1 ms)
      ‚àö should fail when JWT_SECRET is too short (<32 chars) (1 ms)
      ‚àö should pass when JWT_SECRET is exactly 32 characters (1 ms)
    Allowed values validation
      ‚àö should pass when NODE_ENV is "development" (1 ms)
      ‚àö should pass when NODE_ENV is "production" (1 ms)
      ‚àö should pass when NODE_ENV is "test" (6 ms)
      ‚àö should fail when NODE_ENV is invalid (1 ms)
    Type validation
      ‚àö should pass when PORT is a valid number (1 ms)
      ‚àö should fail when PORT is not a number (2 ms)
    JWT_SECRET strength validation
      ‚àö should reject placeholder "your-super-secret" (1 ms)
      ‚àö should reject placeholder "change-this" (2 ms)
      ‚àö should reject placeholder "REPLACE_WITH" (1 ms)
      ‚àö should reject placeholder "example" (1 ms)
      ‚àö should warn when JWT_SECRET lacks character variety (line 72) (1 ms)
    DATABASE_URL format validation
      ‚àö should pass with postgresql:// prefix (1 ms)
      ‚àö should pass with postgres:// prefix (1 ms)
      ‚àö should fail without postgresql prefix (2 ms)
      ‚àö should reject weak password "password" (1 ms)
      ‚àö should reject weak password "admin" (1 ms)
      ‚àö should reject weak password "123456" (1 ms)
      ‚àö should reject weak password "postgres" (1 ms)
    Production HTTPS warnings
      ‚àö should warn about HTTP origins in production (1 ms)
      ‚àö should NOT warn about HTTPS origins in production (1 ms)
      ‚àö should warn about PORT 80 in production (2 ms)
      ‚àö should NOT warn about PORT 443 in production (5 ms)
    Multiple errors
      ‚àö should report all validation errors at once (1 ms)

[2026-01-28 14:23:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:45] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:45] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:45] info: [envValidator] Test environment validation complete. Success: true
PASS tests/database.test.mjs
  üîå INTEGRATION: Database Connection - Core Infrastructure Validation
    ‚àö should connect to the database (50 ms)
    ‚àö should be able to query the User table (5 ms)
    ‚àö should be able to perform basic database operations (3 ms)
    ‚àö should handle database errors gracefully (13 ms)

[2026-01-28 14:23:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:45] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:45] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:45] info: [envValidator] Test environment validation complete. Success: true
PASS tests/trainingCooldown.test.mjs
  ‚è∞ UNIT: Training Cooldown System - Horse Training Restrictions
    canTrain
      ‚àö should return true for horse with no cooldown (2 ms)
      ‚àö should return true for horse with cooldown in the past (1 ms)
      ‚àö should return false for horse with cooldown in the future (1 ms)
      ‚àö should throw error for null horse (4 ms)
      ‚àö should throw error for undefined horse (1 ms)
    getCooldownTimeRemaining
      ‚àö should return null for horse with no cooldown (1 ms)
      ‚àö should return null for horse with cooldown in the past (1 ms)
      ‚àö should return positive milliseconds for horse with cooldown in the future (1 ms)
      ‚àö should return approximately correct time remaining (1 ms)
      ‚àö should throw error for null horse (8 ms)
      ‚àö should throw error for undefined horse (1 ms)
    setCooldown
      ‚àö should set cooldown 7 days in the future (1 ms)
      ‚àö should return updated horse with relations (1 ms)
      ‚àö should throw error for non-existent horse ID (1 ms)
      ‚àö should throw error for null horse ID (1 ms)
      ‚àö should throw error for undefined horse ID (1 ms)
      ‚àö should throw error for invalid horse ID (string) (1 ms)
      ‚àö should throw error for invalid horse ID (negative) (1 ms)
      ‚àö should throw error for invalid horse ID (zero) (1 ms)
      ‚àö should handle string horse ID that can be parsed to integer (1 ms)
    formatCooldown
      ‚àö should return "Ready to train" for null input (1 ms)
      ‚àö should return "Ready to train" for zero milliseconds (1 ms)
      ‚àö should return "Ready to train" for negative milliseconds (1 ms)
      ‚àö should format minutes correctly (1 ms)
      ‚àö should format hours and minutes correctly (1 ms)
      ‚àö should format days and hours correctly (1 ms)
      ‚àö should format exactly 7 days correctly (1 ms)
    Integration Tests
      ‚àö should complete full training cooldown workflow (1 ms)
      ‚àö should work with horse retrieved from database (1 ms)

[2026-01-28 14:23:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:45] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:45] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:45] info: [envValidator] Test environment validation complete. Success: true
PASS tests/errors/AppError.test.mjs
  Error Classes
    AppError
      ‚àö should create an AppError with default values (4 ms)
      ‚àö should create an AppError with custom values (1 ms)
      ‚àö should set status to "fail" for 4xx status codes (1 ms)
      ‚àö should set status to "error" for 5xx status codes (1 ms)
      ‚àö should capture stack trace (10 ms)
    ValidationError
      ‚àö should create a ValidationError with default values (1 ms)
      ‚àö should create a ValidationError with field and value (1 ms)
      ‚àö should inherit from AppError (1 ms)
    DatabaseError
      ‚àö should create a DatabaseError with default values (1 ms)
      ‚àö should create a DatabaseError with original error
      ‚àö should inherit from AppError
    NotFoundError
      ‚àö should create a NotFoundError with default message (1 ms)
      ‚àö should create a NotFoundError with custom resource (1 ms)
      ‚àö should create a NotFoundError with resource and ID (1 ms)
      ‚àö should inherit from AppError

[2026-01-28 14:23:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:46] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:46] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:46] info: [envValidator] Test environment validation complete. Success: true
PASS models/userModel.test.mjs
  üë§ UNIT: User Model - Database Operations & Business Logic
    createUser
      ‚àö should create a user successfully (4 ms)
      ‚àö should throw error if username is missing (4 ms)
      ‚àö should throw error if email is missing (1 ms)
      ‚àö should throw error if password is missing (1 ms)
      ‚àö should throw error on unique constraint violation for username (1 ms)
      ‚àö should throw error on unique constraint violation for email
      ‚àö should throw DatabaseError for other Prisma errors (1 ms)
    getUserById
      ‚àö should return user if found (8 ms)
      ‚àö should return null if user not found (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
    getUserByEmail
      ‚àö should return user by email (case insensitive) (1 ms)
      ‚àö should throw DatabaseError if email is not provided (1 ms)
    getUserWithHorses
      ‚àö should return user with horses if found (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
    updateUser
      ‚àö should update user successfully (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
      ‚àö should handle Prisma update errors (user not found) (1 ms)
      ‚àö should handle general update errors (1 ms)
    deleteUser
      ‚àö should delete user successfully (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
      ‚àö should handle Prisma delete errors (user not found) (2 ms)
    addXpToUser
      ‚àö should add XP without leveling up (1 ms)
      ‚àö should add XP and level up (1 ms)
      ‚àö should return error for invalid XP amount (1 ms)
      ‚àö should return error for invalid user ID (1 ms)
      ‚àö should return error if user not found (1 ms)
    getUserProgress
      ‚àö should return user progress (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (8 ms)
      ‚àö should throw DatabaseError if user not found (1 ms)
    getUserStats
      ‚àö should return user stats with horses (1 ms)
      ‚àö should handle user with no horses (1 ms)
      ‚àö should handle user with null horses array (1 ms)
      ‚àö should return null for non-existent user (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)

[2026-01-28 14:23:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:46] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:46] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:46] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:46] info: [cacheHelper] Cache statistics reset
PASS __tests__/integration/caching-circuit-breaker.test.mjs
  Caching Circuit Breaker Integration Tests
    Multi-Tier Caching (L1: In-Memory, L2: Redis)
      ‚àö should use in-memory cache when Redis is unavailable (5 ms)
      ‚àö should cache data in both tiers when Redis is available (2 ms)
      ‚àö should handle TTL expiration in local cache (27 ms)
    Circuit Breaker Protection
      ‚àö should include circuit breaker status in health statistics (3 ms)
      ‚àö should not throw errors when circuit breaker is unavailable (2 ms)
      ‚àö should track cache statistics correctly (8 ms)
    Graceful Degradation
      ‚àö should fall back to query execution if cache fails (2 ms)
      ‚àö should handle null and undefined query results (2 ms)
      ‚àö should handle query function errors gracefully (4 ms)
    Cache Invalidation
      ‚àö should invalidate specific cache keys (3 ms)
      ‚àö should invalidate cache by pattern (2 ms)
      ‚àö should handle invalidation when Redis is unavailable (1 ms)
    Cache Key Generation
      ‚àö should generate standardized cache keys (3 ms)
      ‚àö should sanitize cache key components (3 ms)
      ‚àö should filter out null and undefined components (3 ms)
    Statistics and Monitoring
      ‚àö should calculate hit rate correctly (8 ms)
      ‚àö should track error counts (2 ms)
      ‚àö should provide timestamp of last update (14 ms)
    Performance and Limits
      ‚àö should handle multiple concurrent cache requests (3 ms)
      ‚àö should handle large data objects (2 ms)

[2026-01-28 14:23:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:46] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:46] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:46] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskExclusivity.integration.test.mjs
  Foal Task Exclusivity Integration
    Configuration Integration
      ‚àö should have correct task categories defined (3 ms)
      ‚àö should have no overlap between task categories (1 ms)
    Daily Exclusivity Enforcement
      ‚àö should detect all enrichment tasks correctly (1 ms)
      ‚àö should detect all grooming tasks correctly (1 ms)
      ‚àö should enforce mutual exclusivity between categories (1 ms)
      ‚àö should allow non-foal tasks without blocking (1 ms)
      ‚àö should detect foal tasks mixed with general tasks (1 ms)
    Business Rule Validation
      ‚àö should prevent double-counting with multiple foal tasks (1 ms)
      ‚àö should work correctly across different days (9 ms)
      ‚àö should handle real-world task progression scenario (1 ms)

[2026-01-28 14:23:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:47] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:47] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:47] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:23:47] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
PASS tests/horseXpController.test.mjs
  Horse XP Controller - API Endpoints
    getHorseXpStatus
      ‚àö should return horse XP status for authorized user (5 ms)
      ‚àö should reject unauthorized access to other users horses (2 ms)
      ‚àö should handle horse not found (2 ms)
    allocateStatPoint
      ‚àö should allocate stat point successfully (2 ms)
      ‚àö should validate stat name (3 ms)
      ‚àö should require stat name in request body (2 ms)
    getHorseXpHistory
      ‚àö should return horse XP history with pagination (2 ms)
    awardXpToHorse
      ‚àö should award XP to horse (system/admin use) (2 ms)
      ‚àö should validate XP amount (2 ms)

[2026-01-28 14:23:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:47] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:47] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:47] info: [envValidator] Test environment validation complete. Success: true
PASS tests/dbConnection.test.mjs
  üîå INTEGRATION: Database Connection - Alternative Prisma Client Path Testing
    ‚àö should connect to the database and fetch users (165 ms)

[2026-01-28 14:23:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:47] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:47] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:47] info: [envValidator] Test environment validation complete. Success: true
PASS tests/atBirthTraits.test.mjs
  üß¨ UNIT: At-Birth Traits System - Comprehensive Breeding Analysis Testing
    AT_BIRTH_TRAITS
      ‚àö should have positive and negative trait categories (4 ms)
      ‚àö should have valid trait definitions (6 ms)
    evaluateTraitConditions
      ‚àö should correctly evaluate mare stress conditions (7 ms)
      ‚àö should correctly evaluate feed quality conditions (2 ms)
      ‚àö should correctly evaluate inbreeding conditions (1 ms)
      ‚àö should correctly evaluate multiple conditions (1 ms)
    assessFeedQuality
      ‚àö should return feed quality based on mare health status (2 ms)
      ‚àö should return default quality for missing mare (1 ms)
      ‚àö should adjust quality based on earnings (1 ms)
    getAncestors
      ‚àö should return empty array for no generations (1 ms)
      ‚àö should return empty array for empty horse IDs (1 ms)
      ‚àö should get immediate parents (1 ms)
    detectInbreeding
      ‚àö should detect no inbreeding when no common ancestors (1 ms)
      ‚àö should detect inbreeding when common ancestors exist (2 ms)
    analyzeLineage
      ‚àö should detect discipline specialization (1 ms)
      ‚àö should handle no competition history (1 ms)
    applyEpigeneticTraitsAtBirth
      ‚àö should apply positive traits for optimal breeding conditions (1 ms)
      ‚àö should apply negative traits for poor breeding conditions (2 ms)
      ‚àö should apply inbred trait when inbreeding detected (1 ms)
      ‚àö should apply inbred trait with direct condition testing (5 ms)
      ‚àö should apply specialized lineage trait when discipline specialization detected (2 ms)
      ‚àö should handle missing mare gracefully (3 ms)
      ‚àö should require both sire and dam IDs (3 ms)
      ‚àö should use mare stress level from database when not provided (2 ms)
      ‚àö should move traits to hidden when many traits are applied (1 ms)
      ‚àö should handle errors in lineage analysis gracefully (2 ms)
    checkLineageForDisciplineAffinity
      ‚àö should return affinity true when 3 or more ancestors share the same discipline (1 ms)
      ‚àö should return affinity false when less than 3 ancestors share the same discipline (1 ms)
      ‚àö should handle ancestors with competition history (1 ms)
      ‚àö should handle ancestors with discipline scores (1 ms)
      ‚àö should handle empty ancestors array (1 ms)
      ‚àö should handle null ancestors (1 ms)
      ‚àö should handle ancestors without discipline information (1 ms)
      ‚àö should prioritize direct discipline field over other methods (2 ms)
      ‚àö should handle mixed data sources correctly (1 ms)
    getMostCommonDisciplineFromHistory
      ‚àö should return the most common discipline from competition history (1 ms)
      ‚àö should return null for empty competition history (5 ms)
      ‚àö should return null for null competition history (1 ms)
      ‚àö should handle competitions without discipline field (1 ms)
    getHighestScoringDiscipline
      ‚àö should return the discipline with the highest score (1 ms)
      ‚àö should return null for empty discipline scores
      ‚àö should return null for null discipline scores
      ‚àö should handle non-numeric scores (1 ms)
      ‚àö should handle all non-numeric scores

[2026-01-28 14:23:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
[2026-01-28 14:23:48] info: [CSRF] Token generated
PASS __tests__/unit/security/csrf-validation.test.mjs
  CSRF Token Validation Unit Tests
    CSRF Token Generation
      ‚àö should generate a CSRF token (5 ms)
      ‚àö should store CSRF token in session (1 ms)
      ‚àö should generate unique tokens for each request (3 ms)
      ‚àö should generate token with sufficient length (10 ms)
      ‚àö should generate token with cryptographically secure randomness (2 ms)
    CSRF Token Validation - Valid Scenarios
      ‚àö should accept valid CSRF token in body (2 ms)
      ‚àö should accept valid CSRF token in header (1 ms)
      ‚àö should prefer body token over header token (1 ms)
      ‚àö should skip CSRF for GET requests (1 ms)
      ‚àö should skip CSRF for HEAD requests (1 ms)
      ‚àö should skip CSRF for OPTIONS requests (1 ms)
    CSRF Token Validation - Invalid Scenarios
      ‚àö should reject POST request without CSRF token (1 ms)
      ‚àö should reject PUT request without CSRF token (1 ms)
      ‚àö should reject DELETE request without CSRF token (1 ms)
      ‚àö should reject PATCH request without CSRF token (2 ms)
      ‚àö should reject mismatched CSRF token (1 ms)
      ‚àö should reject empty CSRF token (2 ms)
      ‚àö should reject null CSRF token (1 ms)
      ‚àö should reject undefined CSRF token (1 ms)
      ‚àö should reject when session has no CSRF token (1 ms)
      ‚àö should reject when session is missing (1 ms)
    CSRF Token Security Edge Cases
      ‚àö should reject token with extra whitespace (1 ms)
      ‚àö should reject token with newline characters (1 ms)
      ‚àö should reject token with special characters appended (1 ms)
      ‚àö should be case-sensitive for token validation (1 ms)
      ‚àö should reject partial token match (1 ms)
      ‚àö should use timing-safe comparison for tokens (5 ms)
    CSRF Error Handling
      ‚àö should return proper error response for CSRF failure (1 ms)
      ‚àö should not leak session token in error message (1 ms)
      ‚àö should not leak provided token in error message
    CSRF Token Rotation
      ‚àö should allow token regeneration (2 ms)
      ‚àö should invalidate old token after regeneration (2 ms)
    CSRF Double-Submit Cookie Pattern
      ‚àö should validate CSRF token from cookie
    CSRF Integration with Different Content Types
      ‚àö should validate CSRF for application/json (1 ms)
      ‚àö should validate CSRF for application/x-www-form-urlencoded (1 ms)
      ‚àö should validate CSRF for multipart/form-data (1 ms)

[2026-01-28 14:23:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:48] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:23:48] info: [resultModel.saveResult] Successfully created new result for horse 3 in show 2 with score 65.2
[2026-01-28 14:23:48] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:23:48] error: [resultModel.saveResult] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:361:61)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:23:48] info: [resultModel.saveResult] Successfully updated placeholder result for horse 1 in show 2 with score 85.5
[2026-01-28 14:23:48] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:23:48] info: [resultModel.getResultsByHorse] Found 2 results for horse 1
[2026-01-28 14:23:48] info: [resultModel.getResultsByHorse] Found 0 results for horse 999
[2026-01-28 14:23:48] error: [resultModel.getResultsByHorse] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:562:63)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:23:48] info: [resultModel.getResultsByShow] Found 2 results for show 2
[2026-01-28 14:23:48] info: [resultModel.getResultsByShow] Found 0 results for show 999
[2026-01-28 14:23:48] error: [resultModel.getResultsByShow] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:634:63)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:23:48] info: [resultModel.getResultById] Successfully found result: 1
[2026-01-28 14:23:48] error: [resultModel.getResultById] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:692:65)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:23:48] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:23:48] info: [resultModel.getResultsByUser] Retrieved 1 results for user user123
[2026-01-28 14:23:48] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123
[2026-01-28 14:23:48] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123
[2026-01-28 14:23:48] error: [resultModel.getResultsByUser] Error getting results for user user123: Database error
[2026-01-28 14:23:48] info: [resultModel.getResultsByHorse] Found 0 results for horse 123
[2026-01-28 14:23:48] info: [resultModel.getResultsByShow] Found 0 results for show 456
PASS tests/resultModel.test.mjs
  üèÜ UNIT: Result Model - Competition Result Management
    saveResult
      ‚àö should save a competition result with all required fields (6 ms)
      ‚àö should save a result without placement (null for non-top-3) (2 ms)
      ‚àö should throw error if horseId is missing (5 ms)
      ‚àö should throw error if showId is missing (1 ms)
      ‚àö should throw error if score is missing (2 ms)
      ‚àö should throw error if discipline is missing (1 ms)
      ‚àö should throw error if runDate is missing (9 ms)
      ‚àö should validate score is a number (2 ms)
      ‚àö should validate horseId is a positive integer (1 ms)
      ‚àö should validate showId is a positive integer (2 ms)
      ‚àö should throw error if showName is missing (1 ms)
      ‚àö should throw error if showName is not a string (2 ms)
      ‚àö should handle prizeWon as string and convert to float (2 ms)
      ‚àö should handle database errors gracefully (3 ms)
      ‚àö should update existing placeholder result instead of creating new one (2 ms)
      ‚àö should create new result when no placeholder exists (2 ms)
    getResultsByHorse
      ‚àö should retrieve all results for a specific horse (2 ms)
      ‚àö should return empty array if no results found for horse (1 ms)
      ‚àö should validate horseId is a positive integer (8 ms)
      ‚àö should handle database errors gracefully (3 ms)
    getResultsByShow
      ‚àö should retrieve all results for a specific show (2 ms)
      ‚àö should return empty array if no results found for show (1 ms)
      ‚àö should validate showId is a positive integer (1 ms)
      ‚àö should handle database errors gracefully (3 ms)
    getResultById
      ‚àö should retrieve a specific result by ID (2 ms)
      ‚àö should return null if result not found (1 ms)
      ‚àö should validate resultId is a positive integer (2 ms)
      ‚àö should handle database errors gracefully (2 ms)
    createResult
      ‚àö should be an alias for saveResult and work identically (2 ms)
      ‚àö should throw same validation errors as saveResult (1 ms)
    getResultsByUser
      ‚àö should retrieve results for all user horses with default options (2 ms)
      ‚àö should handle custom options (limit, offset, discipline) (7 ms)
      ‚àö should cap limit at 100 and ensure non-negative offset (2 ms)
      ‚àö should handle database errors gracefully (2 ms)
    parseInt conversion edge cases
      ‚àö should handle string IDs in getResultsByHorse (2 ms)
      ‚àö should handle string IDs in getResultsByShow (1 ms)
      ‚àö should handle string IDs in getResultById (1 ms)

[2026-01-28 14:23:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:48] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirthTask8.test.mjs
  üß¨ UNIT: Apply Epigenetic Traits At Birth Task 8 - Deterministic Breeding Analysis
    Low-stress, premium-fed mare produces positive traits
      ‚àö should produce hardy trait with low stress and premium feed (5 ms)
      ‚àö should produce well_bred trait with optimal conditions and no inbreeding (1 ms)
      ‚àö should produce premium_care trait with exceptional conditions (1 ms)
      ‚àö should NOT produce positive traits with high stress (2 ms)
      ‚àö should NOT produce positive traits with poor feed quality (1 ms)
    Inbreeding detection triggers negative traits
      ‚àö should produce inbred trait when duplicate ancestors detected (2 ms)
      ‚àö should NOT produce inbred trait without common ancestors (1 ms)
    Poor breeding conditions trigger negative traits
      ‚àö should produce weak_constitution trait with high stress and poor feed (9 ms)
      ‚àö should produce stressed_lineage trait with high mare stress (1 ms)
      ‚àö should produce poor_nutrition trait with very poor feed quality (1 ms)
    Discipline specialization produces legacy traits
      ‚àö should produce specialized_lineage trait with 3+ ancestors in same discipline (2 ms)
      ‚àö should NOT produce specialized_lineage trait without sufficient specialization (1 ms)
      ‚àö should handle no competition history gracefully (2 ms)
    Deterministic testing with Math.random mocking
      ‚àö should consistently apply traits when random value is below threshold (2 ms)
      ‚àö should consistently NOT apply traits when random value is above threshold (1 ms)
      ‚àö should handle edge case random values at exact thresholds (1 ms)
    Error handling and edge cases
      ‚àö should throw error when sireId is missing (4 ms)
      ‚àö should throw error when damId is missing (1 ms)
      ‚àö should throw error when mare is not found (2 ms)
      ‚àö should handle database errors gracefully in lineage analysis (1 ms)

[2026-01-28 14:23:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:49] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:49] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:49] info: [envValidator] Test environment validation complete. Success: true
PASS tests/isHorseEligible.test.mjs
  üèÜ UNIT: Horse Eligibility - Competition Entry Validation
    Input Validation
      ‚àö should throw error for null horse (6 ms)
      ‚àö should throw error for undefined horse (2 ms)
      ‚àö should throw error for null show (1 ms)
      ‚àö should throw error for undefined show (1 ms)
      ‚àö should throw error for non-array previousEntries (2 ms)
      ‚àö should throw error for null previousEntries (7 ms)
    Age Requirements (3-20 inclusive)
      ‚àö should return false for horse younger than 3
      ‚àö should return false for horse age 1 (1 ms)
      ‚àö should return true for horse exactly age 3 (1 ms)
      ‚àö should return true for horse exactly age 20 (1 ms)
      ‚àö should return false for horse older than 20 (1 ms)
      ‚àö should return false for horse age 25
      ‚àö should return false for horse with non-numeric age (1 ms)
      ‚àö should return false for horse with null age
      ‚àö should return false for horse with undefined age
    Level Requirements
      ‚àö should return false for horse level below show minimum (1 ms)
      ‚àö should return true for horse level exactly at show minimum
      ‚àö should return true for horse level exactly at show maximum (1 ms)
      ‚àö should return false for horse level above show maximum (1 ms)
      ‚àö should return true for horse level within show range
      ‚àö should return false for horse with non-numeric level (1 ms)
      ‚àö should return false for horse with null level
      ‚àö should return false for horse with undefined level
      ‚àö should handle show with no levelMin specified (1 ms)
      ‚àö should handle show with no levelMax specified
      ‚àö should handle show with neither levelMin nor levelMax specified (1 ms)
    Previous Entries Check
      ‚àö should return false if horse has already entered this show (1 ms)
      ‚àö should return true if horse has not entered this show
      ‚àö should return true with empty previousEntries array (6 ms)
      ‚àö should return true when previousEntries is not provided (default empty array) (1 ms)
      ‚àö should handle numeric show IDs in previousEntries
      ‚àö should handle mixed type show IDs in previousEntries (1 ms)
    Discipline Independence
      ‚àö should allow horse to enter Dressage regardless of trait (1 ms)
      ‚àö should allow horse to enter Jumping regardless of trait
      ‚àö should allow horse to enter Racing regardless of trait
      ‚àö should allow horse to enter any discipline regardless of health status (1 ms)
    Valid Entry Cases
      ‚àö should return true for completely valid entry
      ‚àö should return true for minimum age and level requirements (1 ms)
      ‚àö should return true for maximum age and level requirements (1 ms)
    Edge Cases
      ‚àö should handle show with zero as levelMin
      ‚àö should handle negative horse level (1 ms)
      ‚àö should handle very large previousEntries array (1 ms)
      ‚àö should handle show ID that is an empty string

[2026-01-28 14:23:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:49] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:49] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:49] info: [envValidator] Test environment validation complete. Success: true
PASS tests/xpLogModel.test.mjs
  üìä UNIT: XP Log Model - Experience Point Event Tracking
    logXpEvent
      ‚àö should log XP event successfully (4 ms)
      ‚àö should validate required parameters (4 ms)
      ‚àö should handle database errors (1 ms)
      ‚àö should handle negative XP amounts (1 ms)
    getUserXpEvents
      ‚àö should retrieve XP events for a user (1 ms)
      ‚àö should handle date filters (1 ms)
    getUserXpSummary
      ‚àö should calculate XP summary correctly (1 ms)
      ‚àö should handle empty results (1 ms)
      ‚àö should handle date filters in summary (1 ms)
    getRecentXpEvents
      ‚àö should retrieve recent XP events across all users (2 ms)
      ‚àö should use default options (8 ms)

[2026-01-28 14:23:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:49] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:49] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:49] info: [envValidator] Test environment validation complete. Success: true
PASS tests/data-check.test.mjs
  üîç INTEGRATION: Database Data Check - Live Data Validation & Debugging
    ‚àö should check what users exist (54 ms)
    ‚àö should check what players exist (using user table) (3 ms)
    ‚àö should check what horses exist (4 ms)

[2026-01-28 14:23:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:50] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:50] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:50] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:50] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:50] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:23:50] info: [cacheHelper] Cache statistics reset
PASS __tests__/unit/cacheHelper.test.mjs
  Cache Helper
    generateCacheKey()
      ‚àö should generate standardized keys (4 ms)
      ‚àö should handle spaces and colons in components (1 ms)
    getCachedQuery() - In-Memory Fallback
      ‚àö should execute and cache the query result (3 ms)
      ‚àö should respect TTL (1 ms)
      ‚àö should handle undefined/null results (2 ms)
    invalidateCache()
      ‚àö should remove items from cache (9 ms)

[2026-01-28 14:23:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:50] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Show Jumping
[2026-01-28 14:23:50] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2026-01-28 14:23:50] error: [trainingModel.logTrainingSession] Database error: Horse ID is required
[2026-01-28 14:23:50] error: [trainingModel.logTrainingSession] Database error: Discipline is required
[2026-01-28 14:23:50] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing
[2026-01-28 14:23:50] error: [trainingModel.logTrainingSession] Database error: Database connection failed
[2026-01-28 14:23:50] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Show Jumping
[2026-01-28 14:23:50] info: [trainingModel.getLastTrainingDate] Last training date for horse 5 in Show Jumping: Wed Jan 15 2025 05:00:00 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:23:50] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing
[2026-01-28 14:23:50] info: [trainingModel.getLastTrainingDate] No training records found for horse 5 in Racing
[2026-01-28 14:23:50] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required
[2026-01-28 14:23:50] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required
[2026-01-28 14:23:50] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing
[2026-01-28 14:23:50] error: [trainingModel.getLastTrainingDate] Database error: Database connection failed
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Getting age for horse 10
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Horse 10 is 5 years old
[2026-01-28 14:23:50] info: [trainingModel.getHorseAge] Getting age for horse 999
[2026-01-28 14:23:50] info: [trainingModel.getHorseAge] Horse 999 not found or missing dateOfBirth
[2026-01-28 14:23:50] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 14:23:50] info: [trainingModel.getHorseAge] Getting age for horse 5
[2026-01-28 14:23:50] error: [trainingModel.getHorseAge] Database error: Database connection failed
[2026-01-28 14:23:50] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing
[2026-01-28 14:23:50] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2026-01-28 14:23:50] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Show Jumping
[2026-01-28 14:23:50] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Getting age for horse 5
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Horse 5 is 2 years old
PASS tests/trainingModel.test.mjs
  üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data
    logTrainingSession
      ‚àö should log a training session with all required fields (14 ms)
      ‚àö should throw error if horseId is missing (5 ms)
      ‚àö should throw error if discipline is missing (2 ms)
      ‚àö should throw error if horseId is not a positive integer (4 ms)
      ‚àö should handle database errors gracefully (2 ms)
    getLastTrainingDate
      ‚àö should return the most recent training date for horse and discipline (3 ms)
      ‚àö should return null if no training records found (2 ms)
      ‚àö should throw error if horseId is not a positive integer (8 ms)
      ‚àö should throw error if discipline is missing (3 ms)
      ‚àö should handle database errors gracefully (2 ms)
    getHorseAge
      ‚àö should return horse age from database (3 ms)
      ‚àö should return null if horse not found (2 ms)
      ‚àö should throw error if horseId is not a positive integer (3 ms)
      ‚àö should handle database errors gracefully (2 ms)
    Integration scenarios
      ‚àö should handle multiple training sessions for same horse different disciplines (3 ms)
      ‚àö should validate horse age before allowing training (1 ms)

[2026-01-28 14:23:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Base Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Base Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 3.1% modifier, 2.1 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 3.1% modifier, 2.1 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Bold Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Nervous Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 6.7 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Legendary Horse: 1 traits applied, 10.0% modifier, 6.7 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Regular Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.4% modifier, 12.3 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.4% modifier, 12.3 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -15.6 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -15.6 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.5% modifier, 9.9 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.5% modifier, 9.9 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -9.9 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -10.4% modifier, -9.9 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 9.5% modifier, 6.4 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 9.5% modifier, 6.4 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -8.9 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -8.9 point adjustment
[2026-01-28 14:23:50] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 13.5% modifier, 9.0 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 13.5% modifier, 9.0 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 5 traits applied, 16.4% modifier, 11.0 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Base Horse: 5 traits applied, 16.4% modifier, 11.0 point adjustment
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:23:50] warn: [traitCompetitionImpact] Unknown trait: unknown_trait
[2026-01-28 14:23:50] warn: [traitCompetitionImpact] Unknown trait: another_unknown
[2026-01-28 14:23:50] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:23:50] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
PASS tests/integration/competitionWithTraits.test.mjs
  Competition Simulation with Trait Impact
    Single Horse Competition
      ‚àö should simulate competition without traits (5 ms)
      ‚àö should apply positive trait bonuses (11 ms)
      ‚àö should apply negative trait penalties (3 ms)
      ‚àö should handle mixed traits correctly (2 ms)
    Multi-Horse Competition
      ‚àö should rank horses correctly with trait differences (4 ms)
      ‚àö should handle legendary traits appropriately (9 ms)
    Discipline-Specific Effects
      ‚àö should apply correct trait effects for Dressage (5 ms)
      ‚àö should apply correct trait effects for Racing (4 ms)
      ‚àö should apply correct trait effects for Cross Country (4 ms)
    Balance and Fairness
      ‚àö should not allow traits to completely dominate base stats (3 ms)
      ‚àö should apply diminishing returns for trait stacking (7 ms)
    Error Handling
      ‚àö should handle horses with malformed trait data
      ‚àö should handle unknown traits gracefully (4 ms)

[2026-01-28 14:23:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:50] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomBondingSystem.test.mjs
  Groom Bonding & Burnout Prevention System
    Bond Score Mechanics
      ‚àö should start horses with bond score of 0 (3 ms)
      ‚àö should increase bond score by +2 for eligible grooming tasks (1 ms)
      ‚àö should cap bond score at maximum of 100 (1 ms)
      ‚àö should not increase bond score beyond 100 (1 ms)
    Eligible Grooming Tasks
      ‚àö should recognize brushing as eligible task (1 ms)
      ‚àö should recognize hand-walking as eligible task (1 ms)
      ‚àö should recognize stall_care as eligible task
      ‚àö should reject non-eligible tasks for bonding
    Age Restrictions
      ‚àö should allow grooming for horses 3+ years old (1 ms)
      ‚àö should reject adult grooming tasks for horses under 3 years old
      ‚àö should allow enrichment tasks for horses under 3 years old
    Consecutive Day Tracking
      ‚àö should increment consecutive days for daily grooming
      ‚àö should reset consecutive days to 0 after 2+ day lapse (1 ms)
      ‚àö should maintain consecutive days for 1-day lapse (7 ms)
    Burnout Immunity System
      ‚àö should grant immunity after 7 consecutive days (1 ms)
      ‚àö should maintain none status for less than 7 days (1 ms)
      ‚àö should reset immunity status when consecutive days reset

[2026-01-28 14:23:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:51] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLoggingSystem.test.mjs
  Foal Task Logging & Streak Tracking System
    Task Category Configuration
      ‚àö should have foal enrichment tasks defined (3 ms)
      ‚àö should have foal grooming tasks defined (3 ms)
      ‚àö should have general grooming tasks defined (1 ms)
      ‚àö should have proper age thresholds configured (1 ms)
    Age-Based Task Eligibility
      ‚àö should allow only enrichment tasks for 0-2 year olds (1 ms)
      ‚àö should allow both enrichment and grooming tasks for 1-3 year olds (1 ms)
      ‚àö should allow all task types for 3+ year olds (1 ms)
    Task Categorization
      ‚àö should correctly categorize enrichment tasks (1 ms)
      ‚àö should correctly categorize grooming tasks (1 ms)
      ‚àö should return null for unknown tasks (1 ms)
    Task Logging System
      ‚àö should initialize empty task log (1 ms)
      ‚àö should increment existing task count (7 ms)
      ‚àö should add new task to existing log
      ‚àö should handle empty object task log
    Streak Tracking System
      ‚àö should start new streak for first grooming
      ‚àö should increment streak for consecutive days
      ‚àö should maintain streak within grace period (1 ms)
      ‚àö should reset streak after grace period expires (2 ms)
      ‚àö should detect bonus eligibility at 7 consecutive days (1 ms)
    Task Mutual Exclusivity
      ‚àö should allow first task of the day (1 ms)
      ‚àö should prevent mixing enrichment and grooming tasks same day (1 ms)
      ‚àö should allow same category tasks (if other rules permit) (1 ms)

[2026-01-28 14:23:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:51] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)
[2026-01-28 14:23:51] info: [competitionRewards.calculateStatGains] 2nd place winner gained +1 balance (5% chance)
[2026-01-28 14:23:51] info: [competitionRewards.calculateStatGains] 3rd place winner gained +1 precision (3% chance)
[2026-01-28 14:23:51] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)
[2026-01-28 14:23:51] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 stamina (10% chance)
[2026-01-28 14:23:51] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 focus (10% chance)
PASS tests/competitionRewards.test.mjs
  üèÜ UNIT: Competition Rewards System - Prize & Stat Gain Calculations
    calculatePrizeDistribution
      ‚àö should calculate correct prize distribution for 1000 prize pool (2 ms)
      ‚àö should handle odd prize amounts with rounding (1 ms)
      ‚àö should handle small prize amounts (1 ms)
      ‚àö should handle zero prize pool (1 ms)
    getRelevantStats
      ‚àö should return correct stats for Racing discipline (1 ms)
      ‚àö should return correct stats for Show Jumping discipline (1 ms)
      ‚àö should return correct stats for Dressage discipline (1 ms)
      ‚àö should return default stats for unknown discipline (1 ms)
      ‚àö should handle all supported disciplines (10 ms)
    calculateStatGains
      ‚àö should grant stat gain for 1st place with 10% chance (lucky roll) (2 ms)
      ‚àö should not grant stat gain for 1st place with unlucky roll (1 ms)
      ‚àö should grant stat gain for 2nd place with 5% chance (lucky roll) (2 ms)
      ‚àö should grant stat gain for 3rd place with 3% chance (lucky roll) (2 ms)
      ‚àö should not grant stat gain for non-podium placement
      ‚àö should not grant stat gain for invalid placement (1 ms)
      ‚àö should select random stat from relevant discipline stats (4 ms)
    calculateEntryFees
      ‚àö should calculate total entry fees correctly
      ‚àö should handle zero entry fee (1 ms)
      ‚àö should handle zero entries (1 ms)
      ‚àö should handle large numbers (1 ms)
    hasValidRider
      ‚àö should return true for horse with valid rider object (1 ms)
      ‚àö should return false for horse with null rider (1 ms)
      ‚àö should return false for horse with undefined rider (1 ms)
      ‚àö should return false for horse with non-object rider
      ‚àö should return true for horse with empty object rider (1 ms)

[2026-01-28 14:23:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:51] info: [bondingModifiers] Bonding change for horse 1: 32 -> 50 (56.3% trait modifier)
[2026-01-28 14:23:51] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 0.8 (-46.7% trait modifier)
[2026-01-28 14:23:51] info: [bondingModifiers] Bonding change for horse 1: 6 -> 7.5 (25.0% trait modifier)
[2026-01-28 14:23:51] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1
[2026-01-28 14:23:51] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1
[2026-01-28 14:23:51] warn: [traitEffects.getTraitEffects] No effects defined for trait: unknown_trait
[2026-01-28 14:23:51] warn: [traitEffects.getTraitEffects] No effects defined for trait: another_unknown
[2026-01-28 14:23:51] info: [bondingModifiers] Bonding change for horse 1: 17 -> 17 (0.0% trait modifier)
[2026-01-28 14:23:51] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 1.5 (0.0% trait modifier)
[2026-01-28 14:23:51] error: [bondingModifiers] Error calculating bonding change: Unknown activity type: invalid_activity
PASS tests/traitIntegration.test.mjs
  üéÆ UNIT: Trait Integration System - Gameplay Effect Application
    Bonding Modifiers
      ‚àö should apply trait bonuses to grooming bonding (5 ms)
      ‚àö should apply trait penalties to bonding for antisocial horses (2 ms)
      ‚àö should calculate competition bonding with placement modifiers (9 ms)
    Temperament Drift Suppression
      ‚àö should suppress temperament drift for resilient horses (2 ms)
      ‚àö should allow temperament drift for horses without suppressing traits (1 ms)
      ‚àö should suppress drift completely for calm horses (2 ms)
    Trait Effects Combination
      ‚àö should combine multiple positive trait effects correctly (1 ms)
      ‚àö should combine positive and negative trait effects (1 ms)
      ‚àö should handle empty trait arrays (1 ms)
      ‚àö should handle unknown traits gracefully (2 ms)
    Competition Stress Response
      ‚àö should calculate stress impact during competition (1 ms)
      ‚àö should apply stress resistance from traits (1 ms)
    Integration Error Handling
      ‚àö should handle missing trait data gracefully (7 ms)
      ‚àö should handle malformed trait data (2 ms)
      ‚àö should handle invalid activity types gracefully (1 ms)

[2026-01-28 14:23:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:52] info: [envValidator] Test environment validation complete. Success: true
PASS tests/burnoutImmunityGracePeriod.test.mjs
  Burnout Immunity Grace Period
    Grace Period Mechanics
      ‚àö should preserve streak within 2-day grace period (3 ms)
      ‚àö should reset streak after grace period expires (2 ms)
      ‚àö should increment streak when groomed today (1 ms)
      ‚àö should handle exactly 2-day grace period boundary (1 ms)
      ‚àö should reset at 3-day lapse (beyond grace period) (1 ms)
    Burnout Immunity Achievement
      ‚àö should grant immunity at 7 consecutive days (1 ms)
      ‚àö should maintain immunity above 7 days (1 ms)
      ‚àö should show days remaining before immunity (1 ms)
      ‚àö should handle edge case at 6 days (one day before immunity) (1 ms)
    Streak Tracking Integration
      ‚àö should handle first-time grooming (2 ms)
      ‚àö should increment streak for consecutive days (6 ms)
      ‚àö should grant bonus eligibility at 7 consecutive days (1 ms)
      ‚àö should preserve streak within grace period (2 ms)
      ‚àö should reset streak beyond grace period (1 ms)
    Per-Horse Tracking
      ‚àö should demonstrate independent streak tracking per horse (1 ms)
    Configuration Validation
      ‚àö should use correct grace period configuration (1 ms)
      ‚àö should have consistent grace periods across systems (1 ms)
    Edge Cases and Error Handling
      ‚àö should handle zero consecutive days
      ‚àö should handle negative consecutive days
      ‚àö should handle very large streak numbers (1 ms)
      ‚àö should handle zero days since last grooming (1 ms)
    Real-World Scenarios
      ‚àö should handle weekend gap scenario (1 ms)
      ‚àö should handle vacation scenario (1 ms)
      ‚àö should handle immunity achievement and maintenance (1 ms)

[2026-01-28 14:23:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:52] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/carePatternAnalysis.test.mjs
  Care Pattern Analysis
    analyzeCarePatterns
      ‚àö should analyze patterns for eligible horse (5 ms)
      ‚àö should reject horse too old for evaluation (2 ms)
      ‚àö should throw error for non-existent horse (2 ms)
      ‚àö should analyze consistent care patterns (2 ms)
      ‚àö should analyze novelty exposure patterns (8 ms)
      ‚àö should analyze stress management patterns (1 ms)
      ‚àö should analyze bonding patterns (1 ms)
      ‚àö should analyze neglect patterns (1 ms)
      ‚àö should analyze environmental factors (1 ms)
    Edge Cases
      ‚àö should handle horse with no interactions (1 ms)
      ‚àö should handle database errors gracefully (2 ms)
      ‚àö should handle invalid evaluation date (1 ms)

[2026-01-28 14:23:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:52] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomSystem.test.mjs
  üë©‚Äçüîß UNIT: Groom System - Foal Care Assignment & Management
    assignGroomToFoal
      ‚àö should assign groom to foal successfully (4 ms)
      ‚àö should throw error when foal not found (3 ms)
      ‚àö should throw error when groom not found (1 ms)
      ‚àö should throw error when groom is not active (1 ms)
      ‚àö should throw error when groom already assigned (1 ms)
      ‚àö should deactivate existing primary assignments when assigning new primary (1 ms)
    ensureDefaultGroomAssignment
      ‚àö should return existing assignment if one exists (1 ms)
      ‚àö should create default assignment if none exists (8 ms)
    calculateGroomInteractionEffects
      ‚àö should calculate bonding and stress effects correctly (3 ms)
      ‚àö should apply specialty modifiers correctly (1 ms)
      ‚àö should apply skill level modifiers correctly (1 ms)
      ‚àö should apply experience bonus correctly (1 ms)
      ‚àö should scale effects with duration (1 ms)
    System Constants
      ‚àö should have all required groom specialties (2 ms)
      ‚àö should have all required skill levels (2 ms)
      ‚àö should have all required personality traits (2 ms)
    hasAlreadyCompletedFoalTaskToday
      ‚àö should return false when foal has no daily task record (2 ms)
      ‚àö should return false when foal has empty daily task record
      ‚àö should return false when foal has no tasks for today (1 ms)
      ‚àö should return false when foal has empty task array for today (6 ms)
      ‚àö should return true when foal has completed enrichment task today (1 ms)
      ‚àö should return true when foal has completed grooming task today (1 ms)
      ‚àö should return true when foal has completed multiple tasks today
      ‚àö should return false when foal has completed non-foal tasks today (1 ms)
      ‚àö should return true when foal has mixed tasks including foal tasks today (1 ms)
      ‚àö should test all enrichment tasks are detected (1 ms)
      ‚àö should test all grooming tasks are detected (1 ms)
      ‚àö should handle edge cases gracefully (1 ms)
    Error Handling
      ‚àö should handle database errors gracefully (3 ms)
      ‚àö should handle invalid groom data in calculations (1 ms)

[2026-01-28 14:23:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:53] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitMetadataValidation.test.mjs
  Trait Metadata Validation
    Required Trait Structure
      ‚àö should have complete metadata for confident (6 ms)
      ‚àö should have complete metadata for resilient (2 ms)
      ‚àö should have complete metadata for presentationBoosted (2 ms)
      ‚àö should have complete metadata for bonded (1 ms)
      ‚àö should have complete metadata for fearful (1 ms)
      ‚àö should have complete metadata for easilyOverwhelmed (1 ms)
    Trait Categories
      ‚àö should have epigenetic traits (1 ms)
      ‚àö should have bond traits
      ‚àö should have situational traits
      ‚àö should categorize all traits correctly
    Trait Descriptions
      ‚àö should have proper description format for confident trait
      ‚àö should have proper description format for resilient trait
      ‚àö should have proper description format for presentationBoosted trait (1 ms)
      ‚àö should have proper description format for bonded trait (1 ms)
      ‚àö should have proper description format for fearful trait (1 ms)
      ‚àö should have proper description format for easilyOverwhelmed trait (1 ms)
      ‚àö should have descriptions for all traits (10 ms)
    Trait Conflicts
      ‚àö should have bidirectional conflicts (6 ms)
      ‚àö should validate specific conflict relationships (1 ms)
      ‚àö should not have self-conflicts (2 ms)
    Task Influence Map Integration
      ‚àö should have all traits referenced in task influence map (6 ms)
      ‚àö should validate specific task-trait mappings
      ‚àö should have valid daily values for all tasks (5 ms)
    Trait Type Distribution
      ‚àö should have balanced positive and negative traits (1 ms)
      ‚àö should have appropriate rarity distribution (2 ms)
    Foal Development Integration
      ‚àö should support foal milestone evaluation traits (1 ms)
      ‚àö should support presentation and show traits (1 ms)
    Error Handling
      ‚àö should handle invalid trait names gracefully (1 ms)
      ‚àö should handle empty category queries (2 ms)

[2026-01-28 14:23:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:23:54] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:23:54] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:23:54] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/simulateCompetition.test.mjs
  üèá UNIT: Competition Simulation System - Horse Performance & Ranking
    getStatScore
      ‚àö should calculate correct weighted score for Racing discipline (3 ms)
      ‚àö should calculate correct weighted score for Show Jumping discipline (1 ms)
      ‚àö should handle missing stats by defaulting to 0 (1 ms)
      ‚àö should throw error for invalid discipline (4 ms)
      ‚àö should throw error for missing horse object (1 ms)
    getHealthModifier
      ‚àö should return correct modifiers for all health ratings (1 ms)
      ‚àö should return 0 for unknown health rating (1 ms)
    applyRiderModifiers
      ‚àö should apply bonus correctly (1 ms)
      ‚àö should apply penalty correctly (1 ms)
      ‚àö should apply both bonus and penalty (1 ms)
      ‚àö should handle default values
      ‚àö should validate input ranges (10 ms)
    simulateCompetition
      ‚àö should simulate competition with 5 horses and return correct rankings (4 ms)
      ‚àö should calculate discipline affinity trait bonus correctly (60 ms)
      ‚àö should handle horses with missing optional fields (1 ms)
      ‚àö should handle empty horse array (5 ms)
      ‚àö should validate inputs (2 ms)
      ‚àö should handle calculation errors gracefully (1 ms)
      ‚àö should verify complete scoring formula with random luck modifier (3 ms)
      ‚àö should apply random luck modifier causing score variation (1 ms)

[2026-01-28 14:23:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty, age_match
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying firm personality effects for task hand_walking
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied firm effects: task_specialty, trait_match
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying high_energy personality effects for task obstacle_course
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied high_energy effects: task_specialty, extra_trait_points
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying aloof personality effects for task brushing
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied aloof effects: 
[2026-01-28 14:23:54] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: unknown_personality
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:23:54] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match
PASS tests/groomPersonalityEffects.test.mjs
  Groom Personality Effects System
    GROOM_PERSONALITY_EFFECTS Configuration
      ‚àö should have all required personality types defined (7 ms)
      ‚àö should have correct gentle personality configuration (1 ms)
      ‚àö should have correct aloof personality penalty configuration (2 ms)
    calculatePersonalityEffects
      ‚àö should apply gentle personality effects for nervous horse with brushing (8 ms)
      ‚àö should apply playful personality effects for young horse (2 ms)
      ‚àö should apply firm personality effects for stubborn horse (3 ms)
      ‚àö should apply patient personality effects for enrichment tasks (2 ms)
      ‚àö should apply high_energy personality effects with extra trait points (3 ms)
      ‚àö should apply aloof personality penalties (2 ms)
      ‚àö should handle unknown personality gracefully (2 ms)
      ‚àö should not exceed maximum success rate of 0.99 (3 ms)
    getPersonalityEffectSummary
      ‚àö should return correct summary for gentle personality with bonus task (4 ms)
      ‚àö should return correct summary for personality without task bonus (1 ms)
      ‚àö should handle unknown personality type (1 ms)
    getAllPersonalityTypes
      ‚àö should return all personality types with correct structure (3 ms)
      ‚àö should correctly identify penalty personalities (1 ms)
    Edge Cases and Error Handling
      ‚àö should handle horse without traits (3 ms)
      ‚àö should handle missing age information (3 ms)
      ‚àö should handle empty base effects object (2 ms)

[2026-01-28 14:23:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:54] info: [envValidator] Test environment validation complete. Success: true
PASS tests/utils/groomBondingSystem.comprehensive.test.mjs
  ü§ù COMPREHENSIVE: Groom Bonding System & Task Eligibility
    Age-Based Task Eligibility
      ‚àö should return enrichment tasks for newborn foals (0-2 years) (2 ms)
      ‚àö should return appropriate tasks for young foals (1-2 years) (2 ms)
      ‚àö should return grooming tasks for yearlings (1-2 years) (8 ms)
      ‚àö should return general tasks for mature horses (3+ years) (2 ms)
      ‚àö should handle age boundary conditions correctly (1 ms)
    Grooming Eligibility Validation
      ‚àö should validate eligibility for young foal enrichment (2 ms)
      ‚àö should validate eligibility for yearling grooming
      ‚àö should validate eligibility for mature horse general care
      ‚àö should reject inappropriate tasks for age groups (2 ms)
      ‚àö should handle edge cases in age validation (1 ms)
    Bonding Effect Calculations
      ‚àö should calculate bonding effects for grooming tasks (1 ms)
      ‚àö should calculate bonding effects for non-grooming tasks (1 ms)
      ‚àö should handle maximum bonding score scenarios (1 ms)
      ‚àö should handle minimum bonding score scenarios
    Task Categorization
      ‚àö should categorize enrichment tasks correctly (1 ms)
      ‚àö should categorize grooming tasks correctly (6 ms)
      ‚àö should categorize general care tasks correctly
      ‚àö should handle unknown task types (1 ms)
    Age Group Descriptions
      ‚àö should provide correct descriptions for different age groups (2 ms)
      ‚àö should handle boundary ages consistently (1 ms)
    Input Validation and Error Handling
      ‚àö should handle invalid age values gracefully (1 ms)
      ‚àö should handle missing horse data gracefully (1 ms)
      ‚àö should handle invalid bonding calculation data
      ‚àö should handle null and undefined inputs (1 ms)
    System Integration Scenarios
      ‚àö should provide consistent results across related functions (2 ms)
      ‚àö should maintain logical progression through age groups (1 ms)

[2026-01-28 14:23:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:55] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModel.test.mjs
  üêé UNIT: Horse Model - Discipline Score Management
    updateDisciplineScore
      ‚àö should update discipline score for existing horse (4 ms)
      ‚àö should add to existing discipline score (1 ms)
      ‚àö should handle multiple disciplines independently (2 ms)
      ‚àö should throw error for invalid horse ID (4 ms)
      ‚àö should throw error for non-existent horse (1 ms)
      ‚àö should throw error for invalid discipline (1 ms)
      ‚àö should throw error for invalid points (2 ms)
    getDisciplineScores
      ‚àö should return empty object for horse with no scores (9 ms)
      ‚àö should return discipline scores for horse with scores (1 ms)
      ‚àö should throw error for invalid horse ID (2 ms)
      ‚àö should throw error for non-existent horse (1 ms)

[2026-01-28 14:23:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:55] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:55] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1
[2026-01-28 14:23:55] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1
PASS tests/ultraRareTraitsCore.test.mjs
  Ultra-Rare & Exotic Traits Core Functionality
    Trait Definitions System
      ‚àö should retrieve all ultra-rare trait definitions (3 ms)
      ‚àö should retrieve all exotic trait definitions (1 ms)
      ‚àö should get specific trait definition by name (1 ms)
      ‚àö should have correct trait structure for all ultra-rare traits (4 ms)
      ‚àö should have correct trait structure for all exotic traits (7 ms)
    Groom Perk System
      ‚àö should apply rare trait booster effects to probability calculations (3 ms)
      ‚àö should not apply bonuses when no conditions are met (2 ms)
    Mechanical Effects Integration
      ‚àö should apply ultra-rare stress effects correctly (1 ms)
      ‚àö should apply ultra-rare competition effects correctly (1 ms)
      ‚àö should check ultra-rare abilities correctly (1 ms)
      ‚àö should handle multiple ultra-rare traits correctly (1 ms)
      ‚àö should handle stress immunity correctly
    Trait Conflicts and Stacking
      ‚àö should define proper trait conflicts (1 ms)
      ‚àö should define proper trait stacking

[2026-01-28 14:23:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:55] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseHistory.test.mjs
  üìö UNIT: Horse History Controller - Competition History Retrieval
    getHorseHistory
      ‚àö should return horse competition history successfully (4 ms)
      ‚àö should return empty array when horse has no competition history (1 ms)
      ‚àö should handle invalid horse ID (non-numeric) (1 ms)
      ‚àö should handle invalid horse ID (negative number) (1 ms)
      ‚àö should handle invalid horse ID (zero) (1 ms)
      ‚àö should handle database errors gracefully (1 ms)
      ‚àö should properly parse stat gains JSON (1 ms)
      ‚àö should handle malformed stat gains JSON gracefully (1 ms)
      ‚àö should handle large horse ID numbers (1 ms)
      ‚àö should maintain order from database query (newest first) (1 ms)

[2026-01-28 14:23:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 3 traits
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 730
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 3 traits
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 1095
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"trusting":3,"brave":3,"nervous":-3}
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait trusting (epigenetic: false)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait brave (epigenetic: false)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_nervous (epigenetic: false)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 3 traits
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":2,"aloof":-3,"affectionate":1,"friendly":1,"playful":1,"independent":-1}
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 200
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":1,"patient":1,"aloof":-1}
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Trait bonded already exists, skipping
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:23:56] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits
PASS tests/milestoneTraitEvaluator.test.mjs
  Milestone Trait Evaluator
    evaluateTraitMilestones
      ‚àö should assign positive trait when encouraged 3+ times at age 1 (10 ms)
      ‚àö should assign resistance trait when discouraged 3+ times at age 2 (11 ms)
      ‚àö should not mark traits as epigenetic at age 3 (6 ms)
      ‚àö should calculate net trait scores correctly with mixed influences (5 ms)
      ‚àö should not evaluate if already completed for that milestone (3 ms)
      ‚àö should not evaluate if not a milestone age (1 ms)
      ‚àö should handle empty task log gracefully (4 ms)
      ‚àö should handle task log with unknown tasks (3 ms)
      ‚àö should prevent duplicate trait assignment (6 ms)
    calculateTraitScores
      ‚àö should calculate correct scores for single task type (1 ms)
      ‚àö should calculate net scores for mixed task types (1 ms)
      ‚àö should handle empty task log (1 ms)
      ‚àö should ignore unknown tasks (1 ms)
    checkMilestoneEligibility
      ‚àö should return eligible for milestone age without completion (1 ms)
      ‚àö should return not eligible if already evaluated (1 ms)
      ‚àö should return not eligible for non-milestone age (1 ms)
    getMilestoneSummary
      ‚àö should return correct summary for horse with completed milestones (1 ms)
      ‚àö should return correct summary for horse with all milestones complete (1 ms)
    Configuration Validation
      ‚àö should have correct milestone ages defined
      ‚àö should have correct trait thresholds defined (1 ms)
      ‚àö should have valid task trait influence map (9 ms)

[2026-01-28 14:23:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:56] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/xpLogging.test.mjs
  üìä INTEGRATION: XP Logging Integration - Experience Point Workflow
    Training XP Logging
      ‚àö should log XP event when training is successful (5 ms)
      ‚àö should log XP event with trait-modified amount (2 ms)
      ‚àö should continue training even if XP logging fails (2 ms)
      ‚àö should not log XP event if training fails (1 ms)
    Competition XP Logging
      ‚àö should log XP events for competition placements (1 ms)
      ‚àö should log different XP amounts for different placements (2 ms)

[2026-01-28 14:23:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:56] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitEvaluation.test.mjs
  üî¨ UNIT: Trait Evaluation System - Trait Revelation & Validation
    evaluateTraitRevelation
      ‚àö should evaluate traits for a foal with good bonding and low stress (4 ms)
      ‚àö should not reveal traits that do not meet age requirements (2 ms)
      ‚àö should not reveal traits that do not meet bonding requirements (1 ms)
      ‚àö should not reveal traits that do not meet stress requirements (1 ms)
      ‚àö should not reveal duplicate traits (2 ms)
      ‚àö should respect trait conflicts (1 ms)
      ‚àö should handle foals with null bond_score and stress_level (9 ms)
      ‚àö should use development age for young foals (2 ms)
      ‚àö should not reveal traits when random chance is too high (1 ms)
    getTraitDefinition
      ‚àö should return trait definition for valid trait key (2 ms)
      ‚àö should return null for invalid trait key (1 ms)
      ‚àö should find traits in all categories (1 ms)
    getAllTraitDefinitions
      ‚àö should return all trait definitions (2 ms)
      ‚àö should have consistent structure for all traits (12 ms)
    TRAIT_DEFINITIONS
      ‚àö should have valid reveal conditions for all traits (6 ms)
    TRAIT_CONFLICTS
      ‚àö should have symmetric conflicts (1 ms)
      ‚àö should only reference valid traits (5 ms)
    Error Handling
      ‚àö should handle errors gracefully (5 ms)
      ‚àö should handle missing foal properties (1 ms)

[2026-01-28 14:23:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:57] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseConformation.test.mjs
  üêé UNIT: Horse Conformation Scoring System
    Default Conformation Scores
      ‚àö should create horse with default conformation scores of 20 (4 ms)
      ‚àö should have all required conformation regions (3 ms)
    Conformation Score Validation
      ‚àö should validate conformation scores are within 1-100 range (3 ms)
      ‚àö should validate all conformation regions are present (1 ms)
    Conformation Score Updates
      ‚àö should update individual conformation scores (1 ms)
      ‚àö should handle bulk conformation updates (1 ms)
    Error Handling
      ‚àö should reject invalid conformation scores (1 ms)
      ‚àö should reject invalid conformation regions (1 ms)

[2026-01-28 14:23:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 8.5% modifier, 8.5 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -10.4 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 4.5% modifier, 4.5 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 2: 5 traits applied, 16.4% modifier, 16.4 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 10.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 5.0% modifier, 5.0 point adjustment
[2026-01-28 14:23:57] warn: [traitCompetitionImpact] Unknown trait: unknown_trait
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 7.0% modifier, 7.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -5.0% modifier, -5.0 point adjustment
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -6.0% modifier, -6.0 point adjustment
[2026-01-28 14:23:57] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline
[2026-01-28 14:23:57] info: [traitCompetitionImpact] Horse 1: 6 traits applied, 19.6% modifier, 19.6 point adjustment
PASS tests/traitCompetitionImpact.test.mjs
  üèÜ UNIT: Trait Competition Impact System - Scoring Modifier Calculations
    calculateTraitCompetitionImpact
      ‚àö should handle horse with no traits (3 ms)
      ‚àö should apply positive trait bonuses correctly (2 ms)
      ‚àö should apply negative trait penalties correctly (9 ms)
      ‚àö should apply mixed traits correctly (2 ms)
      ‚àö should apply diminishing returns for multiple traits (4 ms)
      ‚àö should handle legendary traits correctly (2 ms)
      ‚àö should handle rare environmental traits (2 ms)
      ‚àö should handle missing epigenetic_modifiers gracefully (1 ms)
      ‚àö should handle unknown traits gracefully (2 ms)
    getTraitCompetitionEffect
      ‚àö should return correct trait effect (1 ms)
      ‚àö should return null for unknown trait (5 ms)
    hasSpecializedEffect
      ‚àö should return true for specialized combinations (1 ms)
      ‚àö should return false for non-specialized combinations (1 ms)
    getAllTraitCompetitionEffects
      ‚àö should return all trait effects (2 ms)
    Discipline-Specific Effects
      ‚àö Bold should excel at Show Jumping (2 ms)
      ‚àö Intelligent should excel at Dressage (2 ms)
      ‚àö Athletic should excel at Racing (2 ms)
      ‚àö Nervous should struggle with Show Jumping (1 ms)
      ‚àö Stubborn should struggle with Dressage (1 ms)
    Balance and Fairness
      ‚àö should ensure trait effects are balanced (4 ms)
      ‚àö should not allow trait stacking to become overpowered (5 ms)

[2026-01-28 14:23:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:57] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalModel.test.mjs
  üçº UNIT: Foal Model - Foal Development & Activity Management
    getFoalDevelopment
      ‚àö should return foal development data for valid foal (4 ms)
      ‚àö should throw error for horse that is not a foal (9 ms)
      ‚àö should throw error for 2-year-old horse (boundary test) (2 ms)
      ‚àö should accept 1-year-old horse (boundary test) (1 ms)
      ‚àö should validate availableActivities are returned correctly (2 ms)
      ‚àö should filter out completed activities from available activities (1 ms)
      ‚àö should throw error for non-existent horse (1 ms)
      ‚àö should throw error for invalid foal ID (2 ms)
      ‚àö should create default development record for new foal (2 ms)
    completeActivity
      ‚àö should complete an available activity successfully (1 ms)
      ‚àö should update completedActivities correctly when completing activity (1 ms)
      ‚àö should add to existing completed activities for the same day (1 ms)
      ‚àö should enforce bonding level bounds (0-100) (1 ms)
      ‚àö should enforce stress level bounds (0-100) (1 ms)
      ‚àö should throw error for missing development record (1 ms)
      ‚àö should throw error for invalid foal ID (2 ms)
      ‚àö should throw error for missing activity type (1 ms)
      ‚àö should throw error for unavailable activity (6 ms)
    advanceDay
      ‚àö should advance foal to next day successfully (2 ms)
      ‚àö should throw error for foal that has completed development
      ‚àö should throw error for invalid foal ID (1 ms)
    completeEnrichmentActivity
      ‚àö should complete enrichment activity successfully (1 ms)
      ‚àö should validate day parameter (0-6) (1 ms)
      ‚àö should validate activity is appropriate for the day (1 ms)
      ‚àö should enforce bonding and stress bounds (0-100) (1 ms)
      ‚àö should handle null bondScore and stressLevel with defaults (1 ms)
      ‚àö should throw error for horse that is not a foal (1 ms)
    getAvailableActivities
      ‚àö should return activities for day 0 (1 ms)
      ‚àö should return different activities for different days (1 ms)
      ‚àö should filter out completed activities (1 ms)
      ‚àö should return empty array for invalid day (1 ms)
      ‚àö should handle missing completedActivities gracefully (1 ms)

[2026-01-28 14:23:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:57] info: [envValidator] Test environment validation complete. Success: true
PASS tests/enhancedCompetitionLogic.test.mjs
  üèÜ UNIT: Enhanced Competition Logic - Complete Competition System Validation
    üìä Horse Level Calculation
      ‚àö should calculate horse level correctly for Racing discipline (2 ms)
      ‚àö should handle high-level horses correctly (1 ms)
    üéÇ Age Requirements
      ‚àö should accept horses aged 3-21 (in days) (1 ms)
      ‚àö should reject horses under 3 or over 21 (in days)
    üß¨ Trait Requirements
      ‚àö should require Gaited trait for Gaited competitions (1 ms)
      ‚àö should not require special traits for most disciplines
    üìà Stat Gain System
      ‚àö should award stat gains for 1st place (10% chance) (1 ms)
      ‚àö should not award stat gains when random chance fails (1 ms)
      ‚àö should not award stat gains for 4th place or lower (1 ms)
    üèÜ Prize Distribution
      ‚àö should not award prizes to 4th place (7 ms)
    üéØ Discipline Configuration
      ‚àö should have all 24 disciplines (2 ms)
      ‚àö should have correct stats for each discipline (1 ms)
      ‚àö should have Gaited trait requirement for Gaited discipline
    üîß Error Handling
      ‚àö should handle missing horse data gracefully (1 ms)
      ‚àö should handle invalid discipline gracefully (1 ms)

[2026-01-28 14:23:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:58] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/clusterManager.test.mjs
  clusterManager
    ‚àö disables clustering by default in test env (3 ms)
    ‚àö enables clustering when explicitly enabled (1 ms)
    ‚àö uses WEB_CONCURRENCY when set (1 ms)
    ‚àö defaults to CPU count when WEB_CONCURRENCY is not set (1 ms)
    ‚àö clamps invalid worker counts to 1 (1 ms)

[2026-01-28 14:23:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:58] error: Error Test error
[2026-01-28 14:23:58] error: Error Generic error
[2026-01-28 14:23:58] error: Error Unique constraint failed
[2026-01-28 14:23:58] error: Error Record not found
[2026-01-28 14:23:58] error: Error Test error
[2026-01-28 14:23:58] error: Error Test error
[2026-01-28 14:23:58] error: Error Test error
PASS tests/middleware/errorHandler.test.mjs
  Error Handler Middleware
    ‚àö should handle AppError correctly (7 ms)
    ‚àö should handle generic errors with 500 status (2 ms)
    ‚àö should handle Prisma P2002 error (duplicate) (2 ms)
    ‚àö should handle Prisma P2025 error (not found) (2 ms)
    ‚àö should include stack trace in development mode (9 ms)
    ‚àö should not include stack trace in production mode (1 ms)
    ‚àö should handle errors without throwing (2 ms)

[2026-01-28 14:23:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:58] info: [envValidator] Test environment validation complete. Success: true
PASS tests/taskInfluenceConfig.test.mjs
  Task Influence Configuration
    Task Influence Map Structure
      ‚àö should define influence map for all foal tasks (3 ms)
      ‚àö should have entries for all enrichment tasks (3 ms)
      ‚àö should have entries for all grooming tasks (2 ms)
      ‚àö should have correct structure for each task entry (11 ms)
    Task Coverage Validation
      ‚àö should cover all enrichment tasks
      ‚àö should cover all grooming tasks (1 ms)
      ‚àö should not have entries for non-foal tasks (1 ms)
    Trait Influence Validation
      ‚àö should have logical trait mappings for enrichment tasks (2 ms)
      ‚àö should have logical trait mappings for grooming tasks (1 ms)
      ‚àö should have consistent daily values (1 ms)
      ‚àö should have unique trait combinations per task (1 ms)
    Business Rule Validation
      ‚àö should support trait point accumulation system (2 ms)
      ‚àö should have reasonable trait distribution (1 ms)
      ‚àö should support epigenetic development progression
    Integration Validation
      ‚àö should integrate with foal task categories (4 ms)
      ‚àö should provide complete task influence coverage (1 ms)
    Data Quality Validation
      ‚àö should have meaningful trait names (3 ms)
      ‚àö should maintain consistent naming conventions (2 ms)
    Utility Functions
      getTaskInfluence
        ‚àö should return influence object for valid task (1 ms)
        ‚àö should return null for invalid task
      getTraitsInfluencedByTask
        ‚àö should return traits for valid task (1 ms)
        ‚àö should return empty array for invalid task (1 ms)
        ‚àö should return copy of traits array
      getDailyTraitValue
        ‚àö should return daily value for valid task (1 ms)
        ‚àö should return 0 for invalid task (1 ms)
      getTasksInfluencingTrait
        ‚àö should return tasks that influence a specific trait
        ‚àö should return empty array for non-existent trait
        ‚àö should return all tasks for presentationBoosted trait (1 ms)
      getAllInfluencedTraits
        ‚àö should return all unique traits (1 ms)
        ‚àö should return sorted array (1 ms)
        ‚àö should return unique traits only (1 ms)
      calculateTraitPoints
        ‚àö should calculate trait points for single task (1 ms)
        ‚àö should calculate trait points for multiple tasks
        ‚àö should handle overlapping traits correctly (4 ms)
        ‚àö should ignore invalid tasks (1 ms)
        ‚àö should handle zero completions
      validateTaskInfluenceMap
        ‚àö should validate correct structure (1 ms)

[2026-01-28 14:23:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:59] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:59] info: [CSRF] Token generated
[2026-01-28 14:23:59] error: [CSRF] Token generation failed: Token generation failed
[2026-01-28 14:23:59] info: [CSRF] Token generated
[2026-01-28 14:23:59] warn: [CSRF] Invalid token detected
[2026-01-28 14:23:59] warn: [CSRF] Invalid token detected
[2026-01-28 14:23:59] warn: [CSRF] Invalid token detected
[2026-01-28 14:23:59] warn: [CSRF] Invalid token detected
[2026-01-28 14:23:59] warn: [CSRF] Invalid token detected
[2026-01-28 14:23:59] warn: [CSRF] Invalid token detected
[2026-01-28 14:23:59] info: [CSRF] Token generated
[2026-01-28 14:23:59] info: [CSRF] Token generated
[2026-01-28 14:23:59] info: [CSRF] Token generated
PASS __tests__/middleware/csrf.test.mjs
  CSRF Protection Middleware
    getCsrfToken
      ‚àö should generate and return CSRF token (13 ms)
      ‚àö should handle token generation failure (6 ms)
      ‚àö should generate token without user (unauthenticated) (2 ms)
    applyCsrfProtection
      ‚àö should apply CSRF protection to POST requests (1 ms)
      ‚àö should apply CSRF protection to PUT requests (1 ms)
      ‚àö should apply CSRF protection to DELETE requests (1 ms)
      ‚àö should apply CSRF protection to PATCH requests (1 ms)
      ‚àö should skip CSRF protection for GET requests (1 ms)
      ‚àö should skip CSRF protection for HEAD requests (1 ms)
      ‚àö should skip CSRF protection for OPTIONS requests (1 ms)
    csrfErrorHandler
      ‚àö should handle CSRF validation errors (EBADCSRFTOKEN) (2 ms)
      ‚àö should pass non-CSRF errors to next handler (1 ms)
      ‚àö should handle CSRF error without user context (8 ms)
      ‚àö should include security logging context on CSRF error (2 ms)
    Security Scenarios
      ‚àö should protect against missing CSRF token (2 ms)
      ‚àö should protect against invalid CSRF token (2 ms)
      ‚àö should provide user-friendly error message (2 ms)
    Integration with Cookie Configuration
      ‚àö getCsrfToken should work without authentication (2 ms)
      ‚àö should handle concurrent token generation (3 ms)
    HTTP Method Classification
      ‚àö should NOT require CSRF token for GET requests (1 ms)
      ‚àö should NOT require CSRF token for HEAD requests (1 ms)
      ‚àö should NOT require CSRF token for OPTIONS requests (1 ms)
      ‚àö should require CSRF token for POST requests (1 ms)
      ‚àö should require CSRF token for PUT requests (1 ms)
      ‚àö should require CSRF token for DELETE requests (1 ms)
      ‚àö should require CSRF token for PATCH requests

[2026-01-28 14:23:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:59] info: [envValidator] Test environment validation complete. Success: true
PASS tests/burnoutImmunityTraitIntegration.test.mjs
  Burnout Immunity & Trait Integration
    Complete Foal Development Workflow
      ‚àö should demonstrate full workflow from consistent care to trait rewards (13 ms)
      ‚àö should handle streak loss and recovery scenario (4 ms)
      ‚àö should demonstrate per-horse independent tracking (2 ms)
    Grace Period Edge Cases
      ‚àö should handle exactly 2-day grace period with trait evaluation (1 ms)
      ‚àö should handle 3-day gap (beyond grace period) (2 ms)
    Trait Assignment with Streak Bonuses
      ‚àö should demonstrate streak bonus impact on trait assignment (1 ms)
      ‚àö should validate trait metadata for all assigned traits (3 ms)
    Real-World Player Scenarios
      ‚àö should handle casual player with weekend-only care (1 ms)
      ‚àö should handle dedicated player with consistent daily care (1 ms)

[2026-01-28 14:23:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:23:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:23:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:23:59] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:23:59] error: ‚ùå Environment validation failed:
[2026-01-28 14:23:59] error:   - Missing required environment variable: DATABASE_URL
[2026-01-28 14:23:59] error:   - Missing required environment variable: JWT_SECRET
[2026-01-28 14:23:59] error:   - NODE_ENV must be one of: development, production, test (current: invalid)
[2026-01-28 14:23:59] error:   - PORT must be a number (current: abc)
[2026-01-28 14:23:59] error: 
Please fix the above errors in your .env file and restart.
[2026-01-28 14:23:59] info: ‚úÖ Environment validation passed
[2026-01-28 14:23:59] warn: [validateEnvironment] SECURITY WARNING: ALLOWED_ORIGINS contains HTTP URLs in production
[2026-01-28 14:23:59] warn:   HTTP origins detected: http://example.com
[2026-01-28 14:23:59] warn:   These should be HTTPS in production to prevent man-in-the-middle attacks
[2026-01-28 14:23:59] warn: [validateEnvironment] SECURITY WARNING: PORT is set to 80 (HTTP) in production
[2026-01-28 14:23:59] warn:   Consider using HTTPS (443) or a reverse proxy with HTTPS termination
[2026-01-28 14:23:59] error: ‚ùå Environment validation failed:
[2026-01-28 14:23:59] error:   - JWT_SECRET must be at least 32 characters (current: 17)
[2026-01-28 14:23:59] error:   - JWT_SECRET appears to be a placeholder value. Please generate a real secret.
[2026-01-28 14:23:59] error:   - DATABASE_URL contains a weak password. Please use a strong password.
[2026-01-28 14:23:59] error: 
Please fix the above errors in your .env file and restart.
[2026-01-28 14:23:59] info: ‚úÖ Environment validation passed
[2026-01-28 14:23:59] info: ‚úÖ Environment validation passed
PASS __tests__/unit/security/validate-environment.test.mjs
  validateEnvironment
    ‚àö throws when required envs are missing or invalid (17 ms)
    ‚àö warns about weak JWT secrets and HTTP origins in production (14 ms)
    ‚àö passes for valid configuration (3 ms)

[2026-01-28 14:24:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/constants/schema.test.mjs
  üèá UNIT: Schema Constants Validation
    Horse Sex Constants
      ‚àö should have all required horse sex values (2 ms)
      ‚àö should validate horse sex correctly (8 ms)
      ‚àö should have consistent values array (1 ms)
    Horse Temperament Constants
      ‚àö should have all required temperament values (1 ms)
      ‚àö should validate temperament correctly (2 ms)
    Competition Disciplines
      ‚àö should have all major disciplines (1 ms)
      ‚àö should validate disciplines correctly (1 ms)
      ‚àö should have comprehensive discipline list (1 ms)
    Groom Constants
      ‚àö should have all groom specialties (1 ms)
      ‚àö should validate groom specialties correctly (1 ms)
      ‚àö should have all skill levels (1 ms)
      ‚àö should validate skill levels correctly
    Age Validation
      ‚àö should validate training age correctly (1 ms)
      ‚àö should validate competition age correctly (1 ms)
      ‚àö should validate breeding age correctly (1 ms)
    Score Validation
      ‚àö should validate competition scores correctly (1 ms)
      ‚àö should validate discipline scores correctly (1 ms)
    User Progression Calculations
      ‚àö should calculate XP for levels correctly (7 ms)
      ‚àö should calculate level from XP correctly (1 ms)
      ‚àö should have consistent XP progression
    Horse Stats Validation
      ‚àö should have all required horse stats defined (2 ms)
      ‚àö should validate horse stats correctly
      ‚àö should have consistent stat object and array values (1 ms)
    Constant Integrity
      ‚àö should have no duplicate values in arrays (1 ms)
      ‚àö should have consistent object and array values (1 ms)

[2026-01-28 14:24:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/epigeneticTraits.test.mjs
  üß¨ UNIT: Epigenetic Traits System - Breeding & Environmental Trait Calculation
    Input Validation
      ‚àö should throw error for missing required parameters (6 ms)
      ‚àö should throw error for invalid trait arrays (1 ms)
      ‚àö should throw error for invalid bond scores (1 ms)
      ‚àö should throw error for out-of-range values (1 ms)
      ‚àö should accept valid input without throwing (1 ms)
    Basic Trait Inheritance
      ‚àö should inherit positive traits from both parents (2 ms)
      ‚àö should have chance to inherit each parent trait (2 ms)
      ‚àö should not inherit negative traits from positive parent traits (1 ms)
    Bonding Score Effects
      ‚àö should increase positive trait probability with high bonding (2 ms)
      ‚àö should reduce negative trait probability with high bonding (2 ms)
    Stress Level Effects
      ‚àö should increase negative trait probability with high stress (7 ms)
      ‚àö should reduce positive trait expression with high stress (3 ms)
    Hidden Trait Generation
      ‚àö should generate hidden traits based on environmental factors (1 ms)
      ‚àö should include rare traits in hidden category (1 ms)
    Complex Breeding Scenarios
      ‚àö should handle mixed positive and negative parent traits (1 ms)
      ‚àö should handle parents with no traits (1 ms)
      ‚àö should handle optimal breeding conditions (1 ms)
      ‚àö should handle poor breeding conditions
    Trait Consistency
      ‚àö should not generate contradictory traits (5 ms)
      ‚àö should maintain trait type consistency (5 ms)
    Deterministic Behavior
      ‚àö should produce consistent results with same seed (2 ms)
      ‚àö should produce different results without seed (1 ms)

[2026-01-28 14:24:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseXpSystem.test.mjs
  Horse XP System - Core Business Logic
    addXpToHorse
      ‚àö should add XP to horse and calculate available stat points correctly (5 ms)
      ‚àö should handle multiple stat points correctly (200+ XP) (9 ms)
      ‚àö should preserve existing stat points when adding XP (1 ms)
      ‚àö should handle validation errors properly (2 ms)
      ‚àö should handle horse not found error (1 ms)
    allocateStatPoint
      ‚àö should allocate stat point and decrease available points (1 ms)
      ‚àö should reject allocation when no stat points available (1 ms)
      ‚àö should validate stat names properly (1 ms)
      ‚àö should handle all valid stat names (2 ms)
    getHorseXpHistory
      ‚àö should retrieve horse XP events with proper filtering (1 ms)
  Horse XP System - Integration with Competition System
    Competition XP Awards
      ‚àö should award horse XP based on competition performance (1 ms)

[2026-01-28 14:24:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:01] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModelTraitHelpers.test.mjs
  üê¥ UNIT: Horse Model Trait Helpers - Utility Function Validation
    trait addition
      ‚àö should add a trait to the correct category if not present (3 ms)
      ‚àö should not add a duplicate trait (1 ms)
    trait removal
      ‚àö should remove a trait from the correct category (1 ms)
      ‚àö should handle removal of a non-existent trait gracefully (1 ms)
    getAllTraits utility
      ‚àö should return a flattened array of all traits (1 ms)
      ‚àö should handle empty trait categories (8 ms)

[2026-01-28 14:24:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:01] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:24:01] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait
[2026-01-28 14:24:01] warn: [traitEffects.getTraitEffects] Invalid trait name: null
[2026-01-28 14:24:01] warn: [traitEffects.getTraitEffects] Invalid trait name: undefined
[2026-01-28 14:24:01] warn: [traitEffects.getTraitEffects] Invalid trait name: 
[2026-01-28 14:24:01] warn: [traitEffects.getTraitEffects] Invalid trait name: 123
[2026-01-28 14:24:01] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait
[2026-01-28 14:24:01] warn: [traitEffects.getCombinedTraitEffects] Invalid trait names array
[2026-01-28 14:24:01] warn: [traitEffects.getTraitEffects] No effects defined for trait: invalid_trait
PASS tests/traitEffects.test.mjs
  üé≠ UNIT: Trait Effects System - Trait Impact Calculation & Combination
    getTraitEffects
      ‚àö should return effects for valid trait (2 ms)
      ‚àö should return null for invalid trait (2 ms)
      ‚àö should return null for invalid input (4 ms)
    hasTraitEffect
      ‚àö should return true for existing effect (1 ms)
      ‚àö should return false for non-existing effect (2 ms)
    getCombinedTraitEffects
      ‚àö should combine multiple trait effects correctly (1 ms)
      ‚àö should handle numeric modifiers additively (1 ms)
      ‚àö should handle boolean effects correctly
      ‚àö should merge object effects correctly (1 ms)
      ‚àö should handle empty array (6 ms)
      ‚àö should handle invalid input (2 ms)
      ‚àö should ignore invalid trait names (1 ms)
    Positive Traits
      ‚àö resilient trait should have correct effects (2 ms)
      ‚àö intelligent trait should have correct effects
      ‚àö athletic trait should have correct effects
    Negative Traits
      ‚àö nervous trait should have correct penalties (1 ms)
      ‚àö lazy trait should have correct penalties (1 ms)
      ‚àö burnout trait should have severe penalties (1 ms)
    Rare Traits
      ‚àö legendary_bloodline trait should have powerful effects (1 ms)
    Discipline-Specific Modifiers
      ‚àö should have appropriate discipline bonuses for positive traits (1 ms)
      ‚àö should have appropriate discipline penalties for negative traits (1 ms)
    getAllTraitEffects
      ‚àö should return complete trait effects mapping (1 ms)
      ‚àö should include all expected trait categories (1 ms)

[2026-01-28 14:24:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:01] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModelAtBirth.test.mjs
  üê¥ UNIT: Horse Model At-Birth Traits - Creation Integration Testing
    createHorse with at-birth traits
      ‚àö should apply at-birth traits for newborn with parents (5 ms)
      ‚àö should pass custom mare stress and feed quality (1 ms)
      ‚àö should merge at-birth traits with existing traits (2 ms)
      ‚àö should not apply at-birth traits for older horses (2 ms)
      ‚àö should not apply at-birth traits for horses without parents (1 ms)
      ‚àö should continue horse creation even if at-birth trait application fails (1 ms)
      ‚àö should handle missing sireId gracefully (8 ms)
      ‚àö should handle missing damId gracefully (1 ms)
      ‚àö should log breeding analysis information (1 ms)

[2026-01-28 14:24:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:01] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/security/session-management.test.mjs
  sessionManagement middleware
    sessionTimeout
      ‚àö allows when no session (3 ms)
      ‚àö blocks expired session (1 ms)
      ‚àö refreshes active session (1 ms)
    sessionConcurrencyLimit
      ‚àö allows when no limit set (1 ms)
      ‚àö blocks when concurrency exceeded (2 ms)
    sessionCleanup
      ‚àö removes expired sessions and continues (1 ms)

[2026-01-28 14:24:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:02] info: [envValidator] Test environment validation complete. Success: true
PASS tests/lineageTraitCheck.test.mjs
  üß¨ UNIT: Lineage Trait Check - Discipline Affinity Analysis
    checkLineageForDisciplineAffinity
      ‚àö should return affinity true when 3 or more ancestors share the same discipline (4 ms)
      ‚àö should return affinity false when less than 3 ancestors share the same discipline (2 ms)
      ‚àö should handle empty ancestors array (1 ms)
      ‚àö should handle null ancestors (1 ms)
      ‚àö should handle ancestors without discipline information (2 ms)
      ‚àö should handle exactly 3 ancestors with same discipline (1 ms)
      ‚àö should handle more than 3 ancestors with same discipline
    getAncestorPreferredDiscipline
      ‚àö should prioritize direct discipline field (8 ms)
      ‚àö should use competition history when no direct discipline (1 ms)
      ‚àö should use discipline scores when no competition history (1 ms)
      ‚àö should use competitions field as alternative to competitionHistory (1 ms)
      ‚àö should use specialty field as fallback (1 ms)
      ‚àö should return null when no discipline information available (1 ms)
    checkLineageForDisciplineAffinityDetailed
      ‚àö should provide detailed analysis with affinity (2 ms)
      ‚àö should provide detailed analysis without affinity (1 ms)
      ‚àö should handle empty ancestors array (2 ms)
    checkSpecificDisciplineAffinity
      ‚àö should check for specific discipline affinity with default minimum (1 ms)
      ‚àö should check for specific discipline affinity with custom minimum (1 ms)
      ‚àö should return false when not enough ancestors match (1 ms)
      ‚àö should handle empty ancestors or missing target discipline (1 ms)
    getMostCommonDisciplineFromHistory
      ‚àö should return the most common discipline (1 ms)
      ‚àö should handle empty or null history (1 ms)
      ‚àö should handle competitions without discipline field (1 ms)
    getHighestScoringDiscipline
      ‚àö should return the highest scoring discipline
      ‚àö should handle empty or null scores
      ‚àö should handle non-numeric scores (1 ms)
      ‚àö should return null when all scores are non-numeric (6 ms)
    error handling
      ‚àö should handle errors gracefully in main function (1 ms)
      ‚àö should handle errors gracefully in detailed function (1 ms)
      ‚àö should handle errors gracefully in specific discipline check (1 ms)
      ‚àö should handle undefined ancestors gracefully (1 ms)
      ‚àö should handle ancestors with circular references gracefully

[2026-01-28 14:24:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:02] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomAgeRestrictions.test.mjs
  Groom Age Restrictions & Task Eligibility
    Configuration Values
      ‚àö should allow grooms to work with foals from birth (2 ms)
      ‚àö should define adult horse age threshold at 3 years (1 ms)
      ‚àö should have foal enrichment tasks defined (1 ms)
      ‚àö should have adult grooming tasks defined (2 ms)
    Foal Enrichment Task Eligibility (0-2 years)
      ‚àö should allow newborn foal (0 days) to receive enrichment tasks (1 ms)
      ‚àö should allow 1-week-old foal (7 days) to receive enrichment tasks (1 ms)
      ‚àö should allow 1-year-old horse (365 days) to receive enrichment tasks (1 ms)
      ‚àö should allow 2.9-year-old horse (1059 days) to receive enrichment tasks (1 ms)
    Adult Horse Grooming Task Eligibility (3+ years)
      ‚àö should allow exactly 3-year-old horse (1095 days) to receive adult grooming tasks (1 ms)
      ‚àö should allow 5-year-old horse (1825 days) to receive adult grooming tasks (1 ms)
      ‚àö should allow senior horse (10+ years) to receive adult grooming tasks (1 ms)
    Task Type Validation
      ‚àö should reject invalid task types for any age (1 ms)
      ‚àö should provide list of eligible tasks when task is invalid (1 ms)
    Age Boundary Conditions
      ‚àö should handle exactly 3 years (1095 days) as adult threshold (6 ms)
      ‚àö should handle day before 3rd birthday (20 days) (1 ms)
    Edge Cases
      ‚àö should handle negative age gracefully (1 ms)
      ‚àö should handle very old horses (20+ years)

[2026-01-28 14:24:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:02] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/user.test.mjs
  User Integration Tests - Mocked Database
    User Retrieval from Seeded Data
      ‚àö should retrieve the seeded user by ID (10 ms)
      ‚àö should retrieve the seeded user by email (1 ms)
      ‚àö should return null for non-existent user (1 ms)
    User with Horses Relationship
      ‚àö should retrieve user with their 2 horses (2 ms)
      ‚àö should include breed information for horses (1 ms)
    JSON Settings Field
      ‚àö should confirm JSON settings field exists and includes darkMode = true (1 ms)
    Database Constraints
      ‚àö should confirm unique email constraint (1 ms)

[2026-01-28 14:24:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:03] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/groomRoutes.test.mjs
  Groom Routes Integration Tests
    ‚àö should pass basic test (2 ms)
    ‚àö should test groom system constants (1 ms)
    ‚àö should validate interaction types (1 ms)
    ‚àö should validate duration ranges (1 ms)
    ‚àö should validate session rate ranges (1 ms)

[2026-01-28 14:24:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:24:03] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:24:03] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:24:03] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:24:03] info: [simulateCompetition] Horse TraitHorse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:24:03] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:24:03] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:24:03] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:24:03] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:24:03] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:24:03] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:24:03] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:24:03] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:24:03] info: [simulateCompetition] Horse Cross CountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:24:03] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:24:03] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:24:03] info: [simulateCompetition] Horse EnduranceSpecialist: Discipline affinity bonus applied for discipline_affinity_endurance (+5 points)
[2026-01-28 14:24:03] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_endurance
[2026-01-28 14:24:03] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:24:03] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:24:03] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/task9IntegrationExample.test.mjs
  üèÜ INTEGRATION: Task 9 Integration Example - Discipline Affinity Trait Bonus
    ‚àö should apply +5 flat bonus for discipline_affinity_jump trait in Show Jumping (7 ms)
    ‚àö should demonstrate the exact code pattern from TASK 9 specification (11 ms)
    ‚àö should work with different discipline types and their corresponding traits (10 ms)
    ‚àö should not apply bonus when trait does not match discipline (3 ms)

[2026-01-28 14:24:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:03] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogManager.test.mjs
  Foal Task Log Manager
    Task Log Initialization and Manipulation
      ‚àö should initialize empty task log (3 ms)
      ‚àö should increment task count for new task (1 ms)
      ‚àö should increment existing task count (2 ms)
      ‚àö should increment by custom amount (1 ms)
      ‚àö should handle null task log (8 ms)
      ‚àö should get task count for existing task (1 ms)
      ‚àö should return 0 for non-existent task (1 ms)
      ‚àö should handle null task log in getTaskCount (1 ms)
    Task Log Statistics
      ‚àö should calculate total task count (1 ms)
      ‚àö should handle empty task log in total count (1 ms)
      ‚àö should ignore non-numeric values in total count (1 ms)
      ‚àö should get completed tasks list (1 ms)
      ‚àö should handle empty task log in completed tasks (1 ms)
    Streak Calculation
      ‚àö should handle null last care date (1 ms)
      ‚àö should calculate same day care (1 ms)
      ‚àö should calculate within grace period (1 ms)
      ‚àö should detect broken streak beyond grace period (1 ms)
      ‚àö should use custom grace period (8 ms)
    Burnout Immunity
      ‚àö should grant immunity after 7 days (1 ms)
      ‚àö should not grant immunity before 7 days (1 ms)
      ‚àö should handle invalid input (1 ms)
      ‚àö should use custom immunity threshold (1 ms)
    Care Data Updates
      ‚àö should update foal care data with new task (1 ms)
      ‚àö should continue streak within grace period (1 ms)
      ‚àö should reset streak when broken (1 ms)
    Task Log Validation
      ‚àö should validate correct task log (1 ms)
      ‚àö should allow null task log
      ‚àö should reject non-object task log (1 ms)
      ‚àö should reject invalid task names (1 ms)
      ‚àö should reject invalid counts (1 ms)
    Care Summary
      ‚àö should generate comprehensive care summary (1 ms)
      ‚àö should handle empty foal data (1 ms)
    Streak Reset
      ‚àö should reset foal care streak (2 ms)
    Error Handling
      ‚àö should handle errors in incrementTaskCount (5 ms)
      ‚àö should handle errors in calculateStreakFromLastCareDate (1 ms)

[2026-01-28 14:24:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:04] info: [envValidator] Test environment validation complete. Success: true
PASS tests/training-fixed.test.mjs
  Training Fixed Tests
    ‚àö should be a placeholder test (2 ms)

[2026-01-28 14:24:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:04] info: [envValidator] Test environment validation complete. Success: true
PASS tests/generateMockShows.test.mjs
  üé™ UNIT: Generate Mock Shows - Competition Data Generation Utilities
    generateMockShows
      ‚àö should generate the correct number of shows (3 ms)
      ‚àö should generate default 10 shows when no count provided (9 ms)
      ‚àö should generate 0 shows when count is 0 (1 ms)
      ‚àö should throw error for negative count (4 ms)
      ‚àö should throw error for non-number count (1 ms)
      ‚àö should generate shows with all required properties (3 ms)
      ‚àö should generate unique sequential IDs (1 ms)
      ‚àö should use only valid disciplines (2 ms)
      ‚àö should generate realistic show names (4 ms)
      ‚àö should respect level constraints (9 ms)
      ‚àö should respect entry fee range (100-500) (2 ms)
      ‚àö should respect prize range (500-2000) (6 ms)
      ‚àö should generate run dates within ¬±30 days of today (3 ms)
      ‚àö should generate variety in disciplines across multiple shows
      ‚àö should generate variety in show names
    generateSingleMockShow
      ‚àö should generate a single show with default properties (1 ms)
      ‚àö should allow overriding specific properties (1 ms)
      ‚àö should maintain constraints for non-overridden properties (1 ms)
    Integration with statMap
      ‚àö should only use disciplines that exist in statMap (2 ms)
      ‚àö should eventually use most available disciplines with enough shows (1 ms)

[2026-01-28 14:24:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:24:04] info: [ownership] Validated ownership: user user-1 owns horse 1
[2026-01-28 14:24:04] info: [ownership] Validated ownership: user user-1 owns groom 5
[2026-01-28 14:24:04] info: [ownership] Validated ownership: user user-1 owns horse 10
[2026-01-28 14:24:04] info: [ownership] Validated ownership: user user-1 owns horse 20
[2026-01-28 14:24:04] warn: [ownership] horse 1 not found or not owned by user user-1
[2026-01-28 14:24:04] warn: [ownership] groom 5 not found or not owned by user user-1
[2026-01-28 14:24:04] info: [ownership] Validated ownership: user user-1 owns training-session 1
[2026-01-28 14:24:04] info: [ownership] Validated ownership: user user-1 owns competition-entry 1
[2026-01-28 14:24:04] info: [ownership] Found owned horse 1 for user user-1
[2026-01-28 14:24:04] info: [ownership] Found owned groom 5 for user user-1
[2026-01-28 14:24:04] info: [ownership] Batch validation: user user-1 owns 2/2 horses
PASS __tests__/unit/security/ownership-checks.test.mjs
  Ownership Validation Unit Tests
    Owned Resource Scenarios
      ‚àö should allow access to owned horse (5 ms)
      ‚àö should allow access to owned groom (9 ms)
      ‚àö should attach resource to request object and validatedResources (3 ms)
      ‚àö should work with custom idParam (2 ms)
    Not Owned Resource Scenarios
      ‚àö should return 404 for horse owned by different user (2 ms)
      ‚àö should return 404 for groom owned by different user (2 ms)
    Resource Type Validation
      ‚àö should handle training-session resource type (maps to trainingLog) (2 ms)
      ‚àö should handle competition-entry resource type (maps to competitionResult) (2 ms)
    findOwnedResource Helper Function
      ‚àö should find owned horse using userId (2 ms)
      ‚àö should find owned groom using userId (2 ms)
    validateBatchOwnership Helper Function
      ‚àö should validate ownership of multiple horses using userId (9 ms)

[2026-01-28 14:24:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:05] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:05] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:05] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomInteractionLimits.test.mjs
  üê¥ TDD: Groom Interaction Daily Limits - ALL Horses
    Adult Horse Daily Limits (FAILING TESTS - Current Implementation Bug)
      ‚àö should FAIL: 1-year-old horse should be limited to once per day (3 ms)
      ‚àö should FAIL: 2-year-old horse should be limited to once per day (1 ms)
    Foal Daily Limits (Should PASS with current implementation)
      ‚àö should correctly limit 3-day-old foal to once per day (1 ms)
    Edge Cases
      ‚àö should handle missing horse (2 ms)
      ‚àö should allow interaction when no previous interactions today (9 ms)

[2026-01-28 14:24:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:05] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:05] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:05] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/flagEvaluationEngine.test.mjs
  Flag Evaluation Engine
    evaluateHorseFlags
      ‚àö should evaluate and assign flags for eligible horse (5 ms)
      ‚àö should reject horse outside age range (2 ms)
      ‚àö should reject horse with maximum flags (1 ms)
      ‚àö should not assign duplicate flags (1 ms)
      ‚àö should respect flag limit during assignment (1 ms)
      ‚àö should handle care analysis ineligibility (1 ms)
      ‚àö should handle non-existent horse (2 ms)
      ‚àö should handle database errors (3 ms)
    Flag Trigger Evaluation
      ‚àö should trigger brave flag with correct conditions (1 ms)
      ‚àö should trigger fearful flag with correct conditions (1 ms)
    batchEvaluateFlags
      ‚àö should evaluate multiple horses (1 ms)
      ‚àö should handle mixed success/failure in batch (7 ms)
    getEligibleHorses
      ‚àö should return eligible horses within age range (2 ms)
      ‚àö should handle database errors in getEligibleHorses (2 ms)

[2026-01-28 14:24:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:05] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:05] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:05] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/dbPoolConfig.test.mjs
  dbPoolConfig
    ‚àö applies explicit pool settings in production (11 ms)
    ‚àö preserves existing query params (1 ms)
    ‚àö applies defaults in production when pool settings are missing (2 ms)

[2026-01-28 14:24:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:05] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:05] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:05] info: [envValidator] Test environment validation complete. Success: true
PASS tests/competitionController.test.mjs
  üèÜ PURE ALGORITHMIC: Competition Controller Helper Functions
    detectTraitBonuses
      ‚àö should detect discipline affinity trait bonuses correctly (3 ms)
      ‚àö should return no bonus for horses without matching traits (1 ms)
      ‚àö should handle horses with no epigenetic modifiers (1 ms)
      ‚àö should handle discipline names with spaces correctly
      ‚àö should be case insensitive for discipline matching

[2026-01-28 14:24:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:06] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomConfig.test.mjs
  Groom Configuration
    Foal Task Categories
      Enrichment Tasks (0-2 years)
        ‚àö should define correct enrichment tasks for early development (3 ms)
        ‚àö should have exactly 7 enrichment tasks (1 ms)
        ‚àö should contain only string values (2 ms)
        ‚àö should not contain any grooming tasks (1 ms)
      Foal Grooming Tasks (1-3 years)
        ‚àö should define correct grooming tasks for handling preparation (1 ms)
        ‚àö should have exactly 5 grooming tasks (1 ms)
        ‚àö should contain only string values (1 ms)
        ‚àö should not contain any enrichment tasks (1 ms)
      Task Category Separation
        ‚àö should have no overlap between enrichment and grooming tasks (8 ms)
        ‚àö should have all tasks be unique within each category
    Configuration Constants
      ‚àö should have correct age thresholds for task eligibility
      ‚àö should have task category definitions
      ‚àö should have bonding and streak configuration (1 ms)
    Age-Based Task Eligibility Logic
      ‚àö should allow enrichment tasks for ages 0-2 (1 ms)
      ‚àö should allow grooming tasks for ages 1-3 (1 ms)
      ‚àö should allow general grooming tasks for ages 3+ (1 ms)
      ‚àö should have overlap period for ages 1-3 (both enrichment and grooming)

[2026-01-28 14:24:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:24:06] warn: CORS blocked request from origin: http://evil.com
[2026-01-28 14:24:06] warn: [CORS] Request with no origin detected - API key validation required
  console.error
    TypeError: Cannot read properties of undefined (reading 'get')
        at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
        at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 14:24:06] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 14:24:06] warn: [API Key] Invalid or missing API key
[2026-01-28 14:24:06] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
PASS __tests__/unit/security/security-middleware.test.mjs
  security middleware
    corsOptions
      ‚àö allows known origins and rejects unknown (5 ms)
      ‚àö allows no-origin requests (legacy) and supports ALLOWED_ORIGINS env (2 ms)
    createRateLimiter
      ‚àö returns an express-rate-limit instance (4 ms)
    validateApiKey
      ‚àö skips when API_KEY not set (2 ms)
      ‚àö rejects missing or invalid key when configured (2 ms)
      ‚àö allows valid key (9 ms)
    enforceHttps
      ‚àö bypasses in non-production
      ‚àö redirects http in production (1 ms)
    addSecurityHeaders
      ‚àö sets baseline headers (1 ms)
    createSecurityMiddleware
      ‚àö returns middleware array including helmet, cors, and rate limiter (2 ms)

[2026-01-28 14:24:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:06] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirthUnit.test.mjs
  üß¨ UNIT: Apply Epigenetic Traits At Birth Unit - Pure Logic Validation
    Low-stress mare with premium feed ‚Üí positive traits
      ‚àö should assign resilient trait when mare has low stress and premium feed (4 ms)
      ‚àö should assign peopleTrusting trait when mare has low stress and premium feed (1 ms)
      ‚àö should assign both positive traits with optimal conditions (1 ms)
      ‚àö should not assign positive traits when stress is too high (1 ms)
      ‚àö should not assign positive traits when feed quality is too low (1 ms)
    Inbreeding (repeated ancestor IDs) ‚Üí negative traits
      ‚àö should assign fragile trait with high inbreeding (4+ repeated ancestors) (1 ms)
      ‚àö should assign reactive trait with moderate inbreeding (3 repeated ancestors) (1 ms)
      ‚àö should assign low_immunity trait with inbreeding (1 ms)
      ‚àö should assign multiple negative traits with severe inbreeding (1 ms)
      ‚àö should not assign inbreeding traits without repeated ancestor IDs (1 ms)
    3+ ancestors with same mostCompetedDiscipline ‚Üí affinity + legacy_talent
      ‚àö should assign discipline_affinity_racing with 3+ racing ancestors (7 ms)
      ‚àö should assign legacy_talent with 4+ ancestors in same discipline (1 ms)
      ‚àö should assign discipline_affinity_dressage with dressage specialization (1 ms)
      ‚àö should not assign discipline traits without sufficient specialization (1 ms)
      ‚àö should handle ancestors without mostCompetedDiscipline field (2 ms)
    Random behavior consistency
      ‚àö should produce consistent results with mocked randomness (1 ms)
      ‚àö should not assign traits when random values are above thresholds (1 ms)

[2026-01-28 14:24:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:07] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomMarketplace.test.mjs
  üè™ Groom Marketplace System
    Random Groom Generation
      ‚àö should generate a valid groom with all required properties (6 ms)
      ‚àö should generate experience within skill level ranges (12 ms)
      ‚àö should calculate session rates based on skill level and experience (2 ms)
      ‚àö should generate unique marketplace IDs (6 ms)
      ‚àö should generate meaningful bios that include name and specialty (1 ms)
    Marketplace Generation
      ‚àö should generate marketplace with default size (6 ms)
      ‚àö should generate marketplace with custom size (1 ms)
      ‚àö should respect quality distribution over large sample (8 ms)
    Refresh Mechanics
      ‚àö should need refresh when no last refresh provided (1 ms)
      ‚àö should need refresh when enough time has passed (1 ms)
      ‚àö should not need refresh when not enough time has passed (1 ms)
      ‚àö should calculate correct refresh cost
    Configuration Validation
      ‚àö should have valid marketplace configuration (2 ms)

[2026-01-28 14:24:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:07] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitCalculation.test.mjs
  üß¨ UNIT: Epigenetic Traits Calculation System
    Edge Cases
      ‚àö should handle extreme bonding values (3 ms)
      ‚àö should handle extreme stress values (1 ms)
      ‚àö should handle empty trait arrays (2 ms)
    Trait Combinations
      ‚àö should handle complementary positive traits (1 ms)
      ‚àö should handle opposing traits appropriately (1 ms)
    Environmental Influence
      ‚àö should produce more positive traits in ideal conditions (1 ms)
      ‚àö should test trait inheritance probability (1 ms)
    Rare Trait Generation
      ‚àö should occasionally produce rare traits (2 ms)
    Input Validation
      ‚àö should handle missing parameters gracefully (12 ms)
      ‚àö should handle invalid parameter types (2 ms)
    Deterministic Behavior
      ‚àö should produce consistent results with the same seed (1 ms)
      ‚àö should produce different results with different seeds (1 ms)
    getTraitDefinition
      ‚àö should return trait definition for valid traits (1 ms)
      ‚àö should return null for invalid traits (1 ms)
      ‚àö should return correct definition for rare traits
    getTraitsByType
      ‚àö should return all traits when type is "all"
      ‚àö should return only positive traits when type is "positive" (1 ms)
      ‚àö should return only negative traits when type is "negative" (1 ms)
      ‚àö should default to "all" when no type specified (1 ms)
    checkTraitConflict
      ‚àö should detect conflicts between opposing traits
      ‚àö should return false for non-conflicting traits (1 ms)
      ‚àö should return false for unknown traits (1 ms)
      ‚àö should handle self-comparison correctly (1 ms)
    Boundary Value Testing
      ‚àö should handle bond score boundaries (0, 50, 100)
      ‚àö should handle stress level boundaries (0, 50, 100) (1 ms)
      ‚àö should reject out-of-bounds values (2 ms)

[2026-01-28 14:24:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:07] info: [envValidator] Test environment validation complete. Success: true
PASS tests/taskTraitInfluence.integration.test.mjs
  Task-Trait Influence Integration
    System Integration Validation
      ‚àö should have complete coverage of foal tasks (2 ms)
      ‚àö should provide logical trait development progression (1 ms)
    Trait Point Accumulation Scenarios
      ‚àö should calculate trait points for early foal development (0-1 years) (1 ms)
      ‚àö should calculate trait points for middle development (1-2 years) (2 ms)
      ‚àö should calculate trait points for advanced development (2-3 years) (9 ms)
    Real-World Development Scenarios
      ‚àö should support comprehensive foal development progression (1 ms)
      ‚àö should handle specialized development paths (1 ms)
    Trait Influence Analysis
      ‚àö should identify tasks that develop specific traits (2 ms)
      ‚àö should provide complete trait coverage (2 ms)
    Business Rule Validation
      ‚àö should enforce consistent daily values across all tasks (1 ms)
      ‚àö should support meaningful trait point accumulation
      ‚àö should provide balanced trait development opportunities (2 ms)
    Development Stage Integration
      ‚àö should align with foal development stages (1 ms)
      ‚àö should support age-appropriate task progression (1 ms)

[2026-01-28 14:24:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/disciplineAffinityBonusTask9.test.mjs
  üèÜ UNIT: Discipline Affinity Trait Bonus - Competition Score Enhancement
    Discipline Affinity Trait Matching
      ‚àö should apply +5 bonus for discipline_affinity_racing trait in Racing competition (4 ms)
      ‚àö should apply +5 bonus for discipline_affinity_show_jumping trait in Show Jumping competition (1 ms)
      ‚àö should apply +5 bonus for discipline_affinity_dressage trait in Dressage competition (1 ms)
      ‚àö should apply +5 bonus for discipline_affinity_cross_country trait in Cross Country competition (1 ms)
    Discipline Affinity Trait Non-Matching
      ‚àö should NOT apply bonus for discipline_affinity_racing trait in Dressage competition (1 ms)
      ‚àö should NOT apply bonus for discipline_affinity_show_jumping trait in Racing competition
    Multiple Discipline Affinity Traits
      ‚àö should only apply one +5 bonus even with multiple discipline affinity traits (1 ms)
    Discipline Name Conversion
      ‚àö should correctly convert "Show Jumping" to "discipline_affinity_show_jumping" (8 ms)
      ‚àö should correctly convert "Cross Country" to "discipline_affinity_cross_country" (2 ms)
    Integration with Existing Trait System
      ‚àö should apply discipline affinity bonus in addition to existing trait effects (1 ms)
    Edge Cases and Error Handling
      ‚àö should handle horses without epigeneticModifiers gracefully (1 ms)
      ‚àö should handle horses with null epigeneticModifiers gracefully (1 ms)
      ‚àö should handle horses with undefined positive traits gracefully

[2026-01-28 14:24:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:08] info: [envValidator] Test environment validation complete. Success: true
PASS models/horseModel.test.mjs
  Horse Model At-Birth Traits Integration
    createHorse with at-birth traits
      ‚àö should apply at-birth traits for newborn with parents (4 ms)
      ‚àö should pass custom mare stress and feed quality (1 ms)
      ‚àö should merge at-birth traits with existing traits (2 ms)
      ‚àö should not apply at-birth traits for older horses (1 ms)
      ‚àö should not apply at-birth traits for horses without parents (1 ms)
      ‚àö should continue horse creation even if at-birth trait application fails (2 ms)
      ‚àö should handle missing sire_id gracefully
      ‚àö should handle missing dam_id gracefully (1 ms)
      ‚àö should log breeding analysis information (1 ms)

[2026-01-28 14:24:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/utils/epigeneticTraits.comprehensive.test.mjs
  üß¨ COMPREHENSIVE: Epigenetic Traits Calculation System
    Basic Trait Inheritance
      ‚àö should calculate traits with optimal breeding conditions (3 ms)
      ‚àö should handle high stress breeding conditions (1 ms)
      ‚àö should produce consistent results with same seed (1 ms)
    Environmental Factor Processing
      ‚àö should handle low bonding score scenarios
      ‚àö should handle high bonding score scenarios (1 ms)
      ‚àö should process moderate environmental conditions (8 ms)
    Trait Conflict Resolution
      ‚àö should handle conflicting parent traits (1 ms)
      ‚àö should handle similar parent traits (1 ms)
    Trait Visibility Determination
      ‚àö should categorize traits by visibility correctly (1 ms)
    Input Validation and Error Handling
      ‚àö should handle empty trait arrays (1 ms)
      ‚àö should handle boundary values for bonding and stress
      ‚àö should handle maximum values for bonding and stress
    Complex Breeding Scenarios
      ‚àö should handle large trait sets from both parents (2 ms)
      ‚àö should produce different results with different seeds (1 ms)
      ‚àö should maintain trait consistency across multiple calculations (1 ms)
    Trait Array Properties
      ‚àö should return sorted trait arrays (1 ms)
      ‚àö should return unique traits in each category (1 ms)

[2026-01-28 14:24:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitDiscovery.test.mjs
  üîç UNIT: Trait Discovery System - Environmental Trait Detection
    ‚àö should pass basic test (3 ms)
    ‚àö should handle trait discovery logic (1 ms)
    ‚àö should handle enrichment activity counting (1 ms)
    ‚àö should validate trait rarity levels (1 ms)
    ‚àö should validate trait types (1 ms)

[2026-01-28 14:24:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:09] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:09] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:09] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalEnrichment.test.mjs
  üê¥ PURE ALGORITHMIC: Foal Enrichment Helper Functions
    calculateActivityOutcome
      ‚àö should calculate activity outcome within specified ranges (15 ms)
      ‚àö should classify outcome as excellent for high bonding and low stress (1 ms)
      ‚àö should classify outcome as challenging for low bonding or high stress (1 ms)
      ‚àö should classify outcome as success for moderate bonding and stress (1 ms)
    calculateBoundedScore
      ‚àö should enforce minimum bound of 0
      ‚àö should enforce maximum bound of 100
      ‚àö should return correct values within bounds (1 ms)
      ‚àö should handle edge cases at boundaries (1 ms)
    applyDefaultScores
      ‚àö should use default values for null inputs (1 ms)
      ‚àö should preserve non-null values (1 ms)
      ‚àö should handle mixed null and non-null values
      ‚àö should handle zero values correctly (not treat as null) (6 ms)

[2026-01-28 14:24:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:09] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:09] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:09] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/epigeneticFlagDefinitions.test.mjs
  Epigenetic Flag Definitions
    Constants
      ‚àö should have correct flag types (3 ms)
      ‚àö should have correct source categories (1 ms)
      ‚àö should have correct max flags limit (1 ms)
      ‚àö should have correct age range
    Flag Definitions Structure
      ‚àö should have exactly 9 starter flags (1 ms)
      ‚àö should have all required starter flags (10 ms)
      ‚àö each flag should have required properties (9 ms)
      ‚àö each flag should have valid influences structure (11 ms)
    Flag Type Distribution
      ‚àö should have correct distribution of flag types (1 ms)
      ‚àö should have correct distribution of source categories (1 ms)
    Helper Functions
      getAllFlagDefinitions
        ‚àö should return all flag definitions (1 ms)
      getFlagDefinition
        ‚àö should return correct flag definition for valid name (1 ms)
        ‚àö should return correct flag definition for uppercase name (1 ms)
        ‚àö should return null for invalid flag name (1 ms)
        ‚àö should handle empty string (1 ms)
      getFlagsByType
        ‚àö should return positive flags (5 ms)
        ‚àö should return negative flags (1 ms)
        ‚àö should return empty array for adaptive flags
        ‚àö should return empty array for invalid type (1 ms)
      getFlagsBySourceCategory
        ‚àö should return flags by bonding category (1 ms)
        ‚àö should return flags by novelty category (1 ms)
        ‚àö should return flags by environment category
        ‚àö should return empty array for invalid category (1 ms)
    Specific Flag Validation
      ‚àö BRAVE flag should have correct properties (1 ms)
      ‚àö FEARFUL flag should have correct properties (1 ms)
      ‚àö RESILIENT flag should have correct properties

[2026-01-28 14:24:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:24:09] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:24:09] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:24:09] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirth.test.mjs
  üß¨ UNIT: Apply Epigenetic Traits At Birth - Breeding Condition Analysis
    Input Validation
      ‚àö should throw error when mare is not provided (7 ms)
      ‚àö should handle missing optional parameters (2 ms)
    Low Stress and Premium Feed Conditions
      ‚àö should assign resilient trait with low stress and premium feed (2 ms)
      ‚àö should assign peopleTrusting trait with low stress and premium feed (1 ms)
      ‚àö should not assign positive traits with high stress (1 ms)
      ‚àö should not assign positive traits with poor feed quality (1 ms)
    Inbreeding Detection and Negative Traits
      ‚àö should assign fragile trait with high inbreeding (1 ms)
      ‚àö should assign reactive trait with moderate inbreeding (1 ms)
      ‚àö should assign low_immunity trait with inbreeding (2 ms)
      ‚àö should not assign inbreeding traits without common ancestors (9 ms)
    Discipline Specialization
      ‚àö should assign discipline affinity trait with 3+ ancestors in same discipline (1 ms)
      ‚àö should assign legacy_talent trait with 4+ ancestors in same discipline (1 ms)
      ‚àö should use disciplineScores when discipline field is not available (2 ms)
      ‚àö should not assign discipline traits without sufficient specialization (1 ms)
    Additional Stress and Nutrition Effects
      ‚àö should assign nervous trait with very high mare stress (1 ms)
      ‚àö should assign low_immunity trait with poor nutrition (1 ms)
      ‚àö should not duplicate traits (1 ms)
    Return Value Structure
      ‚àö should return object with positive and negative arrays (1 ms)
      ‚àö should handle empty lineage gracefully (1 ms)
      ‚àö should handle null lineage gracefully (1 ms)

Summary of all failing tests
FAIL __tests__/integration/security/owasp-comprehensive.test.mjs
  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should reject common default passwords

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should enforce minimum password complexity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should include security headers in responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should not expose server version information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not leak sensitive information in error messages

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not expose stack traces in production-like errors

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ CORS Configuration ‚Ä∫ should enforce CORS policies

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Rate Limiting Configuration ‚Ä∫ should have rate limiting enabled

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should have package-lock.json for dependency pinning

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should validate critical dependencies are up-to-date

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should validate data integrity for critical operations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should prevent stat manipulation through tampering

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject unsigned JWT tokens

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject JWT tokens with tampered payload

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Insecure Deserialization Prevention ‚Ä∫ should reject malformed JSON payloads

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log successful authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log failed authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log ownership violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log rate limit violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Audit Log Completeness ‚Ä∫ should include required audit fields

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sentry Integration ‚Ä∫ should have Sentry configured for error tracking

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject internal IP addresses in URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject file:// protocol URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should sanitize redirect URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should validate webhook URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ DNS Rebinding Prevention ‚Ä∫ should prevent DNS rebinding attacks

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ Cross-Category Security Validation ‚Ä∫ Defense in Depth ‚Ä∫ should enforce multiple security layers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ Cross-Category Security Validation ‚Ä∫ Security Configuration Consistency ‚Ä∫ should have consistent security settings across all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:19:32.184Z"),
        userId: "de6a632d-d278-4222-9976-1a5d63ae3776",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

FAIL tests/integration/userRoutes.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: User Routes - HTTP API Endpoints ‚Ä∫ GET /api/users/:id/progress ‚Ä∫ should return user progress successfully

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 0

    @@ -1,14 +1,9 @@
      Object {
        "level": Any<Number>,
        "progressPercentage": Any<Number>,
        "totalEarnings": Any<Number>,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "ee8a9abc-a7d8-4c2d-abdb-83e8a1729c7f",
    -     },
    -   },
        "username": "userroutes_1769627973472",
        "xp": Any<Number>,
        "xpForCurrentLevel": Any<Number>,
        "xpForNextLevel": Any<Number>,
        "xpToNextLevel": Any<Number>,

    [0m [90m 91 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 92 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User progress retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 94 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 95 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 96 |[39m         level[33m:[39m expect[33m.[39many([33mNumber[39m)[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userRoutes.test.mjs:93:34)

FAIL tests/integration/userProgressAPI.integration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩ STEP 1: User Setup & Initial Progress State ‚Ä∫ should return correct initial progress data via API

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 0,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 200,

    [0m [90m 156 |[39m
     [90m 157 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 159 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 160 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 161 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:158:34)

  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should gain XP from training and update progress correctly

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 3,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 5,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 195,

    [0m [90m 231 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 234 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 235 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 236 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:233:42)

  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should level up when reaching XP threshold

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 2,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 200,
        "xpForCurrentLevel": 200,
        "xpForNextLevel": 300,
        "xpToNextLevel": 100,

    [0m [90m 326 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 327 |[39m
    [31m[1m>[22m[39m[90m 328 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 329 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 330 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 331 |[39m         level[33m:[39m [35m2[39m[33m,[39m [90m// Leveled up![39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:328:42)

  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should handle multiple level gains in single XP award

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 3,
        "progressPercentage": 50,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
    -     },
    -   },
    +   "userId": "688d8d14-289f-42bd-9f8c-7cc7d2f09ab8",
        "username": "progresstest",
        "xp": 350,
        "xpForCurrentLevel": 300,
        "xpForNextLevel": 400,
        "xpToNextLevel": 50,

    [0m [90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 363 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 364 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 365 |[39m         level[33m:[39m [35m3[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:362:42)

FAIL tests/integration/groomAssignmentSystem.test.mjs
  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create a new groom assignment

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 116 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 119 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'assignment'[39m)[33m;[39m
     [90m 121 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:118:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create multiple assignments for different horses

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 142 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 145 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 146 |[39m     })[33m;[39m
     [90m 147 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:144:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should prevent duplicate assignments

    expect(received).toContain(expected) // indexOf

    Expected substring: "already assigned"
    Received string:    "You do not own this horse"

    [0m [90m 161 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 162 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already assigned'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     it([32m'should validate required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:163:37)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get all assignments for user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 240 |[39m       [36mconst[39m { assignments[33m,[39m statistics } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 241 |[39m       expect([33mArray[39m[33m.[39misArray(assignments))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 242 |[39m       expect(assignments[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 243 |[39m       expect(statistics[33m.[39mactiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 244 |[39m     })[33m;[39m
     [90m 245 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:242:34)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get assignment dashboard

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 273 |[39m
     [90m 274 |[39m       [36mconst[39m { summary[33m,[39m salaryCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(summary[33m.[39mtotalActiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 276 |[39m       expect(salaryCosts[33m.[39mtotalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:275:46)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 3. Assignment Limits ‚Ä∫ should enforce assignment limits

    expect(received).toContain(expected) // indexOf

    Expected substring: "maximum assignments"
    Received string:    "You do not own this horse"

    [0m [90m 332 |[39m           } [36melse[39m {
     [90m 333 |[39m             failedAssignments[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 334 |[39m             expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'maximum assignments'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 335 |[39m           }
     [90m 336 |[39m         }
     [90m 337 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:334:43)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 4. Salary Calculations ‚Ä∫ should calculate weekly salary costs

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 362 |[39m
     [90m 363 |[39m       [36mconst[39m { totalWeeklyCost[33m,[39m groomCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(totalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 365 |[39m       expect([33mArray[39m[33m.[39misArray(groomCosts))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 366 |[39m       expect(groomCosts[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 367 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:364:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 6. Assignment Removal ‚Ä∫ should remove an assignment

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 411 |[39m
     [90m 412 |[39m       [36mconst[39m assignment [33m=[39m assignmentsResponse[33m.[39mbody[33m.[39mdata[33m.[39massignments[33m.[39mfind(a [33m=>[39m a[33m.[39misActive)[33m;[39m
    [31m[1m>[22m[39m[90m 413 |[39m       expect(assignment)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       [90m// Remove the assignment[39m
     [90m 416 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:413:26)

FAIL tests/routes/enhancedReportingRoutes.test.mjs
  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ POST /api/horses/compare-epigenetics should compare multiple horses

    expected 200 "OK", got 403 "Forbidden"

    [0m [90m 257 |[39m           horseIds[33m:[39m [testHorses[[35m0[39m][33m.[39mid[33m,[39m testHorses[[35m1[39m][33m.[39mid[33m,[39m testHorses[[35m2[39m][33m.[39mid][33m,[39m
     [90m 258 |[39m         })
    [31m[1m>[22m[39m[90m 259 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 260 |[39m
     [90m 261 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 262 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:259:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ GET /api/horses/trait-trends should return trait development trends

    expected 200 "OK", got 400 "Bad Request"

    [0m [90m 274 |[39m         [33m.[39mquery({ user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m timeframe[33m:[39m [35m30[39m })
     [90m 275 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 276 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 277 |[39m
     [90m 278 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:276:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL tests/integration/competitionWorkflow.integration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Competition Workflow ‚Ä∫ ÔøΩÔøΩ STEP 5: Prize Distribution & XP Awards ‚Ä∫ should award prize money and XP for competition performance

    PrismaClientValidationError: 
    Invalid `prisma.xpEvent.findFirst()` invocation:

    {
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "d2ce4981-55b0-4c26-b8f8-52adb6fa8043"
          },
    ?     is?: UserWhereInput,
    ?     isNot?: UserWhereInput
        },
        reason: {
          contains: "Competition"
        }
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 332 |[39m
     [90m 333 |[39m       [90m// VERIFY: XP event logged[39m
    [31m[1m>[22m[39m[90m 334 |[39m       [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mfindFirst({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 335 |[39m         where[33m:[39m {
     [90m 336 |[39m           user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 337 |[39m           reason[33m:[39m { contains[33m:[39m [32m'Competition'[39m }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:334:23)

FAIL tests/controllers/dynamicCompatibilityController.test.mjs
  ‚óè Dynamic Compatibility Controller API ‚Ä∫ POST /api/compatibility/recommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 331 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 332 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 333 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                      [31m[1m^[22m[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 335 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 336 |[39m[0m

      at Object.<anonymous> (tests/controllers/dynamicCompatibilityController.test.mjs:333:54)

FAIL tests/integration/traitRoutes.test.mjs
  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should trigger trait discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should handle optional parameters correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should get horse traits successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should get all trait definitions

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should filter traits by type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should return validation error for invalid type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should get discovery status successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should process batch discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for empty horse IDs array

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for too many horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should handle mix of valid and invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769627988399",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:19:48.398Z"),
        breedId: 31563,
        ~~~~~~~
        user: {
          connect: {
            id: "e1690b07-e998-444b-823a-7803c40672c1"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

FAIL tests/integration/groomSalarySystem.test.mjs
  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct weekly salary for expert groom with specialty

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73583,
        foalId: 147171,
        user: {
        ~~~~
          connect: {
            id: "509bbd72-0ec4-48d8-9763-fca5d7ff15cb"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct salary for novice groom

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73584,
        foalId: 147172,
        user: {
        ~~~~
          connect: {
            id: "b70238a0-889a-47b3-bd1d-55f91e711ed9"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate user total salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73585,
        foalId: 147173,
        user: {
        ~~~~
          connect: {
            id: "6fff3fe9-4bb8-4581-9108-a926df6c52eb"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get user salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73586,
        foalId: 147174,
        user: {
        ~~~~
          connect: {
            id: "0a7ac0f1-f982-45e2-8365-5c4bb062ac94"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73587,
        foalId: 147175,
        user: {
        ~~~~
          connect: {
            id: "98271dfe-4a21-4903-bb5f-007d4dd0d246"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get groom salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73588,
        foalId: 147176,
        user: {
        ~~~~
          connect: {
            id: "05ac7fc9-ef95-4260-ac7e-0353a40a11f9"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary payment history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73589,
        foalId: 147177,
        user: {
        ~~~~
          connect: {
            id: "e86439f4-c5a9-4287-bf4a-f2f6e0920d02"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get cron job status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73590,
        foalId: 147178,
        user: {
        ~~~~
          connect: {
            id: "02648dc3-f7ce-4cc8-8045-1c0ff4261d5e"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should validate groom ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73591,
        foalId: 147179,
        user: {
        ~~~~
          connect: {
            id: "b7c48a2a-42ab-47f9-ac62-17a2ae9788cd"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should process weekly salaries successfully

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73592,
        foalId: 147180,
        user: {
        ~~~~
          connect: {
            id: "e6455e2a-5710-42d7-8b01-6bca88437b16"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should handle insufficient funds

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73593,
        foalId: 147181,
        user: {
        ~~~~
          connect: {
            id: "5f032741-98ab-4b37-8e03-a6e523fa9f1d"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should trigger salary processing via API

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73594,
        foalId: 147182,
        user: {
        ~~~~
          connect: {
            id: "bf652a74-c7c9-4a93-a3fa-c2c86f43ece6"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73595,
        foalId: 147183,
        user: {
        ~~~~
          connect: {
            id: "aea0698e-ba14-4ff0-8ed7-835e2e8ac483"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73596,
        foalId: 147184,
        user: {
        ~~~~
          connect: {
            id: "d1010f4d-0976-4a7f-8b35-712a18e1a228"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73597,
        foalId: 147185,
        user: {
        ~~~~
          connect: {
            id: "f11b828e-87e4-4a07-8d4a-81b86a815b45"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/groom/:groomId/salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73598,
        foalId: 147186,
        user: {
        ~~~~
          connect: {
            id: "59db625c-3edf-4cb7-aebe-2f34232e9e06"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73599,
        foalId: 147187,
        user: {
        ~~~~
          connect: {
            id: "8ff8cfcc-af4c-49da-b7cf-4f8a5cc0f286"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for POST /api/groom-salaries/process

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73600,
        foalId: 147188,
        user: {
        ~~~~
          connect: {
            id: "1cf942b0-1df3-4e35-8eaf-338dcc69f891"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

FAIL tests/traitTimeline.test.mjs
  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should aggregate trait timeline with milestone and groom data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993006",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.006Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "151e433b-9f26-4048-8af0-9c4c6e9ff447"
          }
        },
        breedId: 31564,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should include detailed trait context and groom involvement

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993038",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.038Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "113a75ac-1bbe-476e-8b83-829b025dd407"
          }
        },
        breedId: 31565,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should filter traits by age cutoff (before age 4)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993053",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.053Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "308666c6-fecd-4339-95eb-524b4f75a8dd"
          }
        },
        breedId: 31566,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should categorize traits by type and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993068",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.068Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "784333b6-4f25-4af7-8651-58cce486d2be"
          }
        },
        breedId: 31567,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993084",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.084Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "750472f6-0ea3-4342-9b00-ddd0998f246b"
          }
        },
        breedId: 31568,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should organize events by age ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993098",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.098Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ee201bfc-da0b-45ab-b46e-314b15a266ac"
          }
        },
        breedId: 31569,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should include bond and stress trend analysis

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993113",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.113Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "eb228c80-9c11-496e-afd0-37961ee41c9b"
          }
        },
        breedId: 31570,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should get trait timeline card via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993125",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.125Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "38a93a37-3d90-404f-a66b-8336016377f9"
          }
        },
        breedId: 31571,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for trait card endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993136",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.136Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2abc70f9-80be-40ef-b708-433e1e20ab54"
          }
        },
        breedId: 31572,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993151",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.151Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1c626c3d-1a08-4421-998b-0d41e278878f"
          }
        },
        breedId: 31573,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should handle horses with empty trait timeline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627993163",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:19:53.163Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "6fa975ba-5034-4b33-97d5-c13bdaa4758a"
          }
        },
        breedId: 31574,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 3: Breeding Process & Foal Birth ‚Ä∫ should create foal with inherited and epigenetic traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Foal",
        age: 0,
        breed: {
          connect: {
            id: 26468
          }
        },
        sex: "Colt",
        sireId: 147190,
        ~~~~~~
        damId: 147189,
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "2620745d-8e9d-42f6-974f-219493448233"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:54.732Z"),
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `sireId`. Did you mean `sire`? Available options are marked with ?.

    [0m [90m 225 |[39m
     [90m 226 |[39m       [90m// Create foal (simulating breeding result) with proper schema fields[39m
    [31m[1m>[22m[39m[90m 227 |[39m       foal [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m              [31m[1m^[22m[39m
     [90m 228 |[39m         data[33m:[39m {
     [90m 229 |[39m           name[33m:[39m [32m'Integration Test Foal'[39m[33m,[39m
     [90m 230 |[39m           age[33m:[39m [35m0[39m[33m,[39m [90m// Newborn[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:227:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 4: Groom Assignment & Care ‚Ä∫ should assign specialized foal care groom to newborn

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 282 |[39m
     [90m 283 |[39m       [90m// Ensure foal has a groom assignment[39m
    [31m[1m>[22m[39m[90m 284 |[39m       [36mconst[39m assignmentResult [33m=[39m [36mawait[39m ensureDefaultGroomAssignment(foal[33m.[39mid[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m     |[39m                                                                        [31m[1m^[22m[39m
     [90m 285 |[39m
     [90m 286 |[39m       expect(assignmentResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 287 |[39m       expect(assignmentResult[33m.[39massignment [33m||[39m assignmentResult[33m.[39mnewAssignment)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:284:72)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 4: Groom Assignment & Care ‚Ä∫ should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 304 |[39m
     [90m 305 |[39m       [36mconst[39m interactionData [33m=[39m {
    [31m[1m>[22m[39m[90m 306 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m 308 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 309 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:306:22)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 5: Foal Development Tracking ‚Ä∫ should track foal development progress

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 341 |[39m       [36mconst[39m { getFoalDevelopment } [33m=[39m [36mawait[39m [36mimport[39m([32m'../../models/foalModel.js'[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m developmentData [33m=[39m [36mawait[39m getFoalDevelopment(foal[33m.[39mid)[33m;[39m
     [90m     |[39m                                                             [31m[1m^[22m[39m
     [90m 344 |[39m
     [90m 345 |[39m       expect(developmentData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(developmentData[33m.[39mfoal[33m.[39mid)[33m.[39mtoBe(foal[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:343:61)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate complete breeding workflow integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 361 |[39m       [90m// VERIFY: Complete family tree exists[39m
     [90m 362 |[39m       [36mconst[39m foalWithFamily [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 363 |[39m         where[33m:[39m { id[33m:[39m foal[33m.[39mid }[33m,[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 364 |[39m         include[33m:[39m {
     [90m 365 |[39m           sire[33m:[39m [36mtrue[39m[33m,[39m
     [90m 366 |[39m           dam[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:363:27)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 395 |[39m     it([32m'should validate business rules are enforced throughout workflow'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 396 |[39m       [90m// Age validation[39m
    [31m[1m>[22m[39m[90m 397 |[39m       expect(foal[33m.[39mage)[33m.[39mtoBe([35m0[39m)[33m;[39m [90m// Newborn[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 398 |[39m       expect(mare[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 399 |[39m       expect(stallion[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 400 |[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:397:19)

FAIL tests/foalEnrichmentIntegration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should complete enrichment activity successfully

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 172 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 173 |[39m         })
    [31m[1m>[22m[39m[90m 174 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 175 |[39m
     [90m 176 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 177 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Trailer Exposure'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:174:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should update horse bond_score and stress_level in database

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 234 |[39m           activity[33m:[39m [32m'Halter Introduction'[39m[33m,[39m
     [90m 235 |[39m         })
    [31m[1m>[22m[39m[90m 236 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 237 |[39m
     [90m 238 |[39m       [90m// Verify horse was updated in database[39m
     [90m 239 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:236:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should validate request parameters

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 259 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 260 |[39m         })
    [31m[1m>[22m[39m[90m 261 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 262 |[39m
     [90m 263 |[39m       [90m// Missing activity[39m
     [90m 264 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:261:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 404 for non-existent foal

    expected 404 "Not Found", got 401 "Unauthorized"

    [0m [90m 314 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 315 |[39m         })
    [31m[1m>[22m[39m[90m 316 |[39m         [33m.[39mexpect([35m404[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 317 |[39m
     [90m 318 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 319 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:316:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 400 for inappropriate activity for day

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 329 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m [90m// This is a day 3 activity[39m
     [90m 330 |[39m         })
    [31m[1m>[22m[39m[90m 331 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 332 |[39m
     [90m 333 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not appropriate for day 0'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:331:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should accept different activity name formats

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 345 |[39m           activity[33m:[39m [32m'leading_practice'[39m[33m,[39m
     [90m 346 |[39m         })
    [31m[1m>[22m[39m[90m 347 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Test exact name[39m
     [90m 350 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:347:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle all day 3 activities

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 382 |[39m             activity[33m,[39m
     [90m 383 |[39m           })
    [31m[1m>[22m[39m[90m 384 |[39m           [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m            [31m[1m^[22m[39m
     [90m 385 |[39m
     [90m 386 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39mactivity[33m.[39mname)[33m.[39mtoBe(activity)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:384:12)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should create training history records for each activity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 414 |[39m           activity[33m:[39m [32m'Feeding Assistance'[39m[33m,[39m
     [90m 415 |[39m         })
    [31m[1m>[22m[39m[90m 416 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 417 |[39m
     [90m 418 |[39m       [90m// Verify training record was created[39m
     [90m 419 |[39m       expect(mockPrisma[33m.[39mfoalTrainingHistory[33m.[39mcreate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:416:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle edge cases with bond and stress levels

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 461 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 462 |[39m         })
    [31m[1m>[22m[39m[90m 463 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 464 |[39m
     [90m 465 |[39m       [90m// Values should be capped at bounds[39m
     [90m 466 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mupdatedLevels[33m.[39mbondScore)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:463:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL tests/groomBondingIntegration.test.mjs
  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process brushing interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147191,
        groomId: 73612,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997289_wxa7x"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process hand-walking interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147192,
        groomId: 73613,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997381_dkuwl"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process stall_care interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147193,
        groomId: 73614,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997403_9hfif"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Age Restrictions ‚Ä∫ should reject new grooming tasks for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147194,
        groomId: 73615,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997421_iq126"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should update horse bond score after grooming

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147195,
        groomId: 73616,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997437_lby8e"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should grant burnout immunity after 7 consecutive days

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147196,
        groomId: 73617,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997453_xdv17"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Daily Interaction Limits ‚Ä∫ should enforce one grooming session per horse per day

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147197,
        groomId: 73618,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769627997469_sh659"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

FAIL tests/groomPersonalityTraitBonus.test.mjs
  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify compatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998907",
        user: {
          connect: {
            id: "16a0d49a-cbb8-4277-98e6-086178e02ebe"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.907Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31575,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify incompatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998934",
        user: {
          connect: {
            id: "d2bbe706-7cf4-4916-9af5-d58885c3c830"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.934Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31576,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should handle regular matches without high bond

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998945",
        user: {
          connect: {
            id: "dbca9aec-cc3b-4d17-8a3b-b68a7566ac2b"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.945Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31577,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should apply personality effects to milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998955",
        user: {
          connect: {
            id: "1d7395c2-2ca4-4192-8a3f-38e591fe2d82"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.955Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31578,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should handle missing personality or temperament gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998965",
        user: {
          connect: {
            id: "b271a03e-dd19-4f93-8490-a17a9ea12f45"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.965Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31579,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should integrate personality effects into milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998975",
        user: {
          connect: {
            id: "3e926057-f2c1-42f6-98df-8cd9d99d9de2"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.975Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31580,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should handle milestone evaluation without groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998988",
        user: {
          connect: {
            id: "3feb970a-7e8d-4a67-94db-9e68e3c93e84"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.988Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31581,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return all compatible grooms for a temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627998996",
        user: {
          connect: {
            id: "73a62f2e-b99f-4729-b3e2-b0ec7fe9e626"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:58.996Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31582,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return empty array for unknown temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999004",
        user: {
          connect: {
            id: "4fa5489c-c958-40e1-8f9b-6c9973d4457f"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.004Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31583,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return groom profile with personality information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999012",
        user: {
          connect: {
            id: "153bc381-6856-496b-b0a3-916b74739e15"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.012Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31584,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 404 for non-existent groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999020",
        user: {
          connect: {
            id: "b063e04f-9905-4830-a478-2fc482bca6b7"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.020Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31585,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 400 for invalid groom ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999027",
        user: {
          connect: {
            id: "53256909-27f0-4823-bedc-324c0940a73e"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.027Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31586,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return personality compatibility for horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999035",
        user: {
          connect: {
            id: "a16c17b8-ddf3-4eb9-8bc3-5cd71f354666"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.035Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31587,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999046",
        user: {
          connect: {
            id: "d7791db7-c1d7-4151-a245-ce682ff28bb9"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.046Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31588,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 400 for horse without temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999053",
        user: {
          connect: {
            id: "230753a6-f6f3-4bd7-8c6f-a62adc3ec6cb"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.053Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31589,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ POST /api/milestones/evaluate-milestone (with personality impact) ‚Ä∫ should evaluate milestone with personality effects

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769627999061",
        user: {
          connect: {
            id: "8f13c216-fa1c-4b23-a756-4151af582a2f"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:19:59.061Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31590,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

FAIL tests/groomBonusTraits.test.mjs
  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should assign bonus traits to a groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000346",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.346Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c0df7fb8-c9ba-458c-a3d0-57afdb3a6217"
          }
        },
        breedId: 31591,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should validate bonus trait constraints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000381",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.381Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "fd0b83f9-fa18-46ab-b920-c8d82c6d5603"
          }
        },
        breedId: 31592,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should get groom bonus traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000397",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.397Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9b0c600e-2bac-48f5-87bc-fc779e5b662f"
          }
        },
        breedId: 31593,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should apply bonus probability when conditions are met

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000413",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.413Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0ffb5fe3-66e6-45ab-89ac-5540058452f7"
          }
        },
        breedId: 31594,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when bond is too low

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000430",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.430Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "10c03afb-4d1d-412f-b431-c5dad78750af"
          }
        },
        breedId: 31595,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when coverage is insufficient

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000444",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.444Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d7a53383-37e0-471f-94b3-9875ec2e4334"
          }
        },
        breedId: 31596,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should get groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000461",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.461Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "37c732f7-2efb-4a84-8f6c-ca787fd7e813"
          }
        },
        breedId: 31597,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should update groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000474",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.474Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "796eb687-cd73-4a1b-9842-651cf1048572"
          }
        },
        breedId: 31598,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should reject invalid bonus trait updates

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000486",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.486Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1a79fd98-f331-4d99-90e2-0817c0871801"
          }
        },
        breedId: 31599,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for bonus trait endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628000500",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:20:00.500Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4cebf93f-198f-4683-9b65-616a69e04fcd"
          }
        },
        breedId: 31600,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

FAIL tests/integration/horseOverview.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return complete horse overview data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "1ff6503f-7409-4bc2-8691-7b3f0f7c5e78"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "2f403d6d-59f0-42a6-8ca6-2a104132daf4"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "91325cbb-2da4-4df9-9331-ad63540b6ded"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle horse with no training history gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "951c7a63-3427-4c58-9c4c-2540d7f885e5"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should calculate next training date correctly when horse has recent training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "f7f00849-f629-4977-8655-e2722b07be0b"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle missing optional fields gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "dcf93642-3bd4-4f39-812d-75098b08aa6d"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

FAIL tests/integration/epigeneticTraitSystem.test.mjs
  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/definitions should return flag and personality definitions

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/log-trait should log trait assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/history/:horseId should return trait history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/summary/:horseId should return development summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle authentication errors properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle horse ownership validation

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should validate input parameters properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Epigenetic Flag System ‚Ä∫ Should apply epigenetic flags based on care patterns

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Enhanced Milestone Evaluation ‚Ä∫ Should factor in groom personality bonuses

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147198,
              groomId: 73629,
              user: {
              ~~~~
                connect: {
                  id: "a6ec5a9a-97f0-4886-b0cc-99cb1a3a30d4"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

FAIL tests/breedingPrediction.test.mjs
  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate trait inheritance probabilities from parent history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004438",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.438Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2e45d44b-136c-4810-b2d2-be59653d714b"
          }
        },
        breedId: 31601,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate flag inheritance scores

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004471",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.471Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "244551a8-fad7-4124-9859-03e819f79d94"
          }
        },
        breedId: 31602,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004486",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.486Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "3babdaa0-16e4-4869-afc0-cc86fd5225cf"
          }
        },
        breedId: 31603,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate temperament influence modifiers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004500",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.500Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "64dd429e-2bd6-4371-84e0-42f35c2a8e82"
          }
        },
        breedId: 31604,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should predict trait categories with probability ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004514",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.514Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d31b2094-e44c-451a-8bd8-b3b54b5ab5d7"
          }
        },
        breedId: 31605,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should handle epigenetic flag inheritance with stacking limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004528",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.528Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9a40671e-8664-46e9-b37d-4743e5f9ea65"
          }
        },
        breedId: 31606,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should extend breeding-data endpoint with prediction data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004542",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.542Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "853d4f23-af95-4ec6-a1e0-7f10a1cb911f"
          }
        },
        breedId: 31607,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should require authentication for breeding-data endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004553",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.553Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0a1bd156-ea07-4c6d-a469-9d6358e9ae29"
          }
        },
        breedId: 31608,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should handle horses with minimal breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628004563",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:20:04.563Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "03de72b8-a5c8-4ca2-9242-2265f2d4a0aa"
          }
        },
        breedId: 31609,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

FAIL tests/integration/groomHandlerSystem.test.mjs
  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should get the assigned handler for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should return no handler for a horse without assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should validate horse ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should check handler eligibility for a conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should validate conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 3. Handler Configuration ‚Ä∫ should get handler configuration

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 4. Handler Recommendations ‚Ä∫ should get handler recommendations for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 5. Authentication and Authorization ‚Ä∫ should require authentication for all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73640,
        foalId: 147200,
        user: {
        ~~~~
          connect: {
            id: "a3437158-e783-47ab-bcec-70f535201985"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

FAIL tests/foalTaskLoggingIntegration.test.mjs
  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should initialize task log with first enrichment task

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147201,
        groomId: 73641,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-1"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should increment existing task count in task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147202,
        groomId: 73642,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-2"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should add new task to existing task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147203,
        groomId: 73643,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-3"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should handle multiple task types across different foals

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147204,
        groomId: 73644,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-4"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should update lastGroomed timestamp on each interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147205,
        groomId: 73645,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-5"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should enforce daily interaction limits correctly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147206,
        groomId: 73646,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-6"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject enrichment tasks for horses too old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147207,
        groomId: 73647,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-7"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject grooming tasks for horses too young

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147208,
        groomId: 73648,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-8"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

FAIL tests/integration/dashboardRoutes.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return complete dashboard data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31610,
        ~~~~~~~
        user: {
          connect: {
            id: "ce7b8f84-0f64-4b4b-947a-9618d04d6f1a"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 400 for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31611,
        ~~~~~~~
        user: {
          connect: {
            id: "9f796b57-c662-44a9-ae79-f5c4ba71d220"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 401 for missing authentication

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 2",
        age: 4,
        sex: "Stallion",
        breedId: 31612,
        ~~~~~~~
        user: {
          connect: {
            id: "afb69229-bf21-4b49-aaac-e6dcdda7b4ca"
          }
        },
        dateOfBirth: new Date("2021-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        totalEarnings: 2200,
        disciplineScores: {
          Show Jumping: 18
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 1)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return validation error for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 2",
        age: 4,
        sex: "Stallion",
        breedId: 31613,
        ~~~~~~~
        user: {
          connect: {
            id: "0a02eed7-8a7e-4b40-bb98-a1eadedd4210"
          }
        },
        dateOfBirth: new Date("2021-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        totalEarnings: 2200,
        disciplineScores: {
          Show Jumping: 18
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 1)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with no horses gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 2",
        age: 4,
        sex: "Stallion",
        breedId: 31614,
        ~~~~~~~
        user: {
          connect: {
            id: "b00f18ed-8a21-472a-abc1-2f3d232f0101"
          }
        },
        dateOfBirth: new Date("2021-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        totalEarnings: 2200,
        disciplineScores: {
          Show Jumping: 18
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 1)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with horses but no activity gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31615,
        ~~~~~~~
        user: {
          connect: {
            id: "84e8fd1e-c288-4164-a2b5-5fbaff11706c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

FAIL tests/legacyScoreTraitIntegration.test.mjs
  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate trait score based on count, diversity, and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628009957",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:09.957Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "29ab1c78-1f8f-4b43-831d-b40141736eb5"
          }
        },
        breedId: 31616,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should apply negative trait penalties

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628009989",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:09.989Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2570922f-244b-4085-ae22-599804eb8732"
          }
        },
        breedId: 31617,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should only count traits gained before age 4

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010004",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.004Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "e30c1a25-ee28-47c9-aaf3-9c2b0dd0bf56"
          }
        },
        breedId: 31618,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate groom care consistency from milestone logs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010018",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.018Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "93a30221-586a-4d9f-af25-14dc11ef06d9"
          }
        },
        breedId: 31619,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should integrate trait score into overall legacy score

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010033",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.033Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "a32a0ab6-cf9a-4532-8db7-21e396fe18d1"
          }
        },
        breedId: 31620,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should calculate legacy score without traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010047",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.047Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d570f9c0-9eae-4dab-98b1-a9f47ab5ca82"
          }
        },
        breedId: 31621,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should get horse legacy score via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010062",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.062Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "28a58bbb-aeac-4fc2-8d16-3d9135289f39"
          }
        },
        breedId: 31622,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for legacy score endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010074",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.074Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "092a4cd0-91af-4c47-b2fd-514d61568e82"
          }
        },
        breedId: 31623,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628010086",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:20:10.086Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cfe25db3-48d5-4bdd-b345-409ef5dc6f41"
          }
        },
        breedId: 31624,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

FAIL tests/integration/horseRoutes.test.mjs
  ‚óè Horse Routes Integration Tests ‚Ä∫ GET /api/horses/trainable/:userId ‚Ä∫ should return trainable horses for valid user ID

    expect(received).toBeGreaterThanOrEqual(expected)

    Matcher error: received value must be a number or bigint

    Received has value: null

    [0m [90m 122 |[39m         expect(horse)[33m.[39mtoHaveProperty([32m'trainableDisciplines'[39m)[33m;[39m
     [90m 123 |[39m         expect([33mArray[39m[33m.[39misArray(horse[33m.[39mtrainableDisciplines))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 124 |[39m         expect(horse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Only horses 3+ should be returned[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 125 |[39m       })[33m;[39m
     [90m 126 |[39m     })[33m;[39m
     [90m 127 |[39m[0m

      at tests/integration/horseRoutes.test.mjs:124:27
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/horseRoutes.test.mjs:118:26)

FAIL tests/training.test.mjs
  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ BLOCKS training for horses under 3 years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 253 |[39m       })[33m;[39m
     [90m 254 |[39m
    [31m[1m>[22m[39m[90m 255 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 256 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 257 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'age'[39m)[33m;[39m
     [90m 258 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:255:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ ALLOWS training for horses 3+ years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 276 |[39m       })[33m;[39m
     [90m 277 |[39m
    [31m[1m>[22m[39m[90m 278 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 280 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'trained in Dressage'[39m)[33m;[39m
     [90m 281 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:278:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ INCREASES discipline scores by +5 for first-time training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Score Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:20:12.674Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 303 |[39m       fourYearsAgoForScore[33m.[39msetFullYear(fourYearsAgoForScore[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 304 |[39m
    [31m[1m>[22m[39m[90m 305 |[39m       [36mconst[39m scoreTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 306 |[39m         data[33m:[39m {
     [90m 307 |[39m           name[33m:[39m [32m'Score Test Horse'[39m[33m,[39m
     [90m 308 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:305:30)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ ACCUMULATES discipline scores across multiple training sessions (different horses)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Accumulation Test Horse 1",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:20:12.682Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 364 |[39m       fiveYearsAgoForAccumulation[33m.[39msetFullYear(fiveYearsAgoForAccumulation[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 365 |[39m
    [31m[1m>[22m[39m[90m 366 |[39m       [36mconst[39m horse1 [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 367 |[39m         data[33m:[39m {
     [90m 368 |[39m           name[33m:[39m [32m'Accumulation Test Horse 1'[39m[33m,[39m
     [90m 369 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:366:22)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ BLOCKS training when horse has trained ANY discipline within 7 days

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 442 |[39m       })[33m;[39m
     [90m 443 |[39m
    [31m[1m>[22m[39m[90m 444 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 445 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 446 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Training cooldown active'[39m)[33m;[39m
     [90m 447 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:444:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ ALLOWS training after 7-day cooldown expires

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Old Trained Horse",
        age: 6,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2020-01-28T19:20:12.722Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Racing: 15
        },
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 467 |[39m       sixYearsAgoForOldTrained[33m.[39msetFullYear(sixYearsAgoForOldTrained[33m.[39mgetFullYear() [33m-[39m [35m6[39m)[33m;[39m
     [90m 468 |[39m
    [31m[1m>[22m[39m[90m 469 |[39m       [36mconst[39m oldTrainedHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 470 |[39m         data[33m:[39m {
     [90m 471 |[39m           name[33m:[39m [32m'Old Trained Horse'[39m[33m,[39m
     [90m 472 |[39m           age[33m:[39m [35m6[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:469:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: XP Award for Training ‚Ä∫ AWARDS XP to horse owner (Player) when training succeeds

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "XP Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:20:12.730Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 535 |[39m       fourYearsAgoForXp[33m.[39msetFullYear(fourYearsAgoForXp[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 536 |[39m
    [31m[1m>[22m[39m[90m 537 |[39m       [36mconst[39m xpTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 538 |[39m         data[33m:[39m {
     [90m 539 |[39m           name[33m:[39m [32m'XP Test Horse'[39m[33m,[39m
     [90m 540 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:537:27)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Training Log Creation ‚Ä∫ CREATES training log entry for successful training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Log Test Horse",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:20:12.734Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 597 |[39m       fiveYearsAgoForLog[33m.[39msetFullYear(fiveYearsAgoForLog[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 598 |[39m
    [31m[1m>[22m[39m[90m 599 |[39m       [36mconst[39m logTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 600 |[39m         data[33m:[39m {
     [90m 601 |[39m           name[33m:[39m [32m'Log Test Horse'[39m[33m,[39m
     [90m 602 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:599:28)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Next Training Date Calculation ‚Ä∫ PROVIDES accurate next training date (7 days from training)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Date Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "cc240229-6610-47e3-b74d-6afc44c5b842"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:20:12.798Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 689 |[39m       fourYearsAgoForDate[33m.[39msetFullYear(fourYearsAgoForDate[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 690 |[39m
    [31m[1m>[22m[39m[90m 691 |[39m       [36mconst[39m dateTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 692 |[39m         data[33m:[39m {
     [90m 693 |[39m           name[33m:[39m [32m'Date Test Horse'[39m[33m,[39m
     [90m 694 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:691:29)

FAIL tests/services/groomRetirementService.test.mjs
  ‚óè Groom Retirement Service ‚Ä∫ Retirement Processing ‚Ä∫ should remove active assignments on retirement

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73669,
        foalId: 147212,
        user: {
        ~~~~
          connect: {
            id: "5272f219-a348-4092-8989-0274876ad5a9"
          }
        },
        priority: 1,
        notes: "Test assignment",
        isActive: true,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 257 |[39m     test([32m'should remove active assignments on retirement'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 258 |[39m       [90m// Create an active assignment[39m
    [31m[1m>[22m[39m[90m 259 |[39m       [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 260 |[39m         data[33m:[39m {
     [90m 261 |[39m           groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 262 |[39m           foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/groomRetirementService.test.mjs:259:7)

FAIL tests/integration/groomWorkflowIntegration.test.mjs
  ‚óè Groom Workflow Integration Tests ‚Ä∫ 1. Complete Groom Hiring Workflow ‚Ä∫ should hire groom with proper skill calculations and validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"experience": 8, "name": "Sarah Johnson", "personality": "gentle", "sessionRate": Any<Object>, "skillLevel": "expert", "speciality": "foal_care", "user": {"connect": {"id": "user-groom-int-1769628014042_rfmsb"}}}, "message": "Successfully hired Sarah Johnson", "success": true}
    Received: {"data": {"availability": {}, "bio": "Experienced foal care specialist", "bonusTraitMap": {}, "careerWeeks": 0, "createdAt": 2026-01-28T19:20:14.121Z, "experience": 8, "groomPersonality": "balanced", "hiredDate": 2026-01-28T19:20:14.121Z, "hiringCost": 750, "id": 73692, "imageUrl": null, "isActive": true, "level": 1, "name": "Sarah Johnson", "personality": "gentle", "rareTraitPerks": {}, "remainingFunds": 4250, "retired": false, "retirementReason": null, "retirementTimestamp": null, "sessionRate": "25", "skillLevel": "expert", "speciality": "foal_care", "updatedAt": 2026-01-28T19:20:14.121Z, "userId": "user-groom-int-1769628014042_rfmsb"}, "message": "Successfully hired Sarah Johnson", "success": true}

    Number of calls: 1

    [0m [90m 242 |[39m
     [90m 243 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 245 |[39m         expect[33m.[39mobjectContaining({
     [90m 246 |[39m           success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 247 |[39m           message[33m:[39m [32m'Successfully hired Sarah Johnson'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/groomWorkflowIntegration.test.mjs:244:24)

FAIL tests/groomProgression.test.mjs
  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for milestone completion

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.917Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31634,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for trait shaping

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.950Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31635,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for show wins

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.972Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31636,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should level up when reaching XP threshold

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:14.992Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31637,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should calculate correct level from experience

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.013Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31638,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should cap level at 10

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.032Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31639,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should create synergy record for new groom-horse pair

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.053Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31640,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should award correct synergy for different actions

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.071Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31641,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should penalize synergy for reassignment

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.088Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31642,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should track sessions together

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.110Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31643,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment start

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.128Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31644,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment completion with performance data

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.146Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31645,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should return comprehensive groom profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.165Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31646,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should include synergy effects in profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:20:15.183Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31647,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

FAIL __tests__/performance/apiResponseOptimization.test.mjs
  ‚óè API Response Optimization System ‚Ä∫ Pagination Service ‚Ä∫ creates offset-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Pagination Service ‚Ä∫ creates cursor-based pagination correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Pagination Service ‚Ä∫ generates optimized Prisma query for cursor pagination

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ optimizes response data correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ selects specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ excludes specific fields correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Serialization Service ‚Ä∫ handles nested field selection

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Cache Service ‚Ä∫ generates consistent ETags for same data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Cache Service ‚Ä∫ generates different ETags for different data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Cache Service ‚Ä∫ determines cacheable requests correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Lazy Loading Service ‚Ä∫ creates lazy loading configuration

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Lazy Loading Service ‚Ä∫ loads related data on demand

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ handles pagination middleware correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ handles field selection via query parameters

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ adds performance headers to responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ handles large response optimization

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Middleware Integration ‚Ä∫ supports debug mode with optimization info

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Performance Metrics ‚Ä∫ tracks performance metrics correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ ETag and Caching ‚Ä∫ generates and validates ETags correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Size Monitoring ‚Ä∫ monitors and warns about large responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

  ‚óè API Response Optimization System ‚Ä∫ Response Size Monitoring ‚Ä∫ handles response size limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OptimizationHorse0",
        userId: "5b5eef3f-8cb1-4af3-b27a-dd61e120a403",
        ~~~~~~
        breed: {
          connect: {
            id: 31648
          }
        },
        sex: "Stallion",
        age: 3,
        dateOfBirth: new Date("2023-01-29T19:20:15.592Z"),
        healthStatus: "Good",
        temperament: "confident",
        epigeneticFlags: [
          "BRAVE",
          "INTELLIGENT"
        ],
        disciplineScores: {
          Racing: 50,
          Dressage: 40
        },
        speed: 50,
        stamina: 50,
        agility: 50,
        intelligence: 50,
        precision: 50,
        balance: 50,
        boldness: 50,
        flexibility: 50,
        obedience: 50,
        focus: 50,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 66 |[39m     [90m// Create test horses for pagination testing[39m
     [90m 67 |[39m     [36mfor[39m ([36mlet[39m i [33m=[39m [35m0[39m[33m;[39m i [33m<[39m [35m25[39m[33m;[39m i[33m++[39m) {
    [31m[1m>[22m[39m[90m 68 |[39m       [36mconst[39m horse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 69 |[39m         data[33m:[39m {
     [90m 70 |[39m           name[33m:[39m [32m`OptimizationHorse${i}`[39m[33m,[39m
     [90m 71 |[39m           userId[33m:[39m testUserId[33m,[39m [90m// Matches schema field (line 144)[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/performance/apiResponseOptimization.test.mjs:68:21)

FAIL tests/unit/breedingAnalyticsService.test.mjs
  ‚óè Breeding Analytics Service ‚Ä∫ Lineage Tracking ‚Ä∫ should track breeding pair lineage

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Lineage Tracking ‚Ä∫ should identify parent-offspring relationships

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Trait Inheritance Analysis ‚Ä∫ should analyze trait inheritance patterns

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Trait Inheritance Analysis ‚Ä∫ should calculate trait inheritance rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Breeding Success Metrics ‚Ä∫ should calculate breeding success rates

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Breeding Success Metrics ‚Ä∫ should track foal development outcomes

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Statistical Analysis ‚Ä∫ should calculate average offspring stats

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Statistical Analysis ‚Ä∫ should compare offspring to parent averages

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Error Handling ‚Ä∫ should handle user with no breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

  ‚óè Breeding Analytics Service ‚Ä∫ Error Handling ‚Ä∫ should handle non-existent user gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.count()` invocation:

    {
      select: {
        _count: {
          select: {
            _all: true
          }
        }
      },
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "6f69774c-7aed-4b82-b96a-f59e1db0f5c6"
          },
    ?     is?: UserWhereInput | Null,
    ?     isNot?: UserWhereInput | Null
        },
        sireId: 147240,
        damId: 147241
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 165 |[39m     }
     [90m 166 |[39m
    [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m foalCount [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcount({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 168 |[39m       where[33m:[39m { user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m sireId[33m:[39m testStallion[33m.[39mid[33m,[39m damId[33m:[39m testMare[33m.[39mid }[33m,[39m
     [90m 169 |[39m     })[33m;[39m
     [90m 170 |[39m     [36mif[39m (foalCount [33m<[39m [35m5[39m) {[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at ensureBreedingData (tests/unit/breedingAnalyticsService.test.mjs:167:23)
      at Object.<anonymous> (tests/unit/breedingAnalyticsService.test.mjs:180:5)

FAIL tests/services/dynamicCompatibilityScoring.test.mjs
  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 380 |[39m       expect(recommendations)[33m.[39mtoBeDefined()[33m;[39m
     [90m 381 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 382 |[39m       expect(recommendations[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 383 |[39m       expect(recommendations[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 384 |[39m       expect(recommendations[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 385 |[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:382:51)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should provide alternative recommendations

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 405 |[39m       [36mconst[39m recommendations [33m=[39m [36mawait[39m getOptimalGroomRecommendations(horse[33m.[39mid[33m,[39m context)[33m;[39m
     [90m 406 |[39m
    [31m[1m>[22m[39m[90m 407 |[39m       expect(recommendations[33m.[39malternativeOptions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                         [31m[1m^[22m[39m
     [90m 408 |[39m       expect(recommendations[33m.[39mcontextualNotes)[33m.[39mtoBeDefined()[33m;[39m
     [90m 409 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mcontextualNotes))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 410 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:407:57)

FAIL tests/schema-validation.test.mjs
  ‚óè Schema Validation ‚Ä∫ should create groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147259,
        groomId: 73720,
        user: {
        ~~~~
          connect: {
            id: "schema-test-user-1769628017706-djhbqt784"
          }
        },
        priority: 1,
        notes: "Test assignment",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isActive?: Boolean,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 180 |[39m     })[33m;[39m
     [90m 181 |[39m
    [31m[1m>[22m[39m[90m 182 |[39m     [36mconst[39m assignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 183 |[39m       data[33m:[39m {
     [90m 184 |[39m         foalId[33m:[39m horse[33m.[39mid[33m,[39m
     [90m 185 |[39m         groomId[33m:[39m groom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/schema-validation.test.mjs:182:24)


Test Suites: 31 failed, 1 skipped, 189 passed, 220 of 221 total
Tests:       257 failed, 30 skipped, 3253 passed, 3540 total
Snapshots:   0 total
Time:        285.132 s
Ran all test suites.
üßπ Running global teardown...
[Teardown] Disconnecting Prisma instances...
[Teardown] ‚úÖ Prisma instances disconnected
‚úÖ Global teardown completed successfully
