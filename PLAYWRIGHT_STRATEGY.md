# Playwright Integration Strategy

## Overview
We strongly recommend adopting **Playwright** for the Equoria Quality Assurance stack. It provides robust End-to-End (E2E) testing capabilities that Jest (our current unit/integration runner) cannot offer, specifically for validating user flows and browser-side logic.

## Why Playwright?
1.  **Visual Regression Testing:** Essential for the `UIUXProductDesigner`. We can take snapshots of the "Breeding Lab" or "Race Interface" and automatically detect pixel-perfect regressions.
2.  **Resilience:** Auto-wait functionality reduces "flaky" tests caused by network latency or animation delays.
3.  **Context Isolation:** Perfect for testing multiplayer scenarios (e.g., two different users bidding on the same horse) by spawning multiple browser contexts in a single test.
4.  **Trace Viewer:** Allows the `QualityAssuranceAgent` to "time travel" through a failed test execution to see exactly what the user saw.

## Agent Integration

### üß™ QualityAssuranceAgent
*   **Responsibility:** Maintains the `tests/e2e/` directory.
*   **Workflow:**
    1.  Receives a "User Journey" from the `UIUXProductDesigner`.
    2.  Writes a Playwright spec to automate that journey.
    3.  Configures CI to run these tests on push.

### üé® UIUXProductDesigner
*   **Responsibility:** Defines "Golden Master" screenshots.
*   **Workflow:**
    1.  Uses Playwright's `page.screenshot()` to capture approved UI states.
    2.  Reviews diffs generated by Playwright during PRs.

### üõ°Ô∏è SecurityArchitect
*   **Responsibility:** Automated Security Scanning.
*   **Workflow:**
    1.  Injects malicious payloads into form inputs via Playwright to test frontend validation resilience.

## Implementation Plan

1.  **Install:**
    ```bash
    npm init playwright@latest
    ```
2.  **Configure:**
    Set up `playwright.config.ts` to use the existing `TEST_DATABASE_URL` (ensuring tests don't wipe production data).
3.  **First Test:**
    Create `tests/e2e/auth.spec.ts` to verify Login/Register flows (Critical Path).
